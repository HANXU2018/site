{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u7ad9\u70b9\u4ecb\u7ecd \u00b6 \u672c\u7ad9\u662f \u609f\u5c18\u7eaa \u7684\u5b50\u7ad9\u70b9\uff0c\u7528\u4e8e\u65b9\u4fbf\u6d4f\u89c8\u535a\u6587\u4e2d\u7684\u7cfb\u5217\u6587\u7ae0\u3002 \u57fa\u4e8e MkDocs \u7684 Material \u4e3b\u9898\u642d\u5efa\uff0c\u901a\u8fc7\u5de6\u4fa7\u7684\u76ee\u5f55\u6811\u53ef\u4ee5\u65b9\u4fbf\u7684\u6d4f\u89c8\u7cfb\u5217\u6587\u7ae0\u3002 \u5173\u4e8e MkDocs \u00b6 MkDocs \u662f\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u9879\u76ee\u6587\u6863\u7684 \u5feb\u901f , \u7b80\u5355 , \u5b8c\u7f8e\u534e\u4e3d \u7684\u9759\u6001\u7ad9\u70b9\u751f\u6210\u5668\u3002\u6587\u6863\u6e90\u7801\u4f7f\u7528 Markdown \u6765\u64b0\u5199, \u7528\u4e00\u4e2a YAML \u6587\u4ef6\u4f5c\u4e3a\u914d\u7f6e\u6587\u6863\u3002 \u5173\u4e8e mkdocs-material \u00b6 mkdocs-material \u662f\u9075\u5faa Google Material UI \u89c4\u8303\u7684 MkDocs \u4e3b\u9898\u3002\u91c7\u7528\u6e10\u8fdb\u5f0f\u589e\u5f3a\u548c\u54cd\u5e94\u5f0f\u8bbe\u8ba1\uff0c\u6839\u636e\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u5c3a\u5bf8\u81ea\u52a8\u7f29\u653e\u9875\u9762\uff0c\u5bf9PC\u3001\u79fb\u52a8\u8bbe\u5907\u90fd\u53cb\u597d\u3002 \u7cfb\u5217\u6587\u7ae0 \u00b6 \u8f6f\u4ef6\u8bbe\u8ba1\u539f\u5219\u53ca\u8bbe\u8ba1\u6a21\u5f0f Docker \u5fc5\u77e5\u5fc5\u4f1a\uff08\u5165\u95e8\u5230\u5b9e\u8df5\uff09 Fabric \u5165\u95e8\u5230\u4f01\u4e1a\u7ea7\u5b9e\u8df5 Node.js \u4ece\u5165\u95e8\u5230\u5b9e\u8df5","title":"\u5b50\u7ad9\u9996\u9875"},{"location":"#_1","text":"\u672c\u7ad9\u662f \u609f\u5c18\u7eaa \u7684\u5b50\u7ad9\u70b9\uff0c\u7528\u4e8e\u65b9\u4fbf\u6d4f\u89c8\u535a\u6587\u4e2d\u7684\u7cfb\u5217\u6587\u7ae0\u3002 \u57fa\u4e8e MkDocs \u7684 Material \u4e3b\u9898\u642d\u5efa\uff0c\u901a\u8fc7\u5de6\u4fa7\u7684\u76ee\u5f55\u6811\u53ef\u4ee5\u65b9\u4fbf\u7684\u6d4f\u89c8\u7cfb\u5217\u6587\u7ae0\u3002","title":"\u7ad9\u70b9\u4ecb\u7ecd"},{"location":"#mkdocs","text":"MkDocs \u662f\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u9879\u76ee\u6587\u6863\u7684 \u5feb\u901f , \u7b80\u5355 , \u5b8c\u7f8e\u534e\u4e3d \u7684\u9759\u6001\u7ad9\u70b9\u751f\u6210\u5668\u3002\u6587\u6863\u6e90\u7801\u4f7f\u7528 Markdown \u6765\u64b0\u5199, \u7528\u4e00\u4e2a YAML \u6587\u4ef6\u4f5c\u4e3a\u914d\u7f6e\u6587\u6863\u3002","title":"\u5173\u4e8e MkDocs"},{"location":"#mkdocs-material","text":"mkdocs-material \u662f\u9075\u5faa Google Material UI \u89c4\u8303\u7684 MkDocs \u4e3b\u9898\u3002\u91c7\u7528\u6e10\u8fdb\u5f0f\u589e\u5f3a\u548c\u54cd\u5e94\u5f0f\u8bbe\u8ba1\uff0c\u6839\u636e\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u5c3a\u5bf8\u81ea\u52a8\u7f29\u653e\u9875\u9762\uff0c\u5bf9PC\u3001\u79fb\u52a8\u8bbe\u5907\u90fd\u53cb\u597d\u3002","title":"\u5173\u4e8e mkdocs-material"},{"location":"#_2","text":"\u8f6f\u4ef6\u8bbe\u8ba1\u539f\u5219\u53ca\u8bbe\u8ba1\u6a21\u5f0f Docker \u5fc5\u77e5\u5fc5\u4f1a\uff08\u5165\u95e8\u5230\u5b9e\u8df5\uff09 Fabric \u5165\u95e8\u5230\u4f01\u4e1a\u7ea7\u5b9e\u8df5 Node.js \u4ece\u5165\u95e8\u5230\u5b9e\u8df5","title":"\u7cfb\u5217\u6587\u7ae0"},{"location":"Design-Patterns/1-DesignPrinciples/","text":"\u4e00\u3001\u524d\u8a00 \u00b6 \u8f6f\u4ef6\u4e5f\u50cf\u4eba\u4e00\u6837\uff0c\u5177\u6709\u751f\u547d\u529b\uff0c\u4ece\u51fa\u751f\u5230\u6b7b\u4ea1\uff0c\u4f1a\u7ecf\u5386\u591a\u79cd\u53d8\u5316\u3002\u8f6f\u4ef6\u67b6\u6784\u8bbe\u8ba1\u4e5f\u4e0d\u662f\u4e00\u8e74\u800c\u5c31\u7684\uff0c\u662f\u4e0d\u65ad\u5730\u6f14\u8fdb\u53d1\u5c55\u3002\u6bcf\u4e2a\u7a0b\u5e8f\u5458\u90fd\u53ef\u4ee5\u4ece\u7406\u89e3\u7f16\u7a0b\u539f\u5219\u548c\u6a21\u5f0f\u4e2d\u53d7\u76ca\u3002 \u8f6f\u4ef6\u8bbe\u8ba1\u539f\u5219\u662f\u4e00\u7ec4\u5e2e\u52a9\u6211\u4eec\u907f\u5f00\u4e0d\u826f\u8bbe\u8ba1\u7684\u6307\u5bfc\u65b9\u9488\u3002\u6839\u636e Robert Martin \u7684\u7406\u8bba\uff0c\u5e94\u8be5\u907f\u514d\u4e0d\u826f\u8bbe\u8ba1\u7684\u4ee5\u4e0b\u4e09\u4e2a\u91cd\u8981\u7279\u70b9\uff1a \u50f5\u5316 \uff1a\u5f88\u96be\u505a\u6539\u52a8\uff0c\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u7ec6\u5fae\u7684\u6539\u52a8\u90fd\u4f1a\u5f71\u54cd\u5230\u7cfb\u7edf\u5927\u91cf\u7684\u5176\u4ed6\u529f\u80fd \u8106\u5f31 \uff1a\u6bcf\u5f53\u4f60\u505a\u4e00\u6b21\u6539\u52a8\uff0c\u603b\u4f1a\u5f15\u8d77\u7cfb\u7edf\u4e2d\u9884\u671f\u4e4b\u5916\u7684\u90e8\u5206\u51fa\u73b0\u6545\u969c \u6b7b\u677f \uff1a\u4ee3\u7801\u5f88\u96be\u5728\u5176\u4ed6\u5e94\u7528\u4e2d\u91cd\u7528\uff0c\u56e0\u5176\u4e0d\u80fd\u4ece\u5f53\u524d\u5e94\u7528\u4e2d\u5355\u72ec\u62bd\u79bb\u51fa\u6765 \u4e0b\u9762\u8fd9\u4e9b\u8f6f\u4ef6\u8bbe\u8ba1\u539f\u5219\u662f\u6211\u4ece\u4e00\u4e9b\u4e66\u7c4d\u548c\u7f51\u7edc\u4e2d\u6536\u96c6\u800c\u6765\uff0c\u5e76\u4e0d\u5b8c\u6574\uff0c\u800c\u4e14\u4f60\u4e5f\u9700\u8981\u5728\u4e00\u4e9b\u6709\u201c\u51b2\u7a81\u7684\u539f\u5219\u201d\u4e4b\u95f4\u8fdb\u884c\u6743\u8861\u548c\u53d6\u820d\u3002\u672c\u6587\u6216\u8bb8\u4f1a\u5bf9\u4f60\u7684\u7f16\u7a0b\u3001\u7a0b\u5e8f\u8bbe\u8ba1\u3001\u8ba8\u8bba\u6216\u8bc4\u5ba1\u5de5\u4f5c\u6709\u6240\u5e2e\u52a9\u3002 \u4e8c\u3001\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u539f\u5219 \u00b6 1. \u5355\u4e00\u804c\u8d23\u539f\u5219\uff08SRP\uff09 \u00b6 \u6240\u8c13 SRP \u539f\u5219\uff0c\u5373\uff1a Single Responsibility Principle \uff0c \u5355\u4e00\u804c\u8d23\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a There should never be more than one reason for a class to change.( \u53ea\u6709\u4e00\u4e2a\u5f15\u8d77\u7c7b\u6539\u53d8\u7684\u539f\u56e0 ) \u5728\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u9886\u57df\u4e2d\uff0c\u5355\u4e00\u804c\u8d23\u539f\u5219\uff08 Single responsibility principle \uff09\u89c4\u5b9a\u6bcf\u4e2a\u7c7b\u90fd\u5e94\u8be5\u6709\u4e00\u4e2a\u5355\u4e00\u7684\u804c\u8d23\u6216\u8005\u53eb\u529f\u80fd\uff0c\u5e76\u4e14\u8be5\u529f\u80fd\u5e94\u8be5\u7531\u8fd9\u4e2a\u7c7b\u5b8c\u5168\u5c01\u88c5\u8d77\u6765\u3002\u6240\u6709\u5b83\u7684\uff08\u8fd9\u4e2a\u7c7b\u7684\uff09\u670d\u52a1\u90fd\u5e94\u8be5\u4e25\u5bc6\u7684\u548c\u8be5\u529f\u80fd\u5e73\u884c\uff08\u529f\u80fd\u5e73\u884c\uff0c\u610f\u5473\u7740\u6ca1\u6709\u4f9d\u8d56\uff09\u3002\u4e00\u4e2a\u7c7b\u6216\u8005\u6a21\u5757\u5e94\u8be5\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u6539\u53d8\u7684\u539f\u56e0\u3002 \u5982\u679c\u4e00\u4e2a\u7c7b\u627f\u62c5\u7684\u804c\u8d23\u8fc7\u591a\uff0c\u5c31\u7b49\u4e8e\u628a\u8fd9\u4e9b\u804c\u8d23\u8026\u5408\u5728\u4e00\u8d77\u4e86\u3002\u4e00\u4e2a\u804c\u8d23\u7684\u53d8\u5316\u53ef\u80fd\u4f1a\u524a\u5f31\u6216\u8005\u6291\u5236\u8fd9\u4e2a\u7c7b\u5b8c\u6210\u5176\u4ed6\u804c\u8d23\u7684\u80fd\u529b\u3002\u8fd9\u79cd\u8026\u5408\u4f1a\u5bfc\u81f4\u8106\u5f31\u7684\u8bbe\u8ba1\uff0c\u5f53\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u8bbe\u8ba1\u4f1a\u906d\u53d7\u5230\u610f\u60f3\u4e0d\u5230\u7684\u7834\u574f\u3002\u800c\u5982\u679c\u60f3\u8981\u907f\u514d\u8fd9\u79cd\u73b0\u8c61\u7684\u53d1\u751f\uff0c\u5c31\u8981\u5c3d\u53ef\u80fd\u7684\u9075\u5b88\u5355\u4e00\u804c\u8d23\u539f\u5219\u3002\u6b64\u539f\u5219\u7684\u6838\u5fc3\u5c31\u662f \u89e3\u8026 \u548c \u589e\u5f3a\u5185\u805a\u6027 \u3002 \u5355\u4e00\u804c\u8d23\u7684\u597d\u5904 \u7c7b\u7684\u590d\u6742\u6027\u964d\u4f4e\uff0c\u5b9e\u73b0\u4ec0\u4e48\u804c\u8d23\u90fd\u6709\u6e05\u6670\u660e\u786e\u7684\u5b9a\u4e49; \u53ef\u8bfb\u6027\u63d0\u9ad8\uff0c\u590d\u6742\u6027\u964d\u4f4e\uff0c\u53ef\u7ef4\u62a4\u6027\u63d0\u9ad8; \u53d8\u66f4\u5f15\u8d77\u7684\u98ce\u9669\u964d\u4f4e\u3002 \u5355\u4e00\u804c\u8d23\u539f\u5219\u7684\u6ce8\u610f\u70b9 \u5355\u4e00\u804c\u8d23\u6700\u96be\u5212\u5206\u7684\u662f \u804c\u8d23 \u3002 \u5355\u4e00\u804c\u8d23\u539f\u5219\u63d0\u51fa\u6807\u51c6\uff1a\u7528\u804c\u8d23\u548c\u53d8\u5316\u539f\u56e0\u6765\u8861\u91cf\u63a5\u53e3\u6216\u7c7b\u8bbe\u8ba1\u7684\u662f\u5426\u4f18\u826f\uff0c\u4f46\u662f\u804c\u8d23\u548c\u53d8\u5316\u539f\u56e0\u90fd\u662f\u4e0d\u53ef\u5ea6\u91cf\u7684\uff0c\u56e0\u9879\u76ee\u3001\u73af\u5883\u800c\u5f02\u3002 \u63a5\u53e3\u4e00\u5b9a\u8981\u505a\u5230\u5355\u4e00\u804c\u8d23\uff0c\u7c7b\u7684\u8bbe\u8ba1\u5c3d\u91cf\u505a\u5230\u53ea\u6709\u4e00\u4e2a\u539f\u56e0\u5f15\u8d77\u5b83\u53d8\u5316\u3002 2. \u91cc\u6c0f\u66ff\u6362\u539f\u5219\uff08LSP\uff09 \u00b6 \u6240\u8c13 LSP \u539f\u5219\uff0c\u5373\uff1a Liskov Substitution principle \uff0c \u91cc\u6c0f\u66ff\u6362\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a Functions that use pointers of references to base classes must be able to use objects of derived classes without knowing it.\uff08 \u6240\u6709\u5f15\u7528\u57fa\u7c7b\u7684\u5730\u65b9\u5fc5\u987b\u80fd\u900f\u660e\u5730\u4f7f\u7528\u5176\u5b50\u7c7b\u7684\u5bf9\u8c61 \uff09 \u66f4\u901a\u4fd7\u7684\u5b9a\u4e49\u5373\u4e3a\uff1a \u5b50\u7c7b\u53ef\u4ee5\u6269\u5c55\u7236\u7c7b\u7684\u529f\u80fd\uff0c\u4f46\u4e0d\u80fd\u6539\u53d8\u7236\u7c7b\u539f\u6709\u7684\u529f\u80fd \u3002\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u5305\u542b\u4e86\u4e00\u4e0b 4 \u5c42\u542b\u4e49\uff1a \u5b50\u7c7b\u5fc5\u987b\u5b8c\u5168\u5b9e\u73b0\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\u5728\u7c7b\u4e2d\u8c03\u7528\u5176\u4ed6\u7c7b\u662f\u52a1\u5fc5\u8981\u4f7f\u7528\u7236\u7c7b\u6216\u63a5\u53e3\uff0c\u5982\u679c\u4e0d\u80fd\u4f7f\u7528\u7236\u7c7b\u6216\u63a5\u53e3\uff0c\u5219\u8bf4\u660e\u7c7b\u7684\u8bbe\u8ba1\u5df2\u7ecf\u8fdd\u80cc\u4e86 LSP \u539f\u5219\u3002 \u5b50\u7c7b\u53ef\u4ee5\u6709\u81ea\u5df1\u7684\u4e2a\u6027\u3002\u5b50\u7c7b\u5f53\u7136\u53ef\u4ee5\u6709\u81ea\u5df1\u7684\u884c\u4e3a\u548c\u5916\u89c2\u4e86\uff0c\u4e5f\u5c31\u662f\u65b9\u6cd5\u548c\u5c5e\u6027\u3002 \u8986\u76d6\u6216\u5b9e\u73b0\u7236\u7c7b\u7684\u65b9\u6cd5\u65f6\u8f93\u5165\u53c2\u6570\u53ef\u4ee5\u88ab\u653e\u5927\u3002\u5373\u5b50\u7c7b\u53ef\u4ee5\u8986\u76d6\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u4f46\u8f93\u5165\u53c2\u6570\u5e94\u6bd4\u7236\u7c7b\u65b9\u6cd5\u4e2d\u7684\u5927\uff0c\u8fd9\u6837\u5728\u5b50\u7c7b\u4ee3\u66ff\u7236\u7c7b\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u4ecd\u7136\u662f\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\u5373\u4ee5\u5b50\u7c7b\u4e2d\u65b9\u6cd5\u7684\u524d\u7f6e\u6761\u4ef6\u5fc5\u987b\u4e0e\u8d85\u7c7b\u4e2d\u88ab\u8986\u76d6\u7684\u65b9\u6cd5\u7684\u524d\u7f6e\u6761\u4ef6\u76f8\u540c\u6216\u8005\u66f4\u5bbd\u677e\u3002 \u8986\u76d6\u6216\u5b9e\u73b0\u7236\u7c7b\u7684\u65b9\u6cd5\u65f6\u8f93\u51fa\u7ed3\u679c\u53ef\u4ee5\u88ab\u7f29\u5c0f\u3002 \u4f18\u70b9 \u63d0\u9ad8\u4ee3\u7801\u7684\u91cd\u7528\u6027\uff0c\u5b50\u7c7b\u62e5\u6709\u7236\u7c7b\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\uff1b \u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u6269\u5c55\u6027\uff0c\u5b50\u7c7b\u53ef\u5f62\u4f3c\u4e8e\u7236\u7c7b\uff0c\u4f46\u5f02\u4e8e\u7236\u7c7b\uff0c\u4fdd\u7559\u81ea\u6211\u7684\u7279\u6027\uff1b \u7f3a\u70b9 \u7ee7\u627f\u662f\u4fb5\u5165\u6027\u7684\uff0c\u53ea\u8981\u7ee7\u627f\u5c31\u5fc5\u987b\u62e5\u6709\u7236\u7c7b\u7684\u6240\u6709\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u7ea6\u675f\u4e86\u5b50\u7c7b\uff0c\u964d\u4f4e\u4e86\u4ee3\u7801\u7684\u7075\u6d3b\u6027\uff1b \u589e\u52a0\u4e86\u8026\u5408\uff0c\u5f53\u7236\u7c7b\u7684\u5e38\u91cf\u3001\u53d8\u91cf\u6216\u8005\u65b9\u6cd5\u88ab\u4fee\u6539\u4e86\uff0c\u9700\u8981\u8003\u8651\u5b50\u7c7b\u7684\u4fee\u6539\uff0c\u6240\u4ee5\u4e00\u65e6\u7236\u7c7b\u6709\u4e86\u53d8\u52a8\uff0c\u5f88\u53ef\u80fd\u4f1a\u9020\u6210\u975e\u5e38\u7cdf\u7cd5\u7684\u7ed3\u679c\uff0c\u8981\u91cd\u6784\u5927\u91cf\u7684\u4ee3\u7801\u3002 3. \u63a5\u53e3\u9694\u79bb\u539f\u5219\uff08ISP\uff09 \u00b6 \u6240\u8c13 ISP \u539f\u5219\uff0c\u5373\uff1a Interface Segregation Principle \uff0c \u63a5\u53e3\u9694\u79bb\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a Clients should not be forced to depend upon interfaces that they do not use.(\u5ba2\u6237\u7aef\u53ea\u4f9d\u8d56\u4e8e\u5b83\u6240\u9700\u8981\u7684\u63a5\u53e3\uff1b\u5b83\u9700\u8981\u4ec0\u4e48\u63a5\u53e3\u5c31\u63d0\u4f9b\u4ec0\u4e48\u63a5\u53e3\uff0c\u628a\u4e0d\u9700\u8981\u7684\u63a5\u53e3\u5254\u9664\u6389\u3002) The dependency of one class to another one should depend on the smallest possible interface.(\u7c7b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u5e94\u5efa\u7acb\u5728\u6700\u5c0f\u7684\u63a5\u53e3\u4e0a\u3002) \u5373\uff0c \u63a5\u53e3\u5c3d\u91cf\u7ec6\u5316\uff0c\u63a5\u53e3\u4e2d\u7684\u65b9\u6cd5\u5c3d\u91cf\u5c11 \u3002\u63a5\u53e3\u9694\u79bb\u539f\u5219\u4e0e\u5355\u4e00\u804c\u8d23\u539f\u5219\u7684\u5ba1\u89c6\u89d2\u5ea6\u662f\u4e0d\u540c\u7684\uff0c\u5355\u4e00\u804c\u8d23\u539f\u5219\u8981\u6c42\u7684\u662f\u7c7b\u548c\u63a5\u53e3\u804c\u8d23\u5355\u4e00\uff0c\u6ce8\u91cd\u7684\u662f\u804c\u8d23\uff0c\u8fd9\u662f\u4e1a\u52a1\u903b\u8f91\u4e0a\u7684\u5212\u5206\uff0c\u800c\u63a5\u53e3\u9694\u79bb\u539f\u5219\u8981\u6c42\u63a5\u53e3\u7684\u65b9\u6cd5\u5c3d\u91cf\u5c11\u3002\u6839\u636e\u63a5\u53e3\u9694\u79bb\u539f\u5219\u62c6\u5206\u63a5\u53e3\u65f6\uff0c\u9996\u5148\u5fc5\u987b\u6ee1\u8db3\u5355\u4e00\u804c\u8d23\u539f\u5219\u3002 \u91c7\u7528\u63a5\u53e3\u9694\u79bb\u539f\u5219\u5bf9\u63a5\u53e3\u8fdb\u884c\u7ea6\u675f\u65f6\uff0c\u8981\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a \u63a5\u53e3\u5c3d\u91cf\u5c0f\uff0c\u4f46\u662f\u8981\u6709\u9650\u5ea6\u3002\u5bf9\u63a5\u53e3\u8fdb\u884c\u7ec6\u5316\u53ef\u4ee5\u63d0\u9ad8\u7a0b\u5e8f\u8bbe\u8ba1\u7075\u6d3b\u6027\u662f\u4e0d\u6323\u7684\u4e8b\u5b9e\uff0c\u4f46\u662f\u5982\u679c\u8fc7\u5c0f\uff0c\u5219\u4f1a\u9020\u6210\u63a5\u53e3\u6570\u91cf\u8fc7\u591a\uff0c\u4f7f\u8bbe\u8ba1\u590d\u6742\u5316\u3002\u6240\u4ee5\u4e00\u5b9a\u8981\u9002\u5ea6\u3002 \u4e3a\u4f9d\u8d56\u63a5\u53e3\u7684\u7c7b\u5b9a\u5236\u670d\u52a1\uff0c\u53ea\u66b4\u9732\u7ed9\u8c03\u7528\u7684\u7c7b\u5b83\u9700\u8981\u7684\u65b9\u6cd5\uff0c\u5b83\u4e0d\u9700\u8981\u7684\u65b9\u6cd5\u5219\u9690\u85cf\u8d77\u6765\u3002\u53ea\u6709\u4e13\u6ce8\u5730\u4e3a\u4e00\u4e2a\u6a21\u5757\u63d0\u4f9b\u5b9a\u5236\u670d\u52a1\uff0c\u624d\u80fd\u5efa\u7acb\u6700\u5c0f\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u63d0\u9ad8\u5185\u805a\uff0c\u51cf\u5c11\u5bf9\u5916\u4ea4\u4e92\u3002\u4f7f\u63a5\u53e3\u7528\u6700\u5c11\u7684\u65b9\u6cd5\u53bb\u5b8c\u6210\u6700\u591a\u7684\u4e8b\u60c5\u3002 \u8fd0\u7528\u63a5\u53e3\u9694\u79bb\u539f\u5219\uff0c\u4e00\u5b9a\u8981\u9002\u5ea6\uff0c\u63a5\u53e3\u8bbe\u8ba1\u7684\u8fc7\u5927\u6216\u8fc7\u5c0f\u90fd\u4e0d\u597d\u3002\u8bbe\u8ba1\u63a5\u53e3\u7684\u65f6\u5019\uff0c\u53ea\u6709\u591a\u82b1\u4e9b\u65f6\u95f4\u53bb\u601d\u8003\u548c\u7b79\u5212\uff0c\u624d\u80fd\u51c6\u786e\u5730\u5b9e\u8df5\u8fd9\u4e00\u539f\u5219\u3002 4. \u5f00\u95ed\u539f\u5219\uff08OCP\uff09 \u00b6 \u6240\u8c13 OCP \u539f\u5219\uff0c\u5373\uff1a Open Closed Principle \uff0c \u5f00\u95ed\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.(\u5bf9\u6269\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed) \u5f00\u95ed\u539f\u5219\uff08 OCP \uff09\u662f\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u4e2d\u201c\u53ef\u590d\u7528\u8bbe\u8ba1\u201d\u7684\u57fa\u77f3\uff0c\u662f\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u4e2d\u6700\u91cd\u8981\u7684\u539f\u5219\u4e4b\u4e00\uff0c\u5176\u5b83\u5f88\u591a\u7684\u8bbe\u8ba1\u539f\u5219\u548c\u8bbe\u8ba1\u6a21\u5f0f\u90fd\u662f\u5b9e\u73b0\u5f00\u95ed\u539f\u5219\u7684\u4e00\u79cd\u624b\u6bb5\u3002\u6838\u5fc3\u5c31\u662f\uff1a \u5bf9\u6269\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed \u3002\u5176\u542b\u4e49\u662f\u8bf4\u4e00\u4e2a\u8f6f\u4ef6\u5e94\u8be5\u901a\u8fc7\u6269\u5c55\u6765\u5b9e\u73b0\u53d8\u5316\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u4fee\u6539\u5df2\u6709\u7684\u4ee3\u7801\u6765\u5b9e\u73b0\u53d8\u5316\u7684\u3002 \u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u5305\u542b\u7684\u5404\u79cd\u7ec4\u4ef6\uff0c\u4f8b\u5982\u6a21\u5757\uff08 Module \uff09\u3001\u7c7b\uff08 Class \uff09\u4ee5\u53ca\u529f\u80fd\uff08 Function \uff09\u7b49\u7b49\uff0c\u5e94\u8be5\u5728\u4e0d\u4fee\u6539\u73b0\u6709\u4ee3\u7801\u7684\u57fa\u7840\u4e0a\uff0c\u5f15\u5165\u65b0\u529f\u80fd\u3002\u5f00\u95ed\u539f\u5219\u4e2d\u201c\u5f00\u201d\uff0c\u662f\u6307\u5bf9\u4e8e\u7ec4\u4ef6\u529f\u80fd\u7684\u6269\u5c55\u662f\u5f00\u653e\u7684\uff0c\u662f\u5141\u8bb8\u5bf9\u5176\u8fdb\u884c\u529f\u80fd\u6269\u5c55\u7684\uff1b\u5f00\u95ed\u539f\u5219\u4e2d\u201c\u95ed\u201d\uff0c\u662f\u6307\u5bf9\u4e8e\u539f\u6709\u4ee3\u7801\u7684\u4fee\u6539\u662f\u5c01\u95ed\u7684\u3002 \u5b9e\u73b0\u5f00\u95ed\u539f\u5219\u7684\u5173\u952e\u5c31\u5728\u4e8e\u201c \u62bd\u8c61 \u201d\u3002\u628a\u7cfb\u7edf\u7684\u6240\u6709\u53ef\u80fd\u7684\u884c\u4e3a\u62bd\u8c61\u6210\u4e00\u4e2a\u62bd\u8c61\u5e95\u5c42\uff0c\u8fd9\u4e2a\u62bd\u8c61\u5e95\u5c42\u89c4\u5b9a\u51fa\u6240\u6709\u7684\u5177\u4f53\u5b9e\u73b0\u5fc5\u987b\u63d0\u4f9b\u7684\u65b9\u6cd5\u7684\u7279\u5f81\u3002\u4f5c\u4e3a\u7cfb\u7edf\u8bbe\u8ba1\u7684\u62bd\u8c61\u5c42\uff0c\u8981\u9884\u89c1\u6240\u6709\u53ef\u80fd\u7684\u6269\u5c55\uff0c\u4ece\u800c\u4f7f\u5f97\u5728\u4efb\u4f55\u6269\u5c55\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u7684\u62bd\u8c61\u5e95\u5c42\u4e0d\u9700\u4fee\u6539\uff1b\u540c\u65f6\uff0c\u7531\u4e8e\u53ef\u4ee5\u4ece\u62bd\u8c61\u5e95\u5c42\u5bfc\u51fa\u4e00\u4e2a\u6216\u591a\u4e2a\u65b0\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u53ef\u4ee5\u6539\u53d8\u7cfb\u7edf\u7684\u884c\u4e3a\uff0c\u56e0\u6b64\u7cfb\u7edf\u8bbe\u8ba1\u5bf9\u6269\u5c55\u662f\u5f00\u653e\u7684\u3002\u5728\u5b9e\u9645\u5f00\u53d1\u8fc7\u7a0b\u7684\u8bbe\u8ba1\u5f00\u59cb\u9636\u6bb5\uff0c\u5c31\u8981\u7f57\u5217\u51fa\u6765\u7cfb\u7edf\u6240\u6709\u53ef\u80fd\u7684\u884c\u4e3a\uff0c\u5e76\u628a\u8fd9\u4e9b\u884c\u4e3a\u52a0\u5165\u5230\u62bd\u8c61\u5e95\u5c42\uff0c\u6839\u672c\u5c31\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u8fd9\u4e48\u53bb\u505a\u4e5f\u662f\u4e0d\u7ecf\u6d4e\u7684\u3002\u56e0\u6b64\u6211\u4eec\u5e94\u8be5\u73b0\u5b9e\u7684\u63a5\u53d7\u4fee\u6539\u62e5\u62b1\u53d8\u5316\uff0c\u4f7f\u6211\u4eec\u7684\u4ee3\u7801\u53ef\u4ee5\u5bf9\u6269\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed\u3002 \u5f00\u95ed\u539f\u5219\u7684\u597d\u5904\uff1a \u53ef\u590d\u7528\u6027\u597d; \u53ef\u7ef4\u62a4\u6027\u597d\u3002 5. \u4f9d\u8d56\u5012\u7f6e\u539f\u5219\uff08DIP\uff09 \u00b6 \u6240\u8c13 DIP \u539f\u5219\uff0c\u5373\uff1a Dependency Inversion Principle \uff0c \u4f9d\u8d56\u5012\u7f6e\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a High-level modules should not depend on low-level modules. Both should depend on abstractions.( \u9ad8\u5c42\u6a21\u5757\u4e0d\u5e94\u8be5\u4f9d\u8d56\u4f4e\u5c42\u6a21\u5757\uff0c\u4e24\u8005\u90fd\u5e94\u8be5\u4f9d\u8d56\u5176\u62bd\u8c61 ) Abstractions should not depend on details. Details should depend on abstractions.( \u62bd\u8c61\u4e0d\u5e94\u8be5\u4f9d\u8d56\u7ec6\u8282\uff1b\u7ec6\u8282\u5e94\u8be5\u4f9d\u8d56\u62bd\u8c61 ) \u9762\u5411\u8fc7\u7a0b\u7684\u5f00\u53d1\uff0c\u4e0a\u5c42\u8c03\u7528\u4e0b\u5c42\uff0c\u4e0a\u5c42\u4f9d\u8d56\u4e8e\u4e0b\u5c42\uff0c\u5f53\u4e0b\u5c42\u5267\u70c8\u53d8\u52a8\u65f6\u4e0a\u5c42\u4e5f\u8981\u8ddf\u7740\u53d8\u52a8\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u6a21\u5757\u7684\u590d\u7528\u6027\u964d\u4f4e\u800c\u4e14\u5927\u5927\u63d0\u9ad8\u4e86\u5f00\u53d1\u7684\u6210\u672c\u3002\u9762\u5411\u5bf9\u8c61\u7684\u5f00\u53d1\u5f88\u597d\u7684\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u62bd\u8c61\u7684\u53d8\u5316\u6982\u7387\u5f88\u5c0f\uff0c\u8ba9\u7528\u6237\u7a0b\u5e8f\u4f9d\u8d56\u4e8e\u62bd\u8c61\uff0c\u5b9e\u73b0\u7684\u7ec6\u8282\u4e5f\u4f9d\u8d56\u4e8e\u62bd\u8c61\u3002\u5373\u4f7f\u5b9e\u73b0\u7ec6\u8282\u4e0d\u65ad\u53d8\u52a8\uff0c\u53ea\u8981\u62bd\u8c61\u4e0d\u53d8\uff0c\u5ba2\u6237\u7a0b\u5e8f\u5c31\u4e0d\u9700\u8981\u53d8\u5316\u3002\u8fd9\u5927\u5927\u964d\u4f4e\u4e86\u5ba2\u6237\u7a0b\u5e8f\u4e0e\u5b9e\u73b0\u7ec6\u8282\u7684\u8026\u5408\u5ea6\u3002 \u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e09\u5c42\u542b\u4e49\uff1a \u9ad8\u5c42\u6a21\u5757\u4e0d\u5e94\u8be5\u4f9d\u8d56\u4f4e\u5c42\u6a21\u5757\uff0c\u4e24\u8005\u90fd\u5e94\u8be5\u4f9d\u8d56\u5176\u62bd\u8c61\uff08\u62bd\u8c61\u7c7b\u6216\u63a5\u53e3\uff09\uff1b \u62bd\u8c61\u4e0d\u5e94\u8be5\u4f9d\u8d56\u7ec6\u8282\uff08\u5177\u4f53\u5b9e\u73b0\uff09\uff1b \u7ec6\u8282\uff08\u5177\u4f53\u5b9e\u73b0\uff09\u5e94\u8be5\u4f9d\u8d56\u62bd\u8c61\u3002 \u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u57fa\u4e8e\u8fd9\u6837\u4e00\u4e2a\u4e8b\u5b9e\uff1a \u76f8\u5bf9\u4e8e\u7ec6\u8282\u7684\u591a\u53d8\u6027\uff0c\u62bd\u8c61\u7684\u4e1c\u897f\u8981\u7a33\u5b9a\u7684\u591a \u3002\u4ee5\u62bd\u8c61\u4e3a\u57fa\u7840\u642d\u5efa\u8d77\u6765\u7684\u67b6\u6784\u6bd4\u4ee5\u7ec6\u8282\u4e3a\u57fa\u7840\u642d\u5efa\u8d77\u6765\u7684\u67b6\u6784\u8981\u7a33\u5b9a\u7684\u591a\u3002\u5728 Java \u4e2d\uff0c\u62bd\u8c61\u6307\u7684\u662f\u63a5\u53e3\u6216\u8005\u62bd\u8c61\u7c7b\uff0c\u7ec6\u8282\u5c31\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u7c7b\uff0c\u4f7f\u7528\u63a5\u53e3\u6216\u8005\u62bd\u8c61\u7c7b\u7684\u76ee\u7684\u662f\u5236\u5b9a\u597d\u89c4\u8303\u548c\u5951\u7ea6\uff0c\u800c\u4e0d\u53bb\u6d89\u53ca\u4efb\u4f55\u5177\u4f53\u7684\u64cd\u4f5c\uff0c\u628a\u5c55\u73b0\u7ec6\u8282\u7684\u4efb\u52a1\u4ea4\u7ed9\u4ed6\u4eec\u7684\u5b9e\u73b0\u7c7b\u53bb\u5b8c\u6210\u3002 \u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u7684\u6838\u5fc3\u601d\u60f3\u5c31\u662f\u9762\u5411\u63a5\u53e3\u7f16\u7a0b \u3002 6. \u8fea\u7c73\u7279\u6cd5\u5219\uff08LOD | LKP\uff09 \u00b6 \u6240\u8c13 LOD \u539f\u5219\uff0c\u5373\uff1a Law of Demeter \uff0c \u8fea\u7c73\u7279\u6cd5\u5219 \uff0c\u53c8\u53eb \u6700\u5c11\u77e5\u8bc6\u539f\u5219 \uff08 Least Knowledge Principle \uff0c\u7b80\u5199 LKP \uff09\uff0c\u5c31\u662f\u8bf4\u4e00\u4e2a\u5bf9\u8c61\u5e94\u5f53\u5bf9\u5176\u4ed6\u5bf9\u8c61\u6709\u5c3d\u53ef\u80fd\u5c11\u7684\u4e86\u89e3\u3002\u901a\u4fd7\u7684\u8bb2\uff0c\u4e00\u4e2a\u7c7b\u5e94\u8be5\u5bf9\u81ea\u5df1\u9700\u8981\u8026\u5408\u6216\u8c03\u7528\u7684\u7c7b\u77e5\u9053\u5f97\u6700\u5c11\uff0c\u88ab\u8026\u5408\u7684\u7c7b\u662f\u5982\u4f55\u7684\u590d\u6742\u90fd\u548c\u6211\u6ca1\u5173\u7cfb\uff0c\u5373\u4e3a\u201c\u4e0d\u548c\u964c\u751f\u4eba\u8bf4\u8bdd\u201d\u3002\u8fea\u7c73\u7279\u6cd5\u5219\u7684\u82f1\u6587\u89e3\u91ca\u5982\u4e0b\uff1a talk only to your immediate friends.( \u53ea\u4e0e\u76f4\u63a5\u7684\u670b\u53cb\u901a\u4fe1 ) \u8fea\u7c73\u7279\u6cd5\u5219\u7684\u521d\u8877\u5728\u4e8e\u964d\u4f4e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408 \u3002\u7531\u4e8e\u6bcf\u4e2a\u7c7b\u5c3d\u91cf\u51cf\u5c11\u5bf9\u5176\u4ed6\u7c7b\u7684\u4f9d\u8d56\uff0c\u56e0\u6b64\uff0c\u5f88\u5bb9\u6613\u4f7f\u5f97\u7cfb\u7edf\u7684\u529f\u80fd\u6a21\u5757\u529f\u80fd\u72ec\u7acb\uff0c\u76f8\u4e92\u4e4b\u95f4\u4e0d\u5b58\u5728\uff08\u6216\u5f88\u5c11\u6709\uff09\u4f9d\u8d56\u5173\u7cfb\u3002 \u8fea\u7c73\u7279\u6cd5\u5219\u4e0d\u5e0c\u671b\u7c7b\u4e4b\u95f4\u5efa\u7acb\u76f4\u63a5\u7684\u8054\u7cfb\u3002\u5982\u679c\u771f\u7684\u6709\u9700\u8981\u5efa\u7acb\u8054\u7cfb\uff0c\u4e5f\u5e0c\u671b\u80fd\u901a\u8fc7\u5b83\u7684\u201c\u670b\u53cb\u201d\u7c7b\u6765\u8f6c\u8fbe\u3002\u56e0\u6b64\uff0c\u5e94\u7528\u8fea\u7c73\u7279\u6cd5\u5219\u6709\u53ef\u80fd\u9020\u6210\u7684\u4e00\u4e2a\u540e\u679c\u5c31\u662f\uff1a\u7cfb\u7edf\u4e2d\u5b58\u5728\u5927\u91cf\u7684\u4e2d\u4ecb\u7c7b\uff0c\u8fd9\u4e9b\u7c7b\u4e4b\u6240\u4ee5\u5b58\u5728\u5b8c\u5168\u662f\u4e3a\u4e86\u4f20\u9012\u7c7b\u4e4b\u95f4\u7684\u76f8\u4e92\u8c03\u7528\u5173\u7cfb\u2014\u2014\u8fd9\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6,\u540c\u65f6\u4e5f\u4e3a\u7cfb\u7edf\u7684\u7ef4\u62a4\u5e26\u6765\u4e86\u96be\u5ea6\u3002\u6240\u4ee5\uff0c\u5728\u91c7\u7528\u8fea\u7c73\u7279\u6cd5\u5219\u65f6\u9700\u8981\u53cd\u590d\u6743\u8861\uff0c\u4e0d\u9075\u5faa\u4e0d\u5bf9\uff0c\u4e25\u683c\u6267\u884c\u53c8\u4f1a\u201c\u8fc7\u72b9\u4e0d\u53ca\u201d\u3002\u65e2\u8981\u505a\u5230\u8ba9\u7ed3\u6784\u6e05\u6670\uff0c\u53c8\u8981\u505a\u5230\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u3002 7. \u7ec4\u5408\u590d\u7528\u539f\u5219\uff08CRP\uff09 \u00b6 \u6240\u8c13 CRP \u539f\u5219\uff0c\u5373\uff1a Composite Reuse Principle \uff0c \u7ec4\u5408\u590d\u7528\u539f\u5219 \u3002 \u7ec4\u5408\u590d\u7528\u539f\u5219\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a \u5c3d\u91cf\u4f7f\u7528\u5bf9\u8c61\u7ec4\u5408\uff0c\u800c\u4e0d\u662f\u7ee7\u627f\u6765\u8fbe\u5230\u590d\u7528\u7684\u76ee\u7684 \u3002\u8be5\u539f\u5219\u5c31\u662f\u5728\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u91cc\u9762\u4f7f\u7528\u4e00\u4e9b\u5df2\u6709\u7684\u5bf9\u8c61\uff0c\u4f7f\u4e4b\u6210\u4e3a\u65b0\u5bf9\u8c61\u7684\u4e00\u90e8\u5206\uff1a\u65b0\u7684\u5bf9\u8c61\u901a\u8fc7\u5411\u8fd9\u4e9b\u5bf9\u8c61\u7684\u59d4\u6d3e\u8fbe\u5230\u590d\u7528\u5df2\u6709\u529f\u80fd\u7684\u76ee\u7684\u3002 \u7ee7\u627f\u7684\u7f3a\u70b9\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u70b9\uff1a \u7ee7\u627f\u590d\u7528\u7834\u574f\u6570\u636e\u5c01\u88c5\u6027\uff0c\u5c06\u57fa\u7c7b\u7684\u5b9e\u73b0\u7ec6\u8282\u5168\u90e8\u66b4\u9732\u7ed9\u4e86\u6d3e\u751f\u7c7b\uff0c\u57fa\u7c7b\u7684\u5185\u90e8\u7ec6\u8282\u5e38\u5e38\u5bf9\u6d3e\u751f\u7c7b\u662f\u900f\u660e\u7684\uff0c\u767d\u7bb1\u590d\u7528\u3002\u867d\u7136\u7b80\u5355\uff0c\u4f46\u4e0d\u5b89\u5168\uff0c\u4e0d\u80fd\u5728\u7a0b\u5e8f\u7684\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u968f\u4fbf\u6539\u53d8\u3002 \u57fa\u7c7b\u7684\u5b9e\u73b0\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u6d3e\u751f\u7c7b\u7684\u5b9e\u73b0\u4e5f\u4e0d\u5f97\u4e0d\u6539\u53d8\u3002 \u4ece\u57fa\u7c7b\u7ee7\u627f\u800c\u6765\u7684\u6d3e\u751f\u7c7b\u662f\u9759\u6001\u7684\uff0c\u4e0d\u53ef\u80fd\u5728\u8fd0\u884c\u65f6\u95f4\u5185\u53d1\u751f\u6539\u53d8\uff0c\u56e0\u6b64\u6ca1\u6709\u8db3\u591f\u7684\u7075\u6d3b\u6027\u3002 \u7531\u4e8e\u7ec4\u5408\u53ef\u4ee5\u5c06\u5df2\u6709\u7684\u5bf9\u8c61\u7eb3\u5165\u5230\u65b0\u5bf9\u8c61\u4e2d\uff0c\u4f7f\u4e4b\u6210\u4e3a\u65b0\u5bf9\u8c61\u7684\u4e00\u90e8\u5206\uff0c\u56e0\u6b64\u65b0\u5bf9\u8c61\u53ef\u4ee5\u8c03\u7528\u5df2\u6709\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u8fd9\u6837\u505a\u6709\u4e0b\u9762\u7684\u597d\u5904\uff1a \u65b0\u5bf9\u8c61\u5b58\u53d6 \u7ec4\u6210\u5bf9\u8c61 \u7684\u552f\u4e00\u65b9\u6cd5\u662f\u901a\u8fc7 \u7ec4\u6210\u5bf9\u8c61 \u7684 getter/setter \u65b9\u6cd5\u3002 \u7ec4\u5408\u590d\u7528\u662f\u9ed1\u7bb1\u590d\u7528\uff0c\u56e0\u4e3a\u7ec4\u6210\u5bf9\u8c61\u7684\u5185\u90e8\u7ec6\u8282\u662f\u65b0\u5bf9\u8c61\u6240\u770b\u4e0d\u89c1\u7684\u3002 \u7ec4\u5408\u590d\u7528\u6240\u9700\u8981\u7684\u4f9d\u8d56\u8f83\u5c11\u3002 \u6bcf\u4e00\u4e2a\u65b0\u7684\u7c7b\u53ef\u4ee5\u5c06\u7126\u70b9\u96c6\u4e2d\u5230\u4e00\u4e2a\u4efb\u52a1\u4e0a\u3002 \u7ec4\u5408\u590d\u7528\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u95f4\u52a8\u6001\u8fdb\u884c\uff0c\u65b0\u5bf9\u8c61\u53ef\u4ee5\u52a8\u6001\u7684\u5f15\u7528\u4e0e\u6210\u5206\u5bf9\u8c61\u7c7b\u578b\u76f8\u540c\u7684\u5bf9\u8c61\u3002 \u7ec4\u5408\u590d\u7528\u7684\u7f3a\u70b9\uff1a\u5c31\u662f\u7528\u7ec4\u5408\u590d\u7528\u5efa\u9020\u7684\u7cfb\u7edf\u4f1a\u6709\u8f83\u591a\u7684\u5bf9\u8c61\u9700\u8981\u7ba1\u7406\u3002 \u7ec4\u5408\u590d\u7528\u539f\u5219\u53ef\u4ee5\u4f7f\u7cfb\u7edf\u66f4\u52a0\u7075\u6d3b\uff0c\u7c7b\u4e0e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\u964d\u4f4e\uff0c\u4e00\u4e2a\u7c7b\u7684\u53d8\u5316\u5bf9\u5176\u4ed6\u7c7b\u9020\u6210\u7684\u5f71\u54cd\u76f8\u5bf9\u8f83\u5c11\uff0c\u56e0\u6b64\u4e00\u822c\u9996\u9009\u4f7f\u7528\u7ec4\u5408\u6765\u5b9e\u73b0\u590d\u7528\uff1b\u5176\u6b21\u624d\u8003\u8651\u7ee7\u627f\u3002\u5728\u4f7f\u7528\u7ee7\u627f\u65f6\uff0c\u9700\u8981\u4e25\u683c\u9075\u5faa\u91cc\u6c0f\u4ee3\u6362\u539f\u5219\uff0c\u6709\u6548\u4f7f\u7528\u7ee7\u627f\u4f1a\u6709\u52a9\u4e8e\u5bf9\u95ee\u9898\u7684\u7406\u89e3\uff0c\u964d\u4f4e\u590d\u6742\u5ea6\uff0c\u800c\u6ee5\u7528\u7ee7\u627f\u53cd\u800c\u4f1a\u589e\u52a0\u7cfb\u7edf\u6784\u5efa\u548c\u7ef4\u62a4\u7684\u96be\u5ea6\u4ee5\u53ca\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\uff0c\u56e0\u6b64\u9700\u8981\u614e\u91cd\u4f7f\u7528\u7ee7\u627f\u590d\u7528\u3002 \u4f7f\u7528\u7ee7\u627f\u65f6\u5fc5\u987b\u6ee1\u8db3 Is-A \u7684\u5173\u7cfb\u662f\u624d\u80fd\u4f7f\u7528\u7ee7\u627f\uff0c\u800c\u7ec4\u5408\u5374\u662f\u4e00\u79cd Has-A \u7684\u5173\u7cfb\u3002\u5bfc\u81f4\u9519\u8bef\u7684\u4f7f\u7528\u7ee7\u627f\u800c\u4e0d\u662f\u4f7f\u7528\u7ec4\u5408\u7684\u4e00\u4e2a\u91cd\u8981\u539f\u56e0\u53ef\u80fd\u5c31\u662f\u9519\u8bef\u7684\u628a Has-A \u5f53\u6210\u4e86 Is-A \u3002 \u4e09\u3001\u901a\u7528\u8bbe\u8ba1\u539f\u5219 \u00b6 1. \u4fdd\u6301\u7b80\u5355\uff08KISS\uff09 \u00b6 \u6240\u8c13 KISS \u539f\u5219\uff0c\u5373\uff1a Keep It Simple,Stupid \uff0c\u6307 \u8bbe\u8ba1\u65f6\u8981\u575a\u6301\u7b80\u7ea6\u539f\u5219\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u590d\u6742\u5316\uff0c\u5e76\u4e14\u6613\u4e8e\u4fee\u6539 \u3002 Everything should be made as simple as possible, but not simpler. - Albert Einstein \u7b80\u5355\u6e05\u6670\u3001\u529f\u80fd\u5f3a\u5927\u662f\u8f6f\u4ef6\u8bbe\u8ba1\u6700\u91cd\u8981\u7684\u539f\u5219\u548c\u76ee\u6807\u3002\u4f46\u662f\u8f6f\u4ef6\u5de5\u7a0b\u5929\u7136\u9519\u7efc\u590d\u6742\uff0c\u800c\u201c\u7b80\u5355\u201d\u5374\u6ca1\u6709\u4e00\u4e2a\u8861\u91cf\u6807\u51c6\uff0c\u5224\u65ad\u548c\u5b9e\u73b0\u4e00\u4e2a\u4e1c\u897f\u662f\u4e0d\u662f\u7b80\u5355\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u6765\u53c2\u8003\u3002 \u8ba9\u522b\u7684\u8f6f\u4ef6\u5de5\u7a0b\u5e08\u4ee5\u4e00\u79cd\u6700\u5bb9\u6613\u7684\u65b9\u5f0f\u4f7f\u7528\u4f60\u7684\u65b9\u6848\u3002 \u7b80\u5355\u4e0d\u662f\u8d70\u6377\u5f84\uff0c\u4e0d\u662f\u4e3a\u624b\u8fb9\u7684\u95ee\u9898\u627e\u4e00\u4e2a\u6700\u5feb\u7684\u65b9\u6848\u3002 \u5f53\u7cfb\u7edf\u53d8\u5f97\u66f4\u5e9e\u5927\u66f4\u590d\u6742\u7684\u65f6\u5019\u4f9d\u7136\u80fd\u591f\u88ab\u7406\u89e3\u3002 \u5982\u679c\u7cfb\u7edf\u65e0\u6cd5\u4fdd\u6301\u7b80\u5355\uff0c\u90a3\u4e48\u6211\u4eec\u80fd\u505a\u7684\u5c31\u662f\u4fdd\u6301\u5404\u4e2a\u5c40\u90e8\u7b80\u5355\uff0c\u5373\u4efb\u4f55\u5355\u4e2a\u7684\u7c7b\u3001\u6a21\u5757\u3001\u5e94\u7528\u7684\u8bbe\u8ba1\u76ee\u6807\u53ca\u5de5\u4f5c\u539f\u7406\u90fd\u80fd\u88ab\u5feb\u901f\u7406\u89e3\u3002 \u6211\u7684\u7406\u89e3 \uff1a\u4fdd\u6301\u7b80\u5355\u4f46\u4e0d\u80fd\u63a9\u76d6\u8f6f\u4ef6\u4e30\u5bcc\u7684\u5185\u6db5\u3002\u5373 \u7b80\u7ea6\u800c\u4e0d\u7b80\u5355 \uff01\u7b80\u7ea6\u662f\u5bf9\u590d\u6742\u7684\u4e8b\u7269\u62bd\u4e1d\u5265\u8327\u3001\u53bb\u9664\u7ec6\u679d\u672b\u8282\u663e\u9732\u4e3b\u8981\u903b\u8f91\u7684\u8fc7\u7a0b\u3002\u5c31\u50cf\u5c0f\u65f6\u5019\u8001\u5e08\u6559\u5199\u6587\u7ae0\uff0c\u8981\u6c42\u5c3d\u53ef\u80fd\u7528\u6734\u5b9e\u7684\u8bed\u8a00\uff0c\u8a00\u7b80\u610f\u8d45\u7684\u5199\u51fa\u6765\uff0c\u4f46\u5374\u53c8\u8981\u907f\u514d\u8bed\u8a00\u8fc7\u4e8e\u8d2b\u4e4f\u3002\u8f6f\u4ef6\u7684\u201c\u62bd\u8c61\u201d\u548c\u5b83\u7684\u201c\u76f4\u89c2\u6027\u201d\uff0c\u5176\u5b9e\u662f\u4e00\u5bf9\u77db\u76fe\u7684\u5173\u7cfb\uff0c\u8f6f\u4ef6\u8bbe\u8ba1\u5c31\u8981\u4fdd\u8bc1\u8fd9\u4e24\u8005\u7684\u5e73\u8861\u3002\u4ee3\u7801\u62bd\u8c61\u8fc7\u4e8e\u590d\u6742\u4f1a\u9677\u5165\u201c\u8fc7\u5ea6\u8bbe\u8ba1\u201d\u4e0d\u6613\u7406\u89e3\u7684\u56f0\u5883\uff1b\u4e3a\u4e86\u201c\u76f4\u89c2\u6027\u201d\u7f3a\u4e4f\u62bd\u8c61\uff0c\u957f\u6b64\u4ee5\u5f80\u53c8\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u91cd\u590d\u3001\u4e0d\u6613\u4e8e\u6269\u5c55\u548c\u96be\u7ef4\u62a4\u7684\u56f0\u5883\u3002 2. \u4e0d\u8981\u91cd\u590d\uff08 DRY\uff09 \u00b6 \u6240\u8c13 DRY \u539f\u5219\uff0c\u5373\uff1a Don't Repeat Yourself \uff0c \u4e0d\u8981\u8ba9\u81ea\u5df1\u91cd\u590d \u3002 \u91cd\u590d\u4ee3\u7801\u662f\u8f6f\u4ef6\u7a0b\u5e8f\u53d8\u70c2\u7684\u4e07\u6076\u4e4b\u9996 \u3002 DRY \u5e76\u4e0d\u662f\u6307\u4f60\u4e0d\u80fd\u590d\u5236\u4ee3\u7801\uff0c\u800c\u662f\u4f60\u590d\u5236\u7684\u4ee3\u7801\u4e0d\u80fd\u5305\u542b\u91cd\u590d\u7684\u201c\u4fe1\u606f\u201d\u3002\u590d\u5236\u7684\u4e1c\u897f\u5e76\u4e0d\u4ec5\u4ec5\u662f\u590d\u5236\u4e86\u4ee3\u7801\uff0c\u800c\u662f\u7531\u4e8e\u4f60\u628a\u540c\u4e00\u4e2a\u4fe1\u606f\u6563\u64ad\u5728\u4e86\u4ee3\u7801\u7684\u5404\u4e2a\u90e8\u5206\u5bfc\u81f4\u4e86\u6709\u5f88\u591a\u76f8\u8fd1\u7684\u4ee3\u7801\u4e5f\u6563\u64ad\u5728\u5404\u4e2a\u5730\u65b9\u3002\u4ee3\u7801\u4e4b\u6240\u4ee5\u8981\u5199\u7684\u597d\uff0c\u4e0d\u8981\u91cd\u590d\u67d0\u4e9b\u201c\u4fe1\u606f\u201d\uff0c\u56e0\u4e3a\u9700\u6c42\u4eba\u5458\u603b\u662f\u8981\u6539\u9700\u6c42\uff0c\u4e0d\u6539\u4ee3\u7801\u4f60\u5c31\u8981\u201c\u6b7b\u201d\uff0c\u6539\u4ee3\u7801\u4f60\u5c31\u8981\u52a0\u73ed\uff0c\u6240\u4ee5\u4e3a\u4e86\u51cf\u5c11\u4fee\u6539\u4ee3\u7801\u7684\u75db\u82e6\uff0c\u6211\u4eec\u4e0d\u80fd\u91cd\u590d\u4efb\u4f55\u4fe1\u606f\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6709\u4e00\u5929\u9700\u6c42\u4eba\u5458\u8bf4\uff0c\u8981\u628a\u5206\u9694\u7b26\u4ece\u5206\u53f7\u6539\u6210\u987f\u53f7\uff01\u4e00\u4e0b\u5b50\u5c31\u8981\u6539\u591a\u4e2a\u5730\u65b9\u4e86\u3002 \u6240\u4ee5\uff0c \u53bb\u6389\u91cd\u590d\u7684\u4fe1\u606f\u4f1a\u8ba9\u4f60\u7684\u4ee3\u7801\u7ed3\u6784\u53d1\u751f\u672c\u8d28\u7684\u53d8\u5316 \u3002 \u201c\u91cd\u590d\u4ee3\u7801\u201d\u6709\u5f88\u591a\u53d8\u4f53\uff1a \u9b54\u6cd5\u6570\u5b57\u3001\u9b54\u6cd5\u5b57\u7b26\u4e32\u7b49 \u76f8\u540c\u4ee3\u7801\u5757 \u76f8\u4f3c\u7684\u4ee3\u7801\u903b\u8f91\u53ca\u64cd\u4f5c \u5bf9\u4e8e\u6d88\u9664\u91cd\u590d\u7684\u4ee3\u7801\u6709 \u4e8b\u4e0d\u8fc7\u4e09 \u6cd5\u5219\u3002 \u7b2c\u4e00\u6b21\u5148\u5199\u4e86\u4e00\u6bb5\u4ee3\u7801\u3002 \u7b2c\u4e8c\u6b21\u5728\u53e6\u4e00\u4e2a\u5730\u65b9\u5199\u4e86\u4e00\u6bb5\u76f8\u540c\u6216\u76f8\u4f3c\u903b\u8f91\u7684\u4ee3\u7801\uff0c\u4f60\u5df2\u7ecf\u6709\u6d88\u9664\u548c\u63d0\u53d6\u91cd\u590d\u4ee3\u7801\u7684\u51b2\u52a8\u4e86\u3002 \u518d\u6b21\u5728\u53e6\u4e00\u4e2a\u5730\u65b9\u5199\u4e86\u540c\u6837\u7684\u4ee3\u7801\uff0c\u4f60\u5df2\u5fcd\u65e0\u53ef\u5fcd\uff0c\u73b0\u5728\u53ef\u4ee5\u8003\u8651\u62bd\u53d6\u548c\u6d88\u9664\u91cd\u590d\u4ee3\u7801\u4e86\u3002 \u6211\u7684\u7406\u89e3 \uff1a\u89e3\u51b3\u91cd\u590d\u7684\u6700\u4f73\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u57f9\u517b\u826f\u597d\u7684\u7f16\u7801\u4e60\u60ef\u6765\u907f\u514d\u91cd\u590d\uff0c\u901a\u8fc7\u91cd\u6784\u7684\u624b\u6bb5\u6765\u6d88\u9664\u91cd\u590d\u3002\u53d1\u73b0\u548c\u89e3\u51b3\u91cd\u590d\u5e76\u4e0d\u56f0\u96be\uff0c\u901a\u8fc7\u63d0\u53d6\u62bd\u8c61\u3001\u63d0\u53d6\u65b9\u6cd5\u7b49\u63aa\u65bd\u5c31\u80fd\u6d88\u9664\u91cd\u590d\uff0c\u4f46\u56f0\u96be\u7684\u662f \u7acb\u5373\u884c\u52a8 \u53bb\u89e3\u51b3\u91cd\u590d\uff0c\u4ece\u800c\u4e0d\u65ad\u7684\u78e8\u783a\u548c\u63d0\u5347\u81ea\u5df1\u7684\u7f16\u7a0b\u6280\u827a\uff0c\u4e0d\u65ad\u5c06\u79c1\u4eba\u4ee3\u7801\u53d8\u6210\u516c\u5171\u4ee3\u7801\uff0c\u8fd9\u624d\u662f\u81ea\u6211\u63d0\u5347\u7684\u8fc7\u7a0b\u3002\u89e3\u51b3\u4e86\u91cd\u590d\uff0c\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\uff0c\u4f60\u5bf9\u6574\u4e2a\u7cfb\u7edf\u7684\u7406\u89e3\u7a0b\u5ea6\u5728\u4e0d\u77e5\u4e0d\u89c9\u4e2d\u63d0\u9ad8\u4e86\u4e0d\u5c11\u3002 3. \u9ad8\u5185\u805a\u4f4e\u8026\u5408 \u00b6 \u6240\u8c13 Maximize Cohesion,Minimize Coupling \u539f\u5219\uff0c\u5373\uff1a \u9ad8\u5185\u805a\u4f4e\u8026\u5408 \u3002\u8fd9\u662f\u5224\u65ad\u8bbe\u8ba1\u597d\u574f\u7684\u6807\u51c6\uff0c\u4e3b\u8981\u662f\u770b \u6a21\u5757\u5185\u7684\u5185\u805a\u6027\u662f\u5426\u9ad8\uff0c\u6a21\u5757\u95f4\u7684\u8026\u5408\u5ea6\u662f\u5426\u4f4e\u3002 \u8026\u5408\u6027 \uff1a\u4e5f\u79f0\u5757\u95f4\u8054\u7cfb\u3002\u6307\u8f6f\u4ef6\u7cfb\u7edf\u7ed3\u6784\u4e2d\u5404\u6a21\u5757\u95f4\u76f8\u4e92\u8054\u7cfb\u7d27\u5bc6\u7a0b\u5ea6\u7684\u4e00\u79cd\u5ea6\u91cf\u3002\u6a21\u5757\u4e4b\u95f4\u8054\u7cfb\u8d8a\u7d27\u5bc6\uff0c\u5176\u8026\u5408\u6027\u5c31\u8d8a\u5f3a\uff0c\u6a21\u5757\u7684\u72ec\u7acb\u6027\u5219\u8d8a\u5dee\u3002\u6a21\u5757\u95f4\u8026\u5408\u9ad8\u4f4e\u53d6\u51b3\u4e8e\u6a21\u5757\u95f4\u63a5\u53e3\u7684\u590d\u6742\u6027\u3001\u8c03\u7528\u7684\u65b9\u5f0f\u53ca\u4f20\u9012\u7684\u4fe1\u606f\u3002\u8026\u5408\u662f\u8f6f\u4ef6\u7ed3\u6784\u4e2d\u5404\u6a21\u5757\u4e4b\u95f4\u76f8\u4e92\u8fde\u63a5\u7684\u4e00\u79cd\u5ea6\u91cf\uff0c\u8026\u5408\u5f3a\u5f31\u53d6\u51b3\u4e8e\u6a21\u5757\u95f4\u63a5\u53e3\u7684\u590d\u6742\u7a0b\u5ea6\u3001\u8fdb\u5165\u6216\u8bbf\u95ee\u4e00\u4e2a\u6a21\u5757\u7684\u70b9\u4ee5\u53ca\u901a\u8fc7\u63a5\u53e3\u7684\u6570\u636e\u3002 \u5185\u805a\u6027 \uff1a\u53c8\u79f0\u5757\u5185\u8054\u7cfb\u3002\u6307\u6a21\u5757\u7684\u529f\u80fd\u5f3a\u5ea6\u7684\u5ea6\u91cf\uff0c\u5373\u4e00\u4e2a\u6a21\u5757\u5185\u90e8\u5404\u4e2a\u5143\u7d20\u5f7c\u6b64\u7ed3\u5408\u7684\u7d27\u5bc6\u7a0b\u5ea6\u7684\u5ea6\u91cf\u3002\u82e5\u4e00\u4e2a\u6a21\u5757\u5185\u5404\u5143\u7d20\uff08\u8bed\u540d\u4e4b\u95f4\u3001\u7a0b\u5e8f\u6bb5\u4e4b\u95f4\uff09\u8054\u7cfb\u7684\u8d8a\u7d27\u5bc6\uff0c\u5219\u5b83\u7684\u5185\u805a\u6027\u5c31\u8d8a\u9ad8\u3002\u5185\u805a\u662f\u4ece\u529f\u80fd\u89d2\u5ea6\u6765\u5ea6\u91cf\u6a21\u5757\u5185\u7684\u8054\u7cfb\uff0c\u4e00\u4e2a\u597d\u7684\u5185\u805a\u6a21\u5757\u5e94\u5f53\u6070\u597d\u505a\u4e00\u4ef6\u4e8b\u3002\u5b83\u63cf\u8ff0\u7684\u662f\u6a21\u5757\u5185\u7684\u529f\u80fd\u8054\u7cfb\u3002 \u5185\u805a\u548c\u8026\u5408\u662f\u5bc6\u5207\u76f8\u5173\u7684\uff0c\u540c\u5176\u4ed6\u6a21\u5757\u5b58\u5728\u9ad8\u8026\u5408\u7684\u6a21\u5757\u610f\u5473\u7740\u4f4e\u5185\u805a\uff0c\u800c\u9ad8\u5185\u805a\u7684\u6a21\u5757\u610f\u5473\u7740\u8be5\u6a21\u5757\u540c\u5176\u4ed6\u6a21\u5757\u4e4b\u95f4\u662f\u4f4e\u8026\u5408\u3002\u5728\u8fdb\u884c\u8f6f\u4ef6\u8bbe\u8ba1\u65f6\uff0c\u5e94\u529b\u4e89\u505a\u5230\u9ad8\u5185\u805a\uff0c\u4f4e\u8026\u5408\u3002 Java \u4e2d\u5b9e\u73b0\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u7684\u5e38\u7528\u65b9\u5f0f\uff1a \u5c11\u4f7f\u7528\u7c7b\u7684\u7ee7\u627f\uff0c\u591a\u7528\u63a5\u53e3\u9690\u85cf\u5b9e\u73b0\u7684\u7ec6\u8282\u3002 \u6a21\u5757\u7684\u529f\u80fd\u5316\u5206\u5c3d\u53ef\u80fd\u7684\u5355\u4e00\uff0c\u9053\u7406\u4e5f\u5f88\u7b80\u5355\uff0c\u529f\u80fd\u5355\u4e00\u7684\u6a21\u5757\u4f9b\u5176\u5b83\u6a21\u5757\u8c03\u7528\u7684\u673a\u4f1a\u5c31\u5c11\u3002 \u9075\u5faa\u4e00\u4e2a\u5b9a\u4e49\u53ea\u5728\u4e00\u4e2a\u5730\u65b9\u51fa\u73b0\u3002 \u5c11\u4f7f\u7528\u5168\u5c40\u53d8\u91cf\u3002 \u7c7b\u5c5e\u6027\u548c\u65b9\u6cd5\u7684\u58f0\u660e\u5c11\u7528 public \uff0c\u591a\u7528 private \u5173\u952e\u5b57\uff0c \u591a\u7528\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u6bd4\u5982\u91c7\u7528 MVC \u7684\u8bbe\u8ba1\u6a21\u5f0f\u5c31\u53ef\u4ee5\u964d\u4f4e\u754c\u9762\u4e0e\u4e1a\u52a1\u903b\u8f91\u7684\u8026\u5408\u5ea6\u3002 \u5c3d\u91cf\u4e0d\u7528\u201c\u786c\u7f16\u7801\u201d\u7684\u65b9\u5f0f\u5199\u7a0b\u5e8f\u3002 \u6700\u540e\u5f53\u7136\u5c31\u662f\u907f\u514d\u76f4\u63a5\u64cd\u4f5c\u6216\u8c03\u7528\u5176\u5b83\u6a21\u5757\u6216\u7c7b\uff08\u5185\u5bb9\u8026\u5408\uff09\u3002 4. \u5173\u6ce8\u70b9\u5206\u79bb\uff08SOC\uff09 \u00b6 \u6240\u8c13 SOC \u539f\u5219\uff0c\u5373\uff1a \u5173\u6ce8\u70b9\u5206\u79bb \uff08 Separation of Concerns \uff09\u3002 \u4e0d\u540c\u9886\u57df\u7684\u529f\u80fd\uff0c\u5e94\u8be5\u7531\u4e0d\u540c\u7684\u4ee3\u7801\u548c\u6700\u5c0f\u91cd\u8fed\u7684\u6a21\u5757\u7ec4\u6210\u3002 \u5173\u6ce8\u70b9\u5206\u79bb\u662f\u5904\u7406\u590d\u6742\u6027\u7684\u4e00\u4e2a\u539f\u5219\u3002\u7531\u4e8e\u5173\u6ce8\u70b9\u6df7\u6742\u5728\u4e00\u8d77\u4f1a\u5bfc\u81f4\u8f6f\u4ef6\u7a0b\u5e8f\u590d\u6742\u6027\u5927\u5927\u589e\u52a0\uff0c\u6240\u4ee5\u80fd\u591f\u628a\u4e0d\u540c\u7684\u5173\u6ce8\u70b9\u5206\u79bb\u5f00\u6765\uff0c\u5206\u522b\u5904\u7406\u5c31\u662f\u5904\u7406\u590d\u6742\u6027\u7684\u4e00\u4e2a\u539f\u5219\uff0c\u4e00\u79cd\u65b9\u6cd5\u3002\u5173\u6ce8\u70b9\u5206\u79bb\u539f\u5219\u4e0d\u4ec5\u4f53\u73b0\u5728\u8f6f\u4ef6\u7a0b\u5e8f\u8bbe\u8ba1\u7b49\u8bbe\u8ba1\u65b9\u6cd5\u4e2d\uff0c\u540c\u65f6\u4e5f\u4f53\u73b0\u5728\u67b6\u6784\u8bbe\u8ba1\u3001\u95ee\u9898\u6c42\u89e3\u3001\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u3001\u8f6f\u4ef6\u9879\u76ee\u7ba1\u7406\u4ee5\u53ca\u8f6f\u4ef6\u5f00\u53d1\u65b9\u6cd5\u5b66\u7b49\u8bf8\u591a\u65b9\u9762\u3002 MVC \u5c31\u662f\u5173\u6ce8\u70b9\u5206\u79bb\u7684\u4e00\u4e2a\u4f53\u73b0\uff0c\u628a\u4e1a\u52a1\u903b\u8f91\u3001\u6570\u636e\u3001\u754c\u9762\u5206\u79bb\uff0c\u8fd9\u4e5f\u662f\u7ec4\u7ec7\u4ee3\u7801\u7ed3\u6784\u7684\u4e00\u4e2a\u5f62\u5f0f\u3002 MVC \u7684\u57fa\u672c\u7ed3\u6784\uff1a Model \u5c42\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u7684\u6570\u636e\u6838\u5fc3\uff0c\u901a\u5e38\u8d1f\u8d23\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u53d6\u6570\u636e\u3002 View \u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u663e\u793a\u5c42\uff0c\u901a\u5e38\u662f\u4f9d\u636e\u6a21\u578b\u7684\u6570\u636e\u800c\u5efa\u7acb\u3002 Controller \u662f\u7528\u6765\u63a7\u5236\u548c\u5904\u7406\u8f93\u5165\u8f93\u51fa\u7684\uff0c\u662f\u5904\u7406\u7528\u6237\u4ea4\u4e92\u7684\u90e8\u5206\uff0c\u4e5f\u8d1f\u8d23\u5411\u6a21\u578b\uff08 Model \u5c42\uff09\u53d1\u9001\u6570\u636e\u3002 MVC \u7684\u8fd9\u4e2a\u8bbe\u8ba1\u5404\u4e2a\u5173\u6ce8\u70b9\u662f\u5206\u5f00\u7684\uff0c\u8fd9\u6837\u6709\u52a9\u4e8e\u6211\u4eec\u7ba1\u7406\u548c\u5f00\u53d1\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u53ea\u96c6\u4e2d\u7cbe\u529b\u5728\u5176\u4e2d\u7684\u67d0\u4e00\u4e2a\u5173\u6ce8\u70b9\uff0c\u800c\u4e0d\u662f\u6240\u6709\u7684\u90e8\u5206\u3002 \u597d\u7684\u67b6\u6784\u5fc5\u987b\u4f7f\u6bcf\u4e2a\u5173\u6ce8\u70b9\u76f8\u4e92\u5206\u79bb\uff0c\u4e5f\u5c31\u662f\u8bf4\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u90e8\u5206\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u90e8\u5206\u3002\u5373\u4f7f\u9700\u8981\u6539\u53d8\uff0c\u4e5f\u80fd\u591f\u6e05\u6670\u5730\u8bc6\u522b\u51fa\u90a3\u4e9b\u90e8\u5206\u9700\u8981\u6539\u53d8\u3002\u5982\u679c\u9700\u8981\u6269\u5c55\u67b6\u6784\uff0c\u5f71\u54cd\u5c06\u4f1a\u6700\u5c0f\u5316\uff0c\u5df2\u7ecf\u53ef\u4ee5\u5de5\u4f5c\u7684\u6bcf\u4e2a\u90e8\u5206\u90fd\u5c06\u7ee7\u7eed\u5de5\u4f5c\u3002\u2014\u2014Ivar Jacobson(\u300aAOSD \u4e2d\u6587\u7248\u300b) \u5206\u79bb\u65b9\u5f0f \u4e0b\u9762\u5c06\u4ecb\u7ecd\u4e00\u4e9b\u5206\u5c42\u7684\u601d\u60f3\u548c\u65b9\u5f0f: \u7eb5\u5411\u5206\u79bb : \u5982\u5e38\u89c1\u7684\u4e09\u5c42\u67b6\u6784\uff08\u903b\u8f91\u63a7\u5236\u5c42\u3001\u4e1a\u52a1\u5904\u7406\u5c42\u548c\u6570\u636e\u6301\u4e45\u5316\u5c42\uff09\u3002 \u6a2a\u5411\u5206\u79bb : \u5982\u628a\u6211\u4eec\u7684\u8f6f\u4ef6\u62c6\u5206\u6210\u6a21\u5757\u6216\u5b50\u7cfb\u7edf\u3002\u4ece\u5de6\u5230\u53f3\u662f\u6a21\u5757 1\u3001\u6a21\u5757 2\u3001\u6a21\u5757 3\uff0c\u8fd9\u662f\u4e00\u79cd\u6c34\u5e73\u65b9\u5411\u7684\u5207\u5272\u3002\u8fd9\u8ddf\u7eb5\u5411\u7684\u5206\u79bb\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u65b9\u5411\uff0c\u6a2a\u5411\u5206\u79bb\u5927\u591a\u662f\u6a21\u5757\u5316\u7684\u8fc7\u7a0b\u3002 \u5207\u9762\u5206\u79bb : \u6709\u4e9b\u5185\u5bb9\u662f\u591a\u4e2a\u5c42\u4e4b\u95f4\u90fd\u9700\u8981\u7684\uff0c\u6bd4\u5982\u65e5\u5fd7\uff08 log \uff09\uff0c\u5728\u4f60\u7684\u7cfb\u7edf\u91cc\u9762\uff0c\u754c\u9762\u5c42\u3001\u903b\u8f91\u5c42\u3001\u6570\u636e\u8bbf\u95ee\u5c42\u53ef\u80fd\u90fd\u9700\u8981\u5199\u65e5\u5fd7\uff0c\u8fd9\u79cd\u8de8\u5230\u591a\u5c42\u540c\u6837\u903b\u8f91\u5c31\u53ef\u4ee5\u8003\u8651\u5207\u9762\u5206\u79bb\u3002 \u4f9d\u8d56\u65b9\u5411\u5206\u79bb : \u6309\u4f9d\u8d56\u65b9\u5411\u8003\u8651\uff0c\u51b3\u5b9a\u67d0\u4e2a\u7c7b\u5e94\u8be5\u653e\u5728\u54ea\u4e2a\u5c42\u6b21\u91cc\u9762\uff0c\u6216\u8005\u8003\u8651\u5c06\u67d0\u4e00\u5c42\u5207\u5272\u6210\u591a\u5c42\u3002 \u5173\u6ce8\u6570\u636e\u5206\u79bb : \u5728\u7ec4\u7ec7\u6570\u636e\u65f6\uff0c\u5e94\u8be5\u5c3d\u91cf\u8003\u8651\u6570\u636e\u672c\u8eab\u7684\u56fa\u6709\u5c5e\u6027\uff0c\u5982\u679c\u4e0d\u662f\u5b83\u4eec\u7684\u56fa\u6709\u5c5e\u6027\uff0c\u90a3\u4e48\u5e94\u8be5\u5206\u79bb\u51fa\u6765\u3002\u6bd4\u5982\u4ea7\u54c1\u7684\u7c7b\u5c31\u4e0d\u5e94\u8be5\u5173\u8054 customer \u7c7b\uff0c\u5e94\u8be5\u662f\u7528\u8ba2\u5355\u7c7b\u6765\u628a\u4ed6\u4eec\u8054\u7cfb\u5728\u4e00\u8d77\u3002 \u5173\u6ce8\u884c\u4e3a\u5206\u79bb : \u884c\u4e3a\u4e5f\u5e94\u8be5\u662f\u4e8b\u7269\u6216\u5bf9\u8c61\u7684\u56fa\u6709\u7684\u672c\u8eab\u7684\u884c\u4e3a\uff0c\u660e\u663e\u504f\u79bb\u539f\u6765\u884c\u4e3a\u7684\uff0c\u5e94\u8be5\u8003\u8651\u6210\u53e6\u5916\u7684\u5173\u6ce8\u70b9\u513f\u5206\u79bb\u5f00\u3002\u6bd4\u5982\u6709\u4e00\u4e2a\u51fd\u6570\u53eb\u505a CreateNewCustomer() \uff0c\u90a3\u4e48 CreateNewCustomer() \u7684\u884c\u4e3a\u5c31\u5e94\u8be5\u9650\u5b9a\u5728\u521b\u5efa\u4e00\u4e2a\u65b0\u5ba2\u6237\u4e0a\u9762\uff0c\u7ed9\u65b0\u5ba2\u6237\u81ea\u52a8\u53d1\u4f18\u60e0\u5238\u7684\u52a8\u4f5c\u5c31\u4e0d\u80fd\u653e\u5230\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\u3002 \u6269\u5c55\u5206\u79bb : \u5982\u679c\u57fa\u4e8e\u67d0\u79cd\u8bbe\u8ba1\uff0c\u539f\u5148\u4e0d\u5177\u6709\u67d0\u4e9b\u884c\u4e3a\u9700\u8981\u589e\u52a0\uff0c\u53ef\u4ee5\u8003\u8651\u901a\u8fc7\u6269\u5c55\u6216\u63d2\u4ef6\u7684\u5f62\u5f0f\u6765\u5b8c\u6210\uff0c\u5c06\u8fd9\u4e9b\u529f\u80fd\u653e\u5165\u5230\u63d2\u4ef6\u6216\u6269\u5c55\u4e2d\u3002 \u53cd\u8f6c\u5206\u79bb : \u5f88\u591a\u4f9d\u8d56\u6ce8\u5165\u7684\u6846\u67b6\uff0c\u5982 Spring \u3001 Guice \u7b49\u7b49\uff0c\u8fd9\u4e9b\u5e2e\u52a9\u6211\u4eec\u505a\u4f9d\u8d56\u53cd\u8f6c\uff0c\u4ece\u800c\u5012\u7f6e\u4f9d\u8d56\u5173\u7cfb\u3002 5. \u4f60\u4e0d\u9700\u8981\u5b83\uff08YAGNI\uff09 \u00b6 \u6240\u8c13 YAGNI \u539f\u5219\uff0c\u5373\uff1a You Ain\u2019t Gonna Need It \uff0c \u4f60\u4e0d\u9700\u8981\u5b83 \u3002\u5b83\u662f\u4e00\u79cd\u6781\u9650\u7f16\u7a0b\uff08XP\uff09\u5b9e\u8df5\uff0c\u8868\u793a\u7a0b\u5e8f\u5458\u4e0d\u5e94\u4e3a\u76ee\u524d\u8fd8\u4e0d\u9700\u8981\u7684\u529f\u80fd\u7f16\u5199\u4ee3\u7801\u3002 YAGNI \u5f88\u50cf KISS \u539f\u5219\uff0c\u56e0\u4e3a\u5b83\u4e5f\u662f\u81f4\u529b\u4e8e\u6784\u5efa\u7b80\u5355\u7684\u65b9\u6848\u3002\u7136\u800c\uff0c KISS \u662f\u901a\u8fc7\u5c3d\u53ef\u80fd\u5bb9\u6613\u7684\u5b8c\u6210\u67d0\u4ef6\u4e8b\u60c5\u6765\u5b9e\u73b0\u7cbe\u7b80\u65b9\u6848\uff1b\u4f46 YAGNI \u662f\u901a\u8fc7\u6839\u672c\u5c31\u4e0d\u5b9e\u73b0\u5b83\u6765\u8fbe\u5230\u7cbe\u7b80\u3002 YAGNI \u7684\u89c2\u70b9\u662f\u4f60\u5e94\u8be5 \u4e3a\u4e86\u773c\u524d\u7684\u9700\u6c42\u505a\u8bbe\u8ba1\u800c\u4e0d\u662f\u672a\u6765 \u3002 \u53ea\u5728\u771f\u6b63\u9700\u8981\u67d0\u4e9b\u529f\u80fd\u7684\u65f6\u5019\u624d\u53bb\u5b9e\u73b0\u5b83\uff0c\u800c\u4e0d\u662f\u4ec5\u4ec5\u56e0\u4e3a\u4f60\u9884\u89c1\u5230\u5b83\u5c06\u51fa\u73b0\u3002- XP \u7684\u8054\u5408\u521b\u59cb\u4eba Ron Jeffries \u5373\u4f7f\u4f60\u975e\u5e38\u786e\u4fe1\u5c06\u6765\u4f60\u9700\u8981\u67d0\u4e2a\u7279\u6027\uff0c\u4e5f\u4e0d\u8981\u73b0\u5728\u5c31\u53bb\u5b9e\u73b0\u5b83\u3002\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u4f60\u4f1a\u53d1\u73b0\u6216\u8bb8\u6700\u7ec8\u4f60\u4e0d\u9700\u8981\u5b83\u4e86\uff0c\u6216\u8005\u662f\u4f60\u771f\u6b63\u6240\u9700\u7684\u7279\u6027\u4e0e\u4f60\u4e4b\u524d\u9884\u8ba1\u7684\u6709\u5f88\u5927\u7684\u51fa\u5165\u3002\u9075\u5faa YAGNI \u5b9e\u8df5\u6709\u4e24\u4e2a\u4e3b\u8981\u539f\u56e0\uff1a \u4f60\u8282\u7ea6\u4e86\u65f6\u95f4\uff0c\u56e0\u4e3a\u4f60\u907f\u514d\u4e86\u7f16\u5199\u6700\u7ec8\u8bc1\u660e\u4e0d\u5fc5\u8981\u7684\u4ee3\u7801\u3002 \u4f60\u7684\u4ee3\u7801\u8d28\u91cf\u66f4\u9ad8\u4e86\uff0c\u56e0\u4e3a\u4f60\u4f7f\u4ee3\u7801\u4e0d\u5fc5\u4e3a\u4f60\u7684\u201c\u63a8\u6d4b\u201d\u6240\u6c61\u67d3\uff0c\u800c\u8fd9\u4e9b\u201c\u63a8\u6d4b\u201d\u6700\u7ec8\u53ef\u80fd\u6216\u591a\u6216\u5c11\u6709\u4e9b\u9519\u8bef\uff0c\u4f46\u6b64\u65f6\u8fd9\u4e9b\u9519\u8bef\u5df2\u7262\u7262\u5730\u4f9d\u9644\u5728\u4f60\u7684\u4ee3\u7801\u4e2d\u4e86\u3002 \u6211\u7684\u7406\u89e3 \uff1aYAGNI \u539f\u5219\uff0c\u672c\u8d28\u4e0a\u662f\u544a\u8beb\u6211\u4eec \u5199\u4ee3\u7801\u4e0d\u8981\u753b\u86c7\u6dfb\u8db3\uff0c\u5426\u5219\u5c31\u4f1a\u5f04\u5de7\u6210\u62d9\u4e86 \u3002\u7f16\u5199\u4e1a\u52a1\u4ee3\u7801\u65f6\uff0c\u4e0d\u8981\u53bb\u5047\u60f3\u4e00\u4e9b\u9700\u6c42\u6216\u8005\u573a\u666f\uff0c\u56e0\u4e3a\u5927\u591a\u6570\u4f60\u6240\u8bbe\u60f3\u7684\u573a\u666f\u90fd\u4e0d\u4f1a\u53d1\u751f\uff0c\u800c\u4f60\u6240\u591a\u5199\u7684\u90a3\u4e9b\u4ee3\u7801\u4e5f\u5c06\u4f1a\u957f\u671f\u6ede\u7559\u5728\u4f60\u7684\u7cfb\u7edf\u4e2d\uff0c\u6536\u6548\u751a\u5fae\uff0c\u4f46\u5374\u8ba9\u4f60\u548c\u56e2\u961f\u82b1\u8d39\u4e86\u66f4\u591a\u7684\u65f6\u95f4\u548c\u7cbe\u529b\u53bb\u4e66\u5199\u548c\u7ef4\u62a4\uff0c\u66f4\u53ef\u6015\u7684\u662f\u53ef\u80fd\u4f1a\u5bf9\u5c06\u6765\u65b0\u7684\u4ee3\u7801\u7ef4\u62a4\u4eba\u9020\u6210\u56f0\u60d1\u3002\u53e6\u5916\u5bf9\u4e8e\u6ca1\u6709\u88ab\u4f7f\u7528\u5230\u7684\u4ee3\u7801\uff0c\u6211\u8ba4\u4e3a\u4e5f\u90fd\u5e94\u8be5\u7acb\u5373\u5220\u9664\uff0c\u4ece\u800c\u4fdd\u6301\u7cfb\u7edf\u7684\u7cbe\u7b80\uff0c\u5982\u679c\u5c06\u6765\u9700\u8981\u65f6\u518d\u53bb\u4e66\u5199\u6216\u6062\u590d\uff0c\u800c\u4e14\u90a3\u65f6\u4faf\u5199\u51fa\u7684\u4ee3\u7801\u4e5f\u7edd\u5bf9\u6bd4\u4e4b\u524d\u7684\u66f4\u4e3a\u5951\u5408\u3002 6. \u7ae5\u5b50\u519b\u89c4\u5219\uff08Boy-Scout Rule\uff09 \u00b6 Boy-Scout Rule \uff0c\u8bd1\u4e3a\uff1a \u7ae5\u5b50\u519b\u89c4\u5219 \u3002\u7f8e\u56fd\u7ae5\u5b50\u519b\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u89c4\u5219\uff1a\u201c\u8ba9\u8425\u5730\u6bd4\u4f60\u521a\u6765\u65f6\u66f4\u5e72\u51c0( Always leave the campground cleaner than you found it )\u201d\u3002\u5982\u679c\u770b\u5230\u5730\u4e0a\u6709\u5783\u573e\uff0c\u4e0d\u7ba1\u662f\u8c01\u6254\u7684\uff0c\u90fd\u8981\u6e05\u7406\u3002\u8fd9\u6837\u4f60\u5c31\u6709\u610f\u5730\u4e3a\u4e0b\u4e00\u6279\u6765\u5bbf\u8425\u7684\u4eba\u6539\u5584\u4e86\u73af\u5883\u3002 \u7ae5\u5b50\u519b\u89c4\u5219\u544a\u8bc9\u6211\u4eec\u5728\u5bf9\u73b0\u6709\u4ee3\u7801\u5e93\u8fdb\u884c\u66f4\u6539\u65f6\uff0c\u4ee3\u7801\u8d28\u91cf\u5f80\u5f80\u4f1a\u964d\u4f4e\uff0c\u4ece\u800c\u79ef\u7d2f\u6280\u672f\u503a\u52a1\u3002\u6240\u4ee5\u9700\u8981 \u59cb\u7ec8\u4fdd\u6301\u4ee3\u7801\u6574\u6d01 \u3002\u4e0d\u7ba1\u539f\u4f5c\u8005\u662f\u8c01\uff0c\u5982\u679c\u6211\u4eec\u52aa\u529b\u53bb\u6539\u8fdb\u4ee3\u7801\u6a21\u5757\uff0c\u4e0d\u7ba1\u662f\u591a\u4e48\u5c0f\u7684\u6539\u8fdb\uff0c\u6211\u4eec\u7684\u8f6f\u4ef6\u7cfb\u7edf\u5c31\u518d\u4e5f\u4e0d\u4f1a\u6301\u7eed\u53d8\u574f\u4e86\u3002\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0c\u7cfb\u7edf\u5728\u53d1\u5c55\u7684\u540c\u65f6\u4f1a\u9010\u6e10\u53d8\u5f97\u66f4\u597d\u3002\u6211\u4eec\u4e5f\u4f1a\u770b\u5230\u56e2\u961f\u4eec\u5173\u5fc3\u6574\u4f53\u7684\u7cfb\u7edf\uff0c\u800c\u4e0d\u662f\u5404\u81ea\u53ea\u5173\u5fc3\u81ea\u5df1\u8d1f\u8d23\u7684\u4e00\u5c0f\u90e8\u5206\u3002\u800c\u4e14\u56e2\u961f\u6210\u5458\u8981\u4e92\u52a9\uff0c\u4e92\u76f8\u6e05\u7406\u4ee3\u7801\uff0c\u4ed6\u4eec\u9075\u4ece\u7ae5\u5b50\u519b\u89c4\u5219\uff0c\u56e0\u4e3a\u90a3\u5bf9\u6bcf\u4e2a\u4eba\u90fd\u5f88\u597d\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5bf9\u81ea\u5df1\u597d\u3002 \u4ee3\u7801\u574f\u5473\u9053\u6216\u8005\u7cdf\u7cd5\u7684\u7a0b\u5e8f\u4ee3\u7801\u5c31\u50cf\u9690\u5f62\u7684\u201c\u75be\u75c5\u201d\u4e00\u6837\u6f5c\u4f0f\u5728\u9879\u76ee\u4e2d\uff0c\u4e5f\u56e0\u6b64\u5f62\u6210\u4e86\u6280\u672f\u503a\u52a1\u3002\u5982\u679c\u8fd9\u4e9b\u201c\u75be\u75c5\u201d\u5728\u9879\u76ee\u521d\u671f\u4e0d\u5f15\u8d77\u6ce8\u5173\u6ce8\u3001\u4e0d\u628a\u75be\u75c5\u627c\u6740\u5728\u840c\u82bd\u4e4b\u4e2d\uff0c\u90a3\u4e48\u540e\u671f\u4fee\u590d\u5b83\u7684\u4ee3\u4ef7\u4e5f\u5c31\u8d8a\u5927\uff0c\u4e5f\u5fc5\u7136\u4f1a\u4f7f\u5f97\u9879\u76ee\u7684\u8f6f\u4ef6\u7a0b\u5e8f\u8d8a\u6765\u8d8a\u96be\u4ee5\u7ef4\u62a4\uff0c\u8fd9\u4e2a\u9879\u76ee\u4e5f\u6700\u7ec8\u4f1a\u50cf\u8521\u6853\u516c\u4e00\u6837\u65e0\u836f\u53ef\u6cbb\u3001\u201c\u65e0\u5948\u4f55\u4e5f\u201d\u3002 \u6240\u4ee5\uff0c\u8bf7\u8bb0\u4f4f\u7ae5\u5b50\u519b\u89c4\u5219\u5bf9\u6211\u4eec\u7684\u542f\u793a\uff1a \u59cb\u7ec8\u4fdd\u6301\u4ee3\u7801\u6574\u6d01\uff0c\u52ff\u4ee5\u5584\u5c0f\u800c\u4e0d\u4e3a\uff0c\u52ff\u4ee5\u6076\u5c0f\u800c\u4e3a\u4e4b\uff0c\u6709\u75c5\u65e9\u6cbb \u3002 7.\u5176\u4ed6\u539f\u5219 \u00b6 \u907f\u514d\u8fc7\u65e9\u4f18\u5316 \uff08 Avoid Premature Optimization \uff09: \u9664\u975e\u4f60\u7684\u4ee3\u7801\u8fd0\u884c\u7684\u6bd4\u4f60\u60f3\u50cf\u4e2d\u7684\u8981\u6162\uff0c\u5426\u5219\u522b\u53bb\u4f18\u5316\u3002\u5047\u5982\u4f60\u771f\u7684\u60f3\u4f18\u5316\uff0c\u5c31\u5fc5\u987b\u5148\u60f3\u597d\u5982\u4f55\u7528\u6570\u636e\u8bc1\u660e\uff0c\u5b83\u7684\u901f\u5ea6\u53d8\u5feb\u4e86\u3002\u201c \u8fc7\u65e9\u7684\u4f18\u5316\u662f\u4e00\u5207\u7f6a\u6076\u4e4b\u6e90 \u3002\u201d\u2014\u2014Donald Knuth \u6700\u5c0f\u60ca\u8bb6\u539f\u5219 ( Principle of least astonishment ): \u4ee3\u7801\u5e94\u8be5\u5c3d\u53ef\u80fd\u51cf\u5c11\u8ba9\u8bfb\u8005\u60ca\u559c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u7f16\u5199\u7684\u4ee3\u7801\u53ea\u9700\u6309\u7167\u9879\u76ee\u7684\u8981\u6c42\u6765\u7f16\u5199\u3002\u5176\u4ed6\u534e\u4e3d\u7684\u529f\u80fd\u5c31\u4e0d\u5fc5\u4e86\uff0c\u4ee5\u514d\u5f04\u5de7\u6210\u62d9\u3002 \u4ee3\u7801\u91cd\u7528\u539f\u5219 \uff08 Code Reuse is Good \uff09: \u91cd\u7528\u4ee3\u7801\u80fd\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\uff0c\u7f29\u77ed\u5f00\u53d1\u65f6\u95f4\u3002 \u522b\u8ba9\u6211\u601d\u8003 ( Don\u2019t Make Me Think ): \u6240\u7f16\u5199\u7684\u4ee3\u7801\u4e00\u5b9a\u8981\u6613\u4e8e\u8bfb\u6613\u4e8e\u7406\u89e3\uff0c\u8fd9\u6837\u522b\u4eba\u624d\u4f1a\u6b23\u8d4f\uff0c\u4e5f\u80fd\u591f\u7ed9\u4f60\u63d0\u51fa\u5408\u7406\u5316\u7684\u5efa\u8bae\u3002\u76f8\u53cd\uff0c\u82e5\u662f\u7e41\u6742\u96be\u89e3\u7684\u7a0b\u5e8f\uff0c\u5176\u4ed6\u4eba\u603b\u662f\u4f1a\u907f\u800c\u8fdc\u4e4b\u7684\u3002 \u4e3a\u7ef4\u62a4\u8005\u5199\u4ee3\u7801 ( Write Code for the Maintainer ): \u4f18\u79c0\u7684\u4ee3\u7801\uff0c\u5e94\u5f53\u4f7f\u672c\u4eba\u6216\u662f\u4ed6\u4eba\u5728\u5c06\u6765\u90fd\u80fd\u591f\u5bf9\u5b83\u7ee7\u7eed\u7f16\u5199\u6216\u7ef4\u62a4\u3002\u4ee3\u7801\u7ef4\u62a4\u65f6\uff0c\u6216\u8bb8\u672c\u4eba\u4f1a\u6bd4\u8f83\u5bb9\u6613\uff0c\u4f46\u5bf9\u4ed6\u4eba\u5374\u6bd4\u8f83\u9ebb\u70e6\u3002\u56e0\u6b64\u4f60\u5199\u7684\u4ee3\u7801\u8981\u5c3d\u53ef\u80fd\u4fdd\u8bc1\u4ed6\u4eba\u80fd\u591f\u5bb9\u6613\u7ef4\u62a4\u3002\u201c\u5982\u679c\u4e00\u4e2a\u7ef4\u62a4\u8005\u4e0d\u518d\u7ee7\u7eed\u7ef4\u62a4\u4f60\u7684\u4ee3\u7801\uff0c\u5f88\u53ef\u80fd\u4ed6\u5c31\u6709\u4e86\u60f3\u6740\u4f60\u7684\u51b2\u52a8\u3002\u201d \u6b63\u4ea4\u539f\u5219(Orthogonality) : \u6b63\u4ea4\u6027\u7684\u57fa\u672c\u601d\u60f3\u662f\uff0c\u5728\u6982\u5ff5\u4e0a\u4e0d\u76f8\u5173\u7684\u4e8b\u7269\u4e0d\u5e94\u8be5\u4e0e\u7cfb\u7edf\u76f8\u5173\u3002\u8bbe\u8ba1\u8d8a\u6b63\u4ea4\uff0c\u5f02\u5e38\u8d8a\u5c11\u3002 \u8fd9\u4f7f\u5f97\u7528\u7f16\u7a0b\u8bed\u8a00\u66f4\u5bb9\u6613\u5b66\u4e60\uff0c\u8bfb\u5199\u7a0b\u5e8f\u3002(\u53cd\u4f8b\uff1a CSS )\u3002 \u505a\u6700\u7b80\u5355\u7684\u4e8b\u513f\u5c31\u8ba9\u4ee3\u7801\u53ef\u8fd0\u884c \uff08 Do the simplest thing that could possibly work \uff09: \u5c3d\u53ef\u80fd\u505a\u6700\u7b80\u5355\u7684\u4e8b\u5c31\u53ef\u4ee5\u8ba9\u4ee3\u7801\u53ef\u8fd0\u884c\u3002\u5728\u7f16\u7a0b\u4e2d\uff0c\u4e00\u5b9a\u8981\u4fdd\u6301\u7b80\u5355\u539f\u5219\u3002\u4f5c\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u4e0d\u65ad\u7684\u53cd\u601d\u201c\u5982\u4f55\u5728\u5de5\u4f5c\u4e2d\u505a\u5230\u7b80\u5316\u5462\uff1f\u201d\u8fd9\u5c06\u6709\u52a9\u4e8e\u5728\u8bbe\u8ba1\u4e2d\u4fdd\u6301\u7b80\u5355\u7684\u8def\u5f84\u3002 \u9690\u85cf\u5b9e\u73b0\u7ec6\u8282 \uff08 Hide Implementation Details \uff09: \u8f6f\u4ef6\u6a21\u5757\u901a\u8fc7\u63d0\u4f9b\u63a5\u53e3\u9690\u85cf\u4fe1\u606f\uff08\u5373\u5b9e\u73b0\u7ec6\u8282\uff09\uff0c\u800c\u4e0d\u6cc4\u6f0f\u4efb\u4f55\u4e0d\u5fc5\u8981\u7684\u4fe1\u606f\u3002 \u79d1\u91cc\u5b9a\u5f8b ( Curly's Law ): \u662f\u4e3a\u4efb\u4f55\u7279\u5b9a\u7684\u4ee3\u7801\u9009\u62e9\u4e00\u4e2a\u660e\u786e\u5b9a\u4e49\u7684\u76ee\u6807\uff1a \u53ea\u505a\u4e00\u4ef6\u4e8b \u3002 \u58a8\u83f2\u5b9a\u5f8b \uff08 Murphy's Law \uff09:\u6839\u672c\u5185\u5bb9\u662f\uff1a \u5982\u679c\u4e8b\u60c5\u6709\u53d8\u574f\u7684\u53ef\u80fd\uff0c\u4e0d\u7ba1\u8fd9\u79cd\u53ef\u80fd\u6027\u6709\u591a\u5c0f\uff0c\u5b83\u603b\u4f1a\u53d1\u751f \u3002\u4e3b\u8981\u5185\u5bb9\u5982\u4e0b\uff1a \u4efb\u4f55\u4e8b\u90fd\u6ca1\u6709\u8868\u9762\u770b\u8d77\u6765\u90a3\u4e48\u7b80\u5355\uff1b \u6240\u6709\u7684\u4e8b\u90fd\u4f1a\u6bd4\u4f60\u9884\u8ba1\u7684\u65f6\u95f4\u957f\uff1b \u4f1a\u51fa\u9519\u7684\u4e8b\u603b\u4f1a\u51fa\u9519\uff1b \u5982\u679c\u4f60\u62c5\u5fc3\u67d0\u79cd\u60c5\u51b5\u53d1\u751f\uff0c\u90a3\u4e48\u5b83\u5c31\u66f4\u6709\u53ef\u80fd\u53d1\u751f\u3002","title":"\u8f6f\u4ef6\u7a0b\u5e8f\u8bbe\u8ba1\u539f\u5219\uff08\u8bbe\u8ba1\u539f\u5219\u4e0e\u6a21\u5f0f\u7cfb\u5217\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#_1","text":"\u8f6f\u4ef6\u4e5f\u50cf\u4eba\u4e00\u6837\uff0c\u5177\u6709\u751f\u547d\u529b\uff0c\u4ece\u51fa\u751f\u5230\u6b7b\u4ea1\uff0c\u4f1a\u7ecf\u5386\u591a\u79cd\u53d8\u5316\u3002\u8f6f\u4ef6\u67b6\u6784\u8bbe\u8ba1\u4e5f\u4e0d\u662f\u4e00\u8e74\u800c\u5c31\u7684\uff0c\u662f\u4e0d\u65ad\u5730\u6f14\u8fdb\u53d1\u5c55\u3002\u6bcf\u4e2a\u7a0b\u5e8f\u5458\u90fd\u53ef\u4ee5\u4ece\u7406\u89e3\u7f16\u7a0b\u539f\u5219\u548c\u6a21\u5f0f\u4e2d\u53d7\u76ca\u3002 \u8f6f\u4ef6\u8bbe\u8ba1\u539f\u5219\u662f\u4e00\u7ec4\u5e2e\u52a9\u6211\u4eec\u907f\u5f00\u4e0d\u826f\u8bbe\u8ba1\u7684\u6307\u5bfc\u65b9\u9488\u3002\u6839\u636e Robert Martin \u7684\u7406\u8bba\uff0c\u5e94\u8be5\u907f\u514d\u4e0d\u826f\u8bbe\u8ba1\u7684\u4ee5\u4e0b\u4e09\u4e2a\u91cd\u8981\u7279\u70b9\uff1a \u50f5\u5316 \uff1a\u5f88\u96be\u505a\u6539\u52a8\uff0c\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u7ec6\u5fae\u7684\u6539\u52a8\u90fd\u4f1a\u5f71\u54cd\u5230\u7cfb\u7edf\u5927\u91cf\u7684\u5176\u4ed6\u529f\u80fd \u8106\u5f31 \uff1a\u6bcf\u5f53\u4f60\u505a\u4e00\u6b21\u6539\u52a8\uff0c\u603b\u4f1a\u5f15\u8d77\u7cfb\u7edf\u4e2d\u9884\u671f\u4e4b\u5916\u7684\u90e8\u5206\u51fa\u73b0\u6545\u969c \u6b7b\u677f \uff1a\u4ee3\u7801\u5f88\u96be\u5728\u5176\u4ed6\u5e94\u7528\u4e2d\u91cd\u7528\uff0c\u56e0\u5176\u4e0d\u80fd\u4ece\u5f53\u524d\u5e94\u7528\u4e2d\u5355\u72ec\u62bd\u79bb\u51fa\u6765 \u4e0b\u9762\u8fd9\u4e9b\u8f6f\u4ef6\u8bbe\u8ba1\u539f\u5219\u662f\u6211\u4ece\u4e00\u4e9b\u4e66\u7c4d\u548c\u7f51\u7edc\u4e2d\u6536\u96c6\u800c\u6765\uff0c\u5e76\u4e0d\u5b8c\u6574\uff0c\u800c\u4e14\u4f60\u4e5f\u9700\u8981\u5728\u4e00\u4e9b\u6709\u201c\u51b2\u7a81\u7684\u539f\u5219\u201d\u4e4b\u95f4\u8fdb\u884c\u6743\u8861\u548c\u53d6\u820d\u3002\u672c\u6587\u6216\u8bb8\u4f1a\u5bf9\u4f60\u7684\u7f16\u7a0b\u3001\u7a0b\u5e8f\u8bbe\u8ba1\u3001\u8ba8\u8bba\u6216\u8bc4\u5ba1\u5de5\u4f5c\u6709\u6240\u5e2e\u52a9\u3002","title":"\u4e00\u3001\u524d\u8a00"},{"location":"Design-Patterns/1-DesignPrinciples/#_2","text":"","title":"\u4e8c\u3001\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u539f\u5219"},{"location":"Design-Patterns/1-DesignPrinciples/#1-srp","text":"\u6240\u8c13 SRP \u539f\u5219\uff0c\u5373\uff1a Single Responsibility Principle \uff0c \u5355\u4e00\u804c\u8d23\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a There should never be more than one reason for a class to change.( \u53ea\u6709\u4e00\u4e2a\u5f15\u8d77\u7c7b\u6539\u53d8\u7684\u539f\u56e0 ) \u5728\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u9886\u57df\u4e2d\uff0c\u5355\u4e00\u804c\u8d23\u539f\u5219\uff08 Single responsibility principle \uff09\u89c4\u5b9a\u6bcf\u4e2a\u7c7b\u90fd\u5e94\u8be5\u6709\u4e00\u4e2a\u5355\u4e00\u7684\u804c\u8d23\u6216\u8005\u53eb\u529f\u80fd\uff0c\u5e76\u4e14\u8be5\u529f\u80fd\u5e94\u8be5\u7531\u8fd9\u4e2a\u7c7b\u5b8c\u5168\u5c01\u88c5\u8d77\u6765\u3002\u6240\u6709\u5b83\u7684\uff08\u8fd9\u4e2a\u7c7b\u7684\uff09\u670d\u52a1\u90fd\u5e94\u8be5\u4e25\u5bc6\u7684\u548c\u8be5\u529f\u80fd\u5e73\u884c\uff08\u529f\u80fd\u5e73\u884c\uff0c\u610f\u5473\u7740\u6ca1\u6709\u4f9d\u8d56\uff09\u3002\u4e00\u4e2a\u7c7b\u6216\u8005\u6a21\u5757\u5e94\u8be5\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u6539\u53d8\u7684\u539f\u56e0\u3002 \u5982\u679c\u4e00\u4e2a\u7c7b\u627f\u62c5\u7684\u804c\u8d23\u8fc7\u591a\uff0c\u5c31\u7b49\u4e8e\u628a\u8fd9\u4e9b\u804c\u8d23\u8026\u5408\u5728\u4e00\u8d77\u4e86\u3002\u4e00\u4e2a\u804c\u8d23\u7684\u53d8\u5316\u53ef\u80fd\u4f1a\u524a\u5f31\u6216\u8005\u6291\u5236\u8fd9\u4e2a\u7c7b\u5b8c\u6210\u5176\u4ed6\u804c\u8d23\u7684\u80fd\u529b\u3002\u8fd9\u79cd\u8026\u5408\u4f1a\u5bfc\u81f4\u8106\u5f31\u7684\u8bbe\u8ba1\uff0c\u5f53\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u8bbe\u8ba1\u4f1a\u906d\u53d7\u5230\u610f\u60f3\u4e0d\u5230\u7684\u7834\u574f\u3002\u800c\u5982\u679c\u60f3\u8981\u907f\u514d\u8fd9\u79cd\u73b0\u8c61\u7684\u53d1\u751f\uff0c\u5c31\u8981\u5c3d\u53ef\u80fd\u7684\u9075\u5b88\u5355\u4e00\u804c\u8d23\u539f\u5219\u3002\u6b64\u539f\u5219\u7684\u6838\u5fc3\u5c31\u662f \u89e3\u8026 \u548c \u589e\u5f3a\u5185\u805a\u6027 \u3002","title":"1. \u5355\u4e00\u804c\u8d23\u539f\u5219\uff08SRP\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#2-lsp","text":"\u6240\u8c13 LSP \u539f\u5219\uff0c\u5373\uff1a Liskov Substitution principle \uff0c \u91cc\u6c0f\u66ff\u6362\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a Functions that use pointers of references to base classes must be able to use objects of derived classes without knowing it.\uff08 \u6240\u6709\u5f15\u7528\u57fa\u7c7b\u7684\u5730\u65b9\u5fc5\u987b\u80fd\u900f\u660e\u5730\u4f7f\u7528\u5176\u5b50\u7c7b\u7684\u5bf9\u8c61 \uff09 \u66f4\u901a\u4fd7\u7684\u5b9a\u4e49\u5373\u4e3a\uff1a \u5b50\u7c7b\u53ef\u4ee5\u6269\u5c55\u7236\u7c7b\u7684\u529f\u80fd\uff0c\u4f46\u4e0d\u80fd\u6539\u53d8\u7236\u7c7b\u539f\u6709\u7684\u529f\u80fd \u3002\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u5305\u542b\u4e86\u4e00\u4e0b 4 \u5c42\u542b\u4e49\uff1a \u5b50\u7c7b\u5fc5\u987b\u5b8c\u5168\u5b9e\u73b0\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\u5728\u7c7b\u4e2d\u8c03\u7528\u5176\u4ed6\u7c7b\u662f\u52a1\u5fc5\u8981\u4f7f\u7528\u7236\u7c7b\u6216\u63a5\u53e3\uff0c\u5982\u679c\u4e0d\u80fd\u4f7f\u7528\u7236\u7c7b\u6216\u63a5\u53e3\uff0c\u5219\u8bf4\u660e\u7c7b\u7684\u8bbe\u8ba1\u5df2\u7ecf\u8fdd\u80cc\u4e86 LSP \u539f\u5219\u3002 \u5b50\u7c7b\u53ef\u4ee5\u6709\u81ea\u5df1\u7684\u4e2a\u6027\u3002\u5b50\u7c7b\u5f53\u7136\u53ef\u4ee5\u6709\u81ea\u5df1\u7684\u884c\u4e3a\u548c\u5916\u89c2\u4e86\uff0c\u4e5f\u5c31\u662f\u65b9\u6cd5\u548c\u5c5e\u6027\u3002 \u8986\u76d6\u6216\u5b9e\u73b0\u7236\u7c7b\u7684\u65b9\u6cd5\u65f6\u8f93\u5165\u53c2\u6570\u53ef\u4ee5\u88ab\u653e\u5927\u3002\u5373\u5b50\u7c7b\u53ef\u4ee5\u8986\u76d6\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u4f46\u8f93\u5165\u53c2\u6570\u5e94\u6bd4\u7236\u7c7b\u65b9\u6cd5\u4e2d\u7684\u5927\uff0c\u8fd9\u6837\u5728\u5b50\u7c7b\u4ee3\u66ff\u7236\u7c7b\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u4ecd\u7136\u662f\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\u5373\u4ee5\u5b50\u7c7b\u4e2d\u65b9\u6cd5\u7684\u524d\u7f6e\u6761\u4ef6\u5fc5\u987b\u4e0e\u8d85\u7c7b\u4e2d\u88ab\u8986\u76d6\u7684\u65b9\u6cd5\u7684\u524d\u7f6e\u6761\u4ef6\u76f8\u540c\u6216\u8005\u66f4\u5bbd\u677e\u3002 \u8986\u76d6\u6216\u5b9e\u73b0\u7236\u7c7b\u7684\u65b9\u6cd5\u65f6\u8f93\u51fa\u7ed3\u679c\u53ef\u4ee5\u88ab\u7f29\u5c0f\u3002","title":"2. \u91cc\u6c0f\u66ff\u6362\u539f\u5219\uff08LSP\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#3-isp","text":"\u6240\u8c13 ISP \u539f\u5219\uff0c\u5373\uff1a Interface Segregation Principle \uff0c \u63a5\u53e3\u9694\u79bb\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a Clients should not be forced to depend upon interfaces that they do not use.(\u5ba2\u6237\u7aef\u53ea\u4f9d\u8d56\u4e8e\u5b83\u6240\u9700\u8981\u7684\u63a5\u53e3\uff1b\u5b83\u9700\u8981\u4ec0\u4e48\u63a5\u53e3\u5c31\u63d0\u4f9b\u4ec0\u4e48\u63a5\u53e3\uff0c\u628a\u4e0d\u9700\u8981\u7684\u63a5\u53e3\u5254\u9664\u6389\u3002) The dependency of one class to another one should depend on the smallest possible interface.(\u7c7b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u5e94\u5efa\u7acb\u5728\u6700\u5c0f\u7684\u63a5\u53e3\u4e0a\u3002) \u5373\uff0c \u63a5\u53e3\u5c3d\u91cf\u7ec6\u5316\uff0c\u63a5\u53e3\u4e2d\u7684\u65b9\u6cd5\u5c3d\u91cf\u5c11 \u3002\u63a5\u53e3\u9694\u79bb\u539f\u5219\u4e0e\u5355\u4e00\u804c\u8d23\u539f\u5219\u7684\u5ba1\u89c6\u89d2\u5ea6\u662f\u4e0d\u540c\u7684\uff0c\u5355\u4e00\u804c\u8d23\u539f\u5219\u8981\u6c42\u7684\u662f\u7c7b\u548c\u63a5\u53e3\u804c\u8d23\u5355\u4e00\uff0c\u6ce8\u91cd\u7684\u662f\u804c\u8d23\uff0c\u8fd9\u662f\u4e1a\u52a1\u903b\u8f91\u4e0a\u7684\u5212\u5206\uff0c\u800c\u63a5\u53e3\u9694\u79bb\u539f\u5219\u8981\u6c42\u63a5\u53e3\u7684\u65b9\u6cd5\u5c3d\u91cf\u5c11\u3002\u6839\u636e\u63a5\u53e3\u9694\u79bb\u539f\u5219\u62c6\u5206\u63a5\u53e3\u65f6\uff0c\u9996\u5148\u5fc5\u987b\u6ee1\u8db3\u5355\u4e00\u804c\u8d23\u539f\u5219\u3002 \u91c7\u7528\u63a5\u53e3\u9694\u79bb\u539f\u5219\u5bf9\u63a5\u53e3\u8fdb\u884c\u7ea6\u675f\u65f6\uff0c\u8981\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a \u63a5\u53e3\u5c3d\u91cf\u5c0f\uff0c\u4f46\u662f\u8981\u6709\u9650\u5ea6\u3002\u5bf9\u63a5\u53e3\u8fdb\u884c\u7ec6\u5316\u53ef\u4ee5\u63d0\u9ad8\u7a0b\u5e8f\u8bbe\u8ba1\u7075\u6d3b\u6027\u662f\u4e0d\u6323\u7684\u4e8b\u5b9e\uff0c\u4f46\u662f\u5982\u679c\u8fc7\u5c0f\uff0c\u5219\u4f1a\u9020\u6210\u63a5\u53e3\u6570\u91cf\u8fc7\u591a\uff0c\u4f7f\u8bbe\u8ba1\u590d\u6742\u5316\u3002\u6240\u4ee5\u4e00\u5b9a\u8981\u9002\u5ea6\u3002 \u4e3a\u4f9d\u8d56\u63a5\u53e3\u7684\u7c7b\u5b9a\u5236\u670d\u52a1\uff0c\u53ea\u66b4\u9732\u7ed9\u8c03\u7528\u7684\u7c7b\u5b83\u9700\u8981\u7684\u65b9\u6cd5\uff0c\u5b83\u4e0d\u9700\u8981\u7684\u65b9\u6cd5\u5219\u9690\u85cf\u8d77\u6765\u3002\u53ea\u6709\u4e13\u6ce8\u5730\u4e3a\u4e00\u4e2a\u6a21\u5757\u63d0\u4f9b\u5b9a\u5236\u670d\u52a1\uff0c\u624d\u80fd\u5efa\u7acb\u6700\u5c0f\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u63d0\u9ad8\u5185\u805a\uff0c\u51cf\u5c11\u5bf9\u5916\u4ea4\u4e92\u3002\u4f7f\u63a5\u53e3\u7528\u6700\u5c11\u7684\u65b9\u6cd5\u53bb\u5b8c\u6210\u6700\u591a\u7684\u4e8b\u60c5\u3002 \u8fd0\u7528\u63a5\u53e3\u9694\u79bb\u539f\u5219\uff0c\u4e00\u5b9a\u8981\u9002\u5ea6\uff0c\u63a5\u53e3\u8bbe\u8ba1\u7684\u8fc7\u5927\u6216\u8fc7\u5c0f\u90fd\u4e0d\u597d\u3002\u8bbe\u8ba1\u63a5\u53e3\u7684\u65f6\u5019\uff0c\u53ea\u6709\u591a\u82b1\u4e9b\u65f6\u95f4\u53bb\u601d\u8003\u548c\u7b79\u5212\uff0c\u624d\u80fd\u51c6\u786e\u5730\u5b9e\u8df5\u8fd9\u4e00\u539f\u5219\u3002","title":"3. \u63a5\u53e3\u9694\u79bb\u539f\u5219\uff08ISP\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#4-ocp","text":"\u6240\u8c13 OCP \u539f\u5219\uff0c\u5373\uff1a Open Closed Principle \uff0c \u5f00\u95ed\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.(\u5bf9\u6269\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed) \u5f00\u95ed\u539f\u5219\uff08 OCP \uff09\u662f\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u4e2d\u201c\u53ef\u590d\u7528\u8bbe\u8ba1\u201d\u7684\u57fa\u77f3\uff0c\u662f\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u4e2d\u6700\u91cd\u8981\u7684\u539f\u5219\u4e4b\u4e00\uff0c\u5176\u5b83\u5f88\u591a\u7684\u8bbe\u8ba1\u539f\u5219\u548c\u8bbe\u8ba1\u6a21\u5f0f\u90fd\u662f\u5b9e\u73b0\u5f00\u95ed\u539f\u5219\u7684\u4e00\u79cd\u624b\u6bb5\u3002\u6838\u5fc3\u5c31\u662f\uff1a \u5bf9\u6269\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed \u3002\u5176\u542b\u4e49\u662f\u8bf4\u4e00\u4e2a\u8f6f\u4ef6\u5e94\u8be5\u901a\u8fc7\u6269\u5c55\u6765\u5b9e\u73b0\u53d8\u5316\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u4fee\u6539\u5df2\u6709\u7684\u4ee3\u7801\u6765\u5b9e\u73b0\u53d8\u5316\u7684\u3002 \u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u5305\u542b\u7684\u5404\u79cd\u7ec4\u4ef6\uff0c\u4f8b\u5982\u6a21\u5757\uff08 Module \uff09\u3001\u7c7b\uff08 Class \uff09\u4ee5\u53ca\u529f\u80fd\uff08 Function \uff09\u7b49\u7b49\uff0c\u5e94\u8be5\u5728\u4e0d\u4fee\u6539\u73b0\u6709\u4ee3\u7801\u7684\u57fa\u7840\u4e0a\uff0c\u5f15\u5165\u65b0\u529f\u80fd\u3002\u5f00\u95ed\u539f\u5219\u4e2d\u201c\u5f00\u201d\uff0c\u662f\u6307\u5bf9\u4e8e\u7ec4\u4ef6\u529f\u80fd\u7684\u6269\u5c55\u662f\u5f00\u653e\u7684\uff0c\u662f\u5141\u8bb8\u5bf9\u5176\u8fdb\u884c\u529f\u80fd\u6269\u5c55\u7684\uff1b\u5f00\u95ed\u539f\u5219\u4e2d\u201c\u95ed\u201d\uff0c\u662f\u6307\u5bf9\u4e8e\u539f\u6709\u4ee3\u7801\u7684\u4fee\u6539\u662f\u5c01\u95ed\u7684\u3002 \u5b9e\u73b0\u5f00\u95ed\u539f\u5219\u7684\u5173\u952e\u5c31\u5728\u4e8e\u201c \u62bd\u8c61 \u201d\u3002\u628a\u7cfb\u7edf\u7684\u6240\u6709\u53ef\u80fd\u7684\u884c\u4e3a\u62bd\u8c61\u6210\u4e00\u4e2a\u62bd\u8c61\u5e95\u5c42\uff0c\u8fd9\u4e2a\u62bd\u8c61\u5e95\u5c42\u89c4\u5b9a\u51fa\u6240\u6709\u7684\u5177\u4f53\u5b9e\u73b0\u5fc5\u987b\u63d0\u4f9b\u7684\u65b9\u6cd5\u7684\u7279\u5f81\u3002\u4f5c\u4e3a\u7cfb\u7edf\u8bbe\u8ba1\u7684\u62bd\u8c61\u5c42\uff0c\u8981\u9884\u89c1\u6240\u6709\u53ef\u80fd\u7684\u6269\u5c55\uff0c\u4ece\u800c\u4f7f\u5f97\u5728\u4efb\u4f55\u6269\u5c55\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u7684\u62bd\u8c61\u5e95\u5c42\u4e0d\u9700\u4fee\u6539\uff1b\u540c\u65f6\uff0c\u7531\u4e8e\u53ef\u4ee5\u4ece\u62bd\u8c61\u5e95\u5c42\u5bfc\u51fa\u4e00\u4e2a\u6216\u591a\u4e2a\u65b0\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u53ef\u4ee5\u6539\u53d8\u7cfb\u7edf\u7684\u884c\u4e3a\uff0c\u56e0\u6b64\u7cfb\u7edf\u8bbe\u8ba1\u5bf9\u6269\u5c55\u662f\u5f00\u653e\u7684\u3002\u5728\u5b9e\u9645\u5f00\u53d1\u8fc7\u7a0b\u7684\u8bbe\u8ba1\u5f00\u59cb\u9636\u6bb5\uff0c\u5c31\u8981\u7f57\u5217\u51fa\u6765\u7cfb\u7edf\u6240\u6709\u53ef\u80fd\u7684\u884c\u4e3a\uff0c\u5e76\u628a\u8fd9\u4e9b\u884c\u4e3a\u52a0\u5165\u5230\u62bd\u8c61\u5e95\u5c42\uff0c\u6839\u672c\u5c31\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u8fd9\u4e48\u53bb\u505a\u4e5f\u662f\u4e0d\u7ecf\u6d4e\u7684\u3002\u56e0\u6b64\u6211\u4eec\u5e94\u8be5\u73b0\u5b9e\u7684\u63a5\u53d7\u4fee\u6539\u62e5\u62b1\u53d8\u5316\uff0c\u4f7f\u6211\u4eec\u7684\u4ee3\u7801\u53ef\u4ee5\u5bf9\u6269\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed\u3002 \u5f00\u95ed\u539f\u5219\u7684\u597d\u5904\uff1a \u53ef\u590d\u7528\u6027\u597d; \u53ef\u7ef4\u62a4\u6027\u597d\u3002","title":"4. \u5f00\u95ed\u539f\u5219\uff08OCP\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#5-dip","text":"\u6240\u8c13 DIP \u539f\u5219\uff0c\u5373\uff1a Dependency Inversion Principle \uff0c \u4f9d\u8d56\u5012\u7f6e\u539f\u5219 \u3002\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a High-level modules should not depend on low-level modules. Both should depend on abstractions.( \u9ad8\u5c42\u6a21\u5757\u4e0d\u5e94\u8be5\u4f9d\u8d56\u4f4e\u5c42\u6a21\u5757\uff0c\u4e24\u8005\u90fd\u5e94\u8be5\u4f9d\u8d56\u5176\u62bd\u8c61 ) Abstractions should not depend on details. Details should depend on abstractions.( \u62bd\u8c61\u4e0d\u5e94\u8be5\u4f9d\u8d56\u7ec6\u8282\uff1b\u7ec6\u8282\u5e94\u8be5\u4f9d\u8d56\u62bd\u8c61 ) \u9762\u5411\u8fc7\u7a0b\u7684\u5f00\u53d1\uff0c\u4e0a\u5c42\u8c03\u7528\u4e0b\u5c42\uff0c\u4e0a\u5c42\u4f9d\u8d56\u4e8e\u4e0b\u5c42\uff0c\u5f53\u4e0b\u5c42\u5267\u70c8\u53d8\u52a8\u65f6\u4e0a\u5c42\u4e5f\u8981\u8ddf\u7740\u53d8\u52a8\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u6a21\u5757\u7684\u590d\u7528\u6027\u964d\u4f4e\u800c\u4e14\u5927\u5927\u63d0\u9ad8\u4e86\u5f00\u53d1\u7684\u6210\u672c\u3002\u9762\u5411\u5bf9\u8c61\u7684\u5f00\u53d1\u5f88\u597d\u7684\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u62bd\u8c61\u7684\u53d8\u5316\u6982\u7387\u5f88\u5c0f\uff0c\u8ba9\u7528\u6237\u7a0b\u5e8f\u4f9d\u8d56\u4e8e\u62bd\u8c61\uff0c\u5b9e\u73b0\u7684\u7ec6\u8282\u4e5f\u4f9d\u8d56\u4e8e\u62bd\u8c61\u3002\u5373\u4f7f\u5b9e\u73b0\u7ec6\u8282\u4e0d\u65ad\u53d8\u52a8\uff0c\u53ea\u8981\u62bd\u8c61\u4e0d\u53d8\uff0c\u5ba2\u6237\u7a0b\u5e8f\u5c31\u4e0d\u9700\u8981\u53d8\u5316\u3002\u8fd9\u5927\u5927\u964d\u4f4e\u4e86\u5ba2\u6237\u7a0b\u5e8f\u4e0e\u5b9e\u73b0\u7ec6\u8282\u7684\u8026\u5408\u5ea6\u3002 \u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e09\u5c42\u542b\u4e49\uff1a \u9ad8\u5c42\u6a21\u5757\u4e0d\u5e94\u8be5\u4f9d\u8d56\u4f4e\u5c42\u6a21\u5757\uff0c\u4e24\u8005\u90fd\u5e94\u8be5\u4f9d\u8d56\u5176\u62bd\u8c61\uff08\u62bd\u8c61\u7c7b\u6216\u63a5\u53e3\uff09\uff1b \u62bd\u8c61\u4e0d\u5e94\u8be5\u4f9d\u8d56\u7ec6\u8282\uff08\u5177\u4f53\u5b9e\u73b0\uff09\uff1b \u7ec6\u8282\uff08\u5177\u4f53\u5b9e\u73b0\uff09\u5e94\u8be5\u4f9d\u8d56\u62bd\u8c61\u3002 \u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u57fa\u4e8e\u8fd9\u6837\u4e00\u4e2a\u4e8b\u5b9e\uff1a \u76f8\u5bf9\u4e8e\u7ec6\u8282\u7684\u591a\u53d8\u6027\uff0c\u62bd\u8c61\u7684\u4e1c\u897f\u8981\u7a33\u5b9a\u7684\u591a \u3002\u4ee5\u62bd\u8c61\u4e3a\u57fa\u7840\u642d\u5efa\u8d77\u6765\u7684\u67b6\u6784\u6bd4\u4ee5\u7ec6\u8282\u4e3a\u57fa\u7840\u642d\u5efa\u8d77\u6765\u7684\u67b6\u6784\u8981\u7a33\u5b9a\u7684\u591a\u3002\u5728 Java \u4e2d\uff0c\u62bd\u8c61\u6307\u7684\u662f\u63a5\u53e3\u6216\u8005\u62bd\u8c61\u7c7b\uff0c\u7ec6\u8282\u5c31\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u7c7b\uff0c\u4f7f\u7528\u63a5\u53e3\u6216\u8005\u62bd\u8c61\u7c7b\u7684\u76ee\u7684\u662f\u5236\u5b9a\u597d\u89c4\u8303\u548c\u5951\u7ea6\uff0c\u800c\u4e0d\u53bb\u6d89\u53ca\u4efb\u4f55\u5177\u4f53\u7684\u64cd\u4f5c\uff0c\u628a\u5c55\u73b0\u7ec6\u8282\u7684\u4efb\u52a1\u4ea4\u7ed9\u4ed6\u4eec\u7684\u5b9e\u73b0\u7c7b\u53bb\u5b8c\u6210\u3002 \u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u7684\u6838\u5fc3\u601d\u60f3\u5c31\u662f\u9762\u5411\u63a5\u53e3\u7f16\u7a0b \u3002","title":"5. \u4f9d\u8d56\u5012\u7f6e\u539f\u5219\uff08DIP\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#6-lod-lkp","text":"\u6240\u8c13 LOD \u539f\u5219\uff0c\u5373\uff1a Law of Demeter \uff0c \u8fea\u7c73\u7279\u6cd5\u5219 \uff0c\u53c8\u53eb \u6700\u5c11\u77e5\u8bc6\u539f\u5219 \uff08 Least Knowledge Principle \uff0c\u7b80\u5199 LKP \uff09\uff0c\u5c31\u662f\u8bf4\u4e00\u4e2a\u5bf9\u8c61\u5e94\u5f53\u5bf9\u5176\u4ed6\u5bf9\u8c61\u6709\u5c3d\u53ef\u80fd\u5c11\u7684\u4e86\u89e3\u3002\u901a\u4fd7\u7684\u8bb2\uff0c\u4e00\u4e2a\u7c7b\u5e94\u8be5\u5bf9\u81ea\u5df1\u9700\u8981\u8026\u5408\u6216\u8c03\u7528\u7684\u7c7b\u77e5\u9053\u5f97\u6700\u5c11\uff0c\u88ab\u8026\u5408\u7684\u7c7b\u662f\u5982\u4f55\u7684\u590d\u6742\u90fd\u548c\u6211\u6ca1\u5173\u7cfb\uff0c\u5373\u4e3a\u201c\u4e0d\u548c\u964c\u751f\u4eba\u8bf4\u8bdd\u201d\u3002\u8fea\u7c73\u7279\u6cd5\u5219\u7684\u82f1\u6587\u89e3\u91ca\u5982\u4e0b\uff1a talk only to your immediate friends.( \u53ea\u4e0e\u76f4\u63a5\u7684\u670b\u53cb\u901a\u4fe1 ) \u8fea\u7c73\u7279\u6cd5\u5219\u7684\u521d\u8877\u5728\u4e8e\u964d\u4f4e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408 \u3002\u7531\u4e8e\u6bcf\u4e2a\u7c7b\u5c3d\u91cf\u51cf\u5c11\u5bf9\u5176\u4ed6\u7c7b\u7684\u4f9d\u8d56\uff0c\u56e0\u6b64\uff0c\u5f88\u5bb9\u6613\u4f7f\u5f97\u7cfb\u7edf\u7684\u529f\u80fd\u6a21\u5757\u529f\u80fd\u72ec\u7acb\uff0c\u76f8\u4e92\u4e4b\u95f4\u4e0d\u5b58\u5728\uff08\u6216\u5f88\u5c11\u6709\uff09\u4f9d\u8d56\u5173\u7cfb\u3002 \u8fea\u7c73\u7279\u6cd5\u5219\u4e0d\u5e0c\u671b\u7c7b\u4e4b\u95f4\u5efa\u7acb\u76f4\u63a5\u7684\u8054\u7cfb\u3002\u5982\u679c\u771f\u7684\u6709\u9700\u8981\u5efa\u7acb\u8054\u7cfb\uff0c\u4e5f\u5e0c\u671b\u80fd\u901a\u8fc7\u5b83\u7684\u201c\u670b\u53cb\u201d\u7c7b\u6765\u8f6c\u8fbe\u3002\u56e0\u6b64\uff0c\u5e94\u7528\u8fea\u7c73\u7279\u6cd5\u5219\u6709\u53ef\u80fd\u9020\u6210\u7684\u4e00\u4e2a\u540e\u679c\u5c31\u662f\uff1a\u7cfb\u7edf\u4e2d\u5b58\u5728\u5927\u91cf\u7684\u4e2d\u4ecb\u7c7b\uff0c\u8fd9\u4e9b\u7c7b\u4e4b\u6240\u4ee5\u5b58\u5728\u5b8c\u5168\u662f\u4e3a\u4e86\u4f20\u9012\u7c7b\u4e4b\u95f4\u7684\u76f8\u4e92\u8c03\u7528\u5173\u7cfb\u2014\u2014\u8fd9\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6,\u540c\u65f6\u4e5f\u4e3a\u7cfb\u7edf\u7684\u7ef4\u62a4\u5e26\u6765\u4e86\u96be\u5ea6\u3002\u6240\u4ee5\uff0c\u5728\u91c7\u7528\u8fea\u7c73\u7279\u6cd5\u5219\u65f6\u9700\u8981\u53cd\u590d\u6743\u8861\uff0c\u4e0d\u9075\u5faa\u4e0d\u5bf9\uff0c\u4e25\u683c\u6267\u884c\u53c8\u4f1a\u201c\u8fc7\u72b9\u4e0d\u53ca\u201d\u3002\u65e2\u8981\u505a\u5230\u8ba9\u7ed3\u6784\u6e05\u6670\uff0c\u53c8\u8981\u505a\u5230\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u3002","title":"6. \u8fea\u7c73\u7279\u6cd5\u5219\uff08LOD | LKP\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#7-crp","text":"\u6240\u8c13 CRP \u539f\u5219\uff0c\u5373\uff1a Composite Reuse Principle \uff0c \u7ec4\u5408\u590d\u7528\u539f\u5219 \u3002 \u7ec4\u5408\u590d\u7528\u539f\u5219\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a \u5c3d\u91cf\u4f7f\u7528\u5bf9\u8c61\u7ec4\u5408\uff0c\u800c\u4e0d\u662f\u7ee7\u627f\u6765\u8fbe\u5230\u590d\u7528\u7684\u76ee\u7684 \u3002\u8be5\u539f\u5219\u5c31\u662f\u5728\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u91cc\u9762\u4f7f\u7528\u4e00\u4e9b\u5df2\u6709\u7684\u5bf9\u8c61\uff0c\u4f7f\u4e4b\u6210\u4e3a\u65b0\u5bf9\u8c61\u7684\u4e00\u90e8\u5206\uff1a\u65b0\u7684\u5bf9\u8c61\u901a\u8fc7\u5411\u8fd9\u4e9b\u5bf9\u8c61\u7684\u59d4\u6d3e\u8fbe\u5230\u590d\u7528\u5df2\u6709\u529f\u80fd\u7684\u76ee\u7684\u3002 \u7ee7\u627f\u7684\u7f3a\u70b9\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u70b9\uff1a \u7ee7\u627f\u590d\u7528\u7834\u574f\u6570\u636e\u5c01\u88c5\u6027\uff0c\u5c06\u57fa\u7c7b\u7684\u5b9e\u73b0\u7ec6\u8282\u5168\u90e8\u66b4\u9732\u7ed9\u4e86\u6d3e\u751f\u7c7b\uff0c\u57fa\u7c7b\u7684\u5185\u90e8\u7ec6\u8282\u5e38\u5e38\u5bf9\u6d3e\u751f\u7c7b\u662f\u900f\u660e\u7684\uff0c\u767d\u7bb1\u590d\u7528\u3002\u867d\u7136\u7b80\u5355\uff0c\u4f46\u4e0d\u5b89\u5168\uff0c\u4e0d\u80fd\u5728\u7a0b\u5e8f\u7684\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u968f\u4fbf\u6539\u53d8\u3002 \u57fa\u7c7b\u7684\u5b9e\u73b0\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u6d3e\u751f\u7c7b\u7684\u5b9e\u73b0\u4e5f\u4e0d\u5f97\u4e0d\u6539\u53d8\u3002 \u4ece\u57fa\u7c7b\u7ee7\u627f\u800c\u6765\u7684\u6d3e\u751f\u7c7b\u662f\u9759\u6001\u7684\uff0c\u4e0d\u53ef\u80fd\u5728\u8fd0\u884c\u65f6\u95f4\u5185\u53d1\u751f\u6539\u53d8\uff0c\u56e0\u6b64\u6ca1\u6709\u8db3\u591f\u7684\u7075\u6d3b\u6027\u3002 \u7531\u4e8e\u7ec4\u5408\u53ef\u4ee5\u5c06\u5df2\u6709\u7684\u5bf9\u8c61\u7eb3\u5165\u5230\u65b0\u5bf9\u8c61\u4e2d\uff0c\u4f7f\u4e4b\u6210\u4e3a\u65b0\u5bf9\u8c61\u7684\u4e00\u90e8\u5206\uff0c\u56e0\u6b64\u65b0\u5bf9\u8c61\u53ef\u4ee5\u8c03\u7528\u5df2\u6709\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u8fd9\u6837\u505a\u6709\u4e0b\u9762\u7684\u597d\u5904\uff1a \u65b0\u5bf9\u8c61\u5b58\u53d6 \u7ec4\u6210\u5bf9\u8c61 \u7684\u552f\u4e00\u65b9\u6cd5\u662f\u901a\u8fc7 \u7ec4\u6210\u5bf9\u8c61 \u7684 getter/setter \u65b9\u6cd5\u3002 \u7ec4\u5408\u590d\u7528\u662f\u9ed1\u7bb1\u590d\u7528\uff0c\u56e0\u4e3a\u7ec4\u6210\u5bf9\u8c61\u7684\u5185\u90e8\u7ec6\u8282\u662f\u65b0\u5bf9\u8c61\u6240\u770b\u4e0d\u89c1\u7684\u3002 \u7ec4\u5408\u590d\u7528\u6240\u9700\u8981\u7684\u4f9d\u8d56\u8f83\u5c11\u3002 \u6bcf\u4e00\u4e2a\u65b0\u7684\u7c7b\u53ef\u4ee5\u5c06\u7126\u70b9\u96c6\u4e2d\u5230\u4e00\u4e2a\u4efb\u52a1\u4e0a\u3002 \u7ec4\u5408\u590d\u7528\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u95f4\u52a8\u6001\u8fdb\u884c\uff0c\u65b0\u5bf9\u8c61\u53ef\u4ee5\u52a8\u6001\u7684\u5f15\u7528\u4e0e\u6210\u5206\u5bf9\u8c61\u7c7b\u578b\u76f8\u540c\u7684\u5bf9\u8c61\u3002 \u7ec4\u5408\u590d\u7528\u7684\u7f3a\u70b9\uff1a\u5c31\u662f\u7528\u7ec4\u5408\u590d\u7528\u5efa\u9020\u7684\u7cfb\u7edf\u4f1a\u6709\u8f83\u591a\u7684\u5bf9\u8c61\u9700\u8981\u7ba1\u7406\u3002 \u7ec4\u5408\u590d\u7528\u539f\u5219\u53ef\u4ee5\u4f7f\u7cfb\u7edf\u66f4\u52a0\u7075\u6d3b\uff0c\u7c7b\u4e0e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\u964d\u4f4e\uff0c\u4e00\u4e2a\u7c7b\u7684\u53d8\u5316\u5bf9\u5176\u4ed6\u7c7b\u9020\u6210\u7684\u5f71\u54cd\u76f8\u5bf9\u8f83\u5c11\uff0c\u56e0\u6b64\u4e00\u822c\u9996\u9009\u4f7f\u7528\u7ec4\u5408\u6765\u5b9e\u73b0\u590d\u7528\uff1b\u5176\u6b21\u624d\u8003\u8651\u7ee7\u627f\u3002\u5728\u4f7f\u7528\u7ee7\u627f\u65f6\uff0c\u9700\u8981\u4e25\u683c\u9075\u5faa\u91cc\u6c0f\u4ee3\u6362\u539f\u5219\uff0c\u6709\u6548\u4f7f\u7528\u7ee7\u627f\u4f1a\u6709\u52a9\u4e8e\u5bf9\u95ee\u9898\u7684\u7406\u89e3\uff0c\u964d\u4f4e\u590d\u6742\u5ea6\uff0c\u800c\u6ee5\u7528\u7ee7\u627f\u53cd\u800c\u4f1a\u589e\u52a0\u7cfb\u7edf\u6784\u5efa\u548c\u7ef4\u62a4\u7684\u96be\u5ea6\u4ee5\u53ca\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\uff0c\u56e0\u6b64\u9700\u8981\u614e\u91cd\u4f7f\u7528\u7ee7\u627f\u590d\u7528\u3002 \u4f7f\u7528\u7ee7\u627f\u65f6\u5fc5\u987b\u6ee1\u8db3 Is-A \u7684\u5173\u7cfb\u662f\u624d\u80fd\u4f7f\u7528\u7ee7\u627f\uff0c\u800c\u7ec4\u5408\u5374\u662f\u4e00\u79cd Has-A \u7684\u5173\u7cfb\u3002\u5bfc\u81f4\u9519\u8bef\u7684\u4f7f\u7528\u7ee7\u627f\u800c\u4e0d\u662f\u4f7f\u7528\u7ec4\u5408\u7684\u4e00\u4e2a\u91cd\u8981\u539f\u56e0\u53ef\u80fd\u5c31\u662f\u9519\u8bef\u7684\u628a Has-A \u5f53\u6210\u4e86 Is-A \u3002","title":"7. \u7ec4\u5408\u590d\u7528\u539f\u5219\uff08CRP\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#_3","text":"","title":"\u4e09\u3001\u901a\u7528\u8bbe\u8ba1\u539f\u5219"},{"location":"Design-Patterns/1-DesignPrinciples/#1-kiss","text":"\u6240\u8c13 KISS \u539f\u5219\uff0c\u5373\uff1a Keep It Simple,Stupid \uff0c\u6307 \u8bbe\u8ba1\u65f6\u8981\u575a\u6301\u7b80\u7ea6\u539f\u5219\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u590d\u6742\u5316\uff0c\u5e76\u4e14\u6613\u4e8e\u4fee\u6539 \u3002 Everything should be made as simple as possible, but not simpler. - Albert Einstein \u7b80\u5355\u6e05\u6670\u3001\u529f\u80fd\u5f3a\u5927\u662f\u8f6f\u4ef6\u8bbe\u8ba1\u6700\u91cd\u8981\u7684\u539f\u5219\u548c\u76ee\u6807\u3002\u4f46\u662f\u8f6f\u4ef6\u5de5\u7a0b\u5929\u7136\u9519\u7efc\u590d\u6742\uff0c\u800c\u201c\u7b80\u5355\u201d\u5374\u6ca1\u6709\u4e00\u4e2a\u8861\u91cf\u6807\u51c6\uff0c\u5224\u65ad\u548c\u5b9e\u73b0\u4e00\u4e2a\u4e1c\u897f\u662f\u4e0d\u662f\u7b80\u5355\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u6765\u53c2\u8003\u3002 \u8ba9\u522b\u7684\u8f6f\u4ef6\u5de5\u7a0b\u5e08\u4ee5\u4e00\u79cd\u6700\u5bb9\u6613\u7684\u65b9\u5f0f\u4f7f\u7528\u4f60\u7684\u65b9\u6848\u3002 \u7b80\u5355\u4e0d\u662f\u8d70\u6377\u5f84\uff0c\u4e0d\u662f\u4e3a\u624b\u8fb9\u7684\u95ee\u9898\u627e\u4e00\u4e2a\u6700\u5feb\u7684\u65b9\u6848\u3002 \u5f53\u7cfb\u7edf\u53d8\u5f97\u66f4\u5e9e\u5927\u66f4\u590d\u6742\u7684\u65f6\u5019\u4f9d\u7136\u80fd\u591f\u88ab\u7406\u89e3\u3002 \u5982\u679c\u7cfb\u7edf\u65e0\u6cd5\u4fdd\u6301\u7b80\u5355\uff0c\u90a3\u4e48\u6211\u4eec\u80fd\u505a\u7684\u5c31\u662f\u4fdd\u6301\u5404\u4e2a\u5c40\u90e8\u7b80\u5355\uff0c\u5373\u4efb\u4f55\u5355\u4e2a\u7684\u7c7b\u3001\u6a21\u5757\u3001\u5e94\u7528\u7684\u8bbe\u8ba1\u76ee\u6807\u53ca\u5de5\u4f5c\u539f\u7406\u90fd\u80fd\u88ab\u5feb\u901f\u7406\u89e3\u3002 \u6211\u7684\u7406\u89e3 \uff1a\u4fdd\u6301\u7b80\u5355\u4f46\u4e0d\u80fd\u63a9\u76d6\u8f6f\u4ef6\u4e30\u5bcc\u7684\u5185\u6db5\u3002\u5373 \u7b80\u7ea6\u800c\u4e0d\u7b80\u5355 \uff01\u7b80\u7ea6\u662f\u5bf9\u590d\u6742\u7684\u4e8b\u7269\u62bd\u4e1d\u5265\u8327\u3001\u53bb\u9664\u7ec6\u679d\u672b\u8282\u663e\u9732\u4e3b\u8981\u903b\u8f91\u7684\u8fc7\u7a0b\u3002\u5c31\u50cf\u5c0f\u65f6\u5019\u8001\u5e08\u6559\u5199\u6587\u7ae0\uff0c\u8981\u6c42\u5c3d\u53ef\u80fd\u7528\u6734\u5b9e\u7684\u8bed\u8a00\uff0c\u8a00\u7b80\u610f\u8d45\u7684\u5199\u51fa\u6765\uff0c\u4f46\u5374\u53c8\u8981\u907f\u514d\u8bed\u8a00\u8fc7\u4e8e\u8d2b\u4e4f\u3002\u8f6f\u4ef6\u7684\u201c\u62bd\u8c61\u201d\u548c\u5b83\u7684\u201c\u76f4\u89c2\u6027\u201d\uff0c\u5176\u5b9e\u662f\u4e00\u5bf9\u77db\u76fe\u7684\u5173\u7cfb\uff0c\u8f6f\u4ef6\u8bbe\u8ba1\u5c31\u8981\u4fdd\u8bc1\u8fd9\u4e24\u8005\u7684\u5e73\u8861\u3002\u4ee3\u7801\u62bd\u8c61\u8fc7\u4e8e\u590d\u6742\u4f1a\u9677\u5165\u201c\u8fc7\u5ea6\u8bbe\u8ba1\u201d\u4e0d\u6613\u7406\u89e3\u7684\u56f0\u5883\uff1b\u4e3a\u4e86\u201c\u76f4\u89c2\u6027\u201d\u7f3a\u4e4f\u62bd\u8c61\uff0c\u957f\u6b64\u4ee5\u5f80\u53c8\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u91cd\u590d\u3001\u4e0d\u6613\u4e8e\u6269\u5c55\u548c\u96be\u7ef4\u62a4\u7684\u56f0\u5883\u3002","title":"1. \u4fdd\u6301\u7b80\u5355\uff08KISS\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#2-dry","text":"\u6240\u8c13 DRY \u539f\u5219\uff0c\u5373\uff1a Don't Repeat Yourself \uff0c \u4e0d\u8981\u8ba9\u81ea\u5df1\u91cd\u590d \u3002 \u91cd\u590d\u4ee3\u7801\u662f\u8f6f\u4ef6\u7a0b\u5e8f\u53d8\u70c2\u7684\u4e07\u6076\u4e4b\u9996 \u3002 DRY \u5e76\u4e0d\u662f\u6307\u4f60\u4e0d\u80fd\u590d\u5236\u4ee3\u7801\uff0c\u800c\u662f\u4f60\u590d\u5236\u7684\u4ee3\u7801\u4e0d\u80fd\u5305\u542b\u91cd\u590d\u7684\u201c\u4fe1\u606f\u201d\u3002\u590d\u5236\u7684\u4e1c\u897f\u5e76\u4e0d\u4ec5\u4ec5\u662f\u590d\u5236\u4e86\u4ee3\u7801\uff0c\u800c\u662f\u7531\u4e8e\u4f60\u628a\u540c\u4e00\u4e2a\u4fe1\u606f\u6563\u64ad\u5728\u4e86\u4ee3\u7801\u7684\u5404\u4e2a\u90e8\u5206\u5bfc\u81f4\u4e86\u6709\u5f88\u591a\u76f8\u8fd1\u7684\u4ee3\u7801\u4e5f\u6563\u64ad\u5728\u5404\u4e2a\u5730\u65b9\u3002\u4ee3\u7801\u4e4b\u6240\u4ee5\u8981\u5199\u7684\u597d\uff0c\u4e0d\u8981\u91cd\u590d\u67d0\u4e9b\u201c\u4fe1\u606f\u201d\uff0c\u56e0\u4e3a\u9700\u6c42\u4eba\u5458\u603b\u662f\u8981\u6539\u9700\u6c42\uff0c\u4e0d\u6539\u4ee3\u7801\u4f60\u5c31\u8981\u201c\u6b7b\u201d\uff0c\u6539\u4ee3\u7801\u4f60\u5c31\u8981\u52a0\u73ed\uff0c\u6240\u4ee5\u4e3a\u4e86\u51cf\u5c11\u4fee\u6539\u4ee3\u7801\u7684\u75db\u82e6\uff0c\u6211\u4eec\u4e0d\u80fd\u91cd\u590d\u4efb\u4f55\u4fe1\u606f\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6709\u4e00\u5929\u9700\u6c42\u4eba\u5458\u8bf4\uff0c\u8981\u628a\u5206\u9694\u7b26\u4ece\u5206\u53f7\u6539\u6210\u987f\u53f7\uff01\u4e00\u4e0b\u5b50\u5c31\u8981\u6539\u591a\u4e2a\u5730\u65b9\u4e86\u3002 \u6240\u4ee5\uff0c \u53bb\u6389\u91cd\u590d\u7684\u4fe1\u606f\u4f1a\u8ba9\u4f60\u7684\u4ee3\u7801\u7ed3\u6784\u53d1\u751f\u672c\u8d28\u7684\u53d8\u5316 \u3002 \u201c\u91cd\u590d\u4ee3\u7801\u201d\u6709\u5f88\u591a\u53d8\u4f53\uff1a \u9b54\u6cd5\u6570\u5b57\u3001\u9b54\u6cd5\u5b57\u7b26\u4e32\u7b49 \u76f8\u540c\u4ee3\u7801\u5757 \u76f8\u4f3c\u7684\u4ee3\u7801\u903b\u8f91\u53ca\u64cd\u4f5c \u5bf9\u4e8e\u6d88\u9664\u91cd\u590d\u7684\u4ee3\u7801\u6709 \u4e8b\u4e0d\u8fc7\u4e09 \u6cd5\u5219\u3002 \u7b2c\u4e00\u6b21\u5148\u5199\u4e86\u4e00\u6bb5\u4ee3\u7801\u3002 \u7b2c\u4e8c\u6b21\u5728\u53e6\u4e00\u4e2a\u5730\u65b9\u5199\u4e86\u4e00\u6bb5\u76f8\u540c\u6216\u76f8\u4f3c\u903b\u8f91\u7684\u4ee3\u7801\uff0c\u4f60\u5df2\u7ecf\u6709\u6d88\u9664\u548c\u63d0\u53d6\u91cd\u590d\u4ee3\u7801\u7684\u51b2\u52a8\u4e86\u3002 \u518d\u6b21\u5728\u53e6\u4e00\u4e2a\u5730\u65b9\u5199\u4e86\u540c\u6837\u7684\u4ee3\u7801\uff0c\u4f60\u5df2\u5fcd\u65e0\u53ef\u5fcd\uff0c\u73b0\u5728\u53ef\u4ee5\u8003\u8651\u62bd\u53d6\u548c\u6d88\u9664\u91cd\u590d\u4ee3\u7801\u4e86\u3002 \u6211\u7684\u7406\u89e3 \uff1a\u89e3\u51b3\u91cd\u590d\u7684\u6700\u4f73\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u57f9\u517b\u826f\u597d\u7684\u7f16\u7801\u4e60\u60ef\u6765\u907f\u514d\u91cd\u590d\uff0c\u901a\u8fc7\u91cd\u6784\u7684\u624b\u6bb5\u6765\u6d88\u9664\u91cd\u590d\u3002\u53d1\u73b0\u548c\u89e3\u51b3\u91cd\u590d\u5e76\u4e0d\u56f0\u96be\uff0c\u901a\u8fc7\u63d0\u53d6\u62bd\u8c61\u3001\u63d0\u53d6\u65b9\u6cd5\u7b49\u63aa\u65bd\u5c31\u80fd\u6d88\u9664\u91cd\u590d\uff0c\u4f46\u56f0\u96be\u7684\u662f \u7acb\u5373\u884c\u52a8 \u53bb\u89e3\u51b3\u91cd\u590d\uff0c\u4ece\u800c\u4e0d\u65ad\u7684\u78e8\u783a\u548c\u63d0\u5347\u81ea\u5df1\u7684\u7f16\u7a0b\u6280\u827a\uff0c\u4e0d\u65ad\u5c06\u79c1\u4eba\u4ee3\u7801\u53d8\u6210\u516c\u5171\u4ee3\u7801\uff0c\u8fd9\u624d\u662f\u81ea\u6211\u63d0\u5347\u7684\u8fc7\u7a0b\u3002\u89e3\u51b3\u4e86\u91cd\u590d\uff0c\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\uff0c\u4f60\u5bf9\u6574\u4e2a\u7cfb\u7edf\u7684\u7406\u89e3\u7a0b\u5ea6\u5728\u4e0d\u77e5\u4e0d\u89c9\u4e2d\u63d0\u9ad8\u4e86\u4e0d\u5c11\u3002","title":"2. \u4e0d\u8981\u91cd\u590d\uff08 DRY\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#3","text":"\u6240\u8c13 Maximize Cohesion,Minimize Coupling \u539f\u5219\uff0c\u5373\uff1a \u9ad8\u5185\u805a\u4f4e\u8026\u5408 \u3002\u8fd9\u662f\u5224\u65ad\u8bbe\u8ba1\u597d\u574f\u7684\u6807\u51c6\uff0c\u4e3b\u8981\u662f\u770b \u6a21\u5757\u5185\u7684\u5185\u805a\u6027\u662f\u5426\u9ad8\uff0c\u6a21\u5757\u95f4\u7684\u8026\u5408\u5ea6\u662f\u5426\u4f4e\u3002 \u8026\u5408\u6027 \uff1a\u4e5f\u79f0\u5757\u95f4\u8054\u7cfb\u3002\u6307\u8f6f\u4ef6\u7cfb\u7edf\u7ed3\u6784\u4e2d\u5404\u6a21\u5757\u95f4\u76f8\u4e92\u8054\u7cfb\u7d27\u5bc6\u7a0b\u5ea6\u7684\u4e00\u79cd\u5ea6\u91cf\u3002\u6a21\u5757\u4e4b\u95f4\u8054\u7cfb\u8d8a\u7d27\u5bc6\uff0c\u5176\u8026\u5408\u6027\u5c31\u8d8a\u5f3a\uff0c\u6a21\u5757\u7684\u72ec\u7acb\u6027\u5219\u8d8a\u5dee\u3002\u6a21\u5757\u95f4\u8026\u5408\u9ad8\u4f4e\u53d6\u51b3\u4e8e\u6a21\u5757\u95f4\u63a5\u53e3\u7684\u590d\u6742\u6027\u3001\u8c03\u7528\u7684\u65b9\u5f0f\u53ca\u4f20\u9012\u7684\u4fe1\u606f\u3002\u8026\u5408\u662f\u8f6f\u4ef6\u7ed3\u6784\u4e2d\u5404\u6a21\u5757\u4e4b\u95f4\u76f8\u4e92\u8fde\u63a5\u7684\u4e00\u79cd\u5ea6\u91cf\uff0c\u8026\u5408\u5f3a\u5f31\u53d6\u51b3\u4e8e\u6a21\u5757\u95f4\u63a5\u53e3\u7684\u590d\u6742\u7a0b\u5ea6\u3001\u8fdb\u5165\u6216\u8bbf\u95ee\u4e00\u4e2a\u6a21\u5757\u7684\u70b9\u4ee5\u53ca\u901a\u8fc7\u63a5\u53e3\u7684\u6570\u636e\u3002 \u5185\u805a\u6027 \uff1a\u53c8\u79f0\u5757\u5185\u8054\u7cfb\u3002\u6307\u6a21\u5757\u7684\u529f\u80fd\u5f3a\u5ea6\u7684\u5ea6\u91cf\uff0c\u5373\u4e00\u4e2a\u6a21\u5757\u5185\u90e8\u5404\u4e2a\u5143\u7d20\u5f7c\u6b64\u7ed3\u5408\u7684\u7d27\u5bc6\u7a0b\u5ea6\u7684\u5ea6\u91cf\u3002\u82e5\u4e00\u4e2a\u6a21\u5757\u5185\u5404\u5143\u7d20\uff08\u8bed\u540d\u4e4b\u95f4\u3001\u7a0b\u5e8f\u6bb5\u4e4b\u95f4\uff09\u8054\u7cfb\u7684\u8d8a\u7d27\u5bc6\uff0c\u5219\u5b83\u7684\u5185\u805a\u6027\u5c31\u8d8a\u9ad8\u3002\u5185\u805a\u662f\u4ece\u529f\u80fd\u89d2\u5ea6\u6765\u5ea6\u91cf\u6a21\u5757\u5185\u7684\u8054\u7cfb\uff0c\u4e00\u4e2a\u597d\u7684\u5185\u805a\u6a21\u5757\u5e94\u5f53\u6070\u597d\u505a\u4e00\u4ef6\u4e8b\u3002\u5b83\u63cf\u8ff0\u7684\u662f\u6a21\u5757\u5185\u7684\u529f\u80fd\u8054\u7cfb\u3002 \u5185\u805a\u548c\u8026\u5408\u662f\u5bc6\u5207\u76f8\u5173\u7684\uff0c\u540c\u5176\u4ed6\u6a21\u5757\u5b58\u5728\u9ad8\u8026\u5408\u7684\u6a21\u5757\u610f\u5473\u7740\u4f4e\u5185\u805a\uff0c\u800c\u9ad8\u5185\u805a\u7684\u6a21\u5757\u610f\u5473\u7740\u8be5\u6a21\u5757\u540c\u5176\u4ed6\u6a21\u5757\u4e4b\u95f4\u662f\u4f4e\u8026\u5408\u3002\u5728\u8fdb\u884c\u8f6f\u4ef6\u8bbe\u8ba1\u65f6\uff0c\u5e94\u529b\u4e89\u505a\u5230\u9ad8\u5185\u805a\uff0c\u4f4e\u8026\u5408\u3002 Java \u4e2d\u5b9e\u73b0\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u7684\u5e38\u7528\u65b9\u5f0f\uff1a \u5c11\u4f7f\u7528\u7c7b\u7684\u7ee7\u627f\uff0c\u591a\u7528\u63a5\u53e3\u9690\u85cf\u5b9e\u73b0\u7684\u7ec6\u8282\u3002 \u6a21\u5757\u7684\u529f\u80fd\u5316\u5206\u5c3d\u53ef\u80fd\u7684\u5355\u4e00\uff0c\u9053\u7406\u4e5f\u5f88\u7b80\u5355\uff0c\u529f\u80fd\u5355\u4e00\u7684\u6a21\u5757\u4f9b\u5176\u5b83\u6a21\u5757\u8c03\u7528\u7684\u673a\u4f1a\u5c31\u5c11\u3002 \u9075\u5faa\u4e00\u4e2a\u5b9a\u4e49\u53ea\u5728\u4e00\u4e2a\u5730\u65b9\u51fa\u73b0\u3002 \u5c11\u4f7f\u7528\u5168\u5c40\u53d8\u91cf\u3002 \u7c7b\u5c5e\u6027\u548c\u65b9\u6cd5\u7684\u58f0\u660e\u5c11\u7528 public \uff0c\u591a\u7528 private \u5173\u952e\u5b57\uff0c \u591a\u7528\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u6bd4\u5982\u91c7\u7528 MVC \u7684\u8bbe\u8ba1\u6a21\u5f0f\u5c31\u53ef\u4ee5\u964d\u4f4e\u754c\u9762\u4e0e\u4e1a\u52a1\u903b\u8f91\u7684\u8026\u5408\u5ea6\u3002 \u5c3d\u91cf\u4e0d\u7528\u201c\u786c\u7f16\u7801\u201d\u7684\u65b9\u5f0f\u5199\u7a0b\u5e8f\u3002 \u6700\u540e\u5f53\u7136\u5c31\u662f\u907f\u514d\u76f4\u63a5\u64cd\u4f5c\u6216\u8c03\u7528\u5176\u5b83\u6a21\u5757\u6216\u7c7b\uff08\u5185\u5bb9\u8026\u5408\uff09\u3002","title":"3. \u9ad8\u5185\u805a\u4f4e\u8026\u5408"},{"location":"Design-Patterns/1-DesignPrinciples/#4-soc","text":"\u6240\u8c13 SOC \u539f\u5219\uff0c\u5373\uff1a \u5173\u6ce8\u70b9\u5206\u79bb \uff08 Separation of Concerns \uff09\u3002 \u4e0d\u540c\u9886\u57df\u7684\u529f\u80fd\uff0c\u5e94\u8be5\u7531\u4e0d\u540c\u7684\u4ee3\u7801\u548c\u6700\u5c0f\u91cd\u8fed\u7684\u6a21\u5757\u7ec4\u6210\u3002 \u5173\u6ce8\u70b9\u5206\u79bb\u662f\u5904\u7406\u590d\u6742\u6027\u7684\u4e00\u4e2a\u539f\u5219\u3002\u7531\u4e8e\u5173\u6ce8\u70b9\u6df7\u6742\u5728\u4e00\u8d77\u4f1a\u5bfc\u81f4\u8f6f\u4ef6\u7a0b\u5e8f\u590d\u6742\u6027\u5927\u5927\u589e\u52a0\uff0c\u6240\u4ee5\u80fd\u591f\u628a\u4e0d\u540c\u7684\u5173\u6ce8\u70b9\u5206\u79bb\u5f00\u6765\uff0c\u5206\u522b\u5904\u7406\u5c31\u662f\u5904\u7406\u590d\u6742\u6027\u7684\u4e00\u4e2a\u539f\u5219\uff0c\u4e00\u79cd\u65b9\u6cd5\u3002\u5173\u6ce8\u70b9\u5206\u79bb\u539f\u5219\u4e0d\u4ec5\u4f53\u73b0\u5728\u8f6f\u4ef6\u7a0b\u5e8f\u8bbe\u8ba1\u7b49\u8bbe\u8ba1\u65b9\u6cd5\u4e2d\uff0c\u540c\u65f6\u4e5f\u4f53\u73b0\u5728\u67b6\u6784\u8bbe\u8ba1\u3001\u95ee\u9898\u6c42\u89e3\u3001\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u3001\u8f6f\u4ef6\u9879\u76ee\u7ba1\u7406\u4ee5\u53ca\u8f6f\u4ef6\u5f00\u53d1\u65b9\u6cd5\u5b66\u7b49\u8bf8\u591a\u65b9\u9762\u3002 MVC \u5c31\u662f\u5173\u6ce8\u70b9\u5206\u79bb\u7684\u4e00\u4e2a\u4f53\u73b0\uff0c\u628a\u4e1a\u52a1\u903b\u8f91\u3001\u6570\u636e\u3001\u754c\u9762\u5206\u79bb\uff0c\u8fd9\u4e5f\u662f\u7ec4\u7ec7\u4ee3\u7801\u7ed3\u6784\u7684\u4e00\u4e2a\u5f62\u5f0f\u3002 MVC \u7684\u57fa\u672c\u7ed3\u6784\uff1a Model \u5c42\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u7684\u6570\u636e\u6838\u5fc3\uff0c\u901a\u5e38\u8d1f\u8d23\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u53d6\u6570\u636e\u3002 View \u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u663e\u793a\u5c42\uff0c\u901a\u5e38\u662f\u4f9d\u636e\u6a21\u578b\u7684\u6570\u636e\u800c\u5efa\u7acb\u3002 Controller \u662f\u7528\u6765\u63a7\u5236\u548c\u5904\u7406\u8f93\u5165\u8f93\u51fa\u7684\uff0c\u662f\u5904\u7406\u7528\u6237\u4ea4\u4e92\u7684\u90e8\u5206\uff0c\u4e5f\u8d1f\u8d23\u5411\u6a21\u578b\uff08 Model \u5c42\uff09\u53d1\u9001\u6570\u636e\u3002 MVC \u7684\u8fd9\u4e2a\u8bbe\u8ba1\u5404\u4e2a\u5173\u6ce8\u70b9\u662f\u5206\u5f00\u7684\uff0c\u8fd9\u6837\u6709\u52a9\u4e8e\u6211\u4eec\u7ba1\u7406\u548c\u5f00\u53d1\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u53ea\u96c6\u4e2d\u7cbe\u529b\u5728\u5176\u4e2d\u7684\u67d0\u4e00\u4e2a\u5173\u6ce8\u70b9\uff0c\u800c\u4e0d\u662f\u6240\u6709\u7684\u90e8\u5206\u3002 \u597d\u7684\u67b6\u6784\u5fc5\u987b\u4f7f\u6bcf\u4e2a\u5173\u6ce8\u70b9\u76f8\u4e92\u5206\u79bb\uff0c\u4e5f\u5c31\u662f\u8bf4\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u90e8\u5206\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u90e8\u5206\u3002\u5373\u4f7f\u9700\u8981\u6539\u53d8\uff0c\u4e5f\u80fd\u591f\u6e05\u6670\u5730\u8bc6\u522b\u51fa\u90a3\u4e9b\u90e8\u5206\u9700\u8981\u6539\u53d8\u3002\u5982\u679c\u9700\u8981\u6269\u5c55\u67b6\u6784\uff0c\u5f71\u54cd\u5c06\u4f1a\u6700\u5c0f\u5316\uff0c\u5df2\u7ecf\u53ef\u4ee5\u5de5\u4f5c\u7684\u6bcf\u4e2a\u90e8\u5206\u90fd\u5c06\u7ee7\u7eed\u5de5\u4f5c\u3002\u2014\u2014Ivar Jacobson(\u300aAOSD \u4e2d\u6587\u7248\u300b)","title":"4. \u5173\u6ce8\u70b9\u5206\u79bb\uff08SOC\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#5-yagni","text":"\u6240\u8c13 YAGNI \u539f\u5219\uff0c\u5373\uff1a You Ain\u2019t Gonna Need It \uff0c \u4f60\u4e0d\u9700\u8981\u5b83 \u3002\u5b83\u662f\u4e00\u79cd\u6781\u9650\u7f16\u7a0b\uff08XP\uff09\u5b9e\u8df5\uff0c\u8868\u793a\u7a0b\u5e8f\u5458\u4e0d\u5e94\u4e3a\u76ee\u524d\u8fd8\u4e0d\u9700\u8981\u7684\u529f\u80fd\u7f16\u5199\u4ee3\u7801\u3002 YAGNI \u5f88\u50cf KISS \u539f\u5219\uff0c\u56e0\u4e3a\u5b83\u4e5f\u662f\u81f4\u529b\u4e8e\u6784\u5efa\u7b80\u5355\u7684\u65b9\u6848\u3002\u7136\u800c\uff0c KISS \u662f\u901a\u8fc7\u5c3d\u53ef\u80fd\u5bb9\u6613\u7684\u5b8c\u6210\u67d0\u4ef6\u4e8b\u60c5\u6765\u5b9e\u73b0\u7cbe\u7b80\u65b9\u6848\uff1b\u4f46 YAGNI \u662f\u901a\u8fc7\u6839\u672c\u5c31\u4e0d\u5b9e\u73b0\u5b83\u6765\u8fbe\u5230\u7cbe\u7b80\u3002 YAGNI \u7684\u89c2\u70b9\u662f\u4f60\u5e94\u8be5 \u4e3a\u4e86\u773c\u524d\u7684\u9700\u6c42\u505a\u8bbe\u8ba1\u800c\u4e0d\u662f\u672a\u6765 \u3002 \u53ea\u5728\u771f\u6b63\u9700\u8981\u67d0\u4e9b\u529f\u80fd\u7684\u65f6\u5019\u624d\u53bb\u5b9e\u73b0\u5b83\uff0c\u800c\u4e0d\u662f\u4ec5\u4ec5\u56e0\u4e3a\u4f60\u9884\u89c1\u5230\u5b83\u5c06\u51fa\u73b0\u3002- XP \u7684\u8054\u5408\u521b\u59cb\u4eba Ron Jeffries \u5373\u4f7f\u4f60\u975e\u5e38\u786e\u4fe1\u5c06\u6765\u4f60\u9700\u8981\u67d0\u4e2a\u7279\u6027\uff0c\u4e5f\u4e0d\u8981\u73b0\u5728\u5c31\u53bb\u5b9e\u73b0\u5b83\u3002\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u4f60\u4f1a\u53d1\u73b0\u6216\u8bb8\u6700\u7ec8\u4f60\u4e0d\u9700\u8981\u5b83\u4e86\uff0c\u6216\u8005\u662f\u4f60\u771f\u6b63\u6240\u9700\u7684\u7279\u6027\u4e0e\u4f60\u4e4b\u524d\u9884\u8ba1\u7684\u6709\u5f88\u5927\u7684\u51fa\u5165\u3002\u9075\u5faa YAGNI \u5b9e\u8df5\u6709\u4e24\u4e2a\u4e3b\u8981\u539f\u56e0\uff1a \u4f60\u8282\u7ea6\u4e86\u65f6\u95f4\uff0c\u56e0\u4e3a\u4f60\u907f\u514d\u4e86\u7f16\u5199\u6700\u7ec8\u8bc1\u660e\u4e0d\u5fc5\u8981\u7684\u4ee3\u7801\u3002 \u4f60\u7684\u4ee3\u7801\u8d28\u91cf\u66f4\u9ad8\u4e86\uff0c\u56e0\u4e3a\u4f60\u4f7f\u4ee3\u7801\u4e0d\u5fc5\u4e3a\u4f60\u7684\u201c\u63a8\u6d4b\u201d\u6240\u6c61\u67d3\uff0c\u800c\u8fd9\u4e9b\u201c\u63a8\u6d4b\u201d\u6700\u7ec8\u53ef\u80fd\u6216\u591a\u6216\u5c11\u6709\u4e9b\u9519\u8bef\uff0c\u4f46\u6b64\u65f6\u8fd9\u4e9b\u9519\u8bef\u5df2\u7262\u7262\u5730\u4f9d\u9644\u5728\u4f60\u7684\u4ee3\u7801\u4e2d\u4e86\u3002 \u6211\u7684\u7406\u89e3 \uff1aYAGNI \u539f\u5219\uff0c\u672c\u8d28\u4e0a\u662f\u544a\u8beb\u6211\u4eec \u5199\u4ee3\u7801\u4e0d\u8981\u753b\u86c7\u6dfb\u8db3\uff0c\u5426\u5219\u5c31\u4f1a\u5f04\u5de7\u6210\u62d9\u4e86 \u3002\u7f16\u5199\u4e1a\u52a1\u4ee3\u7801\u65f6\uff0c\u4e0d\u8981\u53bb\u5047\u60f3\u4e00\u4e9b\u9700\u6c42\u6216\u8005\u573a\u666f\uff0c\u56e0\u4e3a\u5927\u591a\u6570\u4f60\u6240\u8bbe\u60f3\u7684\u573a\u666f\u90fd\u4e0d\u4f1a\u53d1\u751f\uff0c\u800c\u4f60\u6240\u591a\u5199\u7684\u90a3\u4e9b\u4ee3\u7801\u4e5f\u5c06\u4f1a\u957f\u671f\u6ede\u7559\u5728\u4f60\u7684\u7cfb\u7edf\u4e2d\uff0c\u6536\u6548\u751a\u5fae\uff0c\u4f46\u5374\u8ba9\u4f60\u548c\u56e2\u961f\u82b1\u8d39\u4e86\u66f4\u591a\u7684\u65f6\u95f4\u548c\u7cbe\u529b\u53bb\u4e66\u5199\u548c\u7ef4\u62a4\uff0c\u66f4\u53ef\u6015\u7684\u662f\u53ef\u80fd\u4f1a\u5bf9\u5c06\u6765\u65b0\u7684\u4ee3\u7801\u7ef4\u62a4\u4eba\u9020\u6210\u56f0\u60d1\u3002\u53e6\u5916\u5bf9\u4e8e\u6ca1\u6709\u88ab\u4f7f\u7528\u5230\u7684\u4ee3\u7801\uff0c\u6211\u8ba4\u4e3a\u4e5f\u90fd\u5e94\u8be5\u7acb\u5373\u5220\u9664\uff0c\u4ece\u800c\u4fdd\u6301\u7cfb\u7edf\u7684\u7cbe\u7b80\uff0c\u5982\u679c\u5c06\u6765\u9700\u8981\u65f6\u518d\u53bb\u4e66\u5199\u6216\u6062\u590d\uff0c\u800c\u4e14\u90a3\u65f6\u4faf\u5199\u51fa\u7684\u4ee3\u7801\u4e5f\u7edd\u5bf9\u6bd4\u4e4b\u524d\u7684\u66f4\u4e3a\u5951\u5408\u3002","title":"5. \u4f60\u4e0d\u9700\u8981\u5b83\uff08YAGNI\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#6-boy-scout-rule","text":"Boy-Scout Rule \uff0c\u8bd1\u4e3a\uff1a \u7ae5\u5b50\u519b\u89c4\u5219 \u3002\u7f8e\u56fd\u7ae5\u5b50\u519b\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u89c4\u5219\uff1a\u201c\u8ba9\u8425\u5730\u6bd4\u4f60\u521a\u6765\u65f6\u66f4\u5e72\u51c0( Always leave the campground cleaner than you found it )\u201d\u3002\u5982\u679c\u770b\u5230\u5730\u4e0a\u6709\u5783\u573e\uff0c\u4e0d\u7ba1\u662f\u8c01\u6254\u7684\uff0c\u90fd\u8981\u6e05\u7406\u3002\u8fd9\u6837\u4f60\u5c31\u6709\u610f\u5730\u4e3a\u4e0b\u4e00\u6279\u6765\u5bbf\u8425\u7684\u4eba\u6539\u5584\u4e86\u73af\u5883\u3002 \u7ae5\u5b50\u519b\u89c4\u5219\u544a\u8bc9\u6211\u4eec\u5728\u5bf9\u73b0\u6709\u4ee3\u7801\u5e93\u8fdb\u884c\u66f4\u6539\u65f6\uff0c\u4ee3\u7801\u8d28\u91cf\u5f80\u5f80\u4f1a\u964d\u4f4e\uff0c\u4ece\u800c\u79ef\u7d2f\u6280\u672f\u503a\u52a1\u3002\u6240\u4ee5\u9700\u8981 \u59cb\u7ec8\u4fdd\u6301\u4ee3\u7801\u6574\u6d01 \u3002\u4e0d\u7ba1\u539f\u4f5c\u8005\u662f\u8c01\uff0c\u5982\u679c\u6211\u4eec\u52aa\u529b\u53bb\u6539\u8fdb\u4ee3\u7801\u6a21\u5757\uff0c\u4e0d\u7ba1\u662f\u591a\u4e48\u5c0f\u7684\u6539\u8fdb\uff0c\u6211\u4eec\u7684\u8f6f\u4ef6\u7cfb\u7edf\u5c31\u518d\u4e5f\u4e0d\u4f1a\u6301\u7eed\u53d8\u574f\u4e86\u3002\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0c\u7cfb\u7edf\u5728\u53d1\u5c55\u7684\u540c\u65f6\u4f1a\u9010\u6e10\u53d8\u5f97\u66f4\u597d\u3002\u6211\u4eec\u4e5f\u4f1a\u770b\u5230\u56e2\u961f\u4eec\u5173\u5fc3\u6574\u4f53\u7684\u7cfb\u7edf\uff0c\u800c\u4e0d\u662f\u5404\u81ea\u53ea\u5173\u5fc3\u81ea\u5df1\u8d1f\u8d23\u7684\u4e00\u5c0f\u90e8\u5206\u3002\u800c\u4e14\u56e2\u961f\u6210\u5458\u8981\u4e92\u52a9\uff0c\u4e92\u76f8\u6e05\u7406\u4ee3\u7801\uff0c\u4ed6\u4eec\u9075\u4ece\u7ae5\u5b50\u519b\u89c4\u5219\uff0c\u56e0\u4e3a\u90a3\u5bf9\u6bcf\u4e2a\u4eba\u90fd\u5f88\u597d\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5bf9\u81ea\u5df1\u597d\u3002 \u4ee3\u7801\u574f\u5473\u9053\u6216\u8005\u7cdf\u7cd5\u7684\u7a0b\u5e8f\u4ee3\u7801\u5c31\u50cf\u9690\u5f62\u7684\u201c\u75be\u75c5\u201d\u4e00\u6837\u6f5c\u4f0f\u5728\u9879\u76ee\u4e2d\uff0c\u4e5f\u56e0\u6b64\u5f62\u6210\u4e86\u6280\u672f\u503a\u52a1\u3002\u5982\u679c\u8fd9\u4e9b\u201c\u75be\u75c5\u201d\u5728\u9879\u76ee\u521d\u671f\u4e0d\u5f15\u8d77\u6ce8\u5173\u6ce8\u3001\u4e0d\u628a\u75be\u75c5\u627c\u6740\u5728\u840c\u82bd\u4e4b\u4e2d\uff0c\u90a3\u4e48\u540e\u671f\u4fee\u590d\u5b83\u7684\u4ee3\u4ef7\u4e5f\u5c31\u8d8a\u5927\uff0c\u4e5f\u5fc5\u7136\u4f1a\u4f7f\u5f97\u9879\u76ee\u7684\u8f6f\u4ef6\u7a0b\u5e8f\u8d8a\u6765\u8d8a\u96be\u4ee5\u7ef4\u62a4\uff0c\u8fd9\u4e2a\u9879\u76ee\u4e5f\u6700\u7ec8\u4f1a\u50cf\u8521\u6853\u516c\u4e00\u6837\u65e0\u836f\u53ef\u6cbb\u3001\u201c\u65e0\u5948\u4f55\u4e5f\u201d\u3002 \u6240\u4ee5\uff0c\u8bf7\u8bb0\u4f4f\u7ae5\u5b50\u519b\u89c4\u5219\u5bf9\u6211\u4eec\u7684\u542f\u793a\uff1a \u59cb\u7ec8\u4fdd\u6301\u4ee3\u7801\u6574\u6d01\uff0c\u52ff\u4ee5\u5584\u5c0f\u800c\u4e0d\u4e3a\uff0c\u52ff\u4ee5\u6076\u5c0f\u800c\u4e3a\u4e4b\uff0c\u6709\u75c5\u65e9\u6cbb \u3002","title":"6. \u7ae5\u5b50\u519b\u89c4\u5219\uff08Boy-Scout Rule\uff09"},{"location":"Design-Patterns/1-DesignPrinciples/#7","text":"\u907f\u514d\u8fc7\u65e9\u4f18\u5316 \uff08 Avoid Premature Optimization \uff09: \u9664\u975e\u4f60\u7684\u4ee3\u7801\u8fd0\u884c\u7684\u6bd4\u4f60\u60f3\u50cf\u4e2d\u7684\u8981\u6162\uff0c\u5426\u5219\u522b\u53bb\u4f18\u5316\u3002\u5047\u5982\u4f60\u771f\u7684\u60f3\u4f18\u5316\uff0c\u5c31\u5fc5\u987b\u5148\u60f3\u597d\u5982\u4f55\u7528\u6570\u636e\u8bc1\u660e\uff0c\u5b83\u7684\u901f\u5ea6\u53d8\u5feb\u4e86\u3002\u201c \u8fc7\u65e9\u7684\u4f18\u5316\u662f\u4e00\u5207\u7f6a\u6076\u4e4b\u6e90 \u3002\u201d\u2014\u2014Donald Knuth \u6700\u5c0f\u60ca\u8bb6\u539f\u5219 ( Principle of least astonishment ): \u4ee3\u7801\u5e94\u8be5\u5c3d\u53ef\u80fd\u51cf\u5c11\u8ba9\u8bfb\u8005\u60ca\u559c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u7f16\u5199\u7684\u4ee3\u7801\u53ea\u9700\u6309\u7167\u9879\u76ee\u7684\u8981\u6c42\u6765\u7f16\u5199\u3002\u5176\u4ed6\u534e\u4e3d\u7684\u529f\u80fd\u5c31\u4e0d\u5fc5\u4e86\uff0c\u4ee5\u514d\u5f04\u5de7\u6210\u62d9\u3002 \u4ee3\u7801\u91cd\u7528\u539f\u5219 \uff08 Code Reuse is Good \uff09: \u91cd\u7528\u4ee3\u7801\u80fd\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\uff0c\u7f29\u77ed\u5f00\u53d1\u65f6\u95f4\u3002 \u522b\u8ba9\u6211\u601d\u8003 ( Don\u2019t Make Me Think ): \u6240\u7f16\u5199\u7684\u4ee3\u7801\u4e00\u5b9a\u8981\u6613\u4e8e\u8bfb\u6613\u4e8e\u7406\u89e3\uff0c\u8fd9\u6837\u522b\u4eba\u624d\u4f1a\u6b23\u8d4f\uff0c\u4e5f\u80fd\u591f\u7ed9\u4f60\u63d0\u51fa\u5408\u7406\u5316\u7684\u5efa\u8bae\u3002\u76f8\u53cd\uff0c\u82e5\u662f\u7e41\u6742\u96be\u89e3\u7684\u7a0b\u5e8f\uff0c\u5176\u4ed6\u4eba\u603b\u662f\u4f1a\u907f\u800c\u8fdc\u4e4b\u7684\u3002 \u4e3a\u7ef4\u62a4\u8005\u5199\u4ee3\u7801 ( Write Code for the Maintainer ): \u4f18\u79c0\u7684\u4ee3\u7801\uff0c\u5e94\u5f53\u4f7f\u672c\u4eba\u6216\u662f\u4ed6\u4eba\u5728\u5c06\u6765\u90fd\u80fd\u591f\u5bf9\u5b83\u7ee7\u7eed\u7f16\u5199\u6216\u7ef4\u62a4\u3002\u4ee3\u7801\u7ef4\u62a4\u65f6\uff0c\u6216\u8bb8\u672c\u4eba\u4f1a\u6bd4\u8f83\u5bb9\u6613\uff0c\u4f46\u5bf9\u4ed6\u4eba\u5374\u6bd4\u8f83\u9ebb\u70e6\u3002\u56e0\u6b64\u4f60\u5199\u7684\u4ee3\u7801\u8981\u5c3d\u53ef\u80fd\u4fdd\u8bc1\u4ed6\u4eba\u80fd\u591f\u5bb9\u6613\u7ef4\u62a4\u3002\u201c\u5982\u679c\u4e00\u4e2a\u7ef4\u62a4\u8005\u4e0d\u518d\u7ee7\u7eed\u7ef4\u62a4\u4f60\u7684\u4ee3\u7801\uff0c\u5f88\u53ef\u80fd\u4ed6\u5c31\u6709\u4e86\u60f3\u6740\u4f60\u7684\u51b2\u52a8\u3002\u201d \u6b63\u4ea4\u539f\u5219(Orthogonality) : \u6b63\u4ea4\u6027\u7684\u57fa\u672c\u601d\u60f3\u662f\uff0c\u5728\u6982\u5ff5\u4e0a\u4e0d\u76f8\u5173\u7684\u4e8b\u7269\u4e0d\u5e94\u8be5\u4e0e\u7cfb\u7edf\u76f8\u5173\u3002\u8bbe\u8ba1\u8d8a\u6b63\u4ea4\uff0c\u5f02\u5e38\u8d8a\u5c11\u3002 \u8fd9\u4f7f\u5f97\u7528\u7f16\u7a0b\u8bed\u8a00\u66f4\u5bb9\u6613\u5b66\u4e60\uff0c\u8bfb\u5199\u7a0b\u5e8f\u3002(\u53cd\u4f8b\uff1a CSS )\u3002 \u505a\u6700\u7b80\u5355\u7684\u4e8b\u513f\u5c31\u8ba9\u4ee3\u7801\u53ef\u8fd0\u884c \uff08 Do the simplest thing that could possibly work \uff09: \u5c3d\u53ef\u80fd\u505a\u6700\u7b80\u5355\u7684\u4e8b\u5c31\u53ef\u4ee5\u8ba9\u4ee3\u7801\u53ef\u8fd0\u884c\u3002\u5728\u7f16\u7a0b\u4e2d\uff0c\u4e00\u5b9a\u8981\u4fdd\u6301\u7b80\u5355\u539f\u5219\u3002\u4f5c\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u4e0d\u65ad\u7684\u53cd\u601d\u201c\u5982\u4f55\u5728\u5de5\u4f5c\u4e2d\u505a\u5230\u7b80\u5316\u5462\uff1f\u201d\u8fd9\u5c06\u6709\u52a9\u4e8e\u5728\u8bbe\u8ba1\u4e2d\u4fdd\u6301\u7b80\u5355\u7684\u8def\u5f84\u3002 \u9690\u85cf\u5b9e\u73b0\u7ec6\u8282 \uff08 Hide Implementation Details \uff09: \u8f6f\u4ef6\u6a21\u5757\u901a\u8fc7\u63d0\u4f9b\u63a5\u53e3\u9690\u85cf\u4fe1\u606f\uff08\u5373\u5b9e\u73b0\u7ec6\u8282\uff09\uff0c\u800c\u4e0d\u6cc4\u6f0f\u4efb\u4f55\u4e0d\u5fc5\u8981\u7684\u4fe1\u606f\u3002 \u79d1\u91cc\u5b9a\u5f8b ( Curly's Law ): \u662f\u4e3a\u4efb\u4f55\u7279\u5b9a\u7684\u4ee3\u7801\u9009\u62e9\u4e00\u4e2a\u660e\u786e\u5b9a\u4e49\u7684\u76ee\u6807\uff1a \u53ea\u505a\u4e00\u4ef6\u4e8b \u3002 \u58a8\u83f2\u5b9a\u5f8b \uff08 Murphy's Law \uff09:\u6839\u672c\u5185\u5bb9\u662f\uff1a \u5982\u679c\u4e8b\u60c5\u6709\u53d8\u574f\u7684\u53ef\u80fd\uff0c\u4e0d\u7ba1\u8fd9\u79cd\u53ef\u80fd\u6027\u6709\u591a\u5c0f\uff0c\u5b83\u603b\u4f1a\u53d1\u751f \u3002\u4e3b\u8981\u5185\u5bb9\u5982\u4e0b\uff1a \u4efb\u4f55\u4e8b\u90fd\u6ca1\u6709\u8868\u9762\u770b\u8d77\u6765\u90a3\u4e48\u7b80\u5355\uff1b \u6240\u6709\u7684\u4e8b\u90fd\u4f1a\u6bd4\u4f60\u9884\u8ba1\u7684\u65f6\u95f4\u957f\uff1b \u4f1a\u51fa\u9519\u7684\u4e8b\u603b\u4f1a\u51fa\u9519\uff1b \u5982\u679c\u4f60\u62c5\u5fc3\u67d0\u79cd\u60c5\u51b5\u53d1\u751f\uff0c\u90a3\u4e48\u5b83\u5c31\u66f4\u6709\u53ef\u80fd\u53d1\u751f\u3002","title":"7.\u5176\u4ed6\u539f\u5219"},{"location":"Design-Patterns/10-FacadePattern/","text":"\u4e00\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u5916\u89c2\u6a21\u5f0f ( Facade Pattern )\uff1a\u5916\u90e8\u4e0e\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u901a\u4fe1\u5fc5\u987b\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u5916\u89c2\u5bf9\u8c61\u8fdb\u884c\uff0c\u4e3a\u5b50\u7cfb\u7edf\u4e2d\u7684\u4e00\u7ec4\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u4e00\u81f4\u7684\u754c\u9762\uff0c\u5916\u89c2\u6a21\u5f0f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u4f7f\u5f97\u8fd9\u4e00\u5b50\u7cfb\u7edf\u66f4\u52a0\u5bb9\u6613\u4f7f\u7528\u3002\u5916\u89c2\u6a21\u5f0f\u53c8\u79f0\u4e3a \u95e8\u9762\u6a21\u5f0f \uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u4e8c\u3001\u6a21\u5f0f\u7ed3\u6784 \u00b6 1. \u89d2\u8272\u7ec4\u6210 \u00b6 \u5916\u89c2\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Facade : \u5916\u89c2\u89d2\u8272 SubSystem : \u5b50\u7cfb\u7edf\u89d2\u8272 2. \u7ed3\u6784\u56fe \u00b6 \u4e09\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\uff0c\u662f\u5404\u4e2a\u5b50\u7cfb\u7edf\u89d2\u8272\u7c7b\uff0c\u5206\u522b\u5982\u4e0b\uff1a /** * \u5b50\u7cfb\u7edf\u7c7bA. */ public class ClassA { public void doSomethingA () { System . out . println ( \"----\u4e1a\u52a1\u65b9\u6cd5A...\" ); } } /** * \u5b50\u7cfb\u7edf\u7c7bB. */ public class ClassB { public void doSomethingB () { System . out . println ( \"----\u4e1a\u52a1\u65b9\u6cd5B...\" ); } } /** * \u5b50\u7cfb\u7edf\u7c7bC. */ public class ClassC { public void doSomethingC () { System . out . println ( \"----\u4e1a\u52a1\u65b9\u6cd5C...\" ); } } \u4ee5\u4e0b\u662f\u5916\u89c2\u6a21\u5f0f\u7684\u5916\u89c2\u7c7b\uff1a /** * \u5916\u89c2\u95e8\u9762\u7c7b. */ public class Facade { private ClassA a = new ClassA (); private ClassB b = new ClassB (); private ClassC c = new ClassC (); // \u4ee5\u4e0b\u662f\u63d0\u4f9b\u7ed9\u5916\u90e8\u8bbf\u95ee\u7684\u65b9\u6cd5. public void methodA () { this . a . doSomethingA (); } public void methodB () { this . b . doSomethingB (); } public void methodC () { this . c . doSomethingC (); } } \u56db\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u6839\u636e\u201c\u5355\u4e00\u804c\u8d23\u539f\u5219\u201d\uff0c\u5728\u8f6f\u4ef6\u4e2d\u5c06\u4e00\u4e2a\u7cfb\u7edf\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u5b50\u7cfb\u7edf\u6709\u5229\u4e8e\u964d\u4f4e\u6574\u4e2a\u7cfb\u7edf\u7684\u590d\u6742\u6027\uff0c\u4e00\u4e2a\u5e38\u89c1\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u4f7f\u5b50\u7cfb\u7edf\u95f4\u7684\u901a\u4fe1\u548c\u76f8\u4e92\u4f9d\u8d56\u5173\u7cfb\u8fbe\u5230\u6700\u5c0f\uff0c\u800c\u8fbe\u5230\u8be5\u76ee\u6807\u7684\u9014\u5f84\u4e4b\u4e00\u5c31\u662f\u5f15\u5165\u4e00\u4e2a\u5916\u89c2\u5bf9\u8c61\uff0c\u5b83\u4e3a\u5b50\u7cfb\u7edf\u7684\u8bbf\u95ee\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u800c\u5355\u4e00\u7684\u5165\u53e3\u3002 \u5916\u89c2\u6a21\u5f0f\u4e5f\u662f\u201c \u8fea\u7c73\u7279\u6cd5\u5219 \u201d\u7684\u4f53\u73b0\uff0c\u901a\u8fc7\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u5916\u89c2\u7c7b\u53ef\u4ee5\u964d\u4f4e\u539f\u6709\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\uff0c\u540c\u65f6\u964d\u4f4e\u5ba2\u6237\u7c7b\u4e0e\u5b50\u7cfb\u7edf\u7c7b\u7684\u8026\u5408\u5ea6\u3002 \u5916\u89c2\u6a21\u5f0f\u8981\u6c42\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u5916\u90e8\u4e0e\u5176\u5185\u90e8\u7684\u901a\u4fe1\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u5916\u89c2\u5bf9\u8c61\u8fdb\u884c\uff0c\u5916\u89c2\u7c7b\u5c06\u5ba2\u6237\u7aef\u4e0e\u5b50\u7cfb\u7edf\u7684\u5185\u90e8\u590d\u6742\u6027\u5206\u9694\u5f00\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u4e0e\u5916\u89c2\u5bf9\u8c61\u6253\u4ea4\u9053\uff0c\u800c\u4e0d\u9700\u8981\u4e0e\u5b50\u7cfb\u7edf\u5185\u90e8\u7684\u5f88\u591a\u5bf9\u8c61\u6253\u4ea4\u9053\u3002 \u5916\u89c2\u6a21\u5f0f\u7684\u76ee\u7684\u5728\u4e8e\u964d\u4f4e\u7cfb\u7edf\u7684\u590d\u6742\u7a0b\u5ea6\u3002 \u5916\u89c2\u6a21\u5f0f\u4ece\u5f88\u5927\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u4e86\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u4fbf\u6377\u6027\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u65e0\u987b\u5173\u5fc3\u5b50\u7cfb\u7edf\u7684\u5de5\u4f5c\u7ec6\u8282\uff0c\u901a\u8fc7\u5916\u89c2\u89d2\u8272\u5373\u53ef\u8c03\u7528\u76f8\u5173\u529f\u80fd\u3002 1. \u4f18\u70b9 \u00b6 \u5916\u89c2\u6a21\u5f0f\u7684\u4f18\u70b9 k\uff1a \u5bf9\u5ba2\u6237\u5c4f\u853d\u5b50\u7cfb\u7edf\u7ec4\u4ef6\uff0c\u51cf\u5c11\u4e86\u5ba2\u6237\u5904\u7406\u7684\u5bf9\u8c61\u6570\u76ee\u5e76\u4f7f\u5f97\u5b50\u7cfb\u7edf\u4f7f\u7528\u8d77\u6765\u66f4\u52a0\u5bb9\u6613\u3002\u901a\u8fc7\u5f15\u5165\u5916\u89c2\u6a21\u5f0f\uff0c\u5ba2\u6237\u4ee3\u7801\u5c06\u53d8\u5f97\u5f88\u7b80\u5355\uff0c\u4e0e\u4e4b\u5173\u8054\u7684\u5bf9\u8c61\u4e5f\u5f88\u5c11\u3002 \u5b9e\u73b0\u4e86\u5b50\u7cfb\u7edf\u4e0e\u5ba2\u6237\u4e4b\u95f4\u7684\u677e\u8026\u5408\u5173\u7cfb\uff0c\u8fd9\u4f7f\u5f97\u5b50\u7cfb\u7edf\u7684\u7ec4\u4ef6\u53d8\u5316\u4e0d\u4f1a\u5f71\u54cd\u5230\u8c03\u7528\u5b83\u7684\u5ba2\u6237\u7c7b\uff0c\u53ea\u9700\u8981\u8c03\u6574\u5916\u89c2\u7c7b\u5373\u53ef\u3002 \u964d\u4f4e\u4e86\u5927\u578b\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u7684\u7f16\u8bd1\u4f9d\u8d56\u6027\uff0c\u5e76\u7b80\u5316\u4e86\u7cfb\u7edf\u5728\u4e0d\u540c\u5e73\u53f0\u4e4b\u95f4\u7684\u79fb\u690d\u8fc7\u7a0b\uff0c\u56e0\u4e3a\u7f16\u8bd1\u4e00\u4e2a\u5b50\u7cfb\u7edf\u4e00\u822c\u4e0d\u9700\u8981\u7f16\u8bd1\u6240\u6709\u5176\u4ed6\u7684\u5b50\u7cfb\u7edf\u3002\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u4fee\u6539\u5bf9\u5176\u4ed6\u5b50\u7cfb\u7edf\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\uff0c\u800c\u4e14\u5b50\u7cfb\u7edf\u5185\u90e8\u53d8\u5316\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u5230\u5916\u89c2\u5bf9\u8c61\u3002 \u53ea\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8bbf\u95ee\u5b50\u7cfb\u7edf\u7684\u7edf\u4e00\u5165\u53e3\uff0c\u5e76\u4e0d\u5f71\u54cd\u7528\u6237\u76f4\u63a5\u4f7f\u7528\u5b50\u7cfb\u7edf\u7c7b\u3002 2. \u7f3a\u70b9 \u00b6 \u5916\u89c2\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u4e0d\u80fd\u5f88\u597d\u5730\u9650\u5236\u5ba2\u6237\u4f7f\u7528\u5b50\u7cfb\u7edf\u7c7b\uff0c\u5982\u679c\u5bf9\u5ba2\u6237\u8bbf\u95ee\u5b50\u7cfb\u7edf\u7c7b\u505a\u592a\u591a\u7684\u9650\u5236\u5219\u51cf\u5c11\u4e86\u53ef\u53d8\u6027\u548c\u7075\u6d3b\u6027\u3002 \u5728\u4e0d\u5f15\u5165\u62bd\u8c61\u5916\u89c2\u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u589e\u52a0\u65b0\u7684\u5b50\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u4fee\u6539\u5916\u89c2\u7c7b\u6216\u5ba2\u6237\u7aef\u7684\u6e90\u4ee3\u7801\uff0c\u8fdd\u80cc\u4e86\u201c \u5f00\u95ed\u539f\u5219 \u201d\u3002 3. \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\uff1a \u5f53\u8981\u4e3a\u4e00\u4e2a\u590d\u6742\u5b50\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3\u65f6\u53ef\u4ee5\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\u3002\u8be5\u63a5\u53e3\u53ef\u4ee5\u6ee1\u8db3\u5927\u591a\u6570\u7528\u6237\u7684\u9700\u6c42\uff0c\u800c\u4e14\u7528\u6237\u4e5f\u53ef\u4ee5\u8d8a\u8fc7\u5916\u89c2\u7c7b\u76f4\u63a5\u8bbf\u95ee\u5b50\u7cfb\u7edf\u3002 \u5ba2\u6237\u7a0b\u5e8f\u4e0e\u591a\u4e2a\u5b50\u7cfb\u7edf\u4e4b\u95f4\u5b58\u5728\u5f88\u5927\u7684\u4f9d\u8d56\u6027\u3002\u5f15\u5165\u5916\u89c2\u7c7b\u5c06\u5b50\u7cfb\u7edf\u4e0e\u5ba2\u6237\u4ee5\u53ca\u5176\u4ed6\u5b50\u7cfb\u7edf\u89e3\u8026\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5b50\u7cfb\u7edf\u7684\u72ec\u7acb\u6027\u548c\u53ef\u79fb\u690d\u6027\u3002 \u5728\u5c42\u6b21\u5316\u7ed3\u6784\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\u5b9a\u4e49\u7cfb\u7edf\u4e2d\u6bcf\u4e00\u5c42\u7684\u5165\u53e3\uff0c\u5c42\u4e0e\u5c42\u4e4b\u95f4\u4e0d\u76f4\u63a5\u4ea7\u751f\u8054\u7cfb\uff0c\u800c\u901a\u8fc7\u5916\u89c2\u7c7b\u5efa\u7acb\u8054\u7cfb\uff0c\u964d\u4f4e\u5c42\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\u3002 \u4e94\u3001\u6a21\u5f0f\u603b\u7ed3 \u00b6 \u5728\u5916\u89c2\u6a21\u5f0f\u4e2d\uff0c\u5916\u90e8\u4e0e\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u901a\u4fe1\u5fc5\u987b\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u5916\u89c2\u5bf9\u8c61\u8fdb\u884c\uff0c\u4e3a\u5b50\u7cfb\u7edf\u4e2d\u7684\u4e00\u7ec4\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u4e00\u81f4\u7684\u754c\u9762\uff0c\u5916\u89c2\u6a21\u5f0f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u4f7f\u5f97\u8fd9\u4e00\u5b50\u7cfb\u7edf\u66f4\u52a0\u5bb9\u6613\u4f7f\u7528\u3002\u5916\u89c2\u6a21\u5f0f\u53c8\u79f0\u4e3a\u95e8\u9762\u6a21\u5f0f\uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u5916\u89c2\u6a21\u5f0f\u5305\u542b\u4e24\u4e2a\u89d2\u8272\uff1a\u5916\u89c2\u89d2\u8272\u662f\u5728\u5ba2\u6237\u7aef\u76f4\u63a5\u8c03\u7528\u7684\u89d2\u8272\uff0c\u5728\u5916\u89c2\u89d2\u8272\u4e2d\u53ef\u4ee5\u77e5\u9053\u76f8\u5173\u7684(\u4e00\u4e2a\u6216\u8005\u591a\u4e2a)\u5b50\u7cfb\u7edf\u7684\u529f\u80fd\u548c\u8d23\u4efb\uff0c\u5b83\u5c06\u6240\u6709\u4ece\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u8bf7\u6c42\u59d4\u6d3e\u5230\u76f8\u5e94\u7684\u5b50\u7cfb\u7edf\u53bb\uff0c\u4f20\u9012\u7ed9\u76f8\u5e94\u7684\u5b50\u7cfb\u7edf\u5bf9\u8c61\u5904\u7406\uff1b\u5728\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u540c\u65f6\u6709\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5b50\u7cfb\u7edf\u89d2\u8272\uff0c\u6bcf\u4e00\u4e2a\u5b50\u7cfb\u7edf\u53ef\u4ee5\u4e0d\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u7c7b\uff0c\u800c\u662f\u4e00\u4e2a\u7c7b\u7684\u96c6\u5408\uff0c\u5b83\u5b9e\u73b0\u5b50\u7cfb\u7edf\u7684\u529f\u80fd\u3002 \u5916\u89c2\u6a21\u5f0f\u8981\u6c42\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u5916\u90e8\u4e0e\u5176\u5185\u90e8\u7684\u901a\u4fe1\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u5916\u89c2\u5bf9\u8c61\u8fdb\u884c\uff0c\u5916\u89c2\u7c7b\u5c06\u5ba2\u6237\u7aef\u4e0e\u5b50\u7cfb\u7edf\u7684\u5185\u90e8\u590d\u6742\u6027\u5206\u9694\u5f00\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u4e0e\u5916\u89c2\u5bf9\u8c61\u6253\u4ea4\u9053\uff0c\u800c\u4e0d\u9700\u8981\u4e0e\u5b50\u7cfb\u7edf\u5185\u90e8\u7684\u5f88\u591a\u5bf9\u8c61\u6253\u4ea4\u9053\u3002 \u5916\u89c2\u6a21\u5f0f\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u5bf9\u5ba2\u6237\u5c4f\u853d\u5b50\u7cfb\u7edf\u7ec4\u4ef6\uff0c\u51cf\u5c11\u4e86\u5ba2\u6237\u5904\u7406\u7684\u5bf9\u8c61\u6570\u76ee\u5e76\u4f7f\u5f97\u5b50\u7cfb\u7edf\u4f7f\u7528\u8d77\u6765\u66f4\u52a0\u5bb9\u6613\uff0c\u5b83\u5b9e\u73b0\u4e86\u5b50\u7cfb\u7edf\u4e0e\u5ba2\u6237\u4e4b\u95f4\u7684\u677e\u8026\u5408\u5173\u7cfb\uff0c\u5e76\u964d\u4f4e\u4e86\u5927\u578b\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u7684\u7f16\u8bd1\u4f9d\u8d56\u6027\uff0c\u7b80\u5316\u4e86\u7cfb\u7edf\u5728\u4e0d\u540c\u5e73\u53f0\u4e4b\u95f4\u7684\u79fb\u690d\u8fc7\u7a0b\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u4e0d\u80fd\u5f88\u597d\u5730\u9650\u5236\u5ba2\u6237\u4f7f\u7528\u5b50\u7cfb\u7edf\u7c7b\uff0c\u800c\u4e14\u5728\u4e0d\u5f15\u5165\u62bd\u8c61\u5916\u89c2\u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u589e\u52a0\u65b0\u7684\u5b50\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u4fee\u6539\u5916\u89c2\u7c7b\u6216\u5ba2\u6237\u7aef\u7684\u6e90\u4ee3\u7801\uff0c\u8fdd\u80cc\u4e86\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002 \u5916\u89c2\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u8981\u4e3a\u4e00\u4e2a\u590d\u6742\u5b50\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3\uff1b\u5ba2\u6237\u7a0b\u5e8f\u4e0e\u591a\u4e2a\u5b50\u7cfb\u7edf\u4e4b\u95f4\u5b58\u5728\u5f88\u5927\u7684\u4f9d\u8d56\u6027\uff1b\u5728\u5c42\u6b21\u5316\u7ed3\u6784\u4e2d\uff0c\u9700\u8981\u5b9a\u4e49\u7cfb\u7edf\u4e2d\u6bcf\u4e00\u5c42\u7684\u5165\u53e3\uff0c\u4f7f\u5f97\u5c42\u4e0e\u5c42\u4e4b\u95f4\u4e0d\u76f4\u63a5\u4ea7\u751f\u8054\u7cfb\u3002","title":"\u5916\u89c2\u6a21\u5f0f\uff08Facade Pattern\uff09"},{"location":"Design-Patterns/10-FacadePattern/#_1","text":"\u5916\u89c2\u6a21\u5f0f ( Facade Pattern )\uff1a\u5916\u90e8\u4e0e\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u901a\u4fe1\u5fc5\u987b\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u5916\u89c2\u5bf9\u8c61\u8fdb\u884c\uff0c\u4e3a\u5b50\u7cfb\u7edf\u4e2d\u7684\u4e00\u7ec4\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u4e00\u81f4\u7684\u754c\u9762\uff0c\u5916\u89c2\u6a21\u5f0f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u4f7f\u5f97\u8fd9\u4e00\u5b50\u7cfb\u7edf\u66f4\u52a0\u5bb9\u6613\u4f7f\u7528\u3002\u5916\u89c2\u6a21\u5f0f\u53c8\u79f0\u4e3a \u95e8\u9762\u6a21\u5f0f \uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/10-FacadePattern/#_2","text":"","title":"\u4e8c\u3001\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/10-FacadePattern/#1","text":"\u5916\u89c2\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Facade : \u5916\u89c2\u89d2\u8272 SubSystem : \u5b50\u7cfb\u7edf\u89d2\u8272","title":"1. \u89d2\u8272\u7ec4\u6210"},{"location":"Design-Patterns/10-FacadePattern/#2","text":"","title":"2. \u7ed3\u6784\u56fe"},{"location":"Design-Patterns/10-FacadePattern/#_3","text":"\u9996\u5148\uff0c\u662f\u5404\u4e2a\u5b50\u7cfb\u7edf\u89d2\u8272\u7c7b\uff0c\u5206\u522b\u5982\u4e0b\uff1a /** * \u5b50\u7cfb\u7edf\u7c7bA. */ public class ClassA { public void doSomethingA () { System . out . println ( \"----\u4e1a\u52a1\u65b9\u6cd5A...\" ); } } /** * \u5b50\u7cfb\u7edf\u7c7bB. */ public class ClassB { public void doSomethingB () { System . out . println ( \"----\u4e1a\u52a1\u65b9\u6cd5B...\" ); } } /** * \u5b50\u7cfb\u7edf\u7c7bC. */ public class ClassC { public void doSomethingC () { System . out . println ( \"----\u4e1a\u52a1\u65b9\u6cd5C...\" ); } } \u4ee5\u4e0b\u662f\u5916\u89c2\u6a21\u5f0f\u7684\u5916\u89c2\u7c7b\uff1a /** * \u5916\u89c2\u95e8\u9762\u7c7b. */ public class Facade { private ClassA a = new ClassA (); private ClassB b = new ClassB (); private ClassC c = new ClassC (); // \u4ee5\u4e0b\u662f\u63d0\u4f9b\u7ed9\u5916\u90e8\u8bbf\u95ee\u7684\u65b9\u6cd5. public void methodA () { this . a . doSomethingA (); } public void methodB () { this . b . doSomethingB (); } public void methodC () { this . c . doSomethingC (); } }","title":"\u4e09\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/10-FacadePattern/#_4","text":"\u6839\u636e\u201c\u5355\u4e00\u804c\u8d23\u539f\u5219\u201d\uff0c\u5728\u8f6f\u4ef6\u4e2d\u5c06\u4e00\u4e2a\u7cfb\u7edf\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u5b50\u7cfb\u7edf\u6709\u5229\u4e8e\u964d\u4f4e\u6574\u4e2a\u7cfb\u7edf\u7684\u590d\u6742\u6027\uff0c\u4e00\u4e2a\u5e38\u89c1\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u4f7f\u5b50\u7cfb\u7edf\u95f4\u7684\u901a\u4fe1\u548c\u76f8\u4e92\u4f9d\u8d56\u5173\u7cfb\u8fbe\u5230\u6700\u5c0f\uff0c\u800c\u8fbe\u5230\u8be5\u76ee\u6807\u7684\u9014\u5f84\u4e4b\u4e00\u5c31\u662f\u5f15\u5165\u4e00\u4e2a\u5916\u89c2\u5bf9\u8c61\uff0c\u5b83\u4e3a\u5b50\u7cfb\u7edf\u7684\u8bbf\u95ee\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u800c\u5355\u4e00\u7684\u5165\u53e3\u3002 \u5916\u89c2\u6a21\u5f0f\u4e5f\u662f\u201c \u8fea\u7c73\u7279\u6cd5\u5219 \u201d\u7684\u4f53\u73b0\uff0c\u901a\u8fc7\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u5916\u89c2\u7c7b\u53ef\u4ee5\u964d\u4f4e\u539f\u6709\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\uff0c\u540c\u65f6\u964d\u4f4e\u5ba2\u6237\u7c7b\u4e0e\u5b50\u7cfb\u7edf\u7c7b\u7684\u8026\u5408\u5ea6\u3002 \u5916\u89c2\u6a21\u5f0f\u8981\u6c42\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u5916\u90e8\u4e0e\u5176\u5185\u90e8\u7684\u901a\u4fe1\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u5916\u89c2\u5bf9\u8c61\u8fdb\u884c\uff0c\u5916\u89c2\u7c7b\u5c06\u5ba2\u6237\u7aef\u4e0e\u5b50\u7cfb\u7edf\u7684\u5185\u90e8\u590d\u6742\u6027\u5206\u9694\u5f00\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u4e0e\u5916\u89c2\u5bf9\u8c61\u6253\u4ea4\u9053\uff0c\u800c\u4e0d\u9700\u8981\u4e0e\u5b50\u7cfb\u7edf\u5185\u90e8\u7684\u5f88\u591a\u5bf9\u8c61\u6253\u4ea4\u9053\u3002 \u5916\u89c2\u6a21\u5f0f\u7684\u76ee\u7684\u5728\u4e8e\u964d\u4f4e\u7cfb\u7edf\u7684\u590d\u6742\u7a0b\u5ea6\u3002 \u5916\u89c2\u6a21\u5f0f\u4ece\u5f88\u5927\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u4e86\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u4fbf\u6377\u6027\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u65e0\u987b\u5173\u5fc3\u5b50\u7cfb\u7edf\u7684\u5de5\u4f5c\u7ec6\u8282\uff0c\u901a\u8fc7\u5916\u89c2\u89d2\u8272\u5373\u53ef\u8c03\u7528\u76f8\u5173\u529f\u80fd\u3002","title":"\u56db\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/10-FacadePattern/#1_1","text":"\u5916\u89c2\u6a21\u5f0f\u7684\u4f18\u70b9 k\uff1a \u5bf9\u5ba2\u6237\u5c4f\u853d\u5b50\u7cfb\u7edf\u7ec4\u4ef6\uff0c\u51cf\u5c11\u4e86\u5ba2\u6237\u5904\u7406\u7684\u5bf9\u8c61\u6570\u76ee\u5e76\u4f7f\u5f97\u5b50\u7cfb\u7edf\u4f7f\u7528\u8d77\u6765\u66f4\u52a0\u5bb9\u6613\u3002\u901a\u8fc7\u5f15\u5165\u5916\u89c2\u6a21\u5f0f\uff0c\u5ba2\u6237\u4ee3\u7801\u5c06\u53d8\u5f97\u5f88\u7b80\u5355\uff0c\u4e0e\u4e4b\u5173\u8054\u7684\u5bf9\u8c61\u4e5f\u5f88\u5c11\u3002 \u5b9e\u73b0\u4e86\u5b50\u7cfb\u7edf\u4e0e\u5ba2\u6237\u4e4b\u95f4\u7684\u677e\u8026\u5408\u5173\u7cfb\uff0c\u8fd9\u4f7f\u5f97\u5b50\u7cfb\u7edf\u7684\u7ec4\u4ef6\u53d8\u5316\u4e0d\u4f1a\u5f71\u54cd\u5230\u8c03\u7528\u5b83\u7684\u5ba2\u6237\u7c7b\uff0c\u53ea\u9700\u8981\u8c03\u6574\u5916\u89c2\u7c7b\u5373\u53ef\u3002 \u964d\u4f4e\u4e86\u5927\u578b\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u7684\u7f16\u8bd1\u4f9d\u8d56\u6027\uff0c\u5e76\u7b80\u5316\u4e86\u7cfb\u7edf\u5728\u4e0d\u540c\u5e73\u53f0\u4e4b\u95f4\u7684\u79fb\u690d\u8fc7\u7a0b\uff0c\u56e0\u4e3a\u7f16\u8bd1\u4e00\u4e2a\u5b50\u7cfb\u7edf\u4e00\u822c\u4e0d\u9700\u8981\u7f16\u8bd1\u6240\u6709\u5176\u4ed6\u7684\u5b50\u7cfb\u7edf\u3002\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u4fee\u6539\u5bf9\u5176\u4ed6\u5b50\u7cfb\u7edf\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\uff0c\u800c\u4e14\u5b50\u7cfb\u7edf\u5185\u90e8\u53d8\u5316\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u5230\u5916\u89c2\u5bf9\u8c61\u3002 \u53ea\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8bbf\u95ee\u5b50\u7cfb\u7edf\u7684\u7edf\u4e00\u5165\u53e3\uff0c\u5e76\u4e0d\u5f71\u54cd\u7528\u6237\u76f4\u63a5\u4f7f\u7528\u5b50\u7cfb\u7edf\u7c7b\u3002","title":"1. \u4f18\u70b9"},{"location":"Design-Patterns/10-FacadePattern/#2_1","text":"\u5916\u89c2\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u4e0d\u80fd\u5f88\u597d\u5730\u9650\u5236\u5ba2\u6237\u4f7f\u7528\u5b50\u7cfb\u7edf\u7c7b\uff0c\u5982\u679c\u5bf9\u5ba2\u6237\u8bbf\u95ee\u5b50\u7cfb\u7edf\u7c7b\u505a\u592a\u591a\u7684\u9650\u5236\u5219\u51cf\u5c11\u4e86\u53ef\u53d8\u6027\u548c\u7075\u6d3b\u6027\u3002 \u5728\u4e0d\u5f15\u5165\u62bd\u8c61\u5916\u89c2\u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u589e\u52a0\u65b0\u7684\u5b50\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u4fee\u6539\u5916\u89c2\u7c7b\u6216\u5ba2\u6237\u7aef\u7684\u6e90\u4ee3\u7801\uff0c\u8fdd\u80cc\u4e86\u201c \u5f00\u95ed\u539f\u5219 \u201d\u3002","title":"2. \u7f3a\u70b9"},{"location":"Design-Patterns/10-FacadePattern/#3","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\uff1a \u5f53\u8981\u4e3a\u4e00\u4e2a\u590d\u6742\u5b50\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3\u65f6\u53ef\u4ee5\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\u3002\u8be5\u63a5\u53e3\u53ef\u4ee5\u6ee1\u8db3\u5927\u591a\u6570\u7528\u6237\u7684\u9700\u6c42\uff0c\u800c\u4e14\u7528\u6237\u4e5f\u53ef\u4ee5\u8d8a\u8fc7\u5916\u89c2\u7c7b\u76f4\u63a5\u8bbf\u95ee\u5b50\u7cfb\u7edf\u3002 \u5ba2\u6237\u7a0b\u5e8f\u4e0e\u591a\u4e2a\u5b50\u7cfb\u7edf\u4e4b\u95f4\u5b58\u5728\u5f88\u5927\u7684\u4f9d\u8d56\u6027\u3002\u5f15\u5165\u5916\u89c2\u7c7b\u5c06\u5b50\u7cfb\u7edf\u4e0e\u5ba2\u6237\u4ee5\u53ca\u5176\u4ed6\u5b50\u7cfb\u7edf\u89e3\u8026\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5b50\u7cfb\u7edf\u7684\u72ec\u7acb\u6027\u548c\u53ef\u79fb\u690d\u6027\u3002 \u5728\u5c42\u6b21\u5316\u7ed3\u6784\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u5916\u89c2\u6a21\u5f0f\u5b9a\u4e49\u7cfb\u7edf\u4e2d\u6bcf\u4e00\u5c42\u7684\u5165\u53e3\uff0c\u5c42\u4e0e\u5c42\u4e4b\u95f4\u4e0d\u76f4\u63a5\u4ea7\u751f\u8054\u7cfb\uff0c\u800c\u901a\u8fc7\u5916\u89c2\u7c7b\u5efa\u7acb\u8054\u7cfb\uff0c\u964d\u4f4e\u5c42\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\u3002","title":"3. \u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/10-FacadePattern/#_5","text":"\u5728\u5916\u89c2\u6a21\u5f0f\u4e2d\uff0c\u5916\u90e8\u4e0e\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u901a\u4fe1\u5fc5\u987b\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u5916\u89c2\u5bf9\u8c61\u8fdb\u884c\uff0c\u4e3a\u5b50\u7cfb\u7edf\u4e2d\u7684\u4e00\u7ec4\u63a5\u53e3\u63d0\u4f9b\u4e00\u4e2a\u4e00\u81f4\u7684\u754c\u9762\uff0c\u5916\u89c2\u6a21\u5f0f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u4f7f\u5f97\u8fd9\u4e00\u5b50\u7cfb\u7edf\u66f4\u52a0\u5bb9\u6613\u4f7f\u7528\u3002\u5916\u89c2\u6a21\u5f0f\u53c8\u79f0\u4e3a\u95e8\u9762\u6a21\u5f0f\uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u5916\u89c2\u6a21\u5f0f\u5305\u542b\u4e24\u4e2a\u89d2\u8272\uff1a\u5916\u89c2\u89d2\u8272\u662f\u5728\u5ba2\u6237\u7aef\u76f4\u63a5\u8c03\u7528\u7684\u89d2\u8272\uff0c\u5728\u5916\u89c2\u89d2\u8272\u4e2d\u53ef\u4ee5\u77e5\u9053\u76f8\u5173\u7684(\u4e00\u4e2a\u6216\u8005\u591a\u4e2a)\u5b50\u7cfb\u7edf\u7684\u529f\u80fd\u548c\u8d23\u4efb\uff0c\u5b83\u5c06\u6240\u6709\u4ece\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u8bf7\u6c42\u59d4\u6d3e\u5230\u76f8\u5e94\u7684\u5b50\u7cfb\u7edf\u53bb\uff0c\u4f20\u9012\u7ed9\u76f8\u5e94\u7684\u5b50\u7cfb\u7edf\u5bf9\u8c61\u5904\u7406\uff1b\u5728\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u540c\u65f6\u6709\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5b50\u7cfb\u7edf\u89d2\u8272\uff0c\u6bcf\u4e00\u4e2a\u5b50\u7cfb\u7edf\u53ef\u4ee5\u4e0d\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u7c7b\uff0c\u800c\u662f\u4e00\u4e2a\u7c7b\u7684\u96c6\u5408\uff0c\u5b83\u5b9e\u73b0\u5b50\u7cfb\u7edf\u7684\u529f\u80fd\u3002 \u5916\u89c2\u6a21\u5f0f\u8981\u6c42\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u5916\u90e8\u4e0e\u5176\u5185\u90e8\u7684\u901a\u4fe1\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u5916\u89c2\u5bf9\u8c61\u8fdb\u884c\uff0c\u5916\u89c2\u7c7b\u5c06\u5ba2\u6237\u7aef\u4e0e\u5b50\u7cfb\u7edf\u7684\u5185\u90e8\u590d\u6742\u6027\u5206\u9694\u5f00\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u4e0e\u5916\u89c2\u5bf9\u8c61\u6253\u4ea4\u9053\uff0c\u800c\u4e0d\u9700\u8981\u4e0e\u5b50\u7cfb\u7edf\u5185\u90e8\u7684\u5f88\u591a\u5bf9\u8c61\u6253\u4ea4\u9053\u3002 \u5916\u89c2\u6a21\u5f0f\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u5bf9\u5ba2\u6237\u5c4f\u853d\u5b50\u7cfb\u7edf\u7ec4\u4ef6\uff0c\u51cf\u5c11\u4e86\u5ba2\u6237\u5904\u7406\u7684\u5bf9\u8c61\u6570\u76ee\u5e76\u4f7f\u5f97\u5b50\u7cfb\u7edf\u4f7f\u7528\u8d77\u6765\u66f4\u52a0\u5bb9\u6613\uff0c\u5b83\u5b9e\u73b0\u4e86\u5b50\u7cfb\u7edf\u4e0e\u5ba2\u6237\u4e4b\u95f4\u7684\u677e\u8026\u5408\u5173\u7cfb\uff0c\u5e76\u964d\u4f4e\u4e86\u5927\u578b\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u7684\u7f16\u8bd1\u4f9d\u8d56\u6027\uff0c\u7b80\u5316\u4e86\u7cfb\u7edf\u5728\u4e0d\u540c\u5e73\u53f0\u4e4b\u95f4\u7684\u79fb\u690d\u8fc7\u7a0b\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u4e0d\u80fd\u5f88\u597d\u5730\u9650\u5236\u5ba2\u6237\u4f7f\u7528\u5b50\u7cfb\u7edf\u7c7b\uff0c\u800c\u4e14\u5728\u4e0d\u5f15\u5165\u62bd\u8c61\u5916\u89c2\u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u589e\u52a0\u65b0\u7684\u5b50\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u4fee\u6539\u5916\u89c2\u7c7b\u6216\u5ba2\u6237\u7aef\u7684\u6e90\u4ee3\u7801\uff0c\u8fdd\u80cc\u4e86\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002 \u5916\u89c2\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u8981\u4e3a\u4e00\u4e2a\u590d\u6742\u5b50\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3\uff1b\u5ba2\u6237\u7a0b\u5e8f\u4e0e\u591a\u4e2a\u5b50\u7cfb\u7edf\u4e4b\u95f4\u5b58\u5728\u5f88\u5927\u7684\u4f9d\u8d56\u6027\uff1b\u5728\u5c42\u6b21\u5316\u7ed3\u6784\u4e2d\uff0c\u9700\u8981\u5b9a\u4e49\u7cfb\u7edf\u4e2d\u6bcf\u4e00\u5c42\u7684\u5165\u53e3\uff0c\u4f7f\u5f97\u5c42\u4e0e\u5c42\u4e4b\u95f4\u4e0d\u76f4\u63a5\u4ea7\u751f\u8054\u7cfb\u3002","title":"\u4e94\u3001\u6a21\u5f0f\u603b\u7ed3"},{"location":"Design-Patterns/11-ProxyPattern/","text":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a \u00b6 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u5ba2\u6237\u4e0d\u60f3\u6216\u8005\u4e0d\u80fd\u76f4\u63a5\u5f15\u7528\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u79f0\u4e4b\u4e3a\u201c\u4ee3\u7406\u201d\u7684\u7b2c\u4e09\u8005\u6765\u5b9e\u73b0\u95f4\u63a5\u5f15\u7528\u3002\u4ee3\u7406\u5bf9\u8c61\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u548c\u76ee\u6807\u5bf9\u8c61\u4e4b\u95f4\u8d77\u5230\u4e2d\u4ecb\u7684\u4f5c\u7528\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u53bb\u6389\u5ba2\u6237\u4e0d\u80fd\u770b\u5230 \u7684\u5185\u5bb9\u548c\u670d\u52a1\u6216\u8005\u6dfb\u52a0\u5ba2\u6237\u9700\u8981\u7684\u989d\u5916\u670d\u52a1\u3002 \u901a\u8fc7\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u6765\u5b9e\u73b0\u5bf9\u771f\u5b9e\u5bf9\u8c61\u7684\u64cd\u4f5c\u6216\u8005\u5c06\u65b0\u7684\u5bf9\u8c61\u4f5c\u4e3a\u771f\u5b9e\u5bf9\u8c61\u7684\u4e00\u4e2a\u66ff\u8eab\uff0c\u8fd9\u79cd\u5b9e\u73b0\u673a\u5236\u5373\u4e3a\u4ee3\u7406\u6a21\u5f0f\uff0c\u901a\u8fc7\u5f15\u5165\u4ee3\u7406\u5bf9\u8c61\u6765\u95f4\u63a5\u8bbf\u95ee\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u5c31\u662f\u4ee3\u7406\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002 \u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u4ee3\u7406\u6a21\u5f0f( Proxy Pattern ) \uff1a\u7ed9\u67d0\u4e00\u4e2a\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u4ee3\u7406\uff0c\u5e76\u7531\u4ee3\u7406\u5bf9\u8c61\u63a7\u5236\u5bf9\u539f\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u4ee3\u7406\u6a21\u5f0f\u7684\u82f1\u6587\u53eb\u505a Proxy \u6216 Surrogate \uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u4e09\u3001\u6a21\u5f0f\u7ed3\u6784 \u00b6 1. \u89d2\u8272\u7ec4\u6210 \u00b6 \u4ee3\u7406\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Subject : \u62bd\u8c61\u4e3b\u9898\u89d2\u8272 RealSubject : \u771f\u5b9e\u4e3b\u9898\u89d2\u8272 Proxy : \u4ee3\u7406\u4e3b\u9898\u89d2\u8272 2. \u7ed3\u6784\u56fe \u00b6 \u56db\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684\u4e3b\u9898\u63a5\u53e3\u548c\u771f\u5b9e\u4e3b\u9898\u7c7b\uff1a package com.blinkfox.patterns.proxy ; /** * \u62bd\u8c61\u4e3b\u9898\u7c7b */ public interface ISubject { /** * \u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5 */ public void request (); } package com.blinkfox.patterns.proxy ; /** * \u771f\u5b9e\u4e3b\u9898\u7c7b */ public class RealSubject implements ISubject { /** * \u5b9e\u73b0\u65b9\u6cd5 */ @Override public void request () { System . out . println ( \"\u771f\u5b9e\u4e3b\u9898\u7c7b\u8bf7\u6c42\u65b9\u6cd5...\" ); } } \u7136\u540e\uff0c\u662f\u4ee3\u7406\u7c7b\uff1a package com.blinkfox.patterns.proxy ; /** * \u4ee3\u7406\u7c7b */ public class Proxy implements ISubject { private ISubject subject ; public Proxy ( ISubject subject ) { this . subject = subject ; } @Override public void request () { this . before (); this . subject . request (); this . after (); } /** * \u9884\u5904\u7406 */ private void before () { System . out . println ( \"\u6267\u884c\u524d(before)\u7684\u5904\u7406...\" ); } /** * \u5584\u540e\u5904\u7406 */ private void after () { System . out . println ( \"\u6267\u884c\u540e(after)\u7684\u5904\u7406...\" ); } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u6d4b\u8bd5\u7c7b\uff1a package com.blinkfox.patterns.proxy ; /** * \u4ee3\u7406\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b */ public class ProxyClient { public static void main ( String [] args ) { ISubject subject = new RealSubject (); Proxy proxy = new Proxy ( subject ); proxy . request (); } } \u4e94\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 1. \u4f18\u70b9 \u00b6 \u4ee3\u7406\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u4ee3\u7406\u6a21\u5f0f\u80fd\u591f\u534f\u8c03\u8c03\u7528\u8005\u548c\u88ab\u8c03\u7528\u8005\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u4e86\u7cfb \u7edf\u7684\u8026\u5408\u5ea6\u3002 \u8fdc\u7a0b\u4ee3\u7406\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ef\u4ee5\u8bbf\u95ee\u5728\u8fdc\u7a0b\u673a\u5668\u4e0a\u7684\u5bf9\u8c61\uff0c\u8fdc\u7a0b\u673a\u5668\u53ef\u80fd\u5177\u6709\u66f4\u597d\u7684\u8ba1\u7b97\u6027\u80fd\u4e0e\u5904\u7406\u901f\u5ea6\uff0c\u53ef\u4ee5\u5feb\u901f\u54cd\u5e94\u5e76\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002 \u865a\u62df\u4ee3\u7406\u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u5c0f\u5bf9\u8c61\u6765\u4ee3\u8868\u4e00\u4e2a\u5927\u5bf9\u8c61\uff0c\u53ef\u4ee5\u51cf\u5c11\u7cfb\u7edf\u8d44\u6e90\u7684\u6d88\u8017\uff0c\u5bf9\u7cfb\u7edf\u8fdb\u884c\u4f18\u5316\u5e76\u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6\u3002 \u4fdd\u62a4\u4ee3\u7406\u53ef\u4ee5\u63a7\u5236\u5bf9\u771f\u5b9e\u5bf9\u8c61\u7684\u4f7f\u7528\u6743\u9650\u3002 2. \u7f3a\u70b9 \u00b6 \u4ee3\u7406\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u7531\u4e8e\u5728\u5ba2\u6237\u7aef\u548c\u771f\u5b9e\u4e3b\u9898\u4e4b\u95f4\u589e\u52a0\u4e86\u4ee3\u7406\u5bf9\u8c61\uff0c\u56e0\u6b64\u6709\u4e9b\u7c7b\u578b\u7684\u4ee3\u7406\u6a21\u5f0f\u53ef\u80fd\u4f1a\u9020\u6210\u8bf7\u6c42\u7684\u5904\u7406\u901f\u5ea6\u53d8\u6162\u3002 \u5b9e\u73b0\u4ee3\u7406\u6a21\u5f0f\u9700\u8981\u989d\u5916\u7684\u5de5\u4f5c\uff0c\u6709\u4e9b\u4ee3\u7406\u6a21\u5f0f\u7684\u5b9e\u73b0\u975e\u5e38\u590d\u6742\u3002 3. \u9002\u7528\u73af\u5883 \u00b6 \u6839\u636e\u4ee3\u7406\u6a21\u5f0f\u7684\u4f7f\u7528\u76ee\u7684\uff0c\u5e38\u89c1\u7684\u4ee3\u7406\u6a21\u5f0f\u6709\u4ee5\u4e0b\u51e0\u79cd\u7c7b\u578b\uff1a \u8fdc\u7a0b(Remote)\u4ee3\u7406 \uff1a\u4e3a\u4e00\u4e2a\u4f4d\u4e8e\u4e0d\u540c\u7684\u5730\u5740\u7a7a\u95f4\u7684\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u672c\u5730\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u4e0d\u540c\u7684\u5730\u5740\u7a7a\u95f4\u53ef\u4ee5\u662f\u5728\u540c\u4e00\u53f0\u4e3b\u673a\u4e2d\uff0c\u4e5f\u53ef\u662f\u5728\u53e6\u4e00\u53f0\u4e3b\u673a\u4e2d\uff0c\u8fdc\u7a0b\u4ee3\u7406\u53c8\u53eb\u505a\u5927\u4f7f(Ambassador)\u3002 \u865a\u62df(Virtual)\u4ee3\u7406 \uff1a\u5982\u679c\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u8d44\u6e90\u6d88\u8017\u8f83\u5927\u7684\u5bf9\u8c61\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u6d88\u8017\u76f8\u5bf9\u8f83\u5c0f\u7684\u5bf9\u8c61\u6765\u8868\u793a\uff0c\u771f\u5b9e\u5bf9\u8c61\u53ea\u5728\u9700\u8981\u65f6\u624d\u4f1a\u88ab\u771f\u6b63\u521b\u5efa\u3002 Copy-on-Write \u4ee3\u7406 \uff1a\u5b83\u662f\u865a\u62df\u4ee3\u7406\u7684\u4e00\u79cd\uff0c\u628a\u590d\u5236\uff08\u514b\u9686\uff09\u64cd\u4f5c\u5ef6\u8fdf \u5230\u53ea\u6709\u5728\u5ba2\u6237\u7aef\u771f\u6b63\u9700\u8981\u65f6\u624d\u6267\u884c\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5bf9\u8c61\u7684\u6df1\u514b\u9686\u662f\u4e00\u4e2a\u5f00\u9500\u8f83\u5927\u7684\u64cd\u4f5c\uff0cCopy-on-Write \u4ee3\u7406\u53ef\u4ee5\u8ba9\u8fd9\u4e2a\u64cd\u4f5c\u5ef6\u8fdf\uff0c\u53ea\u6709\u5bf9\u8c61\u88ab\u7528\u5230\u7684\u65f6\u5019\u624d\u88ab\u514b\u9686\u3002 \u4fdd\u62a4(Protect or Access)\u4ee3\u7406 \uff1a\u63a7\u5236\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7684\u7528\u6237\u63d0\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4f7f\u7528\u6743\u9650\u3002 \u7f13\u51b2(Cache)\u4ee3\u7406 \uff1a\u4e3a\u67d0\u4e00\u4e2a\u76ee\u6807\u64cd\u4f5c\u7684\u7ed3\u679c\u63d0\u4f9b\u4e34\u65f6\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u4ee5\u4fbf\u591a\u4e2a\u5ba2\u6237\u7aef\u53ef\u4ee5\u5171\u4eab\u8fd9\u4e9b\u7ed3\u679c\u3002 \u9632\u706b\u5899(Firewall)\u4ee3\u7406 \uff1a\u4fdd\u62a4\u76ee\u6807\u4e0d\u8ba9\u6076\u610f\u7528\u6237\u63a5\u8fd1\u3002 \u540c\u6b65\u5316(Synchronization)\u4ee3\u7406 \uff1a\u4f7f\u51e0\u4e2a\u7528\u6237\u80fd\u591f\u540c\u65f6\u4f7f\u7528\u4e00\u4e2a\u5bf9\u8c61\u800c\u6ca1\u6709\u51b2\u7a81\u3002 \u667a\u80fd\u5f15\u7528(Smart Reference)\u4ee3\u7406 \uff1a\u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u5f15\u7528\u65f6\uff0c\u63d0\u4f9b\u4e00\u4e9b\u989d\u5916\u7684\u64cd\u4f5c\uff0c\u5982\u5c06\u6b64\u5bf9\u8c61\u88ab\u8c03\u7528\u7684\u6b21\u6570\u8bb0\u5f55\u4e0b\u6765\u7b49\u3002 \u6a21\u5f0f\u603b\u7ed3 \u00b6 \u5728\u4ee3\u7406\u6a21\u5f0f\u4e2d\uff0c\u8981\u6c42\u7ed9\u67d0\u4e00\u4e2a\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u4ee3\u7406\uff0c\u5e76\u7531\u4ee3\u7406\u5bf9\u8c61\u63a7\u5236\u5bf9\u539f\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u4ee3\u7406\u6a21\u5f0f\u7684\u82f1\u6587\u53eb\u505a Proxy \u6216 Surrogate\uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u4ee3\u7406\u6a21\u5f0f\u5305\u542b\u4e09\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u4e3b\u9898\u89d2\u8272\u58f0\u660e\u4e86\u771f\u5b9e\u4e3b\u9898\u548c\u4ee3\u7406\u4e3b\u9898\u7684\u5171\u540c\u63a5\u53e3\uff1b\u4ee3\u7406\u4e3b\u9898\u89d2\u8272\u5185\u90e8\u5305\u542b\u5bf9\u771f\u5b9e\u4e3b\u9898\u7684\u5f15\u7528\uff0c\u4ece\u800c\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u64cd\u4f5c\u771f\u5b9e\u4e3b\u9898\u5bf9\u8c61\uff1b\u771f\u5b9e\u4e3b\u9898\u89d2\u8272\u5b9a\u4e49\u4e86\u4ee3\u7406\u89d2\u8272\u6240\u4ee3\u8868\u7684\u771f\u5b9e\u5bf9\u8c61\uff0c\u5728\u771f\u5b9e\u4e3b\u9898\u89d2\u8272\u4e2d\u5b9e\u73b0\u4e86\u771f\u5b9e\u7684\u4e1a\u52a1\u64cd\u4f5c\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u4e3b\u9898\u89d2\u8272\u95f4\u63a5\u8c03\u7528\u771f\u5b9e\u4e3b\u9898\u89d2\u8272\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\u3002 \u4ee3\u7406\u6a21\u5f0f\u7684\u4f18\u70b9\u5728\u4e8e\u80fd\u591f\u534f\u8c03\u8c03\u7528\u8005\u548c\u88ab\u8c03\u7528\u8005\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u4e86\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u7531\u4e8e\u5728\u5ba2\u6237\u7aef\u548c\u771f\u5b9e\u4e3b\u9898\u4e4b\u95f4\u589e\u52a0\u4e86\u4ee3\u7406\u5bf9\u8c61\uff0c\u56e0\u6b64\u6709\u4e9b\u7c7b\u578b\u7684\u4ee3\u7406\u6a21\u5f0f\u53ef\u80fd\u4f1a\u9020\u6210\u8bf7\u6c42\u7684\u5904\u7406\u901f\u5ea6\u53d8\u6162\uff0c\u5e76\u4e14\u5b9e\u73b0\u4ee3\u7406\u6a21\u5f0f\u9700\u8981\u989d\u5916\u7684\u5de5\u4f5c\uff0c\u6709\u4e9b\u4ee3\u7406\u6a21\u5f0f\u7684\u5b9e\u73b0\u975e\u5e38\u590d\u6742\u3002\u8fdc\u7a0b\u4ee3\u7406\u4e3a\u4e00\u4e2a\u4f4d\u4e8e\u4e0d\u540c\u7684\u5730\u5740\u7a7a\u95f4\u7684\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u672c\u5730\u7684\u4ee3\u8868\u5bf9\u8c61\uff0c\u5b83\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ef\u4ee5\u8bbf\u95ee\u5728\u8fdc\u7a0b\u673a\u5668\u4e0a\u7684\u5bf9\u8c61\uff0c\u8fdc\u7a0b\u673a\u5668\u53ef\u80fd\u5177\u6709\u66f4\u597d\u7684\u8ba1\u7b97\u6027\u80fd\u4e0e\u5904\u7406\u901f\u5ea6\uff0c\u53ef\u4ee5\u5feb\u901f\u54cd\u5e94\u5e76\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002 \u5982\u679c\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u8d44\u6e90\u6d88\u8017\u8f83\u5927\u7684\u5bf9\u8c61\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u6d88\u8017\u76f8\u5bf9\u8f83\u5c0f\u7684\u5bf9\u8c61\u6765\u8868\u793a\uff0c\u771f\u5b9e\u5bf9\u8c61\u53ea\u5728\u9700\u8981\u65f6\u624d\u4f1a\u88ab\u771f\u6b63\u521b\u5efa\uff0c\u8fd9\u4e2a\u5c0f\u5bf9\u8c61\u79f0\u4e3a\u865a\u62df\u4ee3\u7406\u3002\u865a\u62df\u4ee3\u7406\u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u5c0f\u5bf9\u8c61\u6765\u4ee3\u8868\u4e00\u4e2a\u5927\u5bf9\u8c61\uff0c\u53ef\u4ee5\u51cf\u5c11\u7cfb\u7edf\u8d44\u6e90\u7684\u6d88\u8017\uff0c\u5bf9\u7cfb\u7edf\u8fdb\u884c\u4f18\u5316\u5e76\u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6\u3002 \u4fdd\u62a4\u4ee3\u7406\u53ef\u4ee5\u63a7\u5236\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7684\u7528\u6237\u63d0\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4f7f\u7528\u6743\u9650\u3002","title":"\u4ee3\u7406\u6a21\u5f0f\uff08Proxy Pattern\uff09"},{"location":"Design-Patterns/11-ProxyPattern/#_1","text":"\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u5ba2\u6237\u4e0d\u60f3\u6216\u8005\u4e0d\u80fd\u76f4\u63a5\u5f15\u7528\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u79f0\u4e4b\u4e3a\u201c\u4ee3\u7406\u201d\u7684\u7b2c\u4e09\u8005\u6765\u5b9e\u73b0\u95f4\u63a5\u5f15\u7528\u3002\u4ee3\u7406\u5bf9\u8c61\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u548c\u76ee\u6807\u5bf9\u8c61\u4e4b\u95f4\u8d77\u5230\u4e2d\u4ecb\u7684\u4f5c\u7528\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u53bb\u6389\u5ba2\u6237\u4e0d\u80fd\u770b\u5230 \u7684\u5185\u5bb9\u548c\u670d\u52a1\u6216\u8005\u6dfb\u52a0\u5ba2\u6237\u9700\u8981\u7684\u989d\u5916\u670d\u52a1\u3002 \u901a\u8fc7\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u6765\u5b9e\u73b0\u5bf9\u771f\u5b9e\u5bf9\u8c61\u7684\u64cd\u4f5c\u6216\u8005\u5c06\u65b0\u7684\u5bf9\u8c61\u4f5c\u4e3a\u771f\u5b9e\u5bf9\u8c61\u7684\u4e00\u4e2a\u66ff\u8eab\uff0c\u8fd9\u79cd\u5b9e\u73b0\u673a\u5236\u5373\u4e3a\u4ee3\u7406\u6a21\u5f0f\uff0c\u901a\u8fc7\u5f15\u5165\u4ee3\u7406\u5bf9\u8c61\u6765\u95f4\u63a5\u8bbf\u95ee\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u5c31\u662f\u4ee3\u7406\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/11-ProxyPattern/#_2","text":"\u4ee3\u7406\u6a21\u5f0f( Proxy Pattern ) \uff1a\u7ed9\u67d0\u4e00\u4e2a\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u4ee3\u7406\uff0c\u5e76\u7531\u4ee3\u7406\u5bf9\u8c61\u63a7\u5236\u5bf9\u539f\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u4ee3\u7406\u6a21\u5f0f\u7684\u82f1\u6587\u53eb\u505a Proxy \u6216 Surrogate \uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002","title":"\u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/11-ProxyPattern/#_3","text":"","title":"\u4e09\u3001\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/11-ProxyPattern/#1","text":"\u4ee3\u7406\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Subject : \u62bd\u8c61\u4e3b\u9898\u89d2\u8272 RealSubject : \u771f\u5b9e\u4e3b\u9898\u89d2\u8272 Proxy : \u4ee3\u7406\u4e3b\u9898\u89d2\u8272","title":"1. \u89d2\u8272\u7ec4\u6210"},{"location":"Design-Patterns/11-ProxyPattern/#2","text":"","title":"2. \u7ed3\u6784\u56fe"},{"location":"Design-Patterns/11-ProxyPattern/#_4","text":"\u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684\u4e3b\u9898\u63a5\u53e3\u548c\u771f\u5b9e\u4e3b\u9898\u7c7b\uff1a package com.blinkfox.patterns.proxy ; /** * \u62bd\u8c61\u4e3b\u9898\u7c7b */ public interface ISubject { /** * \u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5 */ public void request (); } package com.blinkfox.patterns.proxy ; /** * \u771f\u5b9e\u4e3b\u9898\u7c7b */ public class RealSubject implements ISubject { /** * \u5b9e\u73b0\u65b9\u6cd5 */ @Override public void request () { System . out . println ( \"\u771f\u5b9e\u4e3b\u9898\u7c7b\u8bf7\u6c42\u65b9\u6cd5...\" ); } } \u7136\u540e\uff0c\u662f\u4ee3\u7406\u7c7b\uff1a package com.blinkfox.patterns.proxy ; /** * \u4ee3\u7406\u7c7b */ public class Proxy implements ISubject { private ISubject subject ; public Proxy ( ISubject subject ) { this . subject = subject ; } @Override public void request () { this . before (); this . subject . request (); this . after (); } /** * \u9884\u5904\u7406 */ private void before () { System . out . println ( \"\u6267\u884c\u524d(before)\u7684\u5904\u7406...\" ); } /** * \u5584\u540e\u5904\u7406 */ private void after () { System . out . println ( \"\u6267\u884c\u540e(after)\u7684\u5904\u7406...\" ); } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u6d4b\u8bd5\u7c7b\uff1a package com.blinkfox.patterns.proxy ; /** * \u4ee3\u7406\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b */ public class ProxyClient { public static void main ( String [] args ) { ISubject subject = new RealSubject (); Proxy proxy = new Proxy ( subject ); proxy . request (); } }","title":"\u56db\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/11-ProxyPattern/#_5","text":"","title":"\u4e94\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/11-ProxyPattern/#1_1","text":"\u4ee3\u7406\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u4ee3\u7406\u6a21\u5f0f\u80fd\u591f\u534f\u8c03\u8c03\u7528\u8005\u548c\u88ab\u8c03\u7528\u8005\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u4e86\u7cfb \u7edf\u7684\u8026\u5408\u5ea6\u3002 \u8fdc\u7a0b\u4ee3\u7406\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ef\u4ee5\u8bbf\u95ee\u5728\u8fdc\u7a0b\u673a\u5668\u4e0a\u7684\u5bf9\u8c61\uff0c\u8fdc\u7a0b\u673a\u5668\u53ef\u80fd\u5177\u6709\u66f4\u597d\u7684\u8ba1\u7b97\u6027\u80fd\u4e0e\u5904\u7406\u901f\u5ea6\uff0c\u53ef\u4ee5\u5feb\u901f\u54cd\u5e94\u5e76\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002 \u865a\u62df\u4ee3\u7406\u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u5c0f\u5bf9\u8c61\u6765\u4ee3\u8868\u4e00\u4e2a\u5927\u5bf9\u8c61\uff0c\u53ef\u4ee5\u51cf\u5c11\u7cfb\u7edf\u8d44\u6e90\u7684\u6d88\u8017\uff0c\u5bf9\u7cfb\u7edf\u8fdb\u884c\u4f18\u5316\u5e76\u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6\u3002 \u4fdd\u62a4\u4ee3\u7406\u53ef\u4ee5\u63a7\u5236\u5bf9\u771f\u5b9e\u5bf9\u8c61\u7684\u4f7f\u7528\u6743\u9650\u3002","title":"1. \u4f18\u70b9"},{"location":"Design-Patterns/11-ProxyPattern/#2_1","text":"\u4ee3\u7406\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u7531\u4e8e\u5728\u5ba2\u6237\u7aef\u548c\u771f\u5b9e\u4e3b\u9898\u4e4b\u95f4\u589e\u52a0\u4e86\u4ee3\u7406\u5bf9\u8c61\uff0c\u56e0\u6b64\u6709\u4e9b\u7c7b\u578b\u7684\u4ee3\u7406\u6a21\u5f0f\u53ef\u80fd\u4f1a\u9020\u6210\u8bf7\u6c42\u7684\u5904\u7406\u901f\u5ea6\u53d8\u6162\u3002 \u5b9e\u73b0\u4ee3\u7406\u6a21\u5f0f\u9700\u8981\u989d\u5916\u7684\u5de5\u4f5c\uff0c\u6709\u4e9b\u4ee3\u7406\u6a21\u5f0f\u7684\u5b9e\u73b0\u975e\u5e38\u590d\u6742\u3002","title":"2. \u7f3a\u70b9"},{"location":"Design-Patterns/11-ProxyPattern/#3","text":"\u6839\u636e\u4ee3\u7406\u6a21\u5f0f\u7684\u4f7f\u7528\u76ee\u7684\uff0c\u5e38\u89c1\u7684\u4ee3\u7406\u6a21\u5f0f\u6709\u4ee5\u4e0b\u51e0\u79cd\u7c7b\u578b\uff1a \u8fdc\u7a0b(Remote)\u4ee3\u7406 \uff1a\u4e3a\u4e00\u4e2a\u4f4d\u4e8e\u4e0d\u540c\u7684\u5730\u5740\u7a7a\u95f4\u7684\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u672c\u5730\u7684\u4ee3\u7406\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u4e0d\u540c\u7684\u5730\u5740\u7a7a\u95f4\u53ef\u4ee5\u662f\u5728\u540c\u4e00\u53f0\u4e3b\u673a\u4e2d\uff0c\u4e5f\u53ef\u662f\u5728\u53e6\u4e00\u53f0\u4e3b\u673a\u4e2d\uff0c\u8fdc\u7a0b\u4ee3\u7406\u53c8\u53eb\u505a\u5927\u4f7f(Ambassador)\u3002 \u865a\u62df(Virtual)\u4ee3\u7406 \uff1a\u5982\u679c\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u8d44\u6e90\u6d88\u8017\u8f83\u5927\u7684\u5bf9\u8c61\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u6d88\u8017\u76f8\u5bf9\u8f83\u5c0f\u7684\u5bf9\u8c61\u6765\u8868\u793a\uff0c\u771f\u5b9e\u5bf9\u8c61\u53ea\u5728\u9700\u8981\u65f6\u624d\u4f1a\u88ab\u771f\u6b63\u521b\u5efa\u3002 Copy-on-Write \u4ee3\u7406 \uff1a\u5b83\u662f\u865a\u62df\u4ee3\u7406\u7684\u4e00\u79cd\uff0c\u628a\u590d\u5236\uff08\u514b\u9686\uff09\u64cd\u4f5c\u5ef6\u8fdf \u5230\u53ea\u6709\u5728\u5ba2\u6237\u7aef\u771f\u6b63\u9700\u8981\u65f6\u624d\u6267\u884c\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5bf9\u8c61\u7684\u6df1\u514b\u9686\u662f\u4e00\u4e2a\u5f00\u9500\u8f83\u5927\u7684\u64cd\u4f5c\uff0cCopy-on-Write \u4ee3\u7406\u53ef\u4ee5\u8ba9\u8fd9\u4e2a\u64cd\u4f5c\u5ef6\u8fdf\uff0c\u53ea\u6709\u5bf9\u8c61\u88ab\u7528\u5230\u7684\u65f6\u5019\u624d\u88ab\u514b\u9686\u3002 \u4fdd\u62a4(Protect or Access)\u4ee3\u7406 \uff1a\u63a7\u5236\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7684\u7528\u6237\u63d0\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4f7f\u7528\u6743\u9650\u3002 \u7f13\u51b2(Cache)\u4ee3\u7406 \uff1a\u4e3a\u67d0\u4e00\u4e2a\u76ee\u6807\u64cd\u4f5c\u7684\u7ed3\u679c\u63d0\u4f9b\u4e34\u65f6\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u4ee5\u4fbf\u591a\u4e2a\u5ba2\u6237\u7aef\u53ef\u4ee5\u5171\u4eab\u8fd9\u4e9b\u7ed3\u679c\u3002 \u9632\u706b\u5899(Firewall)\u4ee3\u7406 \uff1a\u4fdd\u62a4\u76ee\u6807\u4e0d\u8ba9\u6076\u610f\u7528\u6237\u63a5\u8fd1\u3002 \u540c\u6b65\u5316(Synchronization)\u4ee3\u7406 \uff1a\u4f7f\u51e0\u4e2a\u7528\u6237\u80fd\u591f\u540c\u65f6\u4f7f\u7528\u4e00\u4e2a\u5bf9\u8c61\u800c\u6ca1\u6709\u51b2\u7a81\u3002 \u667a\u80fd\u5f15\u7528(Smart Reference)\u4ee3\u7406 \uff1a\u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u5f15\u7528\u65f6\uff0c\u63d0\u4f9b\u4e00\u4e9b\u989d\u5916\u7684\u64cd\u4f5c\uff0c\u5982\u5c06\u6b64\u5bf9\u8c61\u88ab\u8c03\u7528\u7684\u6b21\u6570\u8bb0\u5f55\u4e0b\u6765\u7b49\u3002","title":"3. \u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/11-ProxyPattern/#_6","text":"\u5728\u4ee3\u7406\u6a21\u5f0f\u4e2d\uff0c\u8981\u6c42\u7ed9\u67d0\u4e00\u4e2a\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u4ee3\u7406\uff0c\u5e76\u7531\u4ee3\u7406\u5bf9\u8c61\u63a7\u5236\u5bf9\u539f\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u4ee3\u7406\u6a21\u5f0f\u7684\u82f1\u6587\u53eb\u505a Proxy \u6216 Surrogate\uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u4ee3\u7406\u6a21\u5f0f\u5305\u542b\u4e09\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u4e3b\u9898\u89d2\u8272\u58f0\u660e\u4e86\u771f\u5b9e\u4e3b\u9898\u548c\u4ee3\u7406\u4e3b\u9898\u7684\u5171\u540c\u63a5\u53e3\uff1b\u4ee3\u7406\u4e3b\u9898\u89d2\u8272\u5185\u90e8\u5305\u542b\u5bf9\u771f\u5b9e\u4e3b\u9898\u7684\u5f15\u7528\uff0c\u4ece\u800c\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u64cd\u4f5c\u771f\u5b9e\u4e3b\u9898\u5bf9\u8c61\uff1b\u771f\u5b9e\u4e3b\u9898\u89d2\u8272\u5b9a\u4e49\u4e86\u4ee3\u7406\u89d2\u8272\u6240\u4ee3\u8868\u7684\u771f\u5b9e\u5bf9\u8c61\uff0c\u5728\u771f\u5b9e\u4e3b\u9898\u89d2\u8272\u4e2d\u5b9e\u73b0\u4e86\u771f\u5b9e\u7684\u4e1a\u52a1\u64cd\u4f5c\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7406\u4e3b\u9898\u89d2\u8272\u95f4\u63a5\u8c03\u7528\u771f\u5b9e\u4e3b\u9898\u89d2\u8272\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\u3002 \u4ee3\u7406\u6a21\u5f0f\u7684\u4f18\u70b9\u5728\u4e8e\u80fd\u591f\u534f\u8c03\u8c03\u7528\u8005\u548c\u88ab\u8c03\u7528\u8005\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u4e86\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u7531\u4e8e\u5728\u5ba2\u6237\u7aef\u548c\u771f\u5b9e\u4e3b\u9898\u4e4b\u95f4\u589e\u52a0\u4e86\u4ee3\u7406\u5bf9\u8c61\uff0c\u56e0\u6b64\u6709\u4e9b\u7c7b\u578b\u7684\u4ee3\u7406\u6a21\u5f0f\u53ef\u80fd\u4f1a\u9020\u6210\u8bf7\u6c42\u7684\u5904\u7406\u901f\u5ea6\u53d8\u6162\uff0c\u5e76\u4e14\u5b9e\u73b0\u4ee3\u7406\u6a21\u5f0f\u9700\u8981\u989d\u5916\u7684\u5de5\u4f5c\uff0c\u6709\u4e9b\u4ee3\u7406\u6a21\u5f0f\u7684\u5b9e\u73b0\u975e\u5e38\u590d\u6742\u3002\u8fdc\u7a0b\u4ee3\u7406\u4e3a\u4e00\u4e2a\u4f4d\u4e8e\u4e0d\u540c\u7684\u5730\u5740\u7a7a\u95f4\u7684\u5bf9\u8c61\u63d0\u4f9b\u4e00\u4e2a\u672c\u5730\u7684\u4ee3\u8868\u5bf9\u8c61\uff0c\u5b83\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ef\u4ee5\u8bbf\u95ee\u5728\u8fdc\u7a0b\u673a\u5668\u4e0a\u7684\u5bf9\u8c61\uff0c\u8fdc\u7a0b\u673a\u5668\u53ef\u80fd\u5177\u6709\u66f4\u597d\u7684\u8ba1\u7b97\u6027\u80fd\u4e0e\u5904\u7406\u901f\u5ea6\uff0c\u53ef\u4ee5\u5feb\u901f\u54cd\u5e94\u5e76\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002 \u5982\u679c\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u8d44\u6e90\u6d88\u8017\u8f83\u5927\u7684\u5bf9\u8c61\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u6d88\u8017\u76f8\u5bf9\u8f83\u5c0f\u7684\u5bf9\u8c61\u6765\u8868\u793a\uff0c\u771f\u5b9e\u5bf9\u8c61\u53ea\u5728\u9700\u8981\u65f6\u624d\u4f1a\u88ab\u771f\u6b63\u521b\u5efa\uff0c\u8fd9\u4e2a\u5c0f\u5bf9\u8c61\u79f0\u4e3a\u865a\u62df\u4ee3\u7406\u3002\u865a\u62df\u4ee3\u7406\u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u5c0f\u5bf9\u8c61\u6765\u4ee3\u8868\u4e00\u4e2a\u5927\u5bf9\u8c61\uff0c\u53ef\u4ee5\u51cf\u5c11\u7cfb\u7edf\u8d44\u6e90\u7684\u6d88\u8017\uff0c\u5bf9\u7cfb\u7edf\u8fdb\u884c\u4f18\u5316\u5e76\u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6\u3002 \u4fdd\u62a4\u4ee3\u7406\u53ef\u4ee5\u63a7\u5236\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7684\u7528\u6237\u63d0\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4f7f\u7528\u6743\u9650\u3002","title":"\u6a21\u5f0f\u603b\u7ed3"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/","text":"\u6a21\u5f0f\u52a8\u673a \u00b6 \u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u5728\u4e00\u4e2a\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u5904\u7406\u67d0\u4e2a\u8bf7\u6c42\u7684\u5bf9\u8c61\u4e0d\u6b62\u4e00\u4e2a\u3002\u4f8b\u5982\u5ba1\u6279\u5de5\u4f5c\u6d41\u7b49\uff0c\u4ed6\u4eec\u53ef\u4ee5\u6784\u6210\u4e00\u6761\u5904\u7406\u91c7\u8d2d\u5355\u7684\u94fe\u5f0f\u7ed3\u6784\uff0c\u91c7\u8d2d\u5355(\u53ef\u4ee5\u770b\u4f5c\u662f\u8981\u5904\u7406\u7684\u4fe1\u606f)\u6cbf\u7740\u8fd9\u6761\u94fe\u8fdb\u884c\u4f20\u9012\uff0c\u8fd9\u6761\u94fe\u5c31\u79f0\u4e3a\u8d23\u4efb\u94fe\u3002\u8d23\u4efb\u94fe\u53ef\u4ee5\u662f\u4e00\u6761\u76f4\u7ebf\u3001\u4e00\u4e2a\u73af\u6216\u8005\u4e00\u4e2a\u6811\u5f62\u7ed3\u6784\uff0c\u6700\u5e38\u89c1\u7684\u804c\u8d23\u94fe\u662f\u76f4\u7ebf\u578b\uff0c\u5373\u6cbf\u7740\u4e00\u6761\u5355\u5411\u7684\u94fe\u6765\u4f20\u9012\u8bf7\u6c42\u3002\u94fe\u4e0a\u7684\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u662f\u8bf7\u6c42\u5904\u7406\u8005\uff0c\u8d23\u4efb\u94fe\u6a21\u5f0f\u53ef\u4ee5\u5c06\u8bf7\u6c42\u7684\u5904\u7406\u8005\u7ec4\u7ec7\u6210\u4e00\u6761\u94fe\uff0c\u5e76\u8ba9\u8bf7\u6c42\u6cbf\u7740\u94fe\u4f20\u9012\uff0c\u7531\u94fe\u4e0a\u7684\u5904\u7406\u8005\u5bf9\u8bf7\u6c42\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u5ba2\u6237\u7aef\u5b9e\u9645\u4e0a\u65e0\u987b\u5173\u5fc3\u8bf7\u6c42\u7684\u5904\u7406\u7ec6\u8282\u4ee5\u53ca\u8bf7\u6c42\u7684\u4f20\u9012\uff0c\u53ea\u9700\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u94fe\u4e0a\u5373\u53ef\uff0c\u4ece\u800c\u5b9e\u73b0\u8bf7\u6c42\u53d1\u9001\u8005\u548c\u8bf7\u6c42\u5904\u7406\u8005\u89e3\u8026\u3002 \u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u5b9a\u4e49 \uff1a\u8d23\u4efb\u94fe\u6a21\u5f0f( Chain of Responsibility Pattern )\u662f\u4f7f\u591a\u4e2a\u5bf9\u8c61\u90fd\u6709\u673a\u4f1a\u5904\u7406\u8bf7\u6c42\uff0c\u4ece\u800c\u907f\u514d\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u4e0e\u8bf7\u6c42\u5904\u7406\u8005\u8026\u5408\u5728\u4e00\u8d77\u3002\u5c06\u8fd9\u4e9b\u5bf9\u8c61\u8fde\u63a5\u6210\u4e00\u6761\u94fe\uff0c\u5e76\u4e14\u6cbf\u7740\u8fd9\u6761\u94fe\u4f20\u9012\u8bf7\u6c42\uff0c\u76f4\u5230\u6709\u5bf9\u8c61\u5904\u7406\u5b83\u4e3a\u6b62\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u5b9e\u8d28 \uff1a\u8d23\u4efb\u94fe\u4e0a\u7684\u5904\u7406\u8005\u8d1f\u8d23\u5904\u7406\u8bf7\u6c42\uff0c\u5ba2\u6237\u53ea\u9700\u8981\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u804c\u8d23\u94fe\u4e0a\u5373\u53ef\uff0c\u65e0\u987b\u5173\u5fc3\u8bf7\u6c42\u7684\u5904\u7406\u7ec6\u8282\u548c\u8bf7\u6c42\u7684\u4f20\u9012\uff0c\u4ece\u800c\u5b9e\u73b0\u8bf7\u6c42\u53d1\u9001\u8005\u4e0e\u8bf7\u6c42\u5904\u7406\u8005\u7684\u89e3\u8026\u3002 \u6a21\u5f0f\u7ed3\u6784 \u00b6 \u53c2\u4e0e\u89d2\u8272 \u00b6 Handler \uff08\u62bd\u8c61\u5904\u7406\u8005\uff09\uff1a\u5904\u7406\u8bf7\u6c42\u7684\u63a5\u53e3\uff0c\u4e00\u822c\u8bbe\u8ba1\u4e3a\u5177\u6709\u62bd\u8c61\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5\u7684\u62bd\u8c61\u7c7b\uff0c\u4ee5\u4fbf\u4e8e\u4e0d\u540c\u7684\u5177\u4f53\u5904\u7406\u8005\u8fdb\u884c\u7ee7\u627f\uff0c\u4ece\u800c\u5b9e\u73b0\u5177\u4f53\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5\u3002\u6b64\u5916\uff0c\u7531\u4e8e\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u7684\u4e0b\u5bb6\u8fd8\u662f\u4e00\u4e2a\u5904\u7406\u8005\uff0c\u56e0\u6b64\u62bd\u8c61\u5904\u7406\u8005\u672c\u8eab\u8fd8\u5305\u542b\u4e86\u4e00\u4e2a\u672c\u8eab\u7684\u5f15\u7528( nextHandler )\u4f5c\u4e3a\u5176\u5bf9\u4e0b\u5bb6\u7684\u5f15\u7528\uff0c\u4ee5\u4fbf\u5c06\u5904\u7406\u8005\u94fe\u6210\u4e00\u6761\u94fe\uff1b ConcreteHandler \uff08\u5177\u4f53\u5904\u7406\u8005\uff09\uff1a\u62bd\u8c61\u5904\u7406\u8005\u7684\u5b50\u7c7b\uff0c\u53ef\u4ee5\u5904\u7406\u7528\u6237\u8bf7\u6c42\uff0c\u5176\u5b9e\u73b0\u4e86\u62bd\u8c61\u5904\u7406\u8005\u4e2d\u5b9a\u4e49\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5\u3002\u5728\u5177\u4f53\u5904\u7406\u8bf7\u6c42\u65f6\u9700\u8981\u8fdb\u884c\u5224\u65ad\uff0c\u82e5\u5176\u5177\u6709\u76f8\u5e94\u7684\u5904\u7406\u6743\u9650\uff0c\u90a3\u4e48\u5c31\u5904\u7406\u5b83\uff1b\u5426\u5219\uff0c\u5176\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u540e\u7ee7\u8005\uff0c\u4ee5\u4fbf\u8ba9\u540e\u9762\u7684\u5904\u7406\u8005\u8fdb\u884c\u5904\u7406\u3002 \u5728\u8d23\u4efb\u94fe\u6a21\u5f0f\u91cc\uff0c\u7531\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u5bf9\u8c61\u5bf9\u5176\u4e0b\u5bb6\u7684\u5f15\u7528\u800c\u8fde\u63a5\u8d77\u6765\u5f62\u6210\u4e00\u6761\u8bf7\u6c42\u5904\u7406\u94fe\u3002\u8bf7\u6c42\u5c06\u5728\u8fd9\u6761\u94fe\u4e0a\u4e00\u76f4\u4f20\u9012\uff0c\u76f4\u5230\u94fe\u4e0a\u7684\u67d0\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u80fd\u591f\u5904\u7406\u6b64\u8bf7\u6c42\u3002 \u53d1\u51fa\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u5e76\u4e0d\u77e5\u9053\u94fe\u4e0a\u7684\u54ea\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u5c06\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u8fd9\u4f7f\u5f97\u7cfb\u7edf\u53ef\u4ee5\u5728\u4e0d\u5f71\u54cd\u5ba2\u6237\u7aef\u7684\u60c5\u51b5\u4e0b\u52a8\u6001\u5730\u91cd\u65b0\u7ec4\u7ec7\u94fe\u548c\u5206\u914d\u8d23\u4efb \u3002 UML\u7c7b\u56fe \u00b6 \u4ee3\u7801\u793a\u4f8b \u00b6 \u9996\u5148\uff0c\u8d23\u4efb\u94fe\u6a21\u5f0f\u7684\u6838\u5fc3\u5728\u4e8e\u5bf9\u8bf7\u6c42\u5904\u7406\u8005\u7684\u62bd\u8c61\u3002\u5728\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0c\u62bd\u8c61\u5904\u7406\u8005\u4e00\u822c\u4f1a\u88ab\u8bbe\u5b9a\u4e3a \u62bd\u8c61\u7c7b \uff0c\u5176\u5178\u578b\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a /** * \u8d23\u4efb\u8fde\u6a21\u5f0f\u7684\u62bd\u8c61\u5904\u7406\u8005\u89d2\u8272. */ public abstract class Handler { /** \u540e\u7ee7\u5904\u7406\u8005\u89d2\u8272. */ protected Handler nextHandler ; /** * \u5904\u7406\u8bf7\u6c42\u7684\u62bd\u8c61\u65b9\u6cd5. * * @param condition \u6761\u4ef6 */ public abstract void handle ( String condition ); /** * nextHandler\u7684Setter\u65b9\u6cd5. * * @param nextHandler \u540e\u7ee7\u5904\u7406\u5668 */ public void setNextHandler ( Handler nextHandler ) { this . nextHandler = nextHandler ; } } \u5176\u6b21\uff0c\u662f\u82e5\u5e72\u4e2a\u5177\u4f53\u7684\u5904\u7406\u89d2\u8272\u7c7b\u3002 /** * \u5177\u4f53\u5904\u7406\u89d2\u82721. */ public class ConcreteHandler1 extends Handler { /** * \u5177\u4f53\u5904\u7406\u89d2\u82721\u7684\u5904\u7406\u65b9\u6cd5. * * @param condition \u6761\u4ef6 */ @Override public void handle ( String condition ) { // \u5982\u679c\u662f\u81ea\u5df1\u7684\u8d23\u4efb\uff0c\u5c31\u81ea\u5df1\u5904\u7406\uff0c\u8d1f\u8d23\u4f20\u7ed9\u4e0b\u5bb6\u5904\u7406 if ( \"ConcreteHandler1\" . equals ( condition )) { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u82721\u7684\u5904\u7406\u65b9\u6cd5handled1...\" ); } else { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u82721 \u901a\u8fc7...\" ); nextHandler . handle ( condition ); } } } /** * \u5177\u4f53\u5904\u7406\u89d2\u82722. */ public class ConcreteHandler2 extends Handler { /** * \u5177\u4f53\u5904\u7406\u89d2\u82722\u7684\u5904\u7406\u65b9\u6cd5. * * @param condition \u6761\u4ef6 */ @Override public void handle ( String condition ) { // \u5982\u679c\u662f\u81ea\u5df1\u7684\u8d23\u4efb\uff0c\u5c31\u81ea\u5df1\u5904\u7406\uff0c\u8d1f\u8d23\u4f20\u7ed9\u4e0b\u5bb6\u5904\u7406 if ( \"ConcreteHandler2\" . equals ( condition )) { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u82722\u7684\u5904\u7406\u65b9\u6cd5handled1...\" ); } else { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u82722 \u901a\u8fc7...\" ); nextHandler . handle ( condition ); } } } /** * \u5177\u4f53\u5904\u7406\u89d2\u8272n. */ public class ConcreteHandlerN extends Handler { /** * \u8fd9\u91cc\u5047\u8bben\u662f\u94fe\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u5fc5\u987b\u5904\u7406\u6389. * \u5728\u5b9e\u9645\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u51fa\u73b0\u73af\uff0c\u6216\u8005\u662f\u6811\u5f62\uff0c\u8fd9\u91cc\u5e76\u4e0d\u4e00\u5b9a\u662f\u6700\u540e\u4e00\u4e2a\u8282\u70b9. * * @param condition \u53c2\u6570\u6761\u4ef6 */ @Override public void handle ( String condition ) { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u8272n\u7684\u5904\u7406\u65b9\u6cd5 \u7ed3\u675f...\" ); } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff0c\u4ee3\u7801\u8c03\u7528\u793a\u4f8b\u5982\u4e0b\uff1a /** * \u8d23\u4efb\u8fde\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b. */ public class ChainClient { /** * \u4e3b\u5165\u53e3\u65b9\u6cd5. * * @param args \u6570\u7ec4\u53c2\u6570 */ public static void main ( String [] args ) { Handler handler1 = new ConcreteHandler1 (); Handler handler2 = new ConcreteHandler2 (); Handler handlern = new ConcreteHandlerN (); handler1 . setNextHandler ( handler2 ); handler2 . setNextHandler ( handlern ); //\u5047\u8bbe\u8fd9\u4e2a\u8bf7\u6c42\u662fConcreteHandler2\u7684\u8d23\u4efb handler1 . handle ( \"ConcreteHandler2\" ); } } \u6ce8 \uff1a\u8d23\u4efb\u94fe\u6a21\u5f0f\u5e76\u4e0d\u521b\u5efa\u804c\u8d23\u94fe\uff0c\u804c\u8d23\u94fe\u7684\u521b\u5efa\u5de5\u4f5c\u5fc5\u987b\u7531\u7cfb\u7edf\u7684\u5176\u4ed6\u90e8\u5206\u6765\u5b8c\u6210\uff0c\u4e00\u822c\u7531\u4f7f\u7528\u8be5\u8d23\u4efb\u94fe\u7684\u5ba2\u6237\u7aef\u521b\u5efa\u3002\u804c\u8d23\u94fe\u6a21\u5f0f\u964d\u4f4e\u4e86\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u548c\u8bf7\u6c42\u5904\u7406\u8005\u4e4b\u95f4\u7684\u8026\u5408\uff0c\u4ece\u800c\u4f7f\u5f97\u591a\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u90fd\u6709\u673a\u4f1a\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u3002 \u6a21\u5f0f\u5206\u6790 \u00b6 \u4f7f\u7528\u573a\u666f \u00b6 \u5728\u5b9e\u9645\u8f6f\u4ef6\u5f00\u53d1\u4e2d\uff0c\u5982\u679c\u9047\u5230\u6709\u591a\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u5904\u7406\u540c\u4e00\u8bf7\u6c42\u65f6\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u804c\u8d23\u94fe\u6a21\u5f0f\uff0c\u6700\u5e38\u89c1\u7684\u4f8b\u5b50\u5305\u62ec\u5728 Java Web \u5e94\u7528\u5f00\u53d1\u4e2d\u521b\u5efa\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff08Filter\uff09\u94fe\u6765\u5bf9\u8bf7\u6c42\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\uff08\u4e2d\u6587\u5b57\u7b26\u4e71\u7801\u7684\u5904\u7406\uff09\u3001\u5728\u5de5\u4f5c\u6d41\u7cfb\u7edf\u4e2d\u5b9e\u73b0\u516c\u6587\u7684\u5206\u7ea7\u5ba1\u6279\u3001\u5728Struts\u5e94\u7528\u4e2d\u6dfb\u52a0\u4e0d\u540c\u7684\u62e6\u622a\u5668(\u5e38\u7528\u7684\u6709\u7c7b\u578b\u8f6c\u5316\u3001\u5f02\u5e38\u5904\u7406\uff0c\u6570\u636e\u6821\u9a8c\u2026)\u4ee5\u589e\u5f3aStruts2\u7684\u529f\u80fd\u7b49\u3002 \u7eaf\u4e0e\u4e0d\u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f \u00b6 \u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f \u8981\u6c42\u4e00\u4e2a\u5177\u4f53\u7684\u5904\u7406\u8005\u5bf9\u8c61\u53ea\u80fd\u5728\u4e24\u4e2a\u884c\u4e3a\u4e2d\u9009\u62e9\u4e00\u4e2a\uff1a\u4e00\u662f\u627f\u62c5\u8d23\u4efb\uff0c\u800c\u662f\u628a\u8d23\u4efb\u63a8\u7ed9\u4e0b\u5bb6\u3002\u4e0d\u5141\u8bb8\u51fa\u73b0\u67d0\u4e00\u4e2a\u5177\u4f53\u5904\u7406\u8005\u5bf9\u8c61\u5728\u627f\u62c5\u4e86\u4e00\u90e8\u5206\u8d23\u4efb\u540e\u53c8\u628a\u8d23\u4efb\u5411\u4e0b\u4f20\u7684\u60c5\u51b5\uff1b \u5728\u7eaf\u8d23\u4efb\u94fe\u6a21\u5f0f\u91cc\u9762\uff0c\u4e00\u4e2a\u8bf7\u6c42\u5fc5\u987b\u88ab\u67d0\u4e00\u4e2a\u5904\u7406\u8005\u5bf9\u8c61\u6240\u63a5\u6536\uff1b \u5728\u4e0d\u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f\u91cc\u9762\uff0c\u4e00\u4e2a\u8bf7\u6c42\u53ef\u4ee5\u6700\u7ec8\u4e0d\u88ab\u4efb\u4f55\u63a5\u6536\u7aef\u5bf9\u8c61\u6240\u63a5\u6536\u3002 \u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f\u7684\u5b9e\u9645\u4f8b\u5b50\u5f88\u96be\u627e\u5230\uff0c\u4e00\u822c\u770b\u5230\u7684\u4f8b\u5b50\u5747\u662f\u4e0d\u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f\u7684\u5b9e\u73b0\u3002 \u4f18\u70b9 \u00b6 \u964d\u4f4e\u8026\u5408\u5ea6\uff0c\u4f7f\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u89e3\u8026\uff0c\u4fbf\u4e8e\u7075\u6d3b\u7684\u3001\u53ef\u63d2\u62d4\u7684\u5b9a\u4e49\u8bf7\u6c42\u5904\u7406\u8fc7\u7a0b\uff1b \u7b80\u5316\u3001\u5c01\u88c5\u4e86\u8bf7\u6c42\u7684\u5904\u7406\u8fc7\u7a0b\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8fc7\u7a0b\u5bf9\u5ba2\u6237\u7aef\u800c\u8a00\u662f\u900f\u660e\u7684\uff0c\u4ee5\u4fbf\u4e8e\u52a8\u6001\u5730\u91cd\u65b0\u7ec4\u7ec7\u94fe\u4ee5\u53ca\u5206\u914d\u8d23\u4efb\uff0c\u589e\u5f3a\u8bf7\u6c42\u5904\u7406\u7684\u7075\u6d3b\u6027\uff1b \u53ef\u4ee5\u4ece\u804c\u8d23\u94fe\u4efb\u4f55\u4e00\u4e2a\u8282\u70b9\u5f00\u59cb\uff0c\u4e5f\u53ef\u4ee5\u968f\u65f6\u6539\u53d8\u5185\u90e8\u7684\u8bf7\u6c42\u5904\u7406\u89c4\u5219\uff0c\u6bcf\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u90fd\u53ef\u4ee5\u53bb\u52a8\u6001\u5730\u6307\u5b9a\u4ed6\u7684\u7ee7\u4efb\u8005\uff1b \u804c\u8d23\u94fe\u53ef\u7b80\u5316\u5bf9\u8c61\u95f4\u7684\u76f8\u4e92\u8fde\u63a5\u3002\u5b83\u4eec\u4ec5\u9700\u4fdd\u6301\u4e00\u4e2a\u6307\u5411\u5176\u540e\u7ee7\u8005\u7684\u5f15\u7528\uff0c\u800c\u4e0d\u9700\u4fdd\u6301\u5b83\u6240\u6709\u7684\u5019\u9009\u63a5\u53d7\u8005\u7684\u5f15\u7528\uff1b \u589e\u52a0\u65b0\u7684\u8bf7\u6c42\u5904\u7406\u7c7b\u5f88\u65b9\u4fbf\u3002 \u7f3a\u70b9 \u00b6 \u4e0d\u80fd\u4fdd\u8bc1\u8bf7\u6c42\u4e00\u5b9a\u88ab\u63a5\u6536\u3002\u65e2\u7136\u4e00\u4e2a\u8bf7\u6c42\u6ca1\u6709\u660e\u786e\u7684\u63a5\u6536\u8005\uff0c\u90a3\u4e48\u5c31\u4e0d\u80fd\u4fdd\u8bc1\u5b83\u4e00\u5b9a\u4f1a\u88ab\u5904\u7406\uff1b \u8be5\u8bf7\u6c42\u53ef\u80fd\u4e00\u76f4\u5230\u94fe\u7684\u672b\u7aef\u90fd\u5f97\u4e0d\u5230\u5904\u7406\u3002\u4e00\u4e2a\u8bf7\u6c42\u4e5f\u53ef\u80fd\u56e0\u8be5\u94fe\u6ca1\u6709\u88ab\u6b63\u786e\u914d\u7f6e\u800c\u5f97\u4e0d\u5230\u5904\u7406\uff1b \u7cfb\u7edf\u6027\u80fd\u5c06\u53d7\u5230\u4e00\u5b9a\u5f71\u54cd\uff0c\u800c\u4e14\u5728\u8fdb\u884c\u4ee3\u7801\u8c03\u8bd5\u65f6\u4e0d\u592a\u65b9\u4fbf\uff1b\u53ef\u80fd\u4f1a\u9020\u6210\u5faa\u73af\u8c03\u7528\u3002 \u603b\u7ed3 \u00b6 \u5728\u804c\u8d23\u94fe\u6a21\u5f0f\u91cc\uff0c\u5f88\u591a\u5bf9\u8c61\u7531\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u5bf9\u5176\u4e0b\u5bb6\u7684\u5f15\u7528\u800c\u8fde\u63a5\u8d77\u6765\u5f62\u6210\u4e00\u6761\u94fe\u3002\u8bf7\u6c42\u5728\u8fd9\u4e2a\u94fe\u4e0a\u4f20\u9012\uff0c\u76f4\u5230\u94fe\u4e0a\u7684\u67d0\u4e00\u4e2a\u5bf9\u8c61\u51b3\u5b9a\u5904\u7406\u6b64\u8bf7\u6c42\u3002\u53d1\u51fa\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u5e76\u4e0d\u77e5\u9053\u94fe\u4e0a\u7684\u54ea\u4e00\u4e2a\u5bf9\u8c61\u6700\u7ec8\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u8fd9\u4f7f\u5f97\u7cfb\u7edf\u53ef\u4ee5\u5728\u4e0d\u5f71\u54cd\u5ba2\u6237\u7aef\u7684\u60c5\u51b5\u4e0b\u52a8\u6001\u5730\u91cd\u65b0\u7ec4\u7ec7\u94fe\u548c\u5206\u914d\u8d23\u4efb\u3002 \u804c\u8d23\u94fe\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u53ef\u4ee5\u964d\u4f4e\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\uff0c\u7b80\u5316\u5bf9\u8c61\u7684\u76f8\u4e92\u8fde\u63a5\uff0c\u540c\u65f6\u589e\u5f3a\u7ed9\u5bf9\u8c61\u6307\u6d3e\u804c\u8d23\u7684\u7075\u6d3b\u6027\uff0c\u589e\u52a0\u65b0\u7684\u8bf7\u6c42\u5904\u7406\u7c7b\u4e5f\u5f88\u65b9\u4fbf\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u4e0d\u80fd\u4fdd\u8bc1\u8bf7\u6c42\u4e00\u5b9a\u88ab\u63a5\u6536\uff0c\u4e14\u5bf9\u4e8e\u6bd4\u8f83\u957f\u7684\u804c\u8d23\u94fe\uff0c\u8bf7\u6c42\u7684\u5904\u7406\u53ef\u80fd\u6d89\u53ca\u5230\u591a\u4e2a\u5904\u7406\u5bf9\u8c61\uff0c\u7cfb\u7edf\u6027\u80fd\u5c06\u53d7\u5230\u4e00\u5b9a\u5f71\u54cd\uff0c\u800c\u4e14\u5728\u8fdb\u884c\u4ee3\u7801\u8c03\u8bd5\u65f6\u4e0d\u592a\u65b9\u4fbf\u3002","title":"\u8d23\u4efb\u94fe\u6a21\u5f0f\uff08Chain of Responsibility Pattern\uff09"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_1","text":"\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u5728\u4e00\u4e2a\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u5904\u7406\u67d0\u4e2a\u8bf7\u6c42\u7684\u5bf9\u8c61\u4e0d\u6b62\u4e00\u4e2a\u3002\u4f8b\u5982\u5ba1\u6279\u5de5\u4f5c\u6d41\u7b49\uff0c\u4ed6\u4eec\u53ef\u4ee5\u6784\u6210\u4e00\u6761\u5904\u7406\u91c7\u8d2d\u5355\u7684\u94fe\u5f0f\u7ed3\u6784\uff0c\u91c7\u8d2d\u5355(\u53ef\u4ee5\u770b\u4f5c\u662f\u8981\u5904\u7406\u7684\u4fe1\u606f)\u6cbf\u7740\u8fd9\u6761\u94fe\u8fdb\u884c\u4f20\u9012\uff0c\u8fd9\u6761\u94fe\u5c31\u79f0\u4e3a\u8d23\u4efb\u94fe\u3002\u8d23\u4efb\u94fe\u53ef\u4ee5\u662f\u4e00\u6761\u76f4\u7ebf\u3001\u4e00\u4e2a\u73af\u6216\u8005\u4e00\u4e2a\u6811\u5f62\u7ed3\u6784\uff0c\u6700\u5e38\u89c1\u7684\u804c\u8d23\u94fe\u662f\u76f4\u7ebf\u578b\uff0c\u5373\u6cbf\u7740\u4e00\u6761\u5355\u5411\u7684\u94fe\u6765\u4f20\u9012\u8bf7\u6c42\u3002\u94fe\u4e0a\u7684\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u662f\u8bf7\u6c42\u5904\u7406\u8005\uff0c\u8d23\u4efb\u94fe\u6a21\u5f0f\u53ef\u4ee5\u5c06\u8bf7\u6c42\u7684\u5904\u7406\u8005\u7ec4\u7ec7\u6210\u4e00\u6761\u94fe\uff0c\u5e76\u8ba9\u8bf7\u6c42\u6cbf\u7740\u94fe\u4f20\u9012\uff0c\u7531\u94fe\u4e0a\u7684\u5904\u7406\u8005\u5bf9\u8bf7\u6c42\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u5ba2\u6237\u7aef\u5b9e\u9645\u4e0a\u65e0\u987b\u5173\u5fc3\u8bf7\u6c42\u7684\u5904\u7406\u7ec6\u8282\u4ee5\u53ca\u8bf7\u6c42\u7684\u4f20\u9012\uff0c\u53ea\u9700\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u94fe\u4e0a\u5373\u53ef\uff0c\u4ece\u800c\u5b9e\u73b0\u8bf7\u6c42\u53d1\u9001\u8005\u548c\u8bf7\u6c42\u5904\u7406\u8005\u89e3\u8026\u3002","title":"\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_2","text":"\u5b9a\u4e49 \uff1a\u8d23\u4efb\u94fe\u6a21\u5f0f( Chain of Responsibility Pattern )\u662f\u4f7f\u591a\u4e2a\u5bf9\u8c61\u90fd\u6709\u673a\u4f1a\u5904\u7406\u8bf7\u6c42\uff0c\u4ece\u800c\u907f\u514d\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u4e0e\u8bf7\u6c42\u5904\u7406\u8005\u8026\u5408\u5728\u4e00\u8d77\u3002\u5c06\u8fd9\u4e9b\u5bf9\u8c61\u8fde\u63a5\u6210\u4e00\u6761\u94fe\uff0c\u5e76\u4e14\u6cbf\u7740\u8fd9\u6761\u94fe\u4f20\u9012\u8bf7\u6c42\uff0c\u76f4\u5230\u6709\u5bf9\u8c61\u5904\u7406\u5b83\u4e3a\u6b62\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u5b9e\u8d28 \uff1a\u8d23\u4efb\u94fe\u4e0a\u7684\u5904\u7406\u8005\u8d1f\u8d23\u5904\u7406\u8bf7\u6c42\uff0c\u5ba2\u6237\u53ea\u9700\u8981\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u804c\u8d23\u94fe\u4e0a\u5373\u53ef\uff0c\u65e0\u987b\u5173\u5fc3\u8bf7\u6c42\u7684\u5904\u7406\u7ec6\u8282\u548c\u8bf7\u6c42\u7684\u4f20\u9012\uff0c\u4ece\u800c\u5b9e\u73b0\u8bf7\u6c42\u53d1\u9001\u8005\u4e0e\u8bf7\u6c42\u5904\u7406\u8005\u7684\u89e3\u8026\u3002","title":"\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_3","text":"","title":"\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_4","text":"Handler \uff08\u62bd\u8c61\u5904\u7406\u8005\uff09\uff1a\u5904\u7406\u8bf7\u6c42\u7684\u63a5\u53e3\uff0c\u4e00\u822c\u8bbe\u8ba1\u4e3a\u5177\u6709\u62bd\u8c61\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5\u7684\u62bd\u8c61\u7c7b\uff0c\u4ee5\u4fbf\u4e8e\u4e0d\u540c\u7684\u5177\u4f53\u5904\u7406\u8005\u8fdb\u884c\u7ee7\u627f\uff0c\u4ece\u800c\u5b9e\u73b0\u5177\u4f53\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5\u3002\u6b64\u5916\uff0c\u7531\u4e8e\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u7684\u4e0b\u5bb6\u8fd8\u662f\u4e00\u4e2a\u5904\u7406\u8005\uff0c\u56e0\u6b64\u62bd\u8c61\u5904\u7406\u8005\u672c\u8eab\u8fd8\u5305\u542b\u4e86\u4e00\u4e2a\u672c\u8eab\u7684\u5f15\u7528( nextHandler )\u4f5c\u4e3a\u5176\u5bf9\u4e0b\u5bb6\u7684\u5f15\u7528\uff0c\u4ee5\u4fbf\u5c06\u5904\u7406\u8005\u94fe\u6210\u4e00\u6761\u94fe\uff1b ConcreteHandler \uff08\u5177\u4f53\u5904\u7406\u8005\uff09\uff1a\u62bd\u8c61\u5904\u7406\u8005\u7684\u5b50\u7c7b\uff0c\u53ef\u4ee5\u5904\u7406\u7528\u6237\u8bf7\u6c42\uff0c\u5176\u5b9e\u73b0\u4e86\u62bd\u8c61\u5904\u7406\u8005\u4e2d\u5b9a\u4e49\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5\u3002\u5728\u5177\u4f53\u5904\u7406\u8bf7\u6c42\u65f6\u9700\u8981\u8fdb\u884c\u5224\u65ad\uff0c\u82e5\u5176\u5177\u6709\u76f8\u5e94\u7684\u5904\u7406\u6743\u9650\uff0c\u90a3\u4e48\u5c31\u5904\u7406\u5b83\uff1b\u5426\u5219\uff0c\u5176\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u540e\u7ee7\u8005\uff0c\u4ee5\u4fbf\u8ba9\u540e\u9762\u7684\u5904\u7406\u8005\u8fdb\u884c\u5904\u7406\u3002 \u5728\u8d23\u4efb\u94fe\u6a21\u5f0f\u91cc\uff0c\u7531\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u5bf9\u8c61\u5bf9\u5176\u4e0b\u5bb6\u7684\u5f15\u7528\u800c\u8fde\u63a5\u8d77\u6765\u5f62\u6210\u4e00\u6761\u8bf7\u6c42\u5904\u7406\u94fe\u3002\u8bf7\u6c42\u5c06\u5728\u8fd9\u6761\u94fe\u4e0a\u4e00\u76f4\u4f20\u9012\uff0c\u76f4\u5230\u94fe\u4e0a\u7684\u67d0\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u80fd\u591f\u5904\u7406\u6b64\u8bf7\u6c42\u3002 \u53d1\u51fa\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u5e76\u4e0d\u77e5\u9053\u94fe\u4e0a\u7684\u54ea\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u5c06\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u8fd9\u4f7f\u5f97\u7cfb\u7edf\u53ef\u4ee5\u5728\u4e0d\u5f71\u54cd\u5ba2\u6237\u7aef\u7684\u60c5\u51b5\u4e0b\u52a8\u6001\u5730\u91cd\u65b0\u7ec4\u7ec7\u94fe\u548c\u5206\u914d\u8d23\u4efb \u3002","title":"\u53c2\u4e0e\u89d2\u8272"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#uml","text":"","title":"UML\u7c7b\u56fe"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_5","text":"\u9996\u5148\uff0c\u8d23\u4efb\u94fe\u6a21\u5f0f\u7684\u6838\u5fc3\u5728\u4e8e\u5bf9\u8bf7\u6c42\u5904\u7406\u8005\u7684\u62bd\u8c61\u3002\u5728\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0c\u62bd\u8c61\u5904\u7406\u8005\u4e00\u822c\u4f1a\u88ab\u8bbe\u5b9a\u4e3a \u62bd\u8c61\u7c7b \uff0c\u5176\u5178\u578b\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a /** * \u8d23\u4efb\u8fde\u6a21\u5f0f\u7684\u62bd\u8c61\u5904\u7406\u8005\u89d2\u8272. */ public abstract class Handler { /** \u540e\u7ee7\u5904\u7406\u8005\u89d2\u8272. */ protected Handler nextHandler ; /** * \u5904\u7406\u8bf7\u6c42\u7684\u62bd\u8c61\u65b9\u6cd5. * * @param condition \u6761\u4ef6 */ public abstract void handle ( String condition ); /** * nextHandler\u7684Setter\u65b9\u6cd5. * * @param nextHandler \u540e\u7ee7\u5904\u7406\u5668 */ public void setNextHandler ( Handler nextHandler ) { this . nextHandler = nextHandler ; } } \u5176\u6b21\uff0c\u662f\u82e5\u5e72\u4e2a\u5177\u4f53\u7684\u5904\u7406\u89d2\u8272\u7c7b\u3002 /** * \u5177\u4f53\u5904\u7406\u89d2\u82721. */ public class ConcreteHandler1 extends Handler { /** * \u5177\u4f53\u5904\u7406\u89d2\u82721\u7684\u5904\u7406\u65b9\u6cd5. * * @param condition \u6761\u4ef6 */ @Override public void handle ( String condition ) { // \u5982\u679c\u662f\u81ea\u5df1\u7684\u8d23\u4efb\uff0c\u5c31\u81ea\u5df1\u5904\u7406\uff0c\u8d1f\u8d23\u4f20\u7ed9\u4e0b\u5bb6\u5904\u7406 if ( \"ConcreteHandler1\" . equals ( condition )) { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u82721\u7684\u5904\u7406\u65b9\u6cd5handled1...\" ); } else { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u82721 \u901a\u8fc7...\" ); nextHandler . handle ( condition ); } } } /** * \u5177\u4f53\u5904\u7406\u89d2\u82722. */ public class ConcreteHandler2 extends Handler { /** * \u5177\u4f53\u5904\u7406\u89d2\u82722\u7684\u5904\u7406\u65b9\u6cd5. * * @param condition \u6761\u4ef6 */ @Override public void handle ( String condition ) { // \u5982\u679c\u662f\u81ea\u5df1\u7684\u8d23\u4efb\uff0c\u5c31\u81ea\u5df1\u5904\u7406\uff0c\u8d1f\u8d23\u4f20\u7ed9\u4e0b\u5bb6\u5904\u7406 if ( \"ConcreteHandler2\" . equals ( condition )) { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u82722\u7684\u5904\u7406\u65b9\u6cd5handled1...\" ); } else { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u82722 \u901a\u8fc7...\" ); nextHandler . handle ( condition ); } } } /** * \u5177\u4f53\u5904\u7406\u89d2\u8272n. */ public class ConcreteHandlerN extends Handler { /** * \u8fd9\u91cc\u5047\u8bben\u662f\u94fe\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u5fc5\u987b\u5904\u7406\u6389. * \u5728\u5b9e\u9645\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u51fa\u73b0\u73af\uff0c\u6216\u8005\u662f\u6811\u5f62\uff0c\u8fd9\u91cc\u5e76\u4e0d\u4e00\u5b9a\u662f\u6700\u540e\u4e00\u4e2a\u8282\u70b9. * * @param condition \u53c2\u6570\u6761\u4ef6 */ @Override public void handle ( String condition ) { System . out . println ( \"\u5177\u4f53\u5904\u7406\u89d2\u8272n\u7684\u5904\u7406\u65b9\u6cd5 \u7ed3\u675f...\" ); } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff0c\u4ee3\u7801\u8c03\u7528\u793a\u4f8b\u5982\u4e0b\uff1a /** * \u8d23\u4efb\u8fde\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b. */ public class ChainClient { /** * \u4e3b\u5165\u53e3\u65b9\u6cd5. * * @param args \u6570\u7ec4\u53c2\u6570 */ public static void main ( String [] args ) { Handler handler1 = new ConcreteHandler1 (); Handler handler2 = new ConcreteHandler2 (); Handler handlern = new ConcreteHandlerN (); handler1 . setNextHandler ( handler2 ); handler2 . setNextHandler ( handlern ); //\u5047\u8bbe\u8fd9\u4e2a\u8bf7\u6c42\u662fConcreteHandler2\u7684\u8d23\u4efb handler1 . handle ( \"ConcreteHandler2\" ); } } \u6ce8 \uff1a\u8d23\u4efb\u94fe\u6a21\u5f0f\u5e76\u4e0d\u521b\u5efa\u804c\u8d23\u94fe\uff0c\u804c\u8d23\u94fe\u7684\u521b\u5efa\u5de5\u4f5c\u5fc5\u987b\u7531\u7cfb\u7edf\u7684\u5176\u4ed6\u90e8\u5206\u6765\u5b8c\u6210\uff0c\u4e00\u822c\u7531\u4f7f\u7528\u8be5\u8d23\u4efb\u94fe\u7684\u5ba2\u6237\u7aef\u521b\u5efa\u3002\u804c\u8d23\u94fe\u6a21\u5f0f\u964d\u4f4e\u4e86\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u548c\u8bf7\u6c42\u5904\u7406\u8005\u4e4b\u95f4\u7684\u8026\u5408\uff0c\u4ece\u800c\u4f7f\u5f97\u591a\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u90fd\u6709\u673a\u4f1a\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u3002","title":"\u4ee3\u7801\u793a\u4f8b"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_6","text":"","title":"\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_7","text":"\u5728\u5b9e\u9645\u8f6f\u4ef6\u5f00\u53d1\u4e2d\uff0c\u5982\u679c\u9047\u5230\u6709\u591a\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u5904\u7406\u540c\u4e00\u8bf7\u6c42\u65f6\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u804c\u8d23\u94fe\u6a21\u5f0f\uff0c\u6700\u5e38\u89c1\u7684\u4f8b\u5b50\u5305\u62ec\u5728 Java Web \u5e94\u7528\u5f00\u53d1\u4e2d\u521b\u5efa\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff08Filter\uff09\u94fe\u6765\u5bf9\u8bf7\u6c42\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\uff08\u4e2d\u6587\u5b57\u7b26\u4e71\u7801\u7684\u5904\u7406\uff09\u3001\u5728\u5de5\u4f5c\u6d41\u7cfb\u7edf\u4e2d\u5b9e\u73b0\u516c\u6587\u7684\u5206\u7ea7\u5ba1\u6279\u3001\u5728Struts\u5e94\u7528\u4e2d\u6dfb\u52a0\u4e0d\u540c\u7684\u62e6\u622a\u5668(\u5e38\u7528\u7684\u6709\u7c7b\u578b\u8f6c\u5316\u3001\u5f02\u5e38\u5904\u7406\uff0c\u6570\u636e\u6821\u9a8c\u2026)\u4ee5\u589e\u5f3aStruts2\u7684\u529f\u80fd\u7b49\u3002","title":"\u4f7f\u7528\u573a\u666f"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_8","text":"\u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f \u8981\u6c42\u4e00\u4e2a\u5177\u4f53\u7684\u5904\u7406\u8005\u5bf9\u8c61\u53ea\u80fd\u5728\u4e24\u4e2a\u884c\u4e3a\u4e2d\u9009\u62e9\u4e00\u4e2a\uff1a\u4e00\u662f\u627f\u62c5\u8d23\u4efb\uff0c\u800c\u662f\u628a\u8d23\u4efb\u63a8\u7ed9\u4e0b\u5bb6\u3002\u4e0d\u5141\u8bb8\u51fa\u73b0\u67d0\u4e00\u4e2a\u5177\u4f53\u5904\u7406\u8005\u5bf9\u8c61\u5728\u627f\u62c5\u4e86\u4e00\u90e8\u5206\u8d23\u4efb\u540e\u53c8\u628a\u8d23\u4efb\u5411\u4e0b\u4f20\u7684\u60c5\u51b5\uff1b \u5728\u7eaf\u8d23\u4efb\u94fe\u6a21\u5f0f\u91cc\u9762\uff0c\u4e00\u4e2a\u8bf7\u6c42\u5fc5\u987b\u88ab\u67d0\u4e00\u4e2a\u5904\u7406\u8005\u5bf9\u8c61\u6240\u63a5\u6536\uff1b \u5728\u4e0d\u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f\u91cc\u9762\uff0c\u4e00\u4e2a\u8bf7\u6c42\u53ef\u4ee5\u6700\u7ec8\u4e0d\u88ab\u4efb\u4f55\u63a5\u6536\u7aef\u5bf9\u8c61\u6240\u63a5\u6536\u3002 \u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f\u7684\u5b9e\u9645\u4f8b\u5b50\u5f88\u96be\u627e\u5230\uff0c\u4e00\u822c\u770b\u5230\u7684\u4f8b\u5b50\u5747\u662f\u4e0d\u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f\u7684\u5b9e\u73b0\u3002","title":"\u7eaf\u4e0e\u4e0d\u7eaf\u7684\u8d23\u4efb\u94fe\u6a21\u5f0f"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_9","text":"\u964d\u4f4e\u8026\u5408\u5ea6\uff0c\u4f7f\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u89e3\u8026\uff0c\u4fbf\u4e8e\u7075\u6d3b\u7684\u3001\u53ef\u63d2\u62d4\u7684\u5b9a\u4e49\u8bf7\u6c42\u5904\u7406\u8fc7\u7a0b\uff1b \u7b80\u5316\u3001\u5c01\u88c5\u4e86\u8bf7\u6c42\u7684\u5904\u7406\u8fc7\u7a0b\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8fc7\u7a0b\u5bf9\u5ba2\u6237\u7aef\u800c\u8a00\u662f\u900f\u660e\u7684\uff0c\u4ee5\u4fbf\u4e8e\u52a8\u6001\u5730\u91cd\u65b0\u7ec4\u7ec7\u94fe\u4ee5\u53ca\u5206\u914d\u8d23\u4efb\uff0c\u589e\u5f3a\u8bf7\u6c42\u5904\u7406\u7684\u7075\u6d3b\u6027\uff1b \u53ef\u4ee5\u4ece\u804c\u8d23\u94fe\u4efb\u4f55\u4e00\u4e2a\u8282\u70b9\u5f00\u59cb\uff0c\u4e5f\u53ef\u4ee5\u968f\u65f6\u6539\u53d8\u5185\u90e8\u7684\u8bf7\u6c42\u5904\u7406\u89c4\u5219\uff0c\u6bcf\u4e2a\u8bf7\u6c42\u5904\u7406\u8005\u90fd\u53ef\u4ee5\u53bb\u52a8\u6001\u5730\u6307\u5b9a\u4ed6\u7684\u7ee7\u4efb\u8005\uff1b \u804c\u8d23\u94fe\u53ef\u7b80\u5316\u5bf9\u8c61\u95f4\u7684\u76f8\u4e92\u8fde\u63a5\u3002\u5b83\u4eec\u4ec5\u9700\u4fdd\u6301\u4e00\u4e2a\u6307\u5411\u5176\u540e\u7ee7\u8005\u7684\u5f15\u7528\uff0c\u800c\u4e0d\u9700\u4fdd\u6301\u5b83\u6240\u6709\u7684\u5019\u9009\u63a5\u53d7\u8005\u7684\u5f15\u7528\uff1b \u589e\u52a0\u65b0\u7684\u8bf7\u6c42\u5904\u7406\u7c7b\u5f88\u65b9\u4fbf\u3002","title":"\u4f18\u70b9"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_10","text":"\u4e0d\u80fd\u4fdd\u8bc1\u8bf7\u6c42\u4e00\u5b9a\u88ab\u63a5\u6536\u3002\u65e2\u7136\u4e00\u4e2a\u8bf7\u6c42\u6ca1\u6709\u660e\u786e\u7684\u63a5\u6536\u8005\uff0c\u90a3\u4e48\u5c31\u4e0d\u80fd\u4fdd\u8bc1\u5b83\u4e00\u5b9a\u4f1a\u88ab\u5904\u7406\uff1b \u8be5\u8bf7\u6c42\u53ef\u80fd\u4e00\u76f4\u5230\u94fe\u7684\u672b\u7aef\u90fd\u5f97\u4e0d\u5230\u5904\u7406\u3002\u4e00\u4e2a\u8bf7\u6c42\u4e5f\u53ef\u80fd\u56e0\u8be5\u94fe\u6ca1\u6709\u88ab\u6b63\u786e\u914d\u7f6e\u800c\u5f97\u4e0d\u5230\u5904\u7406\uff1b \u7cfb\u7edf\u6027\u80fd\u5c06\u53d7\u5230\u4e00\u5b9a\u5f71\u54cd\uff0c\u800c\u4e14\u5728\u8fdb\u884c\u4ee3\u7801\u8c03\u8bd5\u65f6\u4e0d\u592a\u65b9\u4fbf\uff1b\u53ef\u80fd\u4f1a\u9020\u6210\u5faa\u73af\u8c03\u7528\u3002","title":"\u7f3a\u70b9"},{"location":"Design-Patterns/12-ChainofResponsibilityPattern/#_11","text":"\u5728\u804c\u8d23\u94fe\u6a21\u5f0f\u91cc\uff0c\u5f88\u591a\u5bf9\u8c61\u7531\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u5bf9\u5176\u4e0b\u5bb6\u7684\u5f15\u7528\u800c\u8fde\u63a5\u8d77\u6765\u5f62\u6210\u4e00\u6761\u94fe\u3002\u8bf7\u6c42\u5728\u8fd9\u4e2a\u94fe\u4e0a\u4f20\u9012\uff0c\u76f4\u5230\u94fe\u4e0a\u7684\u67d0\u4e00\u4e2a\u5bf9\u8c61\u51b3\u5b9a\u5904\u7406\u6b64\u8bf7\u6c42\u3002\u53d1\u51fa\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u5e76\u4e0d\u77e5\u9053\u94fe\u4e0a\u7684\u54ea\u4e00\u4e2a\u5bf9\u8c61\u6700\u7ec8\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u8fd9\u4f7f\u5f97\u7cfb\u7edf\u53ef\u4ee5\u5728\u4e0d\u5f71\u54cd\u5ba2\u6237\u7aef\u7684\u60c5\u51b5\u4e0b\u52a8\u6001\u5730\u91cd\u65b0\u7ec4\u7ec7\u94fe\u548c\u5206\u914d\u8d23\u4efb\u3002 \u804c\u8d23\u94fe\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u53ef\u4ee5\u964d\u4f4e\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\uff0c\u7b80\u5316\u5bf9\u8c61\u7684\u76f8\u4e92\u8fde\u63a5\uff0c\u540c\u65f6\u589e\u5f3a\u7ed9\u5bf9\u8c61\u6307\u6d3e\u804c\u8d23\u7684\u7075\u6d3b\u6027\uff0c\u589e\u52a0\u65b0\u7684\u8bf7\u6c42\u5904\u7406\u7c7b\u4e5f\u5f88\u65b9\u4fbf\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u4e0d\u80fd\u4fdd\u8bc1\u8bf7\u6c42\u4e00\u5b9a\u88ab\u63a5\u6536\uff0c\u4e14\u5bf9\u4e8e\u6bd4\u8f83\u957f\u7684\u804c\u8d23\u94fe\uff0c\u8bf7\u6c42\u7684\u5904\u7406\u53ef\u80fd\u6d89\u53ca\u5230\u591a\u4e2a\u5904\u7406\u5bf9\u8c61\uff0c\u7cfb\u7edf\u6027\u80fd\u5c06\u53d7\u5230\u4e00\u5b9a\u5f71\u54cd\uff0c\u800c\u4e14\u5728\u8fdb\u884c\u4ee3\u7801\u8c03\u8bd5\u65f6\u4e0d\u592a\u65b9\u4fbf\u3002","title":"\u603b\u7ed3"},{"location":"Design-Patterns/13-CommandPattern/","text":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a \u00b6 \u5728\u8f6f\u4ef6\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u9700\u8981\u5411\u67d0\u4e9b\u5bf9\u8c61\u53d1\u9001\u8bf7\u6c42\uff0c\u4f46\u662f\u5e76\u4e0d\u77e5\u9053\u8bf7\u6c42\u7684\u63a5\u6536\u8005\u662f\u8c01\uff0c\u4e5f\u4e0d\u77e5\u9053\u88ab\u8bf7\u6c42\u7684\u64cd\u4f5c\u662f\u54ea\u4e2a\uff0c\u6211\u4eec\u53ea\u9700\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u6307\u5b9a\u5177\u4f53\u7684\u8bf7\u6c42\u63a5\u6536\u8005\u5373\u53ef\uff0c\u6b64\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\u6765\u8fdb\u884c\u8bbe\u8ba1\uff0c\u4f7f\u5f97\u8bf7\u6c42\u53d1\u9001\u8005\u4e0e\u8bf7\u6c42\u63a5\u6536\u8005\u6d88\u9664\u5f7c\u6b64\u4e4b\u95f4\u7684\u8026\u5408\uff0c\u8ba9\u5bf9\u8c61\u4e4b\u95f4\u7684\u8c03\u7528\u5173\u7cfb\u66f4\u52a0\u7075\u6d3b\u3002 \u547d\u4ee4\u6a21\u5f0f\u53ef\u4ee5\u5bf9\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u5b8c\u5168\u89e3\u8026\uff0c\u53d1\u9001\u8005\u4e0e\u63a5\u6536\u8005\u4e4b\u95f4\u6ca1\u6709\u76f4\u63a5\u5f15\u7528\u5173\u7cfb\uff0c\u53d1\u9001\u8bf7\u6c42\u7684\u5bf9\u8c61\u53ea\u9700\u8981\u77e5\u9053\u5982\u4f55\u53d1\u9001\u8bf7\u6c42\uff0c\u800c\u4e0d\u5fc5\u77e5\u9053\u5982\u4f55\u5b8c\u6210\u8bf7\u6c42\u3002\u8fd9\u5c31\u662f\u547d\u4ee4\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002 \u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u547d\u4ee4\u6a21\u5f0f( Command Pattern ) \uff1a\u5c06\u4e00\u4e2a\u8bf7\u6c42\u5c01\u88c5\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u800c\u4f7f\u6211\u4eec\u53ef\u7528\u4e0d\u540c\u7684\u8bf7\u6c42\u5bf9\u5ba2\u6237\u8fdb\u884c\u53c2\u6570\u5316\uff1b\u5bf9\u8bf7\u6c42\u6392\u961f\u6216\u8005\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\uff0c\u4ee5\u53ca\u652f\u6301\u53ef\u64a4\u9500\u7684\u64cd\u4f5c\u3002\u547d\u4ee4\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\uff0c\u5176\u522b\u540d\u4e3a\u52a8\u4f5c( Action )\u6a21\u5f0f\u6216\u4e8b\u52a1( Transaction )\u6a21\u5f0f\u3002 \u4e09\u3001\u6a21\u5f0f\u7ed3\u6784 \u00b6 1. \u89d2\u8272\u7ec4\u6210 \u00b6 \u547d\u4ee4\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Command : \u62bd\u8c61\u547d\u4ee4\u7c7b ConcreteCommand : \u5177\u4f53\u547d\u4ee4\u7c7b Invoker : \u8c03\u7528\u8005 Receiver : \u63a5\u6536\u8005 Client : \u5ba2\u6237\u7c7b 2. \u7ed3\u6784\u56fe \u00b6 \u56db\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684 Receiver \u7c7b\u548c\u5177\u4f53\u7684 Receiver \u7c7b\uff1a /** * \u901a\u7528\u7684\u62bd\u8c61 Receiver \u63a5\u6536\u8005. */ public abstract class Receiver { /** * \u5b9a\u4e49\u6bcf\u4e2a\u63a5\u6536\u8005\u90fd\u5fc5\u987b\u5b8c\u6210\u7684\u4e1a\u52a1. */ public abstract void doSomething (); } /** * \u5177\u4f53\u7684 Receiver \u7c7b1. */ public class ConcreteReceiver1 extends Receiver { @Override public void doSomething () { System . out . println ( \"ConcreteReceiver1 \u5904\u7406\u7684\u4e1a\u52a1\u903b\u8f91...\" ); } } /** * \u5177\u4f53\u7684 Receiver \u7c7b2. */ public class ConcreteReceiver2 extends Receiver { @Override public void doSomething () { System . out . println ( \"ConcreteReceiver2 \u5904\u7406\u7684\u4e1a\u52a1\u903b\u8f91...\" ); } } \u5176\u5b9e\uff0c\u662f\u62bd\u8c61\u7684 Command \u7c7b\u548c\u5177\u4f53\u7684 Command \u7c7b\uff1a /** * \u62bd\u8c61\u7684 Command \u7c7b. */ public abstract class Command { /** * \u547d\u4ee4\u7684\u62bd\u8c61\u6267\u884c\u547d\u4ee4\u7684\u65b9\u6cd5. */ public abstract void execute (); } /** * \u5177\u4f53\u7684 Command \u547d\u4ee4\u7c7b1. */ public class ConcreteCommand1 extends Command { /** \u5bf9\u54ea\u4e2areceiver\u7c7b\u8fdb\u884c\u5904\u7406. */ private Receiver receiver ; public ConcreteCommand1 ( Receiver receiver ) { this . receiver = receiver ; } /** * \u5fc5\u987b\u5b9e\u73b0\u7684\u4e00\u4e2a\u547d\u4ee4. */ @Override public void execute () { this . receiver . doSomething (); } } /** * \u5177\u4f53\u7684 Command \u547d\u4ee4\u7c7b2. */ public class ConcreteCommand2 extends Command { /** \u5bf9\u54ea\u4e2areceiver\u7c7b\u8fdb\u884c\u5904\u7406. */ private Receiver receiver ; public ConcreteCommand2 ( Receiver receiver ) { this . receiver = receiver ; } /** * \u5fc5\u987b\u5b9e\u73b0\u7684\u547d\u4ee4. */ @Override public void execute () { this . receiver . doSomething (); } } \u6700\u540e\uff0c\u8c03\u7528\u8005 Invoker \u7c7b\uff1a /** * \u8c03\u7528\u8005 Invoker \u7c7b. */ public class Invoker { private Command command ; public void setCommand ( Command command ) { this . command = command ; } /** * \u6267\u884c\u547d\u4ee4. */ public void action () { this . command . execute (); } } \u4ee5\u4e0b\u662f\u547d\u4ee4\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u547d\u4ee4\u6a21\u5f0f\u7684\u573a\u666f\u7c7b. */ public class CommandClient { public static void main ( String [] args ) { Invoker invoker = new Invoker (); Receiver receiver = new ConcreteReceiver1 (); Command command = new ConcreteCommand1 ( receiver ); // \u628a\u547d\u4ee4\u4ea4\u7ed9\u8c03\u7528\u8005\u6267\u884c invoker . setCommand ( command ); invoker . action (); } } \u4e94\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u547d\u4ee4\u6a21\u5f0f\u7684\u672c\u8d28\u662f\u5bf9\u547d\u4ee4\u8fdb\u884c\u5c01\u88c5\uff0c\u5c06\u53d1\u51fa\u547d\u4ee4\u7684\u8d23\u4efb\u548c\u6267\u884c\u547d\u4ee4\u7684\u8d23\u4efb\u5206\u5272\u5f00 \u3002 \u6bcf\u4e00\u4e2a\u547d\u4ee4\u90fd\u662f\u4e00\u4e2a\u64cd\u4f5c\uff1a\u8bf7\u6c42\u7684\u4e00\u65b9\u53d1\u51fa\u8bf7\u6c42\uff0c\u8981\u6c42\u6267\u884c\u4e00\u4e2a\u64cd\u4f5c\uff1b\u63a5\u6536\u7684\u4e00\u65b9\u6536\u5230\u8bf7\u6c42\uff0c\u5e76\u6267\u884c\u64cd\u4f5c\u3002 \u547d\u4ee4\u6a21\u5f0f\u5141\u8bb8\u8bf7\u6c42\u7684\u4e00\u65b9\u548c\u63a5\u6536\u7684\u4e00\u65b9\u72ec\u7acb\u5f00\u6765\uff0c\u4f7f\u5f97\u8bf7\u6c42\u7684\u4e00\u65b9\u4e0d\u5fc5\u77e5\u9053\u63a5\u6536\u8bf7\u6c42\u7684\u4e00\u65b9\u7684\u63a5\u53e3\uff0c\u66f4\u4e0d\u5fc5\u77e5\u9053\u8bf7\u6c42\u662f\u600e\u4e48\u88ab\u63a5\u6536\uff0c\u4ee5\u53ca\u64cd\u4f5c\u662f\u5426\u88ab\u6267\u884c\u3001\u4f55\u65f6\u88ab\u6267\u884c\uff0c\u4ee5\u53ca\u662f\u600e\u4e48\u88ab\u6267\u884c\u7684\u3002 \u547d\u4ee4\u6a21\u5f0f\u4f7f\u8bf7\u6c42\u672c\u8eab\u6210\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u548c\u5176\u4ed6\u5bf9\u8c61\u4e00\u6837\u53ef\u4ee5\u88ab\u5b58\u50a8\u548c\u4f20\u9012\u3002 \u547d\u4ee4\u6a21\u5f0f\u7684\u5173\u952e\u5728\u4e8e\u5f15\u5165\u4e86\u62bd\u8c61\u547d\u4ee4\u63a5\u53e3\uff0c\u4e14\u53d1\u9001\u8005\u9488\u5bf9\u62bd\u8c61\u547d\u4ee4\u63a5\u53e3\u7f16\u7a0b\uff0c\u53ea\u6709\u5b9e\u73b0\u4e86\u62bd\u8c61\u547d\u4ee4\u63a5\u53e3\u7684\u5177\u4f53\u547d\u4ee4\u624d\u80fd\u4e0e\u63a5\u6536\u8005\u76f8\u5173\u8054\u3002 1. \u4f18\u70b9 \u00b6 \u547d\u4ee4\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u964d\u4f4e\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\u3002 \u65b0\u7684\u547d\u4ee4\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u52a0\u5165\u5230\u7cfb\u7edf\u4e2d\u3002 \u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u5730\u8bbe\u8ba1\u4e00\u4e2a\u547d\u4ee4\u961f\u5217\u548c\u5b8f\u547d\u4ee4\uff08\u7ec4\u5408\u547d\u4ee4\uff09\u3002 \u53ef\u4ee5\u65b9\u4fbf\u5730\u5b9e\u73b0\u5bf9\u8bf7\u6c42\u7684 Undo \u548c Redo \u3002 2. \u7f3a\u70b9 \u00b6 \u547d\u4ee4\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67d0\u4e9b\u7cfb\u7edf\u6709\u8fc7\u591a\u7684\u5177\u4f53\u547d\u4ee4\u7c7b\u3002\u56e0\u4e3a\u9488\u5bf9\u6bcf\u4e00\u4e2a\u547d\u4ee4\u90fd\u9700\u8981\u8bbe\u8ba1\u4e00\u4e2a\u5177\u4f53\u547d\u4ee4\u7c7b\uff0c\u56e0\u6b64\u67d0\u4e9b\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u5927\u91cf\u5177\u4f53\u547d\u4ee4\u7c7b\uff0c\u8fd9\u5c06\u5f71\u54cd\u547d\u4ee4\u6a21\u5f0f\u7684\u4f7f\u7528\u3002 3. \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\uff1a \u7cfb\u7edf\u9700\u8981\u5c06\u8bf7\u6c42\u8c03\u7528\u8005\u548c\u8bf7\u6c42\u63a5\u6536\u8005\u89e3\u8026\uff0c\u4f7f\u5f97\u8c03\u7528\u8005\u548c\u63a5\u6536\u8005\u4e0d\u76f4\u63a5\u4ea4\u4e92\u3002 \u7cfb\u7edf\u9700\u8981\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u6307\u5b9a\u8bf7\u6c42\u3001\u5c06\u8bf7\u6c42\u6392\u961f\u548c\u6267\u884c\u8bf7\u6c42\u3002 \u7cfb\u7edf\u9700\u8981\u652f\u6301\u547d\u4ee4\u7684\u64a4\u9500(Undo)\u64cd\u4f5c\u548c\u6062\u590d(Redo)\u64cd\u4f5c\u3002 \u7cfb\u7edf\u9700\u8981\u5c06\u4e00\u7ec4\u64cd\u4f5c\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5373\u652f\u6301\u5b8f\u547d\u4ee4 \u516d\u3001\u6a21\u5f0f\u603b\u7ed3 \u00b6 \u5728\u547d\u4ee4\u6a21\u5f0f\u4e2d\uff0c\u5c06\u4e00\u4e2a\u8bf7\u6c42\u5c01\u88c5\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u800c\u4f7f\u6211\u4eec\u53ef\u7528\u4e0d\u540c\u7684\u8bf7\u6c42\u5bf9\u5ba2\u6237\u8fdb\u884c\u53c2\u6570\u5316\uff1b\u5bf9\u8bf7\u6c42\u6392\u961f\u6216\u8005\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\uff0c\u4ee5\u53ca\u652f\u6301\u53ef\u64a4\u9500\u7684\u64cd\u4f5c\u3002\u547d\u4ee4\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\uff0c\u5176\u522b\u540d\u4e3a\u52a8\u4f5c\u6a21\u5f0f\u6216\u4e8b\u52a1\u6a21\u5f0f\u3002 \u547d\u4ee4\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u547d\u4ee4\u7c7b\u4e2d\u58f0\u660e\u4e86\u7528\u4e8e\u6267\u884c\u8bf7\u6c42\u7684 execute() \u7b49\u65b9\u6cd5\uff0c\u901a\u8fc7\u8fd9\u4e9b\u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528\u8bf7\u6c42\u63a5\u6536\u8005\u7684\u76f8\u5173\u64cd\u4f5c\uff1b\u5177\u4f53\u547d\u4ee4\u7c7b\u662f\u62bd\u8c61\u547d\u4ee4\u7c7b\u7684\u5b50\u7c7b\uff0c\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u547d\u4ee4\u7c7b\u4e2d\u58f0\u660e\u7684\u65b9\u6cd5\uff0c\u5b83\u5bf9\u5e94\u5177\u4f53\u7684\u63a5\u6536\u8005\u5bf9\u8c61\uff0c\u5c06\u63a5\u6536\u8005\u5bf9\u8c61\u7684\u52a8\u4f5c\u7ed1\u5b9a\u5176\u4e2d\uff1b\u8c03\u7528\u8005\u5373\u8bf7\u6c42\u7684\u53d1\u9001\u8005\uff0c\u53c8\u79f0\u4e3a\u8bf7\u6c42\u8005\uff0c\u5b83\u901a\u8fc7\u547d\u4ee4\u5bf9\u8c61\u6765\u6267\u884c\u8bf7\u6c42\uff1b\u63a5\u6536\u8005\u6267\u884c\u4e0e\u8bf7\u6c42\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u5b83\u5177\u4f53\u5b9e\u73b0\u5bf9\u8bf7\u6c42\u7684\u4e1a\u52a1\u5904\u7406\u3002 \u547d\u4ee4\u6a21\u5f0f\u7684\u672c\u8d28\u662f\u5bf9\u547d\u4ee4\u8fdb\u884c\u5c01\u88c5\uff0c\u5c06\u53d1\u51fa\u547d\u4ee4\u7684\u8d23\u4efb\u548c\u6267\u884c\u547d\u4ee4\u7684\u8d23\u4efb\u5206\u5272\u5f00\u3002\u547d\u4ee4\u6a21\u5f0f\u4f7f\u8bf7\u6c42\u672c\u8eab\u6210\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u548c\u5176\u4ed6\u5bf9\u8c61\u4e00\u6837\u53ef\u4ee5\u88ab\u5b58\u50a8\u548c\u4f20\u9012\u3002 \u547d\u4ee4\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u964d\u4f4e\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\uff0c\u589e\u52a0\u65b0\u7684\u547d\u4ee4\u5f88\u65b9\u4fbf\uff0c\u800c\u4e14\u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u5730\u8bbe\u8ba1\u4e00\u4e2a\u547d\u4ee4\u961f\u5217\u548c\u5b8f\u547d\u4ee4\uff0c\u5e76\u65b9\u4fbf\u5730\u5b9e\u73b0\u5bf9\u8bf7\u6c42\u7684\u64a4\u9500\u548c\u6062\u590d\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67d0\u4e9b\u7cfb\u7edf\u6709\u8fc7\u591a\u7684\u5177\u4f53\u547d\u4ee4\u7c7b\u3002 \u547d\u4ee4\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u9700\u8981\u5c06\u8bf7\u6c42\u8c03\u7528\u8005\u548c\u8bf7\u6c42\u63a5\u6536\u8005\u89e3\u8026\uff0c\u4f7f\u5f97\u8c03\u7528\u8005\u548c\u63a5\u6536\u8005\u4e0d\u76f4\u63a5\u4ea4\u4e92\uff1b\u9700\u8981\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u6307\u5b9a\u8bf7\u6c42\u3001\u5c06\u8bf7\u6c42\u6392\u961f\u548c\u6267\u884c\u8bf7\u6c42\uff1b\u9700\u8981\u652f\u6301\u547d\u4ee4\u7684\u64a4\u9500\u64cd\u4f5c\u548c\u6062\u590d\u64cd\u4f5c\uff0c\u9700\u8981\u5c06\u4e00\u7ec4\u64cd\u4f5c\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5373\u652f\u6301\u5b8f\u547d\u4ee4\u3002","title":"\u547d\u4ee4\u6a21\u5f0f\uff08Command Pattern\uff09"},{"location":"Design-Patterns/13-CommandPattern/#_1","text":"\u5728\u8f6f\u4ef6\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u9700\u8981\u5411\u67d0\u4e9b\u5bf9\u8c61\u53d1\u9001\u8bf7\u6c42\uff0c\u4f46\u662f\u5e76\u4e0d\u77e5\u9053\u8bf7\u6c42\u7684\u63a5\u6536\u8005\u662f\u8c01\uff0c\u4e5f\u4e0d\u77e5\u9053\u88ab\u8bf7\u6c42\u7684\u64cd\u4f5c\u662f\u54ea\u4e2a\uff0c\u6211\u4eec\u53ea\u9700\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u6307\u5b9a\u5177\u4f53\u7684\u8bf7\u6c42\u63a5\u6536\u8005\u5373\u53ef\uff0c\u6b64\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\u6765\u8fdb\u884c\u8bbe\u8ba1\uff0c\u4f7f\u5f97\u8bf7\u6c42\u53d1\u9001\u8005\u4e0e\u8bf7\u6c42\u63a5\u6536\u8005\u6d88\u9664\u5f7c\u6b64\u4e4b\u95f4\u7684\u8026\u5408\uff0c\u8ba9\u5bf9\u8c61\u4e4b\u95f4\u7684\u8c03\u7528\u5173\u7cfb\u66f4\u52a0\u7075\u6d3b\u3002 \u547d\u4ee4\u6a21\u5f0f\u53ef\u4ee5\u5bf9\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u5b8c\u5168\u89e3\u8026\uff0c\u53d1\u9001\u8005\u4e0e\u63a5\u6536\u8005\u4e4b\u95f4\u6ca1\u6709\u76f4\u63a5\u5f15\u7528\u5173\u7cfb\uff0c\u53d1\u9001\u8bf7\u6c42\u7684\u5bf9\u8c61\u53ea\u9700\u8981\u77e5\u9053\u5982\u4f55\u53d1\u9001\u8bf7\u6c42\uff0c\u800c\u4e0d\u5fc5\u77e5\u9053\u5982\u4f55\u5b8c\u6210\u8bf7\u6c42\u3002\u8fd9\u5c31\u662f\u547d\u4ee4\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/13-CommandPattern/#_2","text":"\u547d\u4ee4\u6a21\u5f0f( Command Pattern ) \uff1a\u5c06\u4e00\u4e2a\u8bf7\u6c42\u5c01\u88c5\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u800c\u4f7f\u6211\u4eec\u53ef\u7528\u4e0d\u540c\u7684\u8bf7\u6c42\u5bf9\u5ba2\u6237\u8fdb\u884c\u53c2\u6570\u5316\uff1b\u5bf9\u8bf7\u6c42\u6392\u961f\u6216\u8005\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\uff0c\u4ee5\u53ca\u652f\u6301\u53ef\u64a4\u9500\u7684\u64cd\u4f5c\u3002\u547d\u4ee4\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\uff0c\u5176\u522b\u540d\u4e3a\u52a8\u4f5c( Action )\u6a21\u5f0f\u6216\u4e8b\u52a1( Transaction )\u6a21\u5f0f\u3002","title":"\u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/13-CommandPattern/#_3","text":"","title":"\u4e09\u3001\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/13-CommandPattern/#1","text":"\u547d\u4ee4\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Command : \u62bd\u8c61\u547d\u4ee4\u7c7b ConcreteCommand : \u5177\u4f53\u547d\u4ee4\u7c7b Invoker : \u8c03\u7528\u8005 Receiver : \u63a5\u6536\u8005 Client : \u5ba2\u6237\u7c7b","title":"1. \u89d2\u8272\u7ec4\u6210"},{"location":"Design-Patterns/13-CommandPattern/#2","text":"","title":"2. \u7ed3\u6784\u56fe"},{"location":"Design-Patterns/13-CommandPattern/#_4","text":"\u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684 Receiver \u7c7b\u548c\u5177\u4f53\u7684 Receiver \u7c7b\uff1a /** * \u901a\u7528\u7684\u62bd\u8c61 Receiver \u63a5\u6536\u8005. */ public abstract class Receiver { /** * \u5b9a\u4e49\u6bcf\u4e2a\u63a5\u6536\u8005\u90fd\u5fc5\u987b\u5b8c\u6210\u7684\u4e1a\u52a1. */ public abstract void doSomething (); } /** * \u5177\u4f53\u7684 Receiver \u7c7b1. */ public class ConcreteReceiver1 extends Receiver { @Override public void doSomething () { System . out . println ( \"ConcreteReceiver1 \u5904\u7406\u7684\u4e1a\u52a1\u903b\u8f91...\" ); } } /** * \u5177\u4f53\u7684 Receiver \u7c7b2. */ public class ConcreteReceiver2 extends Receiver { @Override public void doSomething () { System . out . println ( \"ConcreteReceiver2 \u5904\u7406\u7684\u4e1a\u52a1\u903b\u8f91...\" ); } } \u5176\u5b9e\uff0c\u662f\u62bd\u8c61\u7684 Command \u7c7b\u548c\u5177\u4f53\u7684 Command \u7c7b\uff1a /** * \u62bd\u8c61\u7684 Command \u7c7b. */ public abstract class Command { /** * \u547d\u4ee4\u7684\u62bd\u8c61\u6267\u884c\u547d\u4ee4\u7684\u65b9\u6cd5. */ public abstract void execute (); } /** * \u5177\u4f53\u7684 Command \u547d\u4ee4\u7c7b1. */ public class ConcreteCommand1 extends Command { /** \u5bf9\u54ea\u4e2areceiver\u7c7b\u8fdb\u884c\u5904\u7406. */ private Receiver receiver ; public ConcreteCommand1 ( Receiver receiver ) { this . receiver = receiver ; } /** * \u5fc5\u987b\u5b9e\u73b0\u7684\u4e00\u4e2a\u547d\u4ee4. */ @Override public void execute () { this . receiver . doSomething (); } } /** * \u5177\u4f53\u7684 Command \u547d\u4ee4\u7c7b2. */ public class ConcreteCommand2 extends Command { /** \u5bf9\u54ea\u4e2areceiver\u7c7b\u8fdb\u884c\u5904\u7406. */ private Receiver receiver ; public ConcreteCommand2 ( Receiver receiver ) { this . receiver = receiver ; } /** * \u5fc5\u987b\u5b9e\u73b0\u7684\u547d\u4ee4. */ @Override public void execute () { this . receiver . doSomething (); } } \u6700\u540e\uff0c\u8c03\u7528\u8005 Invoker \u7c7b\uff1a /** * \u8c03\u7528\u8005 Invoker \u7c7b. */ public class Invoker { private Command command ; public void setCommand ( Command command ) { this . command = command ; } /** * \u6267\u884c\u547d\u4ee4. */ public void action () { this . command . execute (); } } \u4ee5\u4e0b\u662f\u547d\u4ee4\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u547d\u4ee4\u6a21\u5f0f\u7684\u573a\u666f\u7c7b. */ public class CommandClient { public static void main ( String [] args ) { Invoker invoker = new Invoker (); Receiver receiver = new ConcreteReceiver1 (); Command command = new ConcreteCommand1 ( receiver ); // \u628a\u547d\u4ee4\u4ea4\u7ed9\u8c03\u7528\u8005\u6267\u884c invoker . setCommand ( command ); invoker . action (); } }","title":"\u56db\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/13-CommandPattern/#_5","text":"\u547d\u4ee4\u6a21\u5f0f\u7684\u672c\u8d28\u662f\u5bf9\u547d\u4ee4\u8fdb\u884c\u5c01\u88c5\uff0c\u5c06\u53d1\u51fa\u547d\u4ee4\u7684\u8d23\u4efb\u548c\u6267\u884c\u547d\u4ee4\u7684\u8d23\u4efb\u5206\u5272\u5f00 \u3002 \u6bcf\u4e00\u4e2a\u547d\u4ee4\u90fd\u662f\u4e00\u4e2a\u64cd\u4f5c\uff1a\u8bf7\u6c42\u7684\u4e00\u65b9\u53d1\u51fa\u8bf7\u6c42\uff0c\u8981\u6c42\u6267\u884c\u4e00\u4e2a\u64cd\u4f5c\uff1b\u63a5\u6536\u7684\u4e00\u65b9\u6536\u5230\u8bf7\u6c42\uff0c\u5e76\u6267\u884c\u64cd\u4f5c\u3002 \u547d\u4ee4\u6a21\u5f0f\u5141\u8bb8\u8bf7\u6c42\u7684\u4e00\u65b9\u548c\u63a5\u6536\u7684\u4e00\u65b9\u72ec\u7acb\u5f00\u6765\uff0c\u4f7f\u5f97\u8bf7\u6c42\u7684\u4e00\u65b9\u4e0d\u5fc5\u77e5\u9053\u63a5\u6536\u8bf7\u6c42\u7684\u4e00\u65b9\u7684\u63a5\u53e3\uff0c\u66f4\u4e0d\u5fc5\u77e5\u9053\u8bf7\u6c42\u662f\u600e\u4e48\u88ab\u63a5\u6536\uff0c\u4ee5\u53ca\u64cd\u4f5c\u662f\u5426\u88ab\u6267\u884c\u3001\u4f55\u65f6\u88ab\u6267\u884c\uff0c\u4ee5\u53ca\u662f\u600e\u4e48\u88ab\u6267\u884c\u7684\u3002 \u547d\u4ee4\u6a21\u5f0f\u4f7f\u8bf7\u6c42\u672c\u8eab\u6210\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u548c\u5176\u4ed6\u5bf9\u8c61\u4e00\u6837\u53ef\u4ee5\u88ab\u5b58\u50a8\u548c\u4f20\u9012\u3002 \u547d\u4ee4\u6a21\u5f0f\u7684\u5173\u952e\u5728\u4e8e\u5f15\u5165\u4e86\u62bd\u8c61\u547d\u4ee4\u63a5\u53e3\uff0c\u4e14\u53d1\u9001\u8005\u9488\u5bf9\u62bd\u8c61\u547d\u4ee4\u63a5\u53e3\u7f16\u7a0b\uff0c\u53ea\u6709\u5b9e\u73b0\u4e86\u62bd\u8c61\u547d\u4ee4\u63a5\u53e3\u7684\u5177\u4f53\u547d\u4ee4\u624d\u80fd\u4e0e\u63a5\u6536\u8005\u76f8\u5173\u8054\u3002","title":"\u4e94\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/13-CommandPattern/#1_1","text":"\u547d\u4ee4\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u964d\u4f4e\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\u3002 \u65b0\u7684\u547d\u4ee4\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u52a0\u5165\u5230\u7cfb\u7edf\u4e2d\u3002 \u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u5730\u8bbe\u8ba1\u4e00\u4e2a\u547d\u4ee4\u961f\u5217\u548c\u5b8f\u547d\u4ee4\uff08\u7ec4\u5408\u547d\u4ee4\uff09\u3002 \u53ef\u4ee5\u65b9\u4fbf\u5730\u5b9e\u73b0\u5bf9\u8bf7\u6c42\u7684 Undo \u548c Redo \u3002","title":"1. \u4f18\u70b9"},{"location":"Design-Patterns/13-CommandPattern/#2_1","text":"\u547d\u4ee4\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67d0\u4e9b\u7cfb\u7edf\u6709\u8fc7\u591a\u7684\u5177\u4f53\u547d\u4ee4\u7c7b\u3002\u56e0\u4e3a\u9488\u5bf9\u6bcf\u4e00\u4e2a\u547d\u4ee4\u90fd\u9700\u8981\u8bbe\u8ba1\u4e00\u4e2a\u5177\u4f53\u547d\u4ee4\u7c7b\uff0c\u56e0\u6b64\u67d0\u4e9b\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u5927\u91cf\u5177\u4f53\u547d\u4ee4\u7c7b\uff0c\u8fd9\u5c06\u5f71\u54cd\u547d\u4ee4\u6a21\u5f0f\u7684\u4f7f\u7528\u3002","title":"2. \u7f3a\u70b9"},{"location":"Design-Patterns/13-CommandPattern/#3","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\uff1a \u7cfb\u7edf\u9700\u8981\u5c06\u8bf7\u6c42\u8c03\u7528\u8005\u548c\u8bf7\u6c42\u63a5\u6536\u8005\u89e3\u8026\uff0c\u4f7f\u5f97\u8c03\u7528\u8005\u548c\u63a5\u6536\u8005\u4e0d\u76f4\u63a5\u4ea4\u4e92\u3002 \u7cfb\u7edf\u9700\u8981\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u6307\u5b9a\u8bf7\u6c42\u3001\u5c06\u8bf7\u6c42\u6392\u961f\u548c\u6267\u884c\u8bf7\u6c42\u3002 \u7cfb\u7edf\u9700\u8981\u652f\u6301\u547d\u4ee4\u7684\u64a4\u9500(Undo)\u64cd\u4f5c\u548c\u6062\u590d(Redo)\u64cd\u4f5c\u3002 \u7cfb\u7edf\u9700\u8981\u5c06\u4e00\u7ec4\u64cd\u4f5c\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5373\u652f\u6301\u5b8f\u547d\u4ee4","title":"3. \u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/13-CommandPattern/#_6","text":"\u5728\u547d\u4ee4\u6a21\u5f0f\u4e2d\uff0c\u5c06\u4e00\u4e2a\u8bf7\u6c42\u5c01\u88c5\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u800c\u4f7f\u6211\u4eec\u53ef\u7528\u4e0d\u540c\u7684\u8bf7\u6c42\u5bf9\u5ba2\u6237\u8fdb\u884c\u53c2\u6570\u5316\uff1b\u5bf9\u8bf7\u6c42\u6392\u961f\u6216\u8005\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\uff0c\u4ee5\u53ca\u652f\u6301\u53ef\u64a4\u9500\u7684\u64cd\u4f5c\u3002\u547d\u4ee4\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\uff0c\u5176\u522b\u540d\u4e3a\u52a8\u4f5c\u6a21\u5f0f\u6216\u4e8b\u52a1\u6a21\u5f0f\u3002 \u547d\u4ee4\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u547d\u4ee4\u7c7b\u4e2d\u58f0\u660e\u4e86\u7528\u4e8e\u6267\u884c\u8bf7\u6c42\u7684 execute() \u7b49\u65b9\u6cd5\uff0c\u901a\u8fc7\u8fd9\u4e9b\u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528\u8bf7\u6c42\u63a5\u6536\u8005\u7684\u76f8\u5173\u64cd\u4f5c\uff1b\u5177\u4f53\u547d\u4ee4\u7c7b\u662f\u62bd\u8c61\u547d\u4ee4\u7c7b\u7684\u5b50\u7c7b\uff0c\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u547d\u4ee4\u7c7b\u4e2d\u58f0\u660e\u7684\u65b9\u6cd5\uff0c\u5b83\u5bf9\u5e94\u5177\u4f53\u7684\u63a5\u6536\u8005\u5bf9\u8c61\uff0c\u5c06\u63a5\u6536\u8005\u5bf9\u8c61\u7684\u52a8\u4f5c\u7ed1\u5b9a\u5176\u4e2d\uff1b\u8c03\u7528\u8005\u5373\u8bf7\u6c42\u7684\u53d1\u9001\u8005\uff0c\u53c8\u79f0\u4e3a\u8bf7\u6c42\u8005\uff0c\u5b83\u901a\u8fc7\u547d\u4ee4\u5bf9\u8c61\u6765\u6267\u884c\u8bf7\u6c42\uff1b\u63a5\u6536\u8005\u6267\u884c\u4e0e\u8bf7\u6c42\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u5b83\u5177\u4f53\u5b9e\u73b0\u5bf9\u8bf7\u6c42\u7684\u4e1a\u52a1\u5904\u7406\u3002 \u547d\u4ee4\u6a21\u5f0f\u7684\u672c\u8d28\u662f\u5bf9\u547d\u4ee4\u8fdb\u884c\u5c01\u88c5\uff0c\u5c06\u53d1\u51fa\u547d\u4ee4\u7684\u8d23\u4efb\u548c\u6267\u884c\u547d\u4ee4\u7684\u8d23\u4efb\u5206\u5272\u5f00\u3002\u547d\u4ee4\u6a21\u5f0f\u4f7f\u8bf7\u6c42\u672c\u8eab\u6210\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u548c\u5176\u4ed6\u5bf9\u8c61\u4e00\u6837\u53ef\u4ee5\u88ab\u5b58\u50a8\u548c\u4f20\u9012\u3002 \u547d\u4ee4\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u964d\u4f4e\u7cfb\u7edf\u7684\u8026\u5408\u5ea6\uff0c\u589e\u52a0\u65b0\u7684\u547d\u4ee4\u5f88\u65b9\u4fbf\uff0c\u800c\u4e14\u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u5730\u8bbe\u8ba1\u4e00\u4e2a\u547d\u4ee4\u961f\u5217\u548c\u5b8f\u547d\u4ee4\uff0c\u5e76\u65b9\u4fbf\u5730\u5b9e\u73b0\u5bf9\u8bf7\u6c42\u7684\u64a4\u9500\u548c\u6062\u590d\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67d0\u4e9b\u7cfb\u7edf\u6709\u8fc7\u591a\u7684\u5177\u4f53\u547d\u4ee4\u7c7b\u3002 \u547d\u4ee4\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u9700\u8981\u5c06\u8bf7\u6c42\u8c03\u7528\u8005\u548c\u8bf7\u6c42\u63a5\u6536\u8005\u89e3\u8026\uff0c\u4f7f\u5f97\u8c03\u7528\u8005\u548c\u63a5\u6536\u8005\u4e0d\u76f4\u63a5\u4ea4\u4e92\uff1b\u9700\u8981\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u6307\u5b9a\u8bf7\u6c42\u3001\u5c06\u8bf7\u6c42\u6392\u961f\u548c\u6267\u884c\u8bf7\u6c42\uff1b\u9700\u8981\u652f\u6301\u547d\u4ee4\u7684\u64a4\u9500\u64cd\u4f5c\u548c\u6062\u590d\u64cd\u4f5c\uff0c\u9700\u8981\u5c06\u4e00\u7ec4\u64cd\u4f5c\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5373\u652f\u6301\u5b8f\u547d\u4ee4\u3002","title":"\u516d\u3001\u6a21\u5f0f\u603b\u7ed3"},{"location":"Design-Patterns/14-StatePattern/","text":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a \u00b6 \u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u5bf9\u8c61\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u52a8\u6001\u53d8\u5316\u7684\u5c5e\u6027\uff0c\u8fd9\u6837\u7684\u5c5e\u6027\u53eb\u505a\u72b6\u6001\uff0c\u8fd9\u6837\u7684\u5bf9\u8c61\u53eb\u505a\u6709\u72b6\u6001\u7684( stateful )\u5bf9\u8c61\uff0c\u8fd9\u6837\u7684\u5bf9\u8c61\u72b6\u6001\u662f\u4ece\u4e8b\u5148\u5b9a\u4e49\u597d\u7684\u4e00\u7cfb\u5217\u503c\u4e2d\u53d6\u51fa\u7684\u3002\u5f53\u4e00\u4e2a\u8fd9\u6837\u7684\u5bf9\u8c61\u4e0e\u5916\u90e8\u4e8b\u4ef6\u4ea7\u751f\u4e92\u52a8\u65f6\uff0c\u5176\u5185\u90e8\u72b6\u6001\u5c31\u4f1a\u6539\u53d8\uff0c\u4ece\u800c\u4f7f\u5f97\u7cfb\u7edf\u7684\u884c\u4e3a\u4e5f\u968f\u4e4b\u53d1\u751f\u53d8\u5316\u3002 \u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u72b6\u6001\u6a21\u5f0f( State Pattern ) \uff1a\u5141\u8bb8\u4e00\u4e2a\u5bf9\u8c61\u5728\u5176\u5185\u90e8\u72b6\u6001\u6539\u53d8\u65f6\u6539\u53d8\u5b83\u7684\u884c\u4e3a\uff0c\u5bf9\u8c61\u770b\u8d77\u6765\u4f3c\u4e4e\u4fee\u6539\u4e86\u5b83\u7684\u7c7b\u3002\u5176\u522b\u540d\u4e3a\u72b6\u6001\u5bf9\u8c61( Objects for States )\uff0c\u72b6\u6001\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u4e09\u3001\u6a21\u5f0f\u7ed3\u6784 \u00b6 1. \u89d2\u8272\u7ec4\u6210\uff1a \u00b6 \u72b6\u6001\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Context : \u73af\u5883\u7c7b State : \u62bd\u8c61\u72b6\u6001\u89d2\u8272 ConcreteState : \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b 2. \u7ed3\u6784\u56fe\uff1a \u00b6 3. \u65f6\u5e8f\u56fe\uff1a \u00b6 \u56db\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684\u72b6\u6001\u89d2\u8272\u63a5\u53e3\uff1a /** * \u62bd\u8c61\u72b6\u6001\u89d2\u8272 * */ public interface IState { /** * \u62bd\u8c61\u65b9\u6cd51 */ void handle1 (); /** * \u62bd\u8c61\u65b9\u6cd52 */ void handle2 (); } \u63a5\u4e0b\u6765\uff0c\u662f\u591a\u4e2a\u5177\u4f53\u7684\u72b6\u6001\u89d2\u8272\u7c7b\uff0c\u5206\u522b\u5982\u4e0b\uff1a /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1 * */ public class ConcreteState1 implements IState { /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1\u4e2d\u7684\u65b9\u6cd51 */ @Override public void handle1 () { System . out . println ( \"\u6267\u884c\u4e86\u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1\u4e2d\u7684\u65b9\u6cd51...\" ); } /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1\u4e2d\u7684\u65b9\u6cd52 */ @Override public void handle2 () { System . out . println ( \"\u6267\u884c\u4e86\u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1\u4e2d\u7684\u65b9\u6cd52...\" ); } } /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2 * */ public class ConcreteState2 implements IState { /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2\u4e2d\u7684\u65b9\u6cd51 */ @Override public void handle1 () { System . out . println ( \"\u6267\u884c\u4e86\u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2\u4e2d\u7684\u65b9\u6cd51...\" ); } /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2\u4e2d\u7684\u65b9\u6cd52 */ @Override public void handle2 () { System . out . println ( \"\u6267\u884c\u4e86\u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2\u4e2d\u7684\u65b9\u6cd52...\" ); } } \u7136\u540e\uff0c\u662f\u73af\u5883\u7c7b\uff1a /** * \u73af\u5883\u89d2\u8272\u7c7b * */ public class Context { // \u5f53\u524d\u72b6\u6001 private IState state ; /** * \u6784\u9020\u65b9\u6cd5 * @param state */ public Context ( IState state ) { this . state = state ; } /** * \u65b9\u6cd51 */ public void handle1 () { this . state . handle1 (); } /** * \u65b9\u6cd52 */ public void handle2 () { this . state . handle2 (); } } \u6700\u540e\uff0c\u662f\u7528\u4e8e\u6d4b\u8bd5\u72b6\u6001\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u72b6\u6001\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7d2f * */ public class StateClient { public static void main ( String [] args ) { Context context = new Context ( new ConcreteState1 ()); context . handle1 (); context . handle2 (); } } \u4e94\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u72b6\u6001\u6a21\u5f0f\u63cf\u8ff0\u4e86\u5bf9\u8c61\u72b6\u6001\u7684\u53d8\u5316\u4ee5\u53ca\u5bf9\u8c61\u5982\u4f55\u5728\u6bcf\u4e00\u79cd\u72b6\u6001\u4e0b\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u884c\u4e3a\u3002 \u72b6\u6001\u6a21\u5f0f\u7684\u5173\u952e\u662f\u5f15\u5165\u4e86\u4e00\u4e2a\u62bd\u8c61\u63a5\u53e3\u6765\u4e13\u95e8\u8868\u793a\u5bf9\u8c61\u7684\u72b6\u6001\uff0c\u8fd9\u4e2a\u7c7b\u6211\u4eec\u53eb\u505a\u62bd\u8c61\u72b6\u6001\u63a5\u53e3\uff0c\u800c\u5bf9\u8c61\u7684\u6bcf\u4e00\u79cd\u5177\u4f53\u72b6\u6001\u7c7b\u90fd\u5b9e\u73b0\u4e86\u8be5\u7c7b\uff0c\u5e76\u5728\u4e0d\u540c\u5177\u4f53\u72b6\u6001\u7c7b\u4e2d\u5b9e\u73b0\u4e86\u4e0d\u540c\u72b6\u6001\u7684\u884c\u4e3a\uff0c\u5305\u62ec\u5404\u79cd\u72b6\u6001\u4e4b\u95f4\u7684\u8f6c\u6362\u3002 \u5728\u72b6\u6001\u6a21\u5f0f\u7ed3\u6784\u4e2d\u9700\u8981\u7406\u89e3\u73af\u5883\u7c7b\u4e0e\u62bd\u8c61\u72b6\u6001\u7c7b\u7684\u4f5c\u7528\uff1a \u73af\u5883\u7c7b\u5b9e\u9645\u4e0a\u5c31\u662f\u62e5\u6709\u72b6\u6001\u7684\u5bf9\u8c61\uff0c\u73af\u5883\u7c7b\u6709\u65f6\u5019\u53ef\u4ee5\u5145\u5f53\u72b6\u6001\u7ba1\u7406\u5668(State Manager)\u7684\u89d2\u8272\uff0c\u53ef\u4ee5\u5728\u73af\u5883\u7c7b\u4e2d\u5bf9\u72b6\u6001\u8fdb\u884c\u5207\u6362\u64cd\u4f5c\u3002 \u62bd\u8c61\u72b6\u6001\u7c7b\u53ef\u4ee5\u662f\u62bd\u8c61\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u662f\u63a5\u53e3\uff0c\u4e0d\u540c\u72b6\u6001\u7c7b\u5c31\u662f\u7ee7\u627f\u8fd9\u4e2a\u7236\u7c7b\u7684\u4e0d\u540c\u5b50\u7c7b\uff0c\u72b6\u6001\u7c7b\u7684\u4ea7\u751f\u662f\u7531\u4e8e\u73af\u5883\u7c7b\u5b58\u5728\u591a\u4e2a\u72b6\u6001\uff0c\u540c\u65f6\u8fd8\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a \u8fd9\u4e9b\u72b6\u6001\u7ecf\u5e38\u9700\u8981\u5207\u6362\uff0c\u5728\u4e0d\u540c\u7684\u72b6\u6001\u4e0b\u5bf9\u8c61\u7684\u884c\u4e3a\u4e0d\u540c\u3002\u56e0\u6b64\u53ef\u4ee5\u5c06\u4e0d\u540c\u5bf9\u8c61\u4e0b\u7684\u884c\u4e3a\u5355\u72ec\u63d0\u53d6\u51fa\u6765\u5c01\u88c5\u5728\u5177\u4f53\u7684\u72b6\u6001\u7c7b\u4e2d\uff0c\u4f7f\u5f97\u73af\u5883\u7c7b\u5bf9\u8c61\u5728\u5176\u5185\u90e8\u72b6\u6001\u6539\u53d8\u65f6\u53ef\u4ee5\u6539\u53d8\u5b83\u7684\u884c\u4e3a\uff0c\u5bf9\u8c61\u770b\u8d77\u6765\u4f3c\u4e4e\u4fee\u6539\u4e86\u5b83\u7684\u7c7b\uff0c\u800c\u5b9e\u9645\u4e0a\u662f\u7531\u4e8e\u5207\u6362\u5230\u4e0d\u540c\u7684\u5177\u4f53\u72b6\u6001\u7c7b\u5b9e\u73b0\u7684\u3002\u7531\u4e8e\u73af\u5883\u7c7b\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4efb\u4e00\u5177\u4f53\u72b6\u6001\u7c7b\uff0c\u56e0\u6b64\u5b83\u9488\u5bf9\u62bd\u8c61\u72b6\u6001\u7c7b\u8fdb\u884c\u7f16\u7a0b\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u53ef\u4ee5\u5c06\u4efb\u4e00\u5177\u4f53\u72b6\u6001\u7c7b\u7684\u5bf9\u8c61\u8bbe\u7f6e\u5230\u73af\u5883\u7c7b\u4e2d\uff0c\u4ece\u800c\u4f7f\u5f97\u73af\u5883\u7c7b\u53ef\u4ee5\u6539\u53d8\u5185\u90e8\u72b6\u6001\uff0c\u5e76\u4e14\u6539\u53d8\u884c\u4e3a\u3002 1. \u4f18\u70b9 \u00b6 \u72b6\u6001\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u5c01\u88c5\u4e86\u8f6c\u6362\u89c4\u5219\u3002 \u679a\u4e3e\u53ef\u80fd\u7684\u72b6\u6001\uff0c\u5728\u679a\u4e3e\u72b6\u6001\u4e4b\u524d\u9700\u8981\u786e\u5b9a\u72b6\u6001\u79cd\u7c7b\u3002 \u5c06\u6240\u6709\u4e0e\u67d0\u4e2a\u72b6\u6001\u6709\u5173\u7684\u884c\u4e3a\u653e\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5e76\u4e14\u53ef\u4ee5\u65b9\u4fbf\u5730\u589e\u52a0\u65b0\u7684\u72b6\u6001\uff0c\u53ea\u9700\u8981\u6539\u53d8\u5bf9\u8c61\u72b6\u6001\u5373\u53ef\u6539\u53d8\u5bf9\u8c61\u7684\u884c\u4e3a\u3002 \u5141\u8bb8\u72b6\u6001\u8f6c\u6362\u903b\u8f91\u4e0e\u72b6\u6001\u5bf9\u8c61\u5408\u6210\u4e00\u4f53\uff0c\u800c\u4e0d\u662f\u67d0\u4e00\u4e2a\u5de8\u5927\u7684\u6761\u4ef6\u8bed\u53e5\u5757\u3002 \u53ef\u4ee5\u8ba9\u591a\u4e2a\u73af\u5883\u5bf9\u8c61\u5171\u4eab\u4e00\u4e2a\u72b6\u6001\u5bf9\u8c61\uff0c\u4ece\u800c\u51cf\u5c11\u7cfb\u7edf\u4e2d\u5bf9\u8c61\u7684\u4e2a\u6570\u3002 2. \u7f3a\u70b9 \u00b6 \u72b6\u6001\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u72b6\u6001\u6a21\u5f0f\u7684\u4f7f\u7528\u5fc5\u7136\u4f1a\u589e\u52a0\u7cfb\u7edf\u7c7b\u548c\u5bf9\u8c61\u7684\u4e2a\u6570\u3002 \u72b6\u6001\u6a21\u5f0f\u7684\u7ed3\u6784\u4e0e\u5b9e\u73b0\u90fd\u8f83\u4e3a\u590d\u6742\uff0c\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\u5c06\u5bfc\u81f4\u7a0b\u5e8f\u7ed3\u6784\u548c\u4ee3\u7801\u7684\u6df7\u4e71\u3002 \u72b6\u6001\u6a21\u5f0f\u5bf9\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u652f\u6301\u5e76\u4e0d\u592a\u597d\uff0c\u5bf9\u4e8e\u53ef\u4ee5\u5207\u6362\u72b6\u6001\u7684\u72b6\u6001\u6a21\u5f0f\uff0c\u589e\u52a0\u65b0\u7684\u72b6\u6001\u7c7b\u9700\u8981\u4fee\u6539\u90a3\u4e9b\u8d1f\u8d23\u72b6\u6001\u8f6c\u6362\u7684\u6e90\u4ee3\u7801\uff0c\u5426\u5219\u65e0\u6cd5\u5207\u6362\u5230\u65b0\u589e\u72b6\u6001\uff1b\u800c\u4e14\u4fee\u6539\u67d0\u4e2a\u72b6\u6001\u7c7b\u7684\u884c\u4e3a\u4e5f\u9700\u4fee\u6539\u5bf9\u5e94\u7c7b\u7684\u6e90\u4ee3\u7801\u3002 3.\u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\uff1a \u5bf9\u8c61\u7684\u884c\u4e3a\u4f9d\u8d56\u4e8e\u5b83\u7684\u72b6\u6001\uff08\u5c5e\u6027\uff09\u5e76\u4e14\u53ef\u4ee5\u6839\u636e\u5b83\u7684\u72b6\u6001\u6539\u53d8\u800c\u6539\u53d8\u5b83\u7684\u76f8\u5173\u884c\u4e3a\u3002 \u4ee3\u7801\u4e2d\u5305\u542b\u5927\u91cf\u4e0e\u5bf9\u8c61\u72b6\u6001\u6709\u5173\u7684\u6761\u4ef6\u8bed\u53e5\uff0c\u8fd9\u4e9b\u6761\u4ef6\u8bed\u53e5\u7684\u51fa\u73b0\uff0c\u4f1a\u5bfc\u81f4\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u7075\u6d3b\u6027\u53d8\u5dee\uff0c\u4e0d\u80fd\u65b9\u4fbf\u5730\u589e\u52a0\u548c\u5220\u9664\u72b6\u6001\uff0c\u4f7f\u5ba2\u6237\u7c7b\u4e0e\u7c7b\u5e93\u4e4b\u95f4\u7684\u8026\u5408\u589e\u5f3a\u3002\u5728\u8fd9\u4e9b\u6761\u4ef6\u8bed\u53e5\u4e2d\u5305\u542b\u4e86\u5bf9\u8c61\u7684\u884c\u4e3a\uff0c\u800c\u4e14\u8fd9\u4e9b\u6761\u4ef6\u5bf9\u5e94\u4e8e\u5bf9\u8c61\u7684\u5404\u79cd\u72b6\u6001\u3002 \u72b6\u6001\u6a21\u5f0f\u5728\u5de5\u4f5c\u6d41\u6216\u6e38\u620f\u7b49\u7c7b\u578b\u7684\u8f6f\u4ef6\u4e2d\u5f97\u4ee5\u5e7f\u6cdb\u4f7f\u7528\uff0c\u751a\u81f3\u53ef\u4ee5\u7528\u4e8e\u8fd9\u4e9b\u7cfb\u7edf\u7684\u6838\u5fc3\u529f\u80fd\u8bbe\u8ba1\uff0c\u5982\u5728\u653f\u5e9cOA\u529e\u516c\u7cfb\u7edf\u4e2d\uff0c\u4e00\u4e2a\u6279\u6587\u7684\u72b6\u6001\u6709\u591a\u79cd\uff1a\u5c1a\u672a\u529e\u7406\uff1b\u6b63\u5728\u529e\u7406\uff1b\u6b63\u5728\u6279\u793a\uff1b\u6b63\u5728\u5ba1\u6838\uff1b\u5df2\u7ecf\u5b8c\u6210\u7b49\u5404\u79cd\u72b6\u6001\uff0c\u800c\u4e14\u6279\u6587\u72b6\u6001\u4e0d\u540c\u65f6\u5bf9\u6279\u6587\u7684\u64cd\u4f5c\u4e5f\u6709\u6240\u5dee\u5f02\u3002\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u53ef\u4ee5\u63cf\u8ff0\u5de5\u4f5c\u6d41\u5bf9\u8c61\uff08\u5982\u6279\u6587\uff09\u7684\u72b6\u6001\u8f6c\u6362\u4ee5\u53ca\u4e0d\u540c\u72b6\u6001\u4e0b\u5b83\u6240\u5177\u6709\u7684\u884c\u4e3a\u3002 \u516d\u3001\u603b\u7ed3 \u00b6 \u72b6\u6001\u6a21\u5f0f\u5141\u8bb8\u4e00\u4e2a\u5bf9\u8c61\u5728\u5176\u5185\u90e8\u72b6\u6001\u6539\u53d8\u65f6\u6539\u53d8\u5b83\u7684\u884c\u4e3a\uff0c\u5bf9\u8c61\u770b\u8d77\u6765\u4f3c\u4e4e\u4fee\u6539\u4e86\u5b83\u7684\u7c7b\u3002\u5176\u522b\u540d\u4e3a\u72b6\u6001\u5bf9\u8c61\uff0c\u72b6\u6001\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u72b6\u6001\u6a21\u5f0f\u5305\u542b\u4e09\u4e2a\u89d2\u8272\uff1a\u73af\u5883\u7c7b\u53c8\u79f0\u4e3a\u4e0a\u4e0b\u6587\u7c7b\uff0c\u5b83\u662f\u62e5\u6709\u72b6\u6001\u7684\u5bf9\u8c61\uff0c\u5728\u73af\u5883\u7c7b\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u62bd\u8c61\u72b6\u6001\u7c7bState\u7684\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u5b9e\u4f8b\u5b9a\u4e49\u5f53\u524d\u72b6\u6001\uff0c\u5728\u5177\u4f53\u5b9e\u73b0\u65f6\uff0c\u5b83\u662f\u4e00\u4e2aState\u5b50\u7c7b\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5b9a\u4e49\u521d\u59cb\u72b6\u6001\uff1b\u62bd\u8c61\u72b6\u6001\u7c7b\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\u4ee5\u5c01\u88c5\u4e0e\u73af\u5883\u7c7b\u7684\u4e00\u4e2a\u7279\u5b9a\u72b6\u6001\u76f8\u5173\u7684\u884c\u4e3a\uff1b\u5177\u4f53\u72b6\u6001\u7c7b\u662f\u62bd\u8c61\u72b6\u6001\u7c7b\u7684\u5b50\u7c7b\uff0c\u6bcf\u4e00\u4e2a\u5b50\u7c7b\u5b9e\u73b0\u4e00\u4e2a\u4e0e\u73af\u5883\u7c7b\u7684\u4e00\u4e2a\u72b6\u6001\u76f8\u5173\u7684\u884c\u4e3a\uff0c\u6bcf\u4e00\u4e2a\u5177\u4f53\u72b6\u6001\u7c7b\u5bf9\u5e94\u73af\u5883\u7684\u4e00\u4e2a\u5177\u4f53\u72b6\u6001\uff0c\u4e0d\u540c\u7684\u5177\u4f53\u72b6\u6001\u7c7b\u5176\u884c\u4e3a\u6709\u6240\u4e0d\u540c\u3002 \u72b6\u6001\u6a21\u5f0f\u63cf\u8ff0\u4e86\u5bf9\u8c61\u72b6\u6001\u7684\u53d8\u5316\u4ee5\u53ca\u5bf9\u8c61\u5982\u4f55\u5728\u6bcf\u4e00\u79cd\u72b6\u6001\u4e0b\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u884c\u4e3a\u3002 \u72b6\u6001\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u5c01\u88c5\u4e86\u8f6c\u6362\u89c4\u5219\uff0c\u5e76\u679a\u4e3e\u53ef\u80fd\u7684\u72b6\u6001\uff0c\u5b83\u5c06\u6240\u6709\u4e0e\u67d0\u4e2a\u72b6\u6001\u6709\u5173\u7684\u884c\u4e3a\u653e\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5e76\u4e14\u53ef\u4ee5\u65b9\u4fbf\u5730\u589e\u52a0\u65b0\u7684\u72b6\u6001\uff0c\u53ea\u9700\u8981\u6539\u53d8\u5bf9\u8c61\u72b6\u6001\u5373\u53ef\u6539\u53d8\u5bf9\u8c61\u7684\u884c\u4e3a\uff0c\u8fd8\u53ef\u4ee5\u8ba9\u591a\u4e2a\u73af\u5883\u5bf9\u8c61\u5171\u4eab\u4e00\u4e2a\u72b6\u6001\u5bf9\u8c61\uff0c\u4ece\u800c\u51cf\u5c11\u7cfb\u7edf\u4e2d\u5bf9\u8c61\u7684\u4e2a\u6570\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u4f1a\u589e\u52a0\u7cfb\u7edf\u7c7b\u548c\u5bf9\u8c61\u7684\u4e2a\u6570\uff0c\u4e14\u72b6\u6001\u6a21\u5f0f\u7684\u7ed3\u6784\u4e0e\u5b9e\u73b0\u90fd\u8f83\u4e3a\u590d\u6742\uff0c\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\u5c06\u5bfc\u81f4\u7a0b\u5e8f\u7ed3\u6784\u548c\u4ee3\u7801\u7684\u6df7\u4e71\uff0c\u5bf9\u4e8e\u53ef\u4ee5\u5207\u6362\u72b6\u6001\u7684\u72b6\u6001\u6a21\u5f0f\u4e0d\u6ee1\u8db3\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u8981\u6c42\u3002 \u72b6\u6001\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u5bf9\u8c61\u7684\u884c\u4e3a\u4f9d\u8d56\u4e8e\u5b83\u7684\u72b6\u6001\uff08\u5c5e\u6027\uff09\u5e76\u4e14\u53ef\u4ee5\u6839\u636e\u5b83\u7684\u72b6\u6001\u6539\u53d8\u800c\u6539\u53d8\u5b83\u7684\u76f8\u5173\u884c\u4e3a\uff1b\u4ee3\u7801\u4e2d\u5305\u542b\u5927\u91cf\u4e0e\u5bf9\u8c61\u72b6\u6001\u6709\u5173\u7684\u6761\u4ef6\u8bed\u53e5\uff0c\u8fd9\u4e9b\u6761\u4ef6\u8bed\u53e5\u7684\u51fa\u73b0\uff0c\u4f1a\u5bfc\u81f4\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u7075\u6d3b\u6027\u53d8\u5dee\uff0c\u4e0d\u80fd\u65b9\u4fbf\u5730\u589e\u52a0\u548c\u5220\u9664\u72b6\u6001\uff0c\u4f7f\u5ba2\u6237\u7c7b\u4e0e\u7c7b\u5e93\u4e4b\u95f4\u7684\u8026\u5408\u589e\u5f3a\u3002","title":"\u72b6\u6001\u6a21\u5f0f\uff08State Pattern\uff09"},{"location":"Design-Patterns/14-StatePattern/#_1","text":"\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u5bf9\u8c61\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u52a8\u6001\u53d8\u5316\u7684\u5c5e\u6027\uff0c\u8fd9\u6837\u7684\u5c5e\u6027\u53eb\u505a\u72b6\u6001\uff0c\u8fd9\u6837\u7684\u5bf9\u8c61\u53eb\u505a\u6709\u72b6\u6001\u7684( stateful )\u5bf9\u8c61\uff0c\u8fd9\u6837\u7684\u5bf9\u8c61\u72b6\u6001\u662f\u4ece\u4e8b\u5148\u5b9a\u4e49\u597d\u7684\u4e00\u7cfb\u5217\u503c\u4e2d\u53d6\u51fa\u7684\u3002\u5f53\u4e00\u4e2a\u8fd9\u6837\u7684\u5bf9\u8c61\u4e0e\u5916\u90e8\u4e8b\u4ef6\u4ea7\u751f\u4e92\u52a8\u65f6\uff0c\u5176\u5185\u90e8\u72b6\u6001\u5c31\u4f1a\u6539\u53d8\uff0c\u4ece\u800c\u4f7f\u5f97\u7cfb\u7edf\u7684\u884c\u4e3a\u4e5f\u968f\u4e4b\u53d1\u751f\u53d8\u5316\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/14-StatePattern/#_2","text":"\u72b6\u6001\u6a21\u5f0f( State Pattern ) \uff1a\u5141\u8bb8\u4e00\u4e2a\u5bf9\u8c61\u5728\u5176\u5185\u90e8\u72b6\u6001\u6539\u53d8\u65f6\u6539\u53d8\u5b83\u7684\u884c\u4e3a\uff0c\u5bf9\u8c61\u770b\u8d77\u6765\u4f3c\u4e4e\u4fee\u6539\u4e86\u5b83\u7684\u7c7b\u3002\u5176\u522b\u540d\u4e3a\u72b6\u6001\u5bf9\u8c61( Objects for States )\uff0c\u72b6\u6001\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002","title":"\u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/14-StatePattern/#_3","text":"","title":"\u4e09\u3001\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/14-StatePattern/#1","text":"\u72b6\u6001\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Context : \u73af\u5883\u7c7b State : \u62bd\u8c61\u72b6\u6001\u89d2\u8272 ConcreteState : \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b","title":"1. \u89d2\u8272\u7ec4\u6210\uff1a"},{"location":"Design-Patterns/14-StatePattern/#2","text":"","title":"2. \u7ed3\u6784\u56fe\uff1a"},{"location":"Design-Patterns/14-StatePattern/#3","text":"","title":"3. \u65f6\u5e8f\u56fe\uff1a"},{"location":"Design-Patterns/14-StatePattern/#_4","text":"\u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684\u72b6\u6001\u89d2\u8272\u63a5\u53e3\uff1a /** * \u62bd\u8c61\u72b6\u6001\u89d2\u8272 * */ public interface IState { /** * \u62bd\u8c61\u65b9\u6cd51 */ void handle1 (); /** * \u62bd\u8c61\u65b9\u6cd52 */ void handle2 (); } \u63a5\u4e0b\u6765\uff0c\u662f\u591a\u4e2a\u5177\u4f53\u7684\u72b6\u6001\u89d2\u8272\u7c7b\uff0c\u5206\u522b\u5982\u4e0b\uff1a /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1 * */ public class ConcreteState1 implements IState { /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1\u4e2d\u7684\u65b9\u6cd51 */ @Override public void handle1 () { System . out . println ( \"\u6267\u884c\u4e86\u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1\u4e2d\u7684\u65b9\u6cd51...\" ); } /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1\u4e2d\u7684\u65b9\u6cd52 */ @Override public void handle2 () { System . out . println ( \"\u6267\u884c\u4e86\u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b1\u4e2d\u7684\u65b9\u6cd52...\" ); } } /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2 * */ public class ConcreteState2 implements IState { /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2\u4e2d\u7684\u65b9\u6cd51 */ @Override public void handle1 () { System . out . println ( \"\u6267\u884c\u4e86\u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2\u4e2d\u7684\u65b9\u6cd51...\" ); } /** * \u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2\u4e2d\u7684\u65b9\u6cd52 */ @Override public void handle2 () { System . out . println ( \"\u6267\u884c\u4e86\u5177\u4f53\u72b6\u6001\u89d2\u8272\u7c7b2\u4e2d\u7684\u65b9\u6cd52...\" ); } } \u7136\u540e\uff0c\u662f\u73af\u5883\u7c7b\uff1a /** * \u73af\u5883\u89d2\u8272\u7c7b * */ public class Context { // \u5f53\u524d\u72b6\u6001 private IState state ; /** * \u6784\u9020\u65b9\u6cd5 * @param state */ public Context ( IState state ) { this . state = state ; } /** * \u65b9\u6cd51 */ public void handle1 () { this . state . handle1 (); } /** * \u65b9\u6cd52 */ public void handle2 () { this . state . handle2 (); } } \u6700\u540e\uff0c\u662f\u7528\u4e8e\u6d4b\u8bd5\u72b6\u6001\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u72b6\u6001\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7d2f * */ public class StateClient { public static void main ( String [] args ) { Context context = new Context ( new ConcreteState1 ()); context . handle1 (); context . handle2 (); } }","title":"\u56db\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/14-StatePattern/#_5","text":"\u72b6\u6001\u6a21\u5f0f\u63cf\u8ff0\u4e86\u5bf9\u8c61\u72b6\u6001\u7684\u53d8\u5316\u4ee5\u53ca\u5bf9\u8c61\u5982\u4f55\u5728\u6bcf\u4e00\u79cd\u72b6\u6001\u4e0b\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u884c\u4e3a\u3002 \u72b6\u6001\u6a21\u5f0f\u7684\u5173\u952e\u662f\u5f15\u5165\u4e86\u4e00\u4e2a\u62bd\u8c61\u63a5\u53e3\u6765\u4e13\u95e8\u8868\u793a\u5bf9\u8c61\u7684\u72b6\u6001\uff0c\u8fd9\u4e2a\u7c7b\u6211\u4eec\u53eb\u505a\u62bd\u8c61\u72b6\u6001\u63a5\u53e3\uff0c\u800c\u5bf9\u8c61\u7684\u6bcf\u4e00\u79cd\u5177\u4f53\u72b6\u6001\u7c7b\u90fd\u5b9e\u73b0\u4e86\u8be5\u7c7b\uff0c\u5e76\u5728\u4e0d\u540c\u5177\u4f53\u72b6\u6001\u7c7b\u4e2d\u5b9e\u73b0\u4e86\u4e0d\u540c\u72b6\u6001\u7684\u884c\u4e3a\uff0c\u5305\u62ec\u5404\u79cd\u72b6\u6001\u4e4b\u95f4\u7684\u8f6c\u6362\u3002 \u5728\u72b6\u6001\u6a21\u5f0f\u7ed3\u6784\u4e2d\u9700\u8981\u7406\u89e3\u73af\u5883\u7c7b\u4e0e\u62bd\u8c61\u72b6\u6001\u7c7b\u7684\u4f5c\u7528\uff1a \u73af\u5883\u7c7b\u5b9e\u9645\u4e0a\u5c31\u662f\u62e5\u6709\u72b6\u6001\u7684\u5bf9\u8c61\uff0c\u73af\u5883\u7c7b\u6709\u65f6\u5019\u53ef\u4ee5\u5145\u5f53\u72b6\u6001\u7ba1\u7406\u5668(State Manager)\u7684\u89d2\u8272\uff0c\u53ef\u4ee5\u5728\u73af\u5883\u7c7b\u4e2d\u5bf9\u72b6\u6001\u8fdb\u884c\u5207\u6362\u64cd\u4f5c\u3002 \u62bd\u8c61\u72b6\u6001\u7c7b\u53ef\u4ee5\u662f\u62bd\u8c61\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u662f\u63a5\u53e3\uff0c\u4e0d\u540c\u72b6\u6001\u7c7b\u5c31\u662f\u7ee7\u627f\u8fd9\u4e2a\u7236\u7c7b\u7684\u4e0d\u540c\u5b50\u7c7b\uff0c\u72b6\u6001\u7c7b\u7684\u4ea7\u751f\u662f\u7531\u4e8e\u73af\u5883\u7c7b\u5b58\u5728\u591a\u4e2a\u72b6\u6001\uff0c\u540c\u65f6\u8fd8\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a \u8fd9\u4e9b\u72b6\u6001\u7ecf\u5e38\u9700\u8981\u5207\u6362\uff0c\u5728\u4e0d\u540c\u7684\u72b6\u6001\u4e0b\u5bf9\u8c61\u7684\u884c\u4e3a\u4e0d\u540c\u3002\u56e0\u6b64\u53ef\u4ee5\u5c06\u4e0d\u540c\u5bf9\u8c61\u4e0b\u7684\u884c\u4e3a\u5355\u72ec\u63d0\u53d6\u51fa\u6765\u5c01\u88c5\u5728\u5177\u4f53\u7684\u72b6\u6001\u7c7b\u4e2d\uff0c\u4f7f\u5f97\u73af\u5883\u7c7b\u5bf9\u8c61\u5728\u5176\u5185\u90e8\u72b6\u6001\u6539\u53d8\u65f6\u53ef\u4ee5\u6539\u53d8\u5b83\u7684\u884c\u4e3a\uff0c\u5bf9\u8c61\u770b\u8d77\u6765\u4f3c\u4e4e\u4fee\u6539\u4e86\u5b83\u7684\u7c7b\uff0c\u800c\u5b9e\u9645\u4e0a\u662f\u7531\u4e8e\u5207\u6362\u5230\u4e0d\u540c\u7684\u5177\u4f53\u72b6\u6001\u7c7b\u5b9e\u73b0\u7684\u3002\u7531\u4e8e\u73af\u5883\u7c7b\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4efb\u4e00\u5177\u4f53\u72b6\u6001\u7c7b\uff0c\u56e0\u6b64\u5b83\u9488\u5bf9\u62bd\u8c61\u72b6\u6001\u7c7b\u8fdb\u884c\u7f16\u7a0b\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u53ef\u4ee5\u5c06\u4efb\u4e00\u5177\u4f53\u72b6\u6001\u7c7b\u7684\u5bf9\u8c61\u8bbe\u7f6e\u5230\u73af\u5883\u7c7b\u4e2d\uff0c\u4ece\u800c\u4f7f\u5f97\u73af\u5883\u7c7b\u53ef\u4ee5\u6539\u53d8\u5185\u90e8\u72b6\u6001\uff0c\u5e76\u4e14\u6539\u53d8\u884c\u4e3a\u3002","title":"\u4e94\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/14-StatePattern/#1_1","text":"\u72b6\u6001\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u5c01\u88c5\u4e86\u8f6c\u6362\u89c4\u5219\u3002 \u679a\u4e3e\u53ef\u80fd\u7684\u72b6\u6001\uff0c\u5728\u679a\u4e3e\u72b6\u6001\u4e4b\u524d\u9700\u8981\u786e\u5b9a\u72b6\u6001\u79cd\u7c7b\u3002 \u5c06\u6240\u6709\u4e0e\u67d0\u4e2a\u72b6\u6001\u6709\u5173\u7684\u884c\u4e3a\u653e\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5e76\u4e14\u53ef\u4ee5\u65b9\u4fbf\u5730\u589e\u52a0\u65b0\u7684\u72b6\u6001\uff0c\u53ea\u9700\u8981\u6539\u53d8\u5bf9\u8c61\u72b6\u6001\u5373\u53ef\u6539\u53d8\u5bf9\u8c61\u7684\u884c\u4e3a\u3002 \u5141\u8bb8\u72b6\u6001\u8f6c\u6362\u903b\u8f91\u4e0e\u72b6\u6001\u5bf9\u8c61\u5408\u6210\u4e00\u4f53\uff0c\u800c\u4e0d\u662f\u67d0\u4e00\u4e2a\u5de8\u5927\u7684\u6761\u4ef6\u8bed\u53e5\u5757\u3002 \u53ef\u4ee5\u8ba9\u591a\u4e2a\u73af\u5883\u5bf9\u8c61\u5171\u4eab\u4e00\u4e2a\u72b6\u6001\u5bf9\u8c61\uff0c\u4ece\u800c\u51cf\u5c11\u7cfb\u7edf\u4e2d\u5bf9\u8c61\u7684\u4e2a\u6570\u3002","title":"1. \u4f18\u70b9"},{"location":"Design-Patterns/14-StatePattern/#2_1","text":"\u72b6\u6001\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u72b6\u6001\u6a21\u5f0f\u7684\u4f7f\u7528\u5fc5\u7136\u4f1a\u589e\u52a0\u7cfb\u7edf\u7c7b\u548c\u5bf9\u8c61\u7684\u4e2a\u6570\u3002 \u72b6\u6001\u6a21\u5f0f\u7684\u7ed3\u6784\u4e0e\u5b9e\u73b0\u90fd\u8f83\u4e3a\u590d\u6742\uff0c\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\u5c06\u5bfc\u81f4\u7a0b\u5e8f\u7ed3\u6784\u548c\u4ee3\u7801\u7684\u6df7\u4e71\u3002 \u72b6\u6001\u6a21\u5f0f\u5bf9\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u652f\u6301\u5e76\u4e0d\u592a\u597d\uff0c\u5bf9\u4e8e\u53ef\u4ee5\u5207\u6362\u72b6\u6001\u7684\u72b6\u6001\u6a21\u5f0f\uff0c\u589e\u52a0\u65b0\u7684\u72b6\u6001\u7c7b\u9700\u8981\u4fee\u6539\u90a3\u4e9b\u8d1f\u8d23\u72b6\u6001\u8f6c\u6362\u7684\u6e90\u4ee3\u7801\uff0c\u5426\u5219\u65e0\u6cd5\u5207\u6362\u5230\u65b0\u589e\u72b6\u6001\uff1b\u800c\u4e14\u4fee\u6539\u67d0\u4e2a\u72b6\u6001\u7c7b\u7684\u884c\u4e3a\u4e5f\u9700\u4fee\u6539\u5bf9\u5e94\u7c7b\u7684\u6e90\u4ee3\u7801\u3002","title":"2. \u7f3a\u70b9"},{"location":"Design-Patterns/14-StatePattern/#3_1","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\uff1a \u5bf9\u8c61\u7684\u884c\u4e3a\u4f9d\u8d56\u4e8e\u5b83\u7684\u72b6\u6001\uff08\u5c5e\u6027\uff09\u5e76\u4e14\u53ef\u4ee5\u6839\u636e\u5b83\u7684\u72b6\u6001\u6539\u53d8\u800c\u6539\u53d8\u5b83\u7684\u76f8\u5173\u884c\u4e3a\u3002 \u4ee3\u7801\u4e2d\u5305\u542b\u5927\u91cf\u4e0e\u5bf9\u8c61\u72b6\u6001\u6709\u5173\u7684\u6761\u4ef6\u8bed\u53e5\uff0c\u8fd9\u4e9b\u6761\u4ef6\u8bed\u53e5\u7684\u51fa\u73b0\uff0c\u4f1a\u5bfc\u81f4\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u7075\u6d3b\u6027\u53d8\u5dee\uff0c\u4e0d\u80fd\u65b9\u4fbf\u5730\u589e\u52a0\u548c\u5220\u9664\u72b6\u6001\uff0c\u4f7f\u5ba2\u6237\u7c7b\u4e0e\u7c7b\u5e93\u4e4b\u95f4\u7684\u8026\u5408\u589e\u5f3a\u3002\u5728\u8fd9\u4e9b\u6761\u4ef6\u8bed\u53e5\u4e2d\u5305\u542b\u4e86\u5bf9\u8c61\u7684\u884c\u4e3a\uff0c\u800c\u4e14\u8fd9\u4e9b\u6761\u4ef6\u5bf9\u5e94\u4e8e\u5bf9\u8c61\u7684\u5404\u79cd\u72b6\u6001\u3002 \u72b6\u6001\u6a21\u5f0f\u5728\u5de5\u4f5c\u6d41\u6216\u6e38\u620f\u7b49\u7c7b\u578b\u7684\u8f6f\u4ef6\u4e2d\u5f97\u4ee5\u5e7f\u6cdb\u4f7f\u7528\uff0c\u751a\u81f3\u53ef\u4ee5\u7528\u4e8e\u8fd9\u4e9b\u7cfb\u7edf\u7684\u6838\u5fc3\u529f\u80fd\u8bbe\u8ba1\uff0c\u5982\u5728\u653f\u5e9cOA\u529e\u516c\u7cfb\u7edf\u4e2d\uff0c\u4e00\u4e2a\u6279\u6587\u7684\u72b6\u6001\u6709\u591a\u79cd\uff1a\u5c1a\u672a\u529e\u7406\uff1b\u6b63\u5728\u529e\u7406\uff1b\u6b63\u5728\u6279\u793a\uff1b\u6b63\u5728\u5ba1\u6838\uff1b\u5df2\u7ecf\u5b8c\u6210\u7b49\u5404\u79cd\u72b6\u6001\uff0c\u800c\u4e14\u6279\u6587\u72b6\u6001\u4e0d\u540c\u65f6\u5bf9\u6279\u6587\u7684\u64cd\u4f5c\u4e5f\u6709\u6240\u5dee\u5f02\u3002\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u53ef\u4ee5\u63cf\u8ff0\u5de5\u4f5c\u6d41\u5bf9\u8c61\uff08\u5982\u6279\u6587\uff09\u7684\u72b6\u6001\u8f6c\u6362\u4ee5\u53ca\u4e0d\u540c\u72b6\u6001\u4e0b\u5b83\u6240\u5177\u6709\u7684\u884c\u4e3a\u3002","title":"3.\u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/14-StatePattern/#_6","text":"\u72b6\u6001\u6a21\u5f0f\u5141\u8bb8\u4e00\u4e2a\u5bf9\u8c61\u5728\u5176\u5185\u90e8\u72b6\u6001\u6539\u53d8\u65f6\u6539\u53d8\u5b83\u7684\u884c\u4e3a\uff0c\u5bf9\u8c61\u770b\u8d77\u6765\u4f3c\u4e4e\u4fee\u6539\u4e86\u5b83\u7684\u7c7b\u3002\u5176\u522b\u540d\u4e3a\u72b6\u6001\u5bf9\u8c61\uff0c\u72b6\u6001\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u72b6\u6001\u6a21\u5f0f\u5305\u542b\u4e09\u4e2a\u89d2\u8272\uff1a\u73af\u5883\u7c7b\u53c8\u79f0\u4e3a\u4e0a\u4e0b\u6587\u7c7b\uff0c\u5b83\u662f\u62e5\u6709\u72b6\u6001\u7684\u5bf9\u8c61\uff0c\u5728\u73af\u5883\u7c7b\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u62bd\u8c61\u72b6\u6001\u7c7bState\u7684\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u5b9e\u4f8b\u5b9a\u4e49\u5f53\u524d\u72b6\u6001\uff0c\u5728\u5177\u4f53\u5b9e\u73b0\u65f6\uff0c\u5b83\u662f\u4e00\u4e2aState\u5b50\u7c7b\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5b9a\u4e49\u521d\u59cb\u72b6\u6001\uff1b\u62bd\u8c61\u72b6\u6001\u7c7b\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\u4ee5\u5c01\u88c5\u4e0e\u73af\u5883\u7c7b\u7684\u4e00\u4e2a\u7279\u5b9a\u72b6\u6001\u76f8\u5173\u7684\u884c\u4e3a\uff1b\u5177\u4f53\u72b6\u6001\u7c7b\u662f\u62bd\u8c61\u72b6\u6001\u7c7b\u7684\u5b50\u7c7b\uff0c\u6bcf\u4e00\u4e2a\u5b50\u7c7b\u5b9e\u73b0\u4e00\u4e2a\u4e0e\u73af\u5883\u7c7b\u7684\u4e00\u4e2a\u72b6\u6001\u76f8\u5173\u7684\u884c\u4e3a\uff0c\u6bcf\u4e00\u4e2a\u5177\u4f53\u72b6\u6001\u7c7b\u5bf9\u5e94\u73af\u5883\u7684\u4e00\u4e2a\u5177\u4f53\u72b6\u6001\uff0c\u4e0d\u540c\u7684\u5177\u4f53\u72b6\u6001\u7c7b\u5176\u884c\u4e3a\u6709\u6240\u4e0d\u540c\u3002 \u72b6\u6001\u6a21\u5f0f\u63cf\u8ff0\u4e86\u5bf9\u8c61\u72b6\u6001\u7684\u53d8\u5316\u4ee5\u53ca\u5bf9\u8c61\u5982\u4f55\u5728\u6bcf\u4e00\u79cd\u72b6\u6001\u4e0b\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u884c\u4e3a\u3002 \u72b6\u6001\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u5c01\u88c5\u4e86\u8f6c\u6362\u89c4\u5219\uff0c\u5e76\u679a\u4e3e\u53ef\u80fd\u7684\u72b6\u6001\uff0c\u5b83\u5c06\u6240\u6709\u4e0e\u67d0\u4e2a\u72b6\u6001\u6709\u5173\u7684\u884c\u4e3a\u653e\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5e76\u4e14\u53ef\u4ee5\u65b9\u4fbf\u5730\u589e\u52a0\u65b0\u7684\u72b6\u6001\uff0c\u53ea\u9700\u8981\u6539\u53d8\u5bf9\u8c61\u72b6\u6001\u5373\u53ef\u6539\u53d8\u5bf9\u8c61\u7684\u884c\u4e3a\uff0c\u8fd8\u53ef\u4ee5\u8ba9\u591a\u4e2a\u73af\u5883\u5bf9\u8c61\u5171\u4eab\u4e00\u4e2a\u72b6\u6001\u5bf9\u8c61\uff0c\u4ece\u800c\u51cf\u5c11\u7cfb\u7edf\u4e2d\u5bf9\u8c61\u7684\u4e2a\u6570\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u4f1a\u589e\u52a0\u7cfb\u7edf\u7c7b\u548c\u5bf9\u8c61\u7684\u4e2a\u6570\uff0c\u4e14\u72b6\u6001\u6a21\u5f0f\u7684\u7ed3\u6784\u4e0e\u5b9e\u73b0\u90fd\u8f83\u4e3a\u590d\u6742\uff0c\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\u5c06\u5bfc\u81f4\u7a0b\u5e8f\u7ed3\u6784\u548c\u4ee3\u7801\u7684\u6df7\u4e71\uff0c\u5bf9\u4e8e\u53ef\u4ee5\u5207\u6362\u72b6\u6001\u7684\u72b6\u6001\u6a21\u5f0f\u4e0d\u6ee1\u8db3\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u8981\u6c42\u3002 \u72b6\u6001\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u5bf9\u8c61\u7684\u884c\u4e3a\u4f9d\u8d56\u4e8e\u5b83\u7684\u72b6\u6001\uff08\u5c5e\u6027\uff09\u5e76\u4e14\u53ef\u4ee5\u6839\u636e\u5b83\u7684\u72b6\u6001\u6539\u53d8\u800c\u6539\u53d8\u5b83\u7684\u76f8\u5173\u884c\u4e3a\uff1b\u4ee3\u7801\u4e2d\u5305\u542b\u5927\u91cf\u4e0e\u5bf9\u8c61\u72b6\u6001\u6709\u5173\u7684\u6761\u4ef6\u8bed\u53e5\uff0c\u8fd9\u4e9b\u6761\u4ef6\u8bed\u53e5\u7684\u51fa\u73b0\uff0c\u4f1a\u5bfc\u81f4\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u7075\u6d3b\u6027\u53d8\u5dee\uff0c\u4e0d\u80fd\u65b9\u4fbf\u5730\u589e\u52a0\u548c\u5220\u9664\u72b6\u6001\uff0c\u4f7f\u5ba2\u6237\u7c7b\u4e0e\u7c7b\u5e93\u4e4b\u95f4\u7684\u8026\u5408\u589e\u5f3a\u3002","title":"\u516d\u3001\u603b\u7ed3"},{"location":"Design-Patterns/15-StrategyPattern/","text":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a \u00b6 \u5b8c\u6210\u4e00\u9879\u4efb\u52a1\uff0c\u5f80\u5f80\u53ef\u4ee5\u6709\u591a\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\uff0c\u6bcf\u4e00\u79cd\u65b9\u5f0f\u79f0\u4e3a\u4e00\u4e2a\u7b56\u7565\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u73af\u5883\u6216\u8005\u6761\u4ef6\u7684\u4e0d\u540c\u9009\u62e9\u4e0d\u540c\u7684\u7b56\u7565\u6765\u5b8c\u6210\u8be5\u9879\u4efb\u52a1\u3002\u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u4e5f\u5e38\u5e38\u9047\u5230\u7c7b\u4f3c\u7684\u60c5\u51b5\uff0c\u5b9e\u73b0\u67d0\u4e00\u4e2a\u529f\u80fd\u6709\u591a\u4e2a\u9014\u5f84\uff0c\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u6765\u4f7f\u5f97\u7cfb\u7edf\u53ef\u4ee5\u7075\u6d3b\u5730\u9009\u62e9\u89e3\u51b3\u9014\u5f84\uff0c\u4e5f\u80fd\u591f\u65b9\u4fbf\u5730\u589e\u52a0\u65b0\u7684\u89e3\u51b3\u9014\u5f84\u3002 \u5728\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u6709\u8bb8\u591a\u7b97\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u67d0\u4e00\u529f\u80fd\uff0c\u5982\u67e5\u627e\u3001\u6392\u5e8f\u7b49\uff0c\u4e00\u79cd\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u786c\u7f16\u7801( Hard Coding )\u5728\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5982\u9700\u8981\u63d0\u4f9b\u591a\u79cd\u67e5\u627e\u7b97\u6cd5\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u7b97\u6cd5\u5199\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5728\u8be5\u7c7b\u4e2d\u63d0\u4f9b\u591a\u4e2a\u65b9\u6cd5\uff0c\u6bcf\u4e00\u4e2a\u65b9\u6cd5\u5bf9\u5e94\u4e00\u4e2a\u5177\u4f53\u7684\u67e5\u627e\u7b97\u6cd5\uff1b\u5f53\u7136\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u67e5\u627e\u7b97\u6cd5\u5c01\u88c5\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u65b9\u6cd5\u4e2d\uff0c\u901a\u8fc7 if\u2026else\u2026\u7b49\u6761\u4ef6\u5224\u65ad\u8bed\u53e5\u6765\u8fdb\u884c\u9009\u62e9\u3002\u8fd9\u4e24\u79cd\u5b9e\u73b0\u65b9\u6cd5\u6211\u4eec\u90fd\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u786c\u7f16\u7801\uff0c\u5982\u679c\u9700\u8981\u589e\u52a0\u4e00\u79cd\u65b0\u7684\u67e5\u627e\u7b97\u6cd5\uff0c\u9700\u8981\u4fee\u6539\u5c01\u88c5\u7b97\u6cd5\u7c7b\u7684\u6e90\u4ee3\u7801\uff1b\u66f4\u6362\u67e5\u627e\u7b97\u6cd5\uff0c\u4e5f\u9700\u8981\u4fee\u6539\u5ba2\u6237\u7aef\u8c03\u7528\u4ee3\u7801\u3002\u5728\u8fd9\u4e2a\u7b97\u6cd5\u7c7b\u4e2d\u5c01\u88c5\u4e86\u5927\u91cf\u67e5\u627e\u7b97\u6cd5\uff0c\u8be5\u7c7b\u4ee3\u7801\u5c06\u8f83\u590d\u6742\uff0c\u7ef4\u62a4\u8f83\u4e3a\u56f0\u96be\u3002 \u9664\u4e86\u63d0\u4f9b\u4e13\u95e8\u7684\u67e5\u627e\u7b97\u6cd5\u7c7b\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e2d\u76f4\u63a5\u5305\u542b\u7b97\u6cd5\u4ee3\u7801\uff0c\u8fd9\u79cd\u505a\u6cd5\u66f4\u4e0d\u53ef\u53d6\uff0c\u5c06\u5bfc\u81f4\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5e9e\u5927\u800c\u4e14\u96be\u4ee5\u7ef4\u62a4\uff0c\u5982\u679c\u5b58\u5728\u5927\u91cf\u53ef\u4f9b\u9009\u62e9\u7684\u7b97\u6cd5\u65f6\u95ee\u9898\u5c06\u53d8\u5f97\u66f4\u52a0\u4e25\u91cd\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u53ef\u4ee5 \u5b9a\u4e49\u4e00\u4e9b\u72ec\u7acb\u7684\u7c7b\u6765\u5c01\u88c5\u4e0d\u540c\u7684\u7b97\u6cd5\uff0c\u6bcf\u4e00\u4e2a\u7c7b\u5c01\u88c5\u4e00\u4e2a\u5177\u4f53\u7684\u7b97\u6cd5\uff0c\u5728\u8fd9\u91cc\uff0c\u6bcf\u4e00\u4e2a\u5c01\u88c5\u7b97\u6cd5\u7684\u7c7b\u6211\u4eec\u90fd\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u7b56\u7565(Strategy)\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8fd9\u4e9b\u7b56\u7565\u7684\u4e00\u81f4\u6027\uff0c\u4e00\u822c\u4f1a\u7528\u4e00\u4e2a\u62bd\u8c61\u7684\u7b56\u7565\u7c7b\u6765\u505a\u7b97\u6cd5\u7684\u5b9a\u4e49\uff0c\u800c\u5177\u4f53\u6bcf\u79cd\u7b97\u6cd5\u5219\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u5177\u4f53\u7b56\u7565\u7c7b \u3002 \u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u7b56\u7565\u6a21\u5f0f(Strategy Pattern)\uff1a\u5b9a\u4e49\u4e00\u7cfb\u5217\u7b97\u6cd5\uff0c\u5c06\u6bcf\u4e00\u4e2a\u7b97\u6cd5\u5c01\u88c5\u8d77\u6765\uff0c\u5e76\u8ba9\u5b83\u4eec\u53ef\u4ee5\u76f8\u4e92\u66ff\u6362\u3002\u7b56\u7565\u6a21\u5f0f\u8ba9\u7b97\u6cd5\u72ec\u7acb\u4e8e\u4f7f\u7528\u5b83\u7684\u5ba2\u6237\u800c\u53d8\u5316\uff0c\u4e5f\u79f0\u4e3a\u653f\u7b56\u6a21\u5f0f(Policy) \u3002 \u7b56\u7565\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u4e09\u3001 \u6a21\u5f0f\u7ed3\u6784 \u00b6 \u7b56\u7565\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Context: \u73af\u5883\u7c7b Strategy: \u62bd\u8c61\u7b56\u7565\u7c7b ConcreteStrategy: \u5177\u4f53\u7b56\u7565\u7c7b \u7ed3\u6784\u56fe \u00b6 \u65f6\u5e8f\u56fe \u00b6 \u56db\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u7b56\u7565\u63a5\u53e3\uff1a public interface IStrategy { /** * \u7b56\u7565\u6a21\u5f0f\u7684\u8fd0\u7b97\u6cd5\u5219 */ public void doSomething (); } \u7136\u540e\u662f\u5177\u4f53\u7684\u7b56\u7565\u5b9e\u73b0\u7c7b\uff1a public class ConcreteStrategy1 implements IStrategy { @Override public void doSomething () { System . out . println ( \"\u5177\u4f53\u7b56\u7565\u7684\u7b56\u7565\u65b9\u6cd51\" ); } } public class ConcreteStrategy2 implements IStrategy { @Override public void doSomething () { System . out . println ( \"\u5177\u4f53\u7b56\u7565\u7684\u7b56\u7565\u65b9\u6cd52\" ); } } \u63a5\u7740\u662f\u5c01\u88c5\u89d2\u8272\u7684\u7c7b\uff1a public class Context { // \u62bd\u8c61\u7b56\u7565 private IStrategy strategy ; /** * \u6784\u9020\u51fd\u6570\u8bbe\u7f6e\u5177\u4f53\u7b56\u7565 * @param strategy */ public Context ( IStrategy strategy ) { this . strategy = strategy ; } /** * \u5c01\u88c5\u540e\u7684\u7b56\u7565\u65b9\u6cd5 */ public void doAnything () { this . strategy . doSomething (); } } \u6700\u540e\u662f\u5ba2\u6237\u7aef\u7684\u8c03\u7528\u7b56\u7565\u7c7b\uff1a public class Client { public static void main ( String [] args ) { // \u58f0\u660e\u4e00\u4e2a\u5177\u4f53\u7684\u7b56\u7565 IStrategy strategy = new ConcreteStrategy1 (); // \u58f0\u660e\u4e0a\u4e0b\u6587\u5bf9\u8c61 Context context = new Context ( strategy ); // \u6267\u884c\u5c01\u88c5\u540e\u7684\u65b9\u6cd5 context . doAnything (); } } \u4e94\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u603b\u4f53\u5206\u6790 \u00b6 \u7b56\u7565\u6a21\u5f0f\u662f\u4e00\u4e2a\u6bd4\u8f83\u5bb9\u6613\u7406\u89e3\u548c\u4f7f\u7528\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u7b56\u7565\u6a21\u5f0f\u662f\u5bf9\u7b97\u6cd5\u7684\u5c01\u88c5\uff0c\u5b83\u628a\u7b97\u6cd5\u7684\u8d23\u4efb\u548c\u7b97\u6cd5\u672c\u8eab\u5206\u5272\u5f00\uff0c\u59d4\u6d3e\u7ed9\u4e0d\u540c\u7684\u5bf9\u8c61\u7ba1\u7406\u3002\u7b56\u7565\u6a21\u5f0f\u901a\u5e38\u628a\u4e00\u4e2a\u7cfb\u5217\u7684\u7b97\u6cd5\u5c01\u88c5\u5230\u4e00\u7cfb\u5217\u7684\u7b56\u7565\u7c7b\u91cc\u9762\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u62bd\u8c61\u7b56\u7565\u7c7b\u7684\u5b50\u7c7b\u3002\u7528\u4e00\u53e5\u8bdd\u6765\u8bf4\uff0c\u5c31\u662f\u201c \u51c6\u5907\u4e00\u7ec4\u7b97\u6cd5\uff0c\u5e76\u5c06\u6bcf\u4e00\u4e2a\u7b97\u6cd5\u5c01\u88c5\u8d77\u6765\uff0c\u4f7f\u5f97\u5b83\u4eec\u53ef\u4ee5\u4e92\u6362 \u201d\u3002 \u5728\u7b56\u7565\u6a21\u5f0f\u4e2d\uff0c\u5e94\u5f53\u7531\u5ba2\u6237\u7aef\u81ea\u5df1\u51b3\u5b9a\u5728\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f7f\u7528\u4ec0\u4e48\u5177\u4f53\u7b56\u7565\u89d2\u8272\u3002 \u7b56\u7565\u6a21\u5f0f\u4ec5\u4ec5\u5c01\u88c5\u7b97\u6cd5\uff0c\u63d0\u4f9b\u65b0\u7b97\u6cd5\u63d2\u5165\u5230\u5df2\u6709\u7cfb\u7edf\u4e2d\uff0c\u4ee5\u53ca\u8001\u7b97\u6cd5\u4ece\u7cfb\u7edf\u4e2d\u201c\u9000\u4f11\u201d\u7684\u65b9\u4fbf\uff0c\u7b56\u7565\u6a21\u5f0f\u5e76\u4e0d\u51b3\u5b9a\u5728\u4f55\u65f6\u4f7f\u7528\u4f55\u79cd\u7b97\u6cd5\uff0c\u7b97\u6cd5\u7684\u9009\u62e9\u7531\u5ba2\u6237\u7aef\u6765\u51b3\u5b9a\u3002\u8fd9\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\uff0c\u4f46\u662f\u5ba2\u6237\u7aef\u9700\u8981\u7406\u89e3\u6240\u6709\u5177\u4f53\u7b56\u7565\u7c7b\u4e4b\u95f4\u7684\u533a\u522b\uff0c\u4ee5\u4fbf\u9009\u62e9\u5408\u9002\u7684\u7b97\u6cd5\uff0c\u8fd9\u4e5f\u662f\u7b56\u7565\u6a21\u5f0f\u7684\u7f3a\u70b9\u4e4b\u4e00\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u5ba2\u6237\u7aef\u7684\u4f7f\u7528\u96be\u5ea6\u3002 \u4f18\u70b9 \u00b6 \u7b56\u7565\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u7b56\u7565\u6a21\u5f0f\u63d0\u4f9b\u4e86\u5bf9\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u5b8c\u7f8e\u652f\u6301\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u4e0d\u4fee\u6539\u539f\u6709\u7cfb\u7edf\u7684\u57fa- \u7840\u4e0a\u9009\u62e9\u7b97\u6cd5\u6216\u884c\u4e3a\uff0c\u4e5f\u53ef\u4ee5\u7075\u6d3b\u5730\u589e\u52a0\u65b0\u7684\u7b97\u6cd5\u6216\u884c\u4e3a\u3002 \u7b56\u7565\u6a21\u5f0f\u63d0\u4f9b\u4e86\u7ba1\u7406\u76f8\u5173\u7684\u7b97\u6cd5\u65cf\u7684\u529e\u6cd5\u3002 \u7b56\u7565\u6a21\u5f0f\u63d0\u4f9b\u4e86\u53ef\u4ee5\u66ff\u6362\u7ee7\u627f\u5173\u7cfb\u7684\u529e\u6cd5\u3002 \u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u53ef\u4ee5\u907f\u514d\u4f7f\u7528\u591a\u91cd\u6761\u4ef6\u8f6c\u79fb\u8bed\u53e5\u3002 \u7f3a\u70b9 \u00b6 \u7b56\u7565\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5ba2\u6237\u7aef\u5fc5\u987b\u77e5\u9053\u6240\u6709\u7684\u7b56\u7565\u7c7b\uff0c\u5e76\u81ea\u884c\u51b3\u5b9a\u4f7f\u7528\u54ea\u4e00\u4e2a\u7b56\u7565\u7c7b\u3002 \u7b56\u7565\u6a21\u5f0f\u5c06\u9020\u6210\u4ea7\u751f\u5f88\u591a\u7b56\u7565\u7c7b\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4eab\u5143\u6a21\u5f0f\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u51cf\u5c11\u5bf9\u8c61\u7684\u6570\u91cf\u3002 \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\uff1a \u5982\u679c\u5728\u4e00\u4e2a\u7cfb\u7edf\u91cc\u9762\u6709\u8bb8\u591a\u7c7b\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u533a\u522b\u4ec5\u5728\u4e8e\u5b83\u4eec\u7684\u884c\u4e3a\uff0c\u90a3\u4e48\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u53ef\u4ee5\u52a8\u6001\u5730\u8ba9\u4e00\u4e2a\u5bf9\u8c61\u5728\u8bb8\u591a\u884c\u4e3a\u4e2d\u9009\u62e9\u4e00\u79cd\u884c\u4e3a\u3002 \u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u52a8\u6001\u5730\u5728\u51e0\u79cd\u7b97\u6cd5\u4e2d\u9009\u62e9\u4e00\u79cd\u3002 \u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u6709\u5f88\u591a\u7684\u884c\u4e3a\uff0c\u5982\u679c\u4e0d\u7528\u6070\u5f53\u7684\u6a21\u5f0f\uff0c\u8fd9\u4e9b\u884c\u4e3a\u5c31\u53ea\u597d\u4f7f\u7528\u591a\u91cd\u7684\u6761\u4ef6\u9009\u62e9\u8bed\u53e5\u6765\u5b9e\u73b0\u3002 \u4e0d\u5e0c\u671b\u5ba2\u6237\u7aef\u77e5\u9053\u590d\u6742\u7684\u3001\u4e0e\u7b97\u6cd5\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5728\u5177\u4f53\u7b56\u7565\u7c7b\u4e2d\u5c01\u88c5\u7b97\u6cd5\u548c\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\uff0c\u63d0\u9ad8\u7b97\u6cd5\u7684\u4fdd\u5bc6\u6027\u4e0e\u5b89\u5168\u6027\u3002 \u6a21\u5f0f\u6269\u5c55 \u00b6 \u7b56\u7565\u6a21\u5f0f\u4e0e\u72b6\u6001\u6a21\u5f0f\uff1a \u53ef\u4ee5\u901a\u8fc7\u73af\u5883\u7c7b\u72b6\u6001\u7684\u4e2a\u6570\u6765\u51b3\u5b9a\u662f\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u8fd8\u662f\u72b6\u6001\u6a21\u5f0f\u3002 \u7b56\u7565\u6a21\u5f0f\u7684\u73af\u5883\u7c7b\u81ea\u5df1\u9009\u62e9\u4e00\u4e2a\u5177\u4f53\u7b56\u7565\u7c7b\uff0c\u5177\u4f53\u7b56\u7565\u7c7b\u65e0\u987b\u5173\u5fc3\u73af\u5883\u7c7b\uff1b\u800c\u72b6\u6001\u6a21\u5f0f\u7684\u73af\u5883\u7c7b\u7531\u4e8e\u5916\u5728\u56e0\u7d20\u9700\u8981\u653e\u8fdb\u4e00\u4e2a\u5177\u4f53\u72b6\u6001\u4e2d\uff0c\u4ee5\u4fbf\u901a\u8fc7\u5176\u65b9\u6cd5\u5b9e\u73b0\u72b6\u6001\u7684\u5207\u6362\uff0c\u56e0\u6b64\u73af\u5883\u7c7b\u548c\u72b6\u6001\u7c7b\u4e4b\u95f4\u5b58\u5728\u4e00\u79cd\u53cc\u5411\u7684\u5173\u8054\u5173\u7cfb\u3002 \u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u65f6\uff0c\u5ba2\u6237\u7aef\u9700\u8981\u77e5\u9053\u6240\u9009\u7684\u5177\u4f53\u7b56\u7565\u662f\u54ea\u4e00\u4e2a\uff0c\u800c\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u65f6\uff0c\u5ba2\u6237\u7aef\u65e0\u987b\u5173\u5fc3\u5177\u4f53\u72b6\u6001\uff0c\u73af\u5883\u7c7b\u7684\u72b6\u6001\u4f1a\u6839\u636e\u7528\u6237\u7684\u64cd\u4f5c\u81ea\u52a8\u8f6c\u6362\u3002 \u5982\u679c\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u7c7b\u7684\u5bf9\u8c61\u5b58\u5728\u591a\u79cd\u72b6\u6001\uff0c\u4e0d\u540c\u72b6\u6001\u4e0b\u884c\u4e3a\u6709\u5dee\u5f02\uff0c\u800c\u4e14\u8fd9\u4e9b\u72b6\u6001\u4e4b\u95f4\u53ef\u4ee5\u53d1\u751f\u8f6c\u6362\u65f6\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\uff1b\u5982\u679c\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u7c7b\u7684\u67d0\u4e00\u884c\u4e3a\u5b58\u5728\u591a\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff0c\u800c\u4e14\u8fd9\u4e9b\u5b9e\u73b0\u65b9\u5f0f\u53ef\u4ee5\u4e92\u6362\u65f6\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u3002 \u516d\u3001\u603b\u7ed3 \u00b6 \u5728\u7b56\u7565\u6a21\u5f0f\u4e2d\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7b97\u6cd5\uff0c\u5c06\u6bcf\u4e00\u4e2a\u7b97\u6cd5\u5c01\u88c5\u8d77\u6765\uff0c\u5e76\u8ba9\u5b83\u4eec\u53ef\u4ee5\u76f8\u4e92\u66ff\u6362\u3002\u7b56\u7565\u6a21\u5f0f\u8ba9\u7b97\u6cd5\u72ec\u7acb\u4e8e\u4f7f\u7528\u5b83\u7684\u5ba2\u6237\u800c\u53d8\u5316\uff0c\u4e5f\u79f0\u4e3a\u653f\u7b56\u6a21\u5f0f\u3002\u7b56\u7565\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u7b56\u7565\u6a21\u5f0f\u5305\u542b\u4e09\u4e2a\u89d2\u8272\uff1a\u73af\u5883\u7c7b\u5728\u89e3\u51b3\u67d0\u4e2a\u95ee\u9898\u65f6\u53ef\u4ee5\u91c7\u7528\u591a\u79cd\u7b56\u7565\uff0c\u5728\u73af\u5883\u7c7b\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u5bf9\u62bd\u8c61\u7b56\u7565\u7c7b\u7684\u5f15\u7528\u5b9e\u4f8b\uff1b\u62bd\u8c61\u7b56\u7565\u7c7b\u4e3a\u6240\u652f\u6301\u7684\u7b97\u6cd5\u58f0\u660e\u4e86\u62bd\u8c61\u65b9\u6cd5\uff0c\u662f\u6240\u6709\u7b56\u7565\u7c7b\u7684\u7236\u7c7b\uff1b\u5177\u4f53\u7b56\u7565\u7c7b\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u7b56\u7565\u7c7b\u4e2d\u5b9a\u4e49\u7684\u7b97\u6cd5\u3002 \u7b56\u7565\u6a21\u5f0f\u662f\u5bf9\u7b97\u6cd5\u7684\u5c01\u88c5\uff0c\u5b83\u628a\u7b97\u6cd5\u7684\u8d23\u4efb\u548c\u7b97\u6cd5\u672c\u8eab\u5206\u5272\u5f00\uff0c\u59d4\u6d3e\u7ed9\u4e0d\u540c\u7684\u5bf9\u8c61\u7ba1\u7406\u3002\u7b56\u7565\u6a21\u5f0f\u901a\u5e38\u628a\u4e00\u4e2a\u7cfb\u5217\u7684\u7b97\u6cd5\u5c01\u88c5\u5230\u4e00\u7cfb\u5217\u7684\u7b56\u7565\u7c7b\u91cc\u9762\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u62bd\u8c61\u7b56\u7565\u7c7b\u7684\u5b50\u7c7b\u3002 \u7b56\u7565\u6a21\u5f0f\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u5bf9\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u5b8c\u7f8e\u652f\u6301\uff0c\u5728\u4e0d\u4fee\u6539\u539f\u6709\u7cfb\u7edf\u7684\u57fa\u7840\u4e0a\u53ef\u4ee5\u66f4\u6362\u7b97\u6cd5\u6216\u8005\u589e\u52a0\u65b0\u7684\u7b97\u6cd5\uff0c\u5b83\u5f88\u597d\u5730\u7ba1\u7406\u7b97\u6cd5\u65cf\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u590d\u7528\u6027\uff0c\u662f\u4e00\u79cd\u66ff\u6362\u7ee7\u627f\uff0c\u907f\u514d\u591a\u91cd\u6761\u4ef6\u8f6c\u79fb\u8bed\u53e5\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u5ba2\u6237\u7aef\u5fc5\u987b\u77e5\u9053\u6240\u6709\u7684\u7b56\u7565\u7c7b\uff0c\u5e76\u7406\u89e3\u5176\u533a\u522b\uff0c\u540c\u65f6\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u4e2d\u7c7b\u7684\u4e2a\u6570\uff0c\u53ef\u80fd\u4f1a\u5b58\u5728\u5f88\u591a\u7b56\u7565\u7c7b\u3002 \u7b56\u7565\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u5728\u4e00\u4e2a\u7cfb\u7edf\u91cc\u9762\u6709\u8bb8\u591a\u7c7b\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u533a\u522b\u4ec5\u5728\u4e8e\u5b83\u4eec\u7684\u884c\u4e3a\uff0c\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u53ef\u4ee5\u52a8\u6001\u5730\u8ba9\u4e00\u4e2a\u5bf9\u8c61\u5728\u8bb8\u591a\u884c\u4e3a\u4e2d\u9009\u62e9\u4e00\u79cd\u884c\u4e3a\uff1b\u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u52a8\u6001\u5730\u5728\u51e0\u79cd\u7b97\u6cd5\u4e2d\u9009\u62e9\u4e00\u79cd\uff1b\u907f\u514d\u4f7f\u7528\u96be\u4ee5\u7ef4\u62a4\u7684\u591a\u91cd\u6761\u4ef6\u9009\u62e9\u8bed\u53e5\uff1b\u5e0c\u671b\u5728\u5177\u4f53\u7b56\u7565\u7c7b\u4e2d\u5c01\u88c5\u7b97\u6cd5\u548c\u4e0e\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\u3002","title":"\u7b56\u7565\u6a21\u5f0f\uff08Strategy Pattern\uff09"},{"location":"Design-Patterns/15-StrategyPattern/#_1","text":"\u5b8c\u6210\u4e00\u9879\u4efb\u52a1\uff0c\u5f80\u5f80\u53ef\u4ee5\u6709\u591a\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\uff0c\u6bcf\u4e00\u79cd\u65b9\u5f0f\u79f0\u4e3a\u4e00\u4e2a\u7b56\u7565\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u73af\u5883\u6216\u8005\u6761\u4ef6\u7684\u4e0d\u540c\u9009\u62e9\u4e0d\u540c\u7684\u7b56\u7565\u6765\u5b8c\u6210\u8be5\u9879\u4efb\u52a1\u3002\u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u4e5f\u5e38\u5e38\u9047\u5230\u7c7b\u4f3c\u7684\u60c5\u51b5\uff0c\u5b9e\u73b0\u67d0\u4e00\u4e2a\u529f\u80fd\u6709\u591a\u4e2a\u9014\u5f84\uff0c\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u6765\u4f7f\u5f97\u7cfb\u7edf\u53ef\u4ee5\u7075\u6d3b\u5730\u9009\u62e9\u89e3\u51b3\u9014\u5f84\uff0c\u4e5f\u80fd\u591f\u65b9\u4fbf\u5730\u589e\u52a0\u65b0\u7684\u89e3\u51b3\u9014\u5f84\u3002 \u5728\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u6709\u8bb8\u591a\u7b97\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u67d0\u4e00\u529f\u80fd\uff0c\u5982\u67e5\u627e\u3001\u6392\u5e8f\u7b49\uff0c\u4e00\u79cd\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u786c\u7f16\u7801( Hard Coding )\u5728\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5982\u9700\u8981\u63d0\u4f9b\u591a\u79cd\u67e5\u627e\u7b97\u6cd5\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u7b97\u6cd5\u5199\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u5728\u8be5\u7c7b\u4e2d\u63d0\u4f9b\u591a\u4e2a\u65b9\u6cd5\uff0c\u6bcf\u4e00\u4e2a\u65b9\u6cd5\u5bf9\u5e94\u4e00\u4e2a\u5177\u4f53\u7684\u67e5\u627e\u7b97\u6cd5\uff1b\u5f53\u7136\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u67e5\u627e\u7b97\u6cd5\u5c01\u88c5\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u65b9\u6cd5\u4e2d\uff0c\u901a\u8fc7 if\u2026else\u2026\u7b49\u6761\u4ef6\u5224\u65ad\u8bed\u53e5\u6765\u8fdb\u884c\u9009\u62e9\u3002\u8fd9\u4e24\u79cd\u5b9e\u73b0\u65b9\u6cd5\u6211\u4eec\u90fd\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u786c\u7f16\u7801\uff0c\u5982\u679c\u9700\u8981\u589e\u52a0\u4e00\u79cd\u65b0\u7684\u67e5\u627e\u7b97\u6cd5\uff0c\u9700\u8981\u4fee\u6539\u5c01\u88c5\u7b97\u6cd5\u7c7b\u7684\u6e90\u4ee3\u7801\uff1b\u66f4\u6362\u67e5\u627e\u7b97\u6cd5\uff0c\u4e5f\u9700\u8981\u4fee\u6539\u5ba2\u6237\u7aef\u8c03\u7528\u4ee3\u7801\u3002\u5728\u8fd9\u4e2a\u7b97\u6cd5\u7c7b\u4e2d\u5c01\u88c5\u4e86\u5927\u91cf\u67e5\u627e\u7b97\u6cd5\uff0c\u8be5\u7c7b\u4ee3\u7801\u5c06\u8f83\u590d\u6742\uff0c\u7ef4\u62a4\u8f83\u4e3a\u56f0\u96be\u3002 \u9664\u4e86\u63d0\u4f9b\u4e13\u95e8\u7684\u67e5\u627e\u7b97\u6cd5\u7c7b\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e2d\u76f4\u63a5\u5305\u542b\u7b97\u6cd5\u4ee3\u7801\uff0c\u8fd9\u79cd\u505a\u6cd5\u66f4\u4e0d\u53ef\u53d6\uff0c\u5c06\u5bfc\u81f4\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5e9e\u5927\u800c\u4e14\u96be\u4ee5\u7ef4\u62a4\uff0c\u5982\u679c\u5b58\u5728\u5927\u91cf\u53ef\u4f9b\u9009\u62e9\u7684\u7b97\u6cd5\u65f6\u95ee\u9898\u5c06\u53d8\u5f97\u66f4\u52a0\u4e25\u91cd\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u53ef\u4ee5 \u5b9a\u4e49\u4e00\u4e9b\u72ec\u7acb\u7684\u7c7b\u6765\u5c01\u88c5\u4e0d\u540c\u7684\u7b97\u6cd5\uff0c\u6bcf\u4e00\u4e2a\u7c7b\u5c01\u88c5\u4e00\u4e2a\u5177\u4f53\u7684\u7b97\u6cd5\uff0c\u5728\u8fd9\u91cc\uff0c\u6bcf\u4e00\u4e2a\u5c01\u88c5\u7b97\u6cd5\u7684\u7c7b\u6211\u4eec\u90fd\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u7b56\u7565(Strategy)\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8fd9\u4e9b\u7b56\u7565\u7684\u4e00\u81f4\u6027\uff0c\u4e00\u822c\u4f1a\u7528\u4e00\u4e2a\u62bd\u8c61\u7684\u7b56\u7565\u7c7b\u6765\u505a\u7b97\u6cd5\u7684\u5b9a\u4e49\uff0c\u800c\u5177\u4f53\u6bcf\u79cd\u7b97\u6cd5\u5219\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u5177\u4f53\u7b56\u7565\u7c7b \u3002","title":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/15-StrategyPattern/#_2","text":"\u7b56\u7565\u6a21\u5f0f(Strategy Pattern)\uff1a\u5b9a\u4e49\u4e00\u7cfb\u5217\u7b97\u6cd5\uff0c\u5c06\u6bcf\u4e00\u4e2a\u7b97\u6cd5\u5c01\u88c5\u8d77\u6765\uff0c\u5e76\u8ba9\u5b83\u4eec\u53ef\u4ee5\u76f8\u4e92\u66ff\u6362\u3002\u7b56\u7565\u6a21\u5f0f\u8ba9\u7b97\u6cd5\u72ec\u7acb\u4e8e\u4f7f\u7528\u5b83\u7684\u5ba2\u6237\u800c\u53d8\u5316\uff0c\u4e5f\u79f0\u4e3a\u653f\u7b56\u6a21\u5f0f(Policy) \u3002 \u7b56\u7565\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002","title":"\u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/15-StrategyPattern/#_3","text":"\u7b56\u7565\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Context: \u73af\u5883\u7c7b Strategy: \u62bd\u8c61\u7b56\u7565\u7c7b ConcreteStrategy: \u5177\u4f53\u7b56\u7565\u7c7b","title":"\u4e09\u3001 \u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/15-StrategyPattern/#_4","text":"","title":"\u7ed3\u6784\u56fe"},{"location":"Design-Patterns/15-StrategyPattern/#_5","text":"","title":"\u65f6\u5e8f\u56fe"},{"location":"Design-Patterns/15-StrategyPattern/#_6","text":"\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u7b56\u7565\u63a5\u53e3\uff1a public interface IStrategy { /** * \u7b56\u7565\u6a21\u5f0f\u7684\u8fd0\u7b97\u6cd5\u5219 */ public void doSomething (); } \u7136\u540e\u662f\u5177\u4f53\u7684\u7b56\u7565\u5b9e\u73b0\u7c7b\uff1a public class ConcreteStrategy1 implements IStrategy { @Override public void doSomething () { System . out . println ( \"\u5177\u4f53\u7b56\u7565\u7684\u7b56\u7565\u65b9\u6cd51\" ); } } public class ConcreteStrategy2 implements IStrategy { @Override public void doSomething () { System . out . println ( \"\u5177\u4f53\u7b56\u7565\u7684\u7b56\u7565\u65b9\u6cd52\" ); } } \u63a5\u7740\u662f\u5c01\u88c5\u89d2\u8272\u7684\u7c7b\uff1a public class Context { // \u62bd\u8c61\u7b56\u7565 private IStrategy strategy ; /** * \u6784\u9020\u51fd\u6570\u8bbe\u7f6e\u5177\u4f53\u7b56\u7565 * @param strategy */ public Context ( IStrategy strategy ) { this . strategy = strategy ; } /** * \u5c01\u88c5\u540e\u7684\u7b56\u7565\u65b9\u6cd5 */ public void doAnything () { this . strategy . doSomething (); } } \u6700\u540e\u662f\u5ba2\u6237\u7aef\u7684\u8c03\u7528\u7b56\u7565\u7c7b\uff1a public class Client { public static void main ( String [] args ) { // \u58f0\u660e\u4e00\u4e2a\u5177\u4f53\u7684\u7b56\u7565 IStrategy strategy = new ConcreteStrategy1 (); // \u58f0\u660e\u4e0a\u4e0b\u6587\u5bf9\u8c61 Context context = new Context ( strategy ); // \u6267\u884c\u5c01\u88c5\u540e\u7684\u65b9\u6cd5 context . doAnything (); } }","title":"\u56db\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/15-StrategyPattern/#_7","text":"","title":"\u4e94\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/15-StrategyPattern/#_8","text":"\u7b56\u7565\u6a21\u5f0f\u662f\u4e00\u4e2a\u6bd4\u8f83\u5bb9\u6613\u7406\u89e3\u548c\u4f7f\u7528\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u7b56\u7565\u6a21\u5f0f\u662f\u5bf9\u7b97\u6cd5\u7684\u5c01\u88c5\uff0c\u5b83\u628a\u7b97\u6cd5\u7684\u8d23\u4efb\u548c\u7b97\u6cd5\u672c\u8eab\u5206\u5272\u5f00\uff0c\u59d4\u6d3e\u7ed9\u4e0d\u540c\u7684\u5bf9\u8c61\u7ba1\u7406\u3002\u7b56\u7565\u6a21\u5f0f\u901a\u5e38\u628a\u4e00\u4e2a\u7cfb\u5217\u7684\u7b97\u6cd5\u5c01\u88c5\u5230\u4e00\u7cfb\u5217\u7684\u7b56\u7565\u7c7b\u91cc\u9762\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u62bd\u8c61\u7b56\u7565\u7c7b\u7684\u5b50\u7c7b\u3002\u7528\u4e00\u53e5\u8bdd\u6765\u8bf4\uff0c\u5c31\u662f\u201c \u51c6\u5907\u4e00\u7ec4\u7b97\u6cd5\uff0c\u5e76\u5c06\u6bcf\u4e00\u4e2a\u7b97\u6cd5\u5c01\u88c5\u8d77\u6765\uff0c\u4f7f\u5f97\u5b83\u4eec\u53ef\u4ee5\u4e92\u6362 \u201d\u3002 \u5728\u7b56\u7565\u6a21\u5f0f\u4e2d\uff0c\u5e94\u5f53\u7531\u5ba2\u6237\u7aef\u81ea\u5df1\u51b3\u5b9a\u5728\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f7f\u7528\u4ec0\u4e48\u5177\u4f53\u7b56\u7565\u89d2\u8272\u3002 \u7b56\u7565\u6a21\u5f0f\u4ec5\u4ec5\u5c01\u88c5\u7b97\u6cd5\uff0c\u63d0\u4f9b\u65b0\u7b97\u6cd5\u63d2\u5165\u5230\u5df2\u6709\u7cfb\u7edf\u4e2d\uff0c\u4ee5\u53ca\u8001\u7b97\u6cd5\u4ece\u7cfb\u7edf\u4e2d\u201c\u9000\u4f11\u201d\u7684\u65b9\u4fbf\uff0c\u7b56\u7565\u6a21\u5f0f\u5e76\u4e0d\u51b3\u5b9a\u5728\u4f55\u65f6\u4f7f\u7528\u4f55\u79cd\u7b97\u6cd5\uff0c\u7b97\u6cd5\u7684\u9009\u62e9\u7531\u5ba2\u6237\u7aef\u6765\u51b3\u5b9a\u3002\u8fd9\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\uff0c\u4f46\u662f\u5ba2\u6237\u7aef\u9700\u8981\u7406\u89e3\u6240\u6709\u5177\u4f53\u7b56\u7565\u7c7b\u4e4b\u95f4\u7684\u533a\u522b\uff0c\u4ee5\u4fbf\u9009\u62e9\u5408\u9002\u7684\u7b97\u6cd5\uff0c\u8fd9\u4e5f\u662f\u7b56\u7565\u6a21\u5f0f\u7684\u7f3a\u70b9\u4e4b\u4e00\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u5ba2\u6237\u7aef\u7684\u4f7f\u7528\u96be\u5ea6\u3002","title":"\u603b\u4f53\u5206\u6790"},{"location":"Design-Patterns/15-StrategyPattern/#_9","text":"\u7b56\u7565\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u7b56\u7565\u6a21\u5f0f\u63d0\u4f9b\u4e86\u5bf9\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u5b8c\u7f8e\u652f\u6301\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u4e0d\u4fee\u6539\u539f\u6709\u7cfb\u7edf\u7684\u57fa- \u7840\u4e0a\u9009\u62e9\u7b97\u6cd5\u6216\u884c\u4e3a\uff0c\u4e5f\u53ef\u4ee5\u7075\u6d3b\u5730\u589e\u52a0\u65b0\u7684\u7b97\u6cd5\u6216\u884c\u4e3a\u3002 \u7b56\u7565\u6a21\u5f0f\u63d0\u4f9b\u4e86\u7ba1\u7406\u76f8\u5173\u7684\u7b97\u6cd5\u65cf\u7684\u529e\u6cd5\u3002 \u7b56\u7565\u6a21\u5f0f\u63d0\u4f9b\u4e86\u53ef\u4ee5\u66ff\u6362\u7ee7\u627f\u5173\u7cfb\u7684\u529e\u6cd5\u3002 \u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u53ef\u4ee5\u907f\u514d\u4f7f\u7528\u591a\u91cd\u6761\u4ef6\u8f6c\u79fb\u8bed\u53e5\u3002","title":"\u4f18\u70b9"},{"location":"Design-Patterns/15-StrategyPattern/#_10","text":"\u7b56\u7565\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5ba2\u6237\u7aef\u5fc5\u987b\u77e5\u9053\u6240\u6709\u7684\u7b56\u7565\u7c7b\uff0c\u5e76\u81ea\u884c\u51b3\u5b9a\u4f7f\u7528\u54ea\u4e00\u4e2a\u7b56\u7565\u7c7b\u3002 \u7b56\u7565\u6a21\u5f0f\u5c06\u9020\u6210\u4ea7\u751f\u5f88\u591a\u7b56\u7565\u7c7b\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4eab\u5143\u6a21\u5f0f\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u51cf\u5c11\u5bf9\u8c61\u7684\u6570\u91cf\u3002","title":"\u7f3a\u70b9"},{"location":"Design-Patterns/15-StrategyPattern/#_11","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\uff1a \u5982\u679c\u5728\u4e00\u4e2a\u7cfb\u7edf\u91cc\u9762\u6709\u8bb8\u591a\u7c7b\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u533a\u522b\u4ec5\u5728\u4e8e\u5b83\u4eec\u7684\u884c\u4e3a\uff0c\u90a3\u4e48\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u53ef\u4ee5\u52a8\u6001\u5730\u8ba9\u4e00\u4e2a\u5bf9\u8c61\u5728\u8bb8\u591a\u884c\u4e3a\u4e2d\u9009\u62e9\u4e00\u79cd\u884c\u4e3a\u3002 \u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u52a8\u6001\u5730\u5728\u51e0\u79cd\u7b97\u6cd5\u4e2d\u9009\u62e9\u4e00\u79cd\u3002 \u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u6709\u5f88\u591a\u7684\u884c\u4e3a\uff0c\u5982\u679c\u4e0d\u7528\u6070\u5f53\u7684\u6a21\u5f0f\uff0c\u8fd9\u4e9b\u884c\u4e3a\u5c31\u53ea\u597d\u4f7f\u7528\u591a\u91cd\u7684\u6761\u4ef6\u9009\u62e9\u8bed\u53e5\u6765\u5b9e\u73b0\u3002 \u4e0d\u5e0c\u671b\u5ba2\u6237\u7aef\u77e5\u9053\u590d\u6742\u7684\u3001\u4e0e\u7b97\u6cd5\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5728\u5177\u4f53\u7b56\u7565\u7c7b\u4e2d\u5c01\u88c5\u7b97\u6cd5\u548c\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\uff0c\u63d0\u9ad8\u7b97\u6cd5\u7684\u4fdd\u5bc6\u6027\u4e0e\u5b89\u5168\u6027\u3002","title":"\u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/15-StrategyPattern/#_12","text":"\u7b56\u7565\u6a21\u5f0f\u4e0e\u72b6\u6001\u6a21\u5f0f\uff1a \u53ef\u4ee5\u901a\u8fc7\u73af\u5883\u7c7b\u72b6\u6001\u7684\u4e2a\u6570\u6765\u51b3\u5b9a\u662f\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u8fd8\u662f\u72b6\u6001\u6a21\u5f0f\u3002 \u7b56\u7565\u6a21\u5f0f\u7684\u73af\u5883\u7c7b\u81ea\u5df1\u9009\u62e9\u4e00\u4e2a\u5177\u4f53\u7b56\u7565\u7c7b\uff0c\u5177\u4f53\u7b56\u7565\u7c7b\u65e0\u987b\u5173\u5fc3\u73af\u5883\u7c7b\uff1b\u800c\u72b6\u6001\u6a21\u5f0f\u7684\u73af\u5883\u7c7b\u7531\u4e8e\u5916\u5728\u56e0\u7d20\u9700\u8981\u653e\u8fdb\u4e00\u4e2a\u5177\u4f53\u72b6\u6001\u4e2d\uff0c\u4ee5\u4fbf\u901a\u8fc7\u5176\u65b9\u6cd5\u5b9e\u73b0\u72b6\u6001\u7684\u5207\u6362\uff0c\u56e0\u6b64\u73af\u5883\u7c7b\u548c\u72b6\u6001\u7c7b\u4e4b\u95f4\u5b58\u5728\u4e00\u79cd\u53cc\u5411\u7684\u5173\u8054\u5173\u7cfb\u3002 \u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u65f6\uff0c\u5ba2\u6237\u7aef\u9700\u8981\u77e5\u9053\u6240\u9009\u7684\u5177\u4f53\u7b56\u7565\u662f\u54ea\u4e00\u4e2a\uff0c\u800c\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u65f6\uff0c\u5ba2\u6237\u7aef\u65e0\u987b\u5173\u5fc3\u5177\u4f53\u72b6\u6001\uff0c\u73af\u5883\u7c7b\u7684\u72b6\u6001\u4f1a\u6839\u636e\u7528\u6237\u7684\u64cd\u4f5c\u81ea\u52a8\u8f6c\u6362\u3002 \u5982\u679c\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u7c7b\u7684\u5bf9\u8c61\u5b58\u5728\u591a\u79cd\u72b6\u6001\uff0c\u4e0d\u540c\u72b6\u6001\u4e0b\u884c\u4e3a\u6709\u5dee\u5f02\uff0c\u800c\u4e14\u8fd9\u4e9b\u72b6\u6001\u4e4b\u95f4\u53ef\u4ee5\u53d1\u751f\u8f6c\u6362\u65f6\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\uff1b\u5982\u679c\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u7c7b\u7684\u67d0\u4e00\u884c\u4e3a\u5b58\u5728\u591a\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff0c\u800c\u4e14\u8fd9\u4e9b\u5b9e\u73b0\u65b9\u5f0f\u53ef\u4ee5\u4e92\u6362\u65f6\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u3002","title":"\u6a21\u5f0f\u6269\u5c55"},{"location":"Design-Patterns/15-StrategyPattern/#_13","text":"\u5728\u7b56\u7565\u6a21\u5f0f\u4e2d\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7b97\u6cd5\uff0c\u5c06\u6bcf\u4e00\u4e2a\u7b97\u6cd5\u5c01\u88c5\u8d77\u6765\uff0c\u5e76\u8ba9\u5b83\u4eec\u53ef\u4ee5\u76f8\u4e92\u66ff\u6362\u3002\u7b56\u7565\u6a21\u5f0f\u8ba9\u7b97\u6cd5\u72ec\u7acb\u4e8e\u4f7f\u7528\u5b83\u7684\u5ba2\u6237\u800c\u53d8\u5316\uff0c\u4e5f\u79f0\u4e3a\u653f\u7b56\u6a21\u5f0f\u3002\u7b56\u7565\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u7b56\u7565\u6a21\u5f0f\u5305\u542b\u4e09\u4e2a\u89d2\u8272\uff1a\u73af\u5883\u7c7b\u5728\u89e3\u51b3\u67d0\u4e2a\u95ee\u9898\u65f6\u53ef\u4ee5\u91c7\u7528\u591a\u79cd\u7b56\u7565\uff0c\u5728\u73af\u5883\u7c7b\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u5bf9\u62bd\u8c61\u7b56\u7565\u7c7b\u7684\u5f15\u7528\u5b9e\u4f8b\uff1b\u62bd\u8c61\u7b56\u7565\u7c7b\u4e3a\u6240\u652f\u6301\u7684\u7b97\u6cd5\u58f0\u660e\u4e86\u62bd\u8c61\u65b9\u6cd5\uff0c\u662f\u6240\u6709\u7b56\u7565\u7c7b\u7684\u7236\u7c7b\uff1b\u5177\u4f53\u7b56\u7565\u7c7b\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u7b56\u7565\u7c7b\u4e2d\u5b9a\u4e49\u7684\u7b97\u6cd5\u3002 \u7b56\u7565\u6a21\u5f0f\u662f\u5bf9\u7b97\u6cd5\u7684\u5c01\u88c5\uff0c\u5b83\u628a\u7b97\u6cd5\u7684\u8d23\u4efb\u548c\u7b97\u6cd5\u672c\u8eab\u5206\u5272\u5f00\uff0c\u59d4\u6d3e\u7ed9\u4e0d\u540c\u7684\u5bf9\u8c61\u7ba1\u7406\u3002\u7b56\u7565\u6a21\u5f0f\u901a\u5e38\u628a\u4e00\u4e2a\u7cfb\u5217\u7684\u7b97\u6cd5\u5c01\u88c5\u5230\u4e00\u7cfb\u5217\u7684\u7b56\u7565\u7c7b\u91cc\u9762\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u62bd\u8c61\u7b56\u7565\u7c7b\u7684\u5b50\u7c7b\u3002 \u7b56\u7565\u6a21\u5f0f\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u5bf9\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u5b8c\u7f8e\u652f\u6301\uff0c\u5728\u4e0d\u4fee\u6539\u539f\u6709\u7cfb\u7edf\u7684\u57fa\u7840\u4e0a\u53ef\u4ee5\u66f4\u6362\u7b97\u6cd5\u6216\u8005\u589e\u52a0\u65b0\u7684\u7b97\u6cd5\uff0c\u5b83\u5f88\u597d\u5730\u7ba1\u7406\u7b97\u6cd5\u65cf\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u590d\u7528\u6027\uff0c\u662f\u4e00\u79cd\u66ff\u6362\u7ee7\u627f\uff0c\u907f\u514d\u591a\u91cd\u6761\u4ef6\u8f6c\u79fb\u8bed\u53e5\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u5ba2\u6237\u7aef\u5fc5\u987b\u77e5\u9053\u6240\u6709\u7684\u7b56\u7565\u7c7b\uff0c\u5e76\u7406\u89e3\u5176\u533a\u522b\uff0c\u540c\u65f6\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u4e2d\u7c7b\u7684\u4e2a\u6570\uff0c\u53ef\u80fd\u4f1a\u5b58\u5728\u5f88\u591a\u7b56\u7565\u7c7b\u3002 \u7b56\u7565\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u5728\u4e00\u4e2a\u7cfb\u7edf\u91cc\u9762\u6709\u8bb8\u591a\u7c7b\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u533a\u522b\u4ec5\u5728\u4e8e\u5b83\u4eec\u7684\u884c\u4e3a\uff0c\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u53ef\u4ee5\u52a8\u6001\u5730\u8ba9\u4e00\u4e2a\u5bf9\u8c61\u5728\u8bb8\u591a\u884c\u4e3a\u4e2d\u9009\u62e9\u4e00\u79cd\u884c\u4e3a\uff1b\u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u52a8\u6001\u5730\u5728\u51e0\u79cd\u7b97\u6cd5\u4e2d\u9009\u62e9\u4e00\u79cd\uff1b\u907f\u514d\u4f7f\u7528\u96be\u4ee5\u7ef4\u62a4\u7684\u591a\u91cd\u6761\u4ef6\u9009\u62e9\u8bed\u53e5\uff1b\u5e0c\u671b\u5728\u5177\u4f53\u7b56\u7565\u7c7b\u4e2d\u5c01\u88c5\u7b97\u6cd5\u548c\u4e0e\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\u3002","title":"\u516d\u3001\u603b\u7ed3"},{"location":"Design-Patterns/2-SingletonPattern/","text":"\u6a21\u5f0f\u52a8\u673a \u00b6 \u5bf9\u4e8e\u7cfb\u7edf\u4e2d\u7684\u67d0\u4e9b\u7c7b\u6765\u8bf4\uff0c\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5f88\u91cd\u8981\uff0c\u4f8b\u5982\uff0c\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u5b58\u5728\u591a\u4e2a\u6253\u5370\u4efb\u52a1\uff0c\u4f46\u662f\u53ea\u80fd\u6709\u4e00\u4e2a\u6b63\u5728\u5de5\u4f5c\u7684\u4efb\u52a1\uff1b\u4e00\u4e2a\u7cfb\u7edf\u53ea\u80fd\u6709\u4e00\u4e2a\u7a97\u53e3\u7ba1\u7406\u5668\u6216\u6587\u4ef6\u7cfb\u7edf\uff1b\u4e00\u4e2a\u7cfb\u7edf\u53ea\u80fd\u6709\u4e00\u4e2a\u8ba1\u65f6\u5de5\u5177\u6216 ID\uff08\u5e8f\u53f7\uff09\u751f\u6210\u5668\u3002 \u5982\u4f55\u4fdd\u8bc1\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5e76\u4e14\u8fd9\u4e2a\u5b9e\u4f8b\u6613\u4e8e\u88ab\u8bbf\u95ee\u5462\uff1f\u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u53ef\u4ee5\u786e\u4fdd\u5bf9\u8c61\u968f\u65f6\u90fd\u53ef\u4ee5\u88ab\u8bbf\u95ee\uff0c\u4f46\u4e0d\u80fd\u9632\u6b62\u6211\u4eec\u5b9e\u4f8b\u5316\u591a\u4e2a\u5bf9\u8c61\u3002 \u4e00\u4e2a\u66f4\u597d\u7684\u89e3\u51b3\u529e\u6cd5\u662f\u8ba9\u7c7b\u81ea\u8eab\u8d1f\u8d23\u4fdd\u5b58\u5b83\u7684\u552f\u4e00\u5b9e\u4f8b\u3002\u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u4fdd\u8bc1\u6ca1\u6709\u5176\u4ed6\u5b9e\u4f8b\u88ab\u521b\u5efa\uff0c\u5e76\u4e14\u5b83\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u8bbf\u95ee\u8be5\u5b9e\u4f8b\u7684\u65b9\u6cd5\u3002\u8fd9\u5c31\u662f\u5355\u4f8b\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002 \u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u5355\u4f8b\u6a21\u5f0f( Singleton Pattern ) \uff1a\u5355\u4f8b\u6a21\u5f0f\u786e\u4fdd\u67d0\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u800c\u4e14\u81ea\u884c\u5b9e\u4f8b\u5316\u5e76\u5411\u6574\u4e2a\u7cfb\u7edf\u63d0\u4f9b\u8fd9\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u7c7b\u79f0\u4e3a\u5355\u4f8b\u7c7b\uff0c\u5b83\u63d0\u4f9b\u5168\u5c40\u8bbf\u95ee\u7684\u65b9\u6cd5\u3002\u5355\u4f8b\u6a21\u5f0f\u662f\u4e00\u79cd \u5bf9\u8c61\u521b\u5efa\u578b\u6a21\u5f0f \u3002\u5355\u4f8b\u6a21\u5f0f\u53c8\u540d\u5355\u4ef6\u6a21\u5f0f\u6216\u5355\u6001\u6a21\u5f0f\u3002 \u5355\u4f8b\u6a21\u5f0f\u7684\u8981\u70b9\u6709\u4e09\u4e2a\uff1a \u4e00\u662f\u67d0\u4e2a\u7c7b\u53ea\u80fd\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff1b \u4e8c\u662f\u5b83\u5fc5\u987b\u81ea\u884c\u521b\u5efa\u8fd9\u4e2a\u5b9e\u4f8b\uff1b \u4e09\u662f\u5b83\u5fc5\u987b\u81ea\u884c\u5411\u6574\u4e2a\u7cfb\u7edf\u63d0\u4f9b\u8fd9\u4e2a\u5b9e\u4f8b\u3002 \u6a21\u5f0f\u7ed3\u6784 \u00b6 \u53c2\u4e0e\u89d2\u8272 \u00b6 Singleton : \u5355\u4f8b UML \u7c7b\u56fe \u00b6 \u65f6\u5e8f\u56fe \u00b6 \u4ee3\u7801\u5b9e\u73b0\u65b9\u5f0f \u00b6 1. \u997f\u6c49\u5f0f\uff08\u63a8\u8350\u4f7f\u7528\uff09 \u00b6 /** * \u997f\u6c49\u5f0f\u5355\u4f8b\u6a21\u5f0f. */ public class Singleton { /** \u5168\u5c40\u552f\u4e00\u5b9e\u4f8b. */ private static final Singleton singleton = new Singleton (); private Singleton () {} public static Singleton getSingleton () { return singleton ; } } \u6ce8 \uff1a\u8fd9\u79cd\u65b9\u5f0f\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u7684\u540c\u6b65\u95ee\u9898\uff0c\u4f46\u4e0d\u662f\u61d2\u52a0\u8f7d\u3002\u5982\u679c\u4e0d\u9700\u8981\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\uff0c\u63a8\u8350\u4f7f\u7528\u3002 2. \u975e\u7ebf\u7a0b\u5b89\u5168\u61d2\u6c49\u5f0f\uff08\u4e0d\u63a8\u8350\u4f7f\u7528\uff09 \u00b6 /** * \u975e\u7ebf\u7a0b\u5b89\u5168\u7684\u61d2\u6c49\u5f0f. */ public class Singleton { private static Singleton singleton ; private Singleton () {} /** * \u901a\u8fc7\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\u83b7\u53d6\u5b9e\u4f8b\uff0c\u4f46\u662f\u975e\u7ebf\u7a0b\u5b89\u5168. * @return Singleton\u5b9e\u4f8b */ public static Singleton getSingleton () { if ( singleton == null ) { singleton = new Singleton (); } return singleton ; } } \u6ce8 \uff1a\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\uff0c\u4f46\u975e\u7ebf\u7a0b\u5b89\u5168\u3002\u4e0d\u63a8\u8350\u4f7f\u7528\u3002 3. \u4f4e\u6548\u7684\u7ebf\u7a0b\u5b89\u5168\u61d2\u6c49\u5f0f\uff08\u4e0d\u63a8\u8350\u4f7f\u7528\uff09 \u00b6 /** * \u4f4e\u6548\u7684\u7ebf\u7a0b\u5b89\u5168\u7684\u61d2\u6c49\u5f0f. */ public class Singleton { private static Singleton singleton ; private Singleton () {} /** * \u901a\u8fc7 synchronized \u5173\u952e\u5b57\u6765\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff0c\u4e5f\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\u6765\u83b7\u53d6\u5b9e\u4f8b. * @return Singleton\u5b9e\u4f8b */ public static synchronized Singleton getSingleton () { if ( singleton == null ) { singleton = new Singleton (); } return singleton ; } } \u6ce8 \uff1a\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\uff0c\u4e5f\u7ebf\u7a0b\u5b89\u5168\uff0c\u4f46\u662f\u6548\u7387\u5f88\u4f4e\u3002\u56e0\u4e3a 99%\u7684\u60c5\u51b5\u4e0b\u662f\u4e0d\u9700\u8981\u53bb\u540c\u6b65\u7684\u3002\u4e0d\u63a8\u8350\u4f7f\u7528\u3002 4. \u53cc\u91cd\u6821\u9a8c\u9501\u7ebf\u7a0b\u5b89\u5168\u61d2\u6c49\u5f0f\uff08\u4e0d\u63a8\u8350\u4f7f\u7528\uff09 \u00b6 /** * \u53cc\u91cd\u6821\u9a8c\u9501\u7ebf\u7a0b\u5b89\u5168\u61d2\u6c49\u5f0f. */ public class Singleton { private static Singleton singleton ; private Singleton () {} /** * \u901a\u8fc7'\u53cc\u91cd\u6821\u9a8c\u9501'\u6765\u66f4\u9ad8\u6548\u7684\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff0c\u4e5f\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\u6765\u83b7\u53d6\u5b9e\u4f8b. * @return Singleton\u5b9e\u4f8b */ public static Singleton getSingleton () { if ( singleton == null ) { synchronized ( Singleton . class ) { if ( singleton == null ) { singleton = new Singleton (); } } } return singleton ; } } \u6ce8 \uff1a\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\uff0c\u4e5f\u7ebf\u7a0b\u5b89\u5168\uff0c\u6548\u7387\u4e5f\u4e0d\u9519\u3002\u4f46\u53d7\u9650\u4e8e Jdk5 \u4ee5\u524d\u7684 Java \u5185\u5b58\u6a21\u578b\uff0c\u4ecd\u7136\u4f1a\u6709 bug\uff0cJava5 \u53ca\u4e4b\u540e\u624d\u80fd\u6b63\u5e38\u8fbe\u5230\u5355\u4f8b\u6548\u679c\u3002 5. \u679a\u4e3e\u5f0f\uff08\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528\uff09 \u00b6 /** * \u679a\u4e3e\u65b9\u5f0f\u7684\u5355\u4f8b. */ public enum Singleton { INSTANCE ; } \u6ce8 \uff1a\u5728 \u300aEffective Java\u300b \u4e00\u4e66\u4e2d\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528\u679a\u4e3e\u6765\u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\uff0c\u8be5\u65b9\u5f0f\u7b80\u5355\u53ef\u81ea\u7531\u5e8f\u5217\u5316\uff1b\u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff08\u5373\u4f7f\u4f7f\u7528\u53cd\u5c04\u673a\u5236\u4e5f\u65e0\u6cd5\u591a\u6b21\u5b9e\u4f8b\u5316\u4e00\u4e2a\u679a\u4e3e\u91cf\uff09\uff1b\u7ebf\u7a0b\u5b89\u5168\u3002\u552f\u4e00\u7684\u7f3a\u70b9\u662f\u975e\u61d2\u52a0\u8f7d\u65b9\u5f0f\u3002 6. \u9759\u6001\u5185\u90e8\u7c7b\uff08\u63a8\u8350\u4f7f\u7528\uff09 \u00b6 /** * \u901a\u8fc7\u4f7f\u7528\u9759\u6001\u5185\u90e8\u7c7b\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u61d2\u52a0\u8f7d\u4e14\u7ebf\u7a0b\u5b89\u5168\u7684\u521b\u5efa\u5355\u4f8b. */ public class Singleton { private Singleton () {} /** * \u9759\u6001\u5185\u90e8\u7c7b. */ private static final class SingletonHolder { private SingletonHolder () {} private static Singleton4 instance = new Singleton (); } /** * \u901a\u8fc7\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\u83b7\u53d6Singleton\u552f\u4e00\u5b9e\u4f8b\u7684\u65b9\u6cd5. * @return Singleton\u5b9e\u4f8b */ public static Singleton getInstance () { return SingletonHolder . instance ; } } \u6ce8 \uff1a\u8fd9\u79cd\u65b9\u5f0f\u5229\u7528\u4e86 ClassLoader \u7684\u673a\u5236\u4fdd\u8bc1\u521d\u59cb\u5316 instance \u65f6\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u5176\u53ea\u6709\u663e\u793a\u901a\u8fc7\u8c03\u7528 getInstance \u65b9\u6cd5\u65f6\uff0c\u624d\u4f1a\u663e\u793a\u88c5\u8f7d SingletonHolder \u7c7b\uff0c\u4ece\u800c\u5b9e\u4f8b\u5316 instance \u3002 \u6a21\u5f0f\u5206\u6790 \u00b6 \u5355\u4f8b\u6a21\u5f0f\u7684\u76ee\u7684\u662f\u4fdd\u8bc1\u4e00\u4e2a\u7c7b\u4ec5\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u8bbf\u95ee\u5b83\u7684\u5168\u5c40\u8bbf\u95ee\u70b9\u3002\u5355\u4f8b\u6a21\u5f0f\u5305\u542b\u7684\u89d2\u8272\u53ea\u6709\u4e00\u4e2a\uff0c\u5c31\u662f\u5355\u4f8b\u7c7b\u2014\u2014 Singleton \u3002 \u4f18\u70b9 \u00b6 \u63d0\u4f9b\u4e86\u5bf9\u552f\u4e00\u5b9e\u4f8b\u7684\u53d7\u63a7\u8bbf\u95ee\u3002\u56e0\u4e3a\u5355\u4f8b\u7c7b\u5c01\u88c5\u4e86\u5b83\u7684\u552f\u4e00\u5b9e\u4f8b\uff0c\u6240\u4ee5\u5b83\u53ef\u4ee5\u4e25\u683c\u63a7\u5236\u5ba2\u6237\u600e\u6837\u4ee5\u53ca\u4f55\u65f6\u8bbf\u95ee\u5b83\uff0c\u5e76\u4e3a\u8bbe\u8ba1\u53ca\u5f00\u53d1\u56e2\u961f\u63d0\u4f9b\u4e86\u5171\u4eab\u7684\u6982\u5ff5\u3002 \u7531\u4e8e\u5728\u7cfb\u7edf\u5185\u5b58\u4e2d\u53ea\u5b58\u5728\u4e00\u4e2a\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u8282\u7ea6\u7cfb\u7edf\u8d44\u6e90\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u9700\u8981\u9891\u7e41\u521b\u5efa\u548c\u9500\u6bc1\u7684\u5bf9\u8c61\uff0c\u5355\u4f8b\u6a21\u5f0f\u65e0\u7591\u53ef\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u7684\u6027\u80fd\u3002 \u5141\u8bb8\u53ef\u53d8\u6570\u76ee\u7684\u5b9e\u4f8b\u3002\u6211\u4eec\u53ef\u4ee5\u57fa\u4e8e\u5355\u4f8b\u6a21\u5f0f\u8fdb\u884c\u6269\u5c55\uff0c\u4f7f\u7528\u4e0e\u5355\u4f8b\u63a7\u5236\u76f8\u4f3c\u7684\u65b9\u6cd5\u6765\u83b7\u5f97\u6307\u5b9a\u4e2a\u6570\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002 \u7f3a\u70b9 \u00b6 \u7531\u4e8e\u5355\u4f8b\u6a21\u5f0f\u4e2d\u6ca1\u6709\u62bd\u8c61\u5c42\uff0c\u56e0\u6b64\u5355\u4f8b\u7c7b\u7684\u6269\u5c55\u6709\u5f88\u5927\u7684\u56f0\u96be\u3002 \u5355\u4f8b\u7c7b\u7684\u804c\u8d23\u8fc7\u91cd\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u8fdd\u80cc\u4e86\u201c\u5355\u4e00\u804c\u8d23\u539f\u5219\u201d\u3002\u56e0\u4e3a\u5355\u4f8b\u7c7b\u65e2\u5145\u5f53\u4e86\u5de5\u5382\u89d2\u8272\uff0c\u63d0\u4f9b\u4e86\u5de5\u5382\u65b9\u6cd5\uff0c\u540c\u65f6\u53c8\u5145\u5f53\u4e86\u4ea7\u54c1\u89d2\u8272\uff0c\u5305\u542b\u4e00\u4e9b\u4e1a\u52a1\u65b9\u6cd5\uff0c\u5c06\u4ea7\u54c1\u7684\u521b\u5efa\u548c\u4ea7\u54c1\u7684\u672c\u8eab\u7684\u529f\u80fd\u878d\u5408\u5230\u4e00\u8d77\u3002 \u6ee5\u7528\u5355\u4f8b\u5c06\u5e26\u6765\u4e00\u4e9b\u8d1f\u9762\u95ee\u9898\uff0c\u5982\u4e3a\u4e86\u8282\u7701\u8d44\u6e90\u5c06\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5bf9\u8c61\u8bbe\u8ba1\u4e3a\u5355\u4f8b\u7c7b\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5171\u4eab\u8fde\u63a5\u6c60\u5bf9\u8c61\u7684\u7a0b\u5e8f\u8fc7\u591a\u800c\u51fa\u73b0\u8fde\u63a5\u6c60\u6ea2\u51fa\uff1b\u73b0\u5728\u5f88\u591a\u9762\u5411\u5bf9\u8c61\u8bed\u8a00(\u5982 Java \u3001 C# )\u7684\u8fd0\u884c\u73af\u5883\u90fd\u63d0\u4f9b\u4e86\u81ea\u52a8\u5783\u573e\u56de\u6536\u7684\u6280\u672f\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u957f\u65f6\u95f4\u4e0d\u88ab\u5229\u7528\uff0c\u7cfb\u7edf\u4f1a\u8ba4\u4e3a\u5b83\u662f\u5783\u573e\uff0c\u4f1a\u81ea\u52a8\u9500\u6bc1\u5e76\u56de\u6536\u8d44\u6e90\uff0c\u4e0b\u6b21\u5229\u7528\u65f6\u53c8\u5c06\u91cd\u65b0\u5b9e\u4f8b\u5316\uff0c\u8fd9\u5c06\u5bfc\u81f4\u5bf9\u8c61\u72b6\u6001\u7684\u4e22\u5931\u3002 \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\uff1a \u7cfb\u7edf\u53ea\u9700\u8981\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u5982\u7cfb\u7edf\u8981\u6c42\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u7684\u5e8f\u5217\u53f7\u751f\u6210\u5668\uff0c\u6216\u8005\u9700\u8981\u8003\u8651\u8d44\u6e90\u6d88\u8017\u592a\u5927\u800c\u53ea\u5141\u8bb8\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u3002 \u5ba2\u6237\u8c03\u7528\u7c7b\u7684\u5355\u4e2a\u5b9e\u4f8b\u53ea\u5141\u8bb8\u4f7f\u7528\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u70b9\uff0c\u9664\u4e86\u8be5\u516c\u5171\u8bbf\u95ee\u70b9\uff0c\u4e0d\u80fd\u901a\u8fc7\u5176\u4ed6\u9014\u5f84\u8bbf\u95ee\u8be5\u5b9e\u4f8b\u3002 \u5728\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u8981\u6c42\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u65f6\u624d\u5e94\u5f53\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\u3002\u53cd\u8fc7\u6765\uff0c\u5982\u679c\u4e00\u4e2a\u7c7b\u53ef\u4ee5\u6709\u51e0\u4e2a\u5b9e\u4f8b\u5171\u5b58\uff0c\u5c31\u9700\u8981\u5bf9\u5355\u4f8b\u6a21\u5f0f\u8fdb\u884c\u6539\u8fdb\uff0c\u4f7f\u4e4b\u6210\u4e3a\u591a\u4f8b\u6a21\u5f0f\u3002 \u603b\u7ed3 \u00b6 \u5355\u4f8b\u6a21\u5f0f\u786e\u4fdd\u67d0\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u800c\u4e14\u81ea\u884c\u5b9e\u4f8b\u5316\u5e76\u5411\u6574\u4e2a\u7cfb\u7edf\u63d0\u4f9b\u8fd9\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u7c7b\u79f0\u4e3a\u5355\u4f8b\u7c7b\uff0c\u5b83\u63d0\u4f9b\u5168\u5c40\u8bbf\u95ee\u7684\u65b9\u6cd5\u3002\u5355\u4f8b\u6a21\u5f0f\u7684\u8981\u70b9\u6709\u4e09\u4e2a\uff1a\u4e00\u662f\u67d0\u4e2a\u7c7b\u53ea\u80fd\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff1b\u4e8c\u662f\u5b83\u5fc5\u987b\u81ea\u884c\u521b\u5efa\u8fd9\u4e2a\u5b9e\u4f8b\uff1b\u4e09\u662f\u5b83\u5fc5\u987b\u81ea\u884c\u5411\u6574\u4e2a\u7cfb\u7edf\u63d0\u4f9b\u8fd9\u4e2a\u5b9e\u4f8b\u3002\u5355\u4f8b\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u521b\u5efa\u578b\u6a21\u5f0f\u3002 \u5355\u4f8b\u6a21\u5f0f\u53ea\u5305\u542b\u4e00\u4e2a\u5355\u4f8b\u89d2\u8272\uff1a\u5728\u5355\u4f8b\u7c7b\u7684\u5185\u90e8\u5b9e\u73b0\u53ea\u751f\u6210\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u540c\u65f6\u5b83\u63d0\u4f9b\u4e00\u4e2a\u9759\u6001\u7684\u5de5\u5382\u65b9\u6cd5\uff0c\u8ba9\u5ba2\u6237\u53ef\u4ee5\u4f7f\u7528\u5b83\u7684\u552f\u4e00\u5b9e\u4f8b\uff1b\u4e3a\u4e86\u9632\u6b62\u5728\u5916\u90e8\u5bf9\u5176\u5b9e\u4f8b\u5316\uff0c\u5c06\u5176\u6784\u9020\u51fd\u6570\u8bbe\u8ba1\u4e3a\u79c1\u6709\u3002 \u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\uff0c\u5982\u679c\u4e0d\u9700\u8981\u61d2\u52a0\u8f7d\u7684\u6548\u679c\uff0c\u5219\u63a8\u8350\u4f7f\u7528\u679a\u4e3e\u548c\u997f\u6c49\u5f0f\u7684\u65b9\u5f0f\uff1b\u5982\u679c\u9700\u8981\u61d2\u52a0\u8f7d\u7684\u6548\u679c\uff0c\u5219\u63a8\u8350\u4f7f\u7528\u9759\u6001\u5185\u90e8\u7c7b\u6765\u5b9e\u73b0\u66f4\u597d\u3002 \u5355\u4f8b\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u63d0\u4f9b\u4e86\u5bf9\u552f\u4e00\u5b9e\u4f8b\u7684\u53d7\u63a7\u8bbf\u95ee\u5e76\u53ef\u4ee5\u8282\u7ea6\u7cfb\u7edf\u8d44\u6e90\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u56e0\u4e3a\u7f3a\u5c11\u62bd\u8c61\u5c42\u800c\u96be\u4ee5\u6269\u5c55\uff0c\u4e14\u5355\u4f8b\u7c7b\u804c\u8d23\u8fc7\u91cd\u3002 \u5355\u4f8b\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u7cfb\u7edf\u53ea\u9700\u8981\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff1b\u5ba2\u6237\u8c03\u7528\u7c7b\u7684\u5355\u4e2a\u5b9e\u4f8b\u53ea\u5141\u8bb8\u4f7f\u7528\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u70b9\u3002","title":"\u5355\u4f8b\u6a21\u5f0f\uff08Singleton Pattern\uff09\u2014 \u8bbe\u8ba1\u539f\u5219\u4e0e\u6a21\u5f0f\u7cfb\u5217"},{"location":"Design-Patterns/2-SingletonPattern/#_1","text":"\u5bf9\u4e8e\u7cfb\u7edf\u4e2d\u7684\u67d0\u4e9b\u7c7b\u6765\u8bf4\uff0c\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5f88\u91cd\u8981\uff0c\u4f8b\u5982\uff0c\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u5b58\u5728\u591a\u4e2a\u6253\u5370\u4efb\u52a1\uff0c\u4f46\u662f\u53ea\u80fd\u6709\u4e00\u4e2a\u6b63\u5728\u5de5\u4f5c\u7684\u4efb\u52a1\uff1b\u4e00\u4e2a\u7cfb\u7edf\u53ea\u80fd\u6709\u4e00\u4e2a\u7a97\u53e3\u7ba1\u7406\u5668\u6216\u6587\u4ef6\u7cfb\u7edf\uff1b\u4e00\u4e2a\u7cfb\u7edf\u53ea\u80fd\u6709\u4e00\u4e2a\u8ba1\u65f6\u5de5\u5177\u6216 ID\uff08\u5e8f\u53f7\uff09\u751f\u6210\u5668\u3002 \u5982\u4f55\u4fdd\u8bc1\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5e76\u4e14\u8fd9\u4e2a\u5b9e\u4f8b\u6613\u4e8e\u88ab\u8bbf\u95ee\u5462\uff1f\u5b9a\u4e49\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u53ef\u4ee5\u786e\u4fdd\u5bf9\u8c61\u968f\u65f6\u90fd\u53ef\u4ee5\u88ab\u8bbf\u95ee\uff0c\u4f46\u4e0d\u80fd\u9632\u6b62\u6211\u4eec\u5b9e\u4f8b\u5316\u591a\u4e2a\u5bf9\u8c61\u3002 \u4e00\u4e2a\u66f4\u597d\u7684\u89e3\u51b3\u529e\u6cd5\u662f\u8ba9\u7c7b\u81ea\u8eab\u8d1f\u8d23\u4fdd\u5b58\u5b83\u7684\u552f\u4e00\u5b9e\u4f8b\u3002\u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u4fdd\u8bc1\u6ca1\u6709\u5176\u4ed6\u5b9e\u4f8b\u88ab\u521b\u5efa\uff0c\u5e76\u4e14\u5b83\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u8bbf\u95ee\u8be5\u5b9e\u4f8b\u7684\u65b9\u6cd5\u3002\u8fd9\u5c31\u662f\u5355\u4f8b\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002","title":"\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/2-SingletonPattern/#_2","text":"\u5355\u4f8b\u6a21\u5f0f( Singleton Pattern ) \uff1a\u5355\u4f8b\u6a21\u5f0f\u786e\u4fdd\u67d0\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u800c\u4e14\u81ea\u884c\u5b9e\u4f8b\u5316\u5e76\u5411\u6574\u4e2a\u7cfb\u7edf\u63d0\u4f9b\u8fd9\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u7c7b\u79f0\u4e3a\u5355\u4f8b\u7c7b\uff0c\u5b83\u63d0\u4f9b\u5168\u5c40\u8bbf\u95ee\u7684\u65b9\u6cd5\u3002\u5355\u4f8b\u6a21\u5f0f\u662f\u4e00\u79cd \u5bf9\u8c61\u521b\u5efa\u578b\u6a21\u5f0f \u3002\u5355\u4f8b\u6a21\u5f0f\u53c8\u540d\u5355\u4ef6\u6a21\u5f0f\u6216\u5355\u6001\u6a21\u5f0f\u3002 \u5355\u4f8b\u6a21\u5f0f\u7684\u8981\u70b9\u6709\u4e09\u4e2a\uff1a \u4e00\u662f\u67d0\u4e2a\u7c7b\u53ea\u80fd\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff1b \u4e8c\u662f\u5b83\u5fc5\u987b\u81ea\u884c\u521b\u5efa\u8fd9\u4e2a\u5b9e\u4f8b\uff1b \u4e09\u662f\u5b83\u5fc5\u987b\u81ea\u884c\u5411\u6574\u4e2a\u7cfb\u7edf\u63d0\u4f9b\u8fd9\u4e2a\u5b9e\u4f8b\u3002","title":"\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/2-SingletonPattern/#_3","text":"","title":"\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/2-SingletonPattern/#_4","text":"Singleton : \u5355\u4f8b","title":"\u53c2\u4e0e\u89d2\u8272"},{"location":"Design-Patterns/2-SingletonPattern/#uml","text":"","title":"UML \u7c7b\u56fe"},{"location":"Design-Patterns/2-SingletonPattern/#_5","text":"","title":"\u65f6\u5e8f\u56fe"},{"location":"Design-Patterns/2-SingletonPattern/#_6","text":"","title":"\u4ee3\u7801\u5b9e\u73b0\u65b9\u5f0f"},{"location":"Design-Patterns/2-SingletonPattern/#1","text":"/** * \u997f\u6c49\u5f0f\u5355\u4f8b\u6a21\u5f0f. */ public class Singleton { /** \u5168\u5c40\u552f\u4e00\u5b9e\u4f8b. */ private static final Singleton singleton = new Singleton (); private Singleton () {} public static Singleton getSingleton () { return singleton ; } } \u6ce8 \uff1a\u8fd9\u79cd\u65b9\u5f0f\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u7684\u540c\u6b65\u95ee\u9898\uff0c\u4f46\u4e0d\u662f\u61d2\u52a0\u8f7d\u3002\u5982\u679c\u4e0d\u9700\u8981\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\uff0c\u63a8\u8350\u4f7f\u7528\u3002","title":"1. \u997f\u6c49\u5f0f\uff08\u63a8\u8350\u4f7f\u7528\uff09"},{"location":"Design-Patterns/2-SingletonPattern/#2","text":"/** * \u975e\u7ebf\u7a0b\u5b89\u5168\u7684\u61d2\u6c49\u5f0f. */ public class Singleton { private static Singleton singleton ; private Singleton () {} /** * \u901a\u8fc7\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\u83b7\u53d6\u5b9e\u4f8b\uff0c\u4f46\u662f\u975e\u7ebf\u7a0b\u5b89\u5168. * @return Singleton\u5b9e\u4f8b */ public static Singleton getSingleton () { if ( singleton == null ) { singleton = new Singleton (); } return singleton ; } } \u6ce8 \uff1a\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\uff0c\u4f46\u975e\u7ebf\u7a0b\u5b89\u5168\u3002\u4e0d\u63a8\u8350\u4f7f\u7528\u3002","title":"2. \u975e\u7ebf\u7a0b\u5b89\u5168\u61d2\u6c49\u5f0f\uff08\u4e0d\u63a8\u8350\u4f7f\u7528\uff09"},{"location":"Design-Patterns/2-SingletonPattern/#3","text":"/** * \u4f4e\u6548\u7684\u7ebf\u7a0b\u5b89\u5168\u7684\u61d2\u6c49\u5f0f. */ public class Singleton { private static Singleton singleton ; private Singleton () {} /** * \u901a\u8fc7 synchronized \u5173\u952e\u5b57\u6765\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff0c\u4e5f\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\u6765\u83b7\u53d6\u5b9e\u4f8b. * @return Singleton\u5b9e\u4f8b */ public static synchronized Singleton getSingleton () { if ( singleton == null ) { singleton = new Singleton (); } return singleton ; } } \u6ce8 \uff1a\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\uff0c\u4e5f\u7ebf\u7a0b\u5b89\u5168\uff0c\u4f46\u662f\u6548\u7387\u5f88\u4f4e\u3002\u56e0\u4e3a 99%\u7684\u60c5\u51b5\u4e0b\u662f\u4e0d\u9700\u8981\u53bb\u540c\u6b65\u7684\u3002\u4e0d\u63a8\u8350\u4f7f\u7528\u3002","title":"3. \u4f4e\u6548\u7684\u7ebf\u7a0b\u5b89\u5168\u61d2\u6c49\u5f0f\uff08\u4e0d\u63a8\u8350\u4f7f\u7528\uff09"},{"location":"Design-Patterns/2-SingletonPattern/#4","text":"/** * \u53cc\u91cd\u6821\u9a8c\u9501\u7ebf\u7a0b\u5b89\u5168\u61d2\u6c49\u5f0f. */ public class Singleton { private static Singleton singleton ; private Singleton () {} /** * \u901a\u8fc7'\u53cc\u91cd\u6821\u9a8c\u9501'\u6765\u66f4\u9ad8\u6548\u7684\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\uff0c\u4e5f\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\u6765\u83b7\u53d6\u5b9e\u4f8b. * @return Singleton\u5b9e\u4f8b */ public static Singleton getSingleton () { if ( singleton == null ) { synchronized ( Singleton . class ) { if ( singleton == null ) { singleton = new Singleton (); } } } return singleton ; } } \u6ce8 \uff1a\u662f\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\uff0c\u4e5f\u7ebf\u7a0b\u5b89\u5168\uff0c\u6548\u7387\u4e5f\u4e0d\u9519\u3002\u4f46\u53d7\u9650\u4e8e Jdk5 \u4ee5\u524d\u7684 Java \u5185\u5b58\u6a21\u578b\uff0c\u4ecd\u7136\u4f1a\u6709 bug\uff0cJava5 \u53ca\u4e4b\u540e\u624d\u80fd\u6b63\u5e38\u8fbe\u5230\u5355\u4f8b\u6548\u679c\u3002","title":"4. \u53cc\u91cd\u6821\u9a8c\u9501\u7ebf\u7a0b\u5b89\u5168\u61d2\u6c49\u5f0f\uff08\u4e0d\u63a8\u8350\u4f7f\u7528\uff09"},{"location":"Design-Patterns/2-SingletonPattern/#5","text":"/** * \u679a\u4e3e\u65b9\u5f0f\u7684\u5355\u4f8b. */ public enum Singleton { INSTANCE ; } \u6ce8 \uff1a\u5728 \u300aEffective Java\u300b \u4e00\u4e66\u4e2d\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528\u679a\u4e3e\u6765\u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\uff0c\u8be5\u65b9\u5f0f\u7b80\u5355\u53ef\u81ea\u7531\u5e8f\u5217\u5316\uff1b\u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff08\u5373\u4f7f\u4f7f\u7528\u53cd\u5c04\u673a\u5236\u4e5f\u65e0\u6cd5\u591a\u6b21\u5b9e\u4f8b\u5316\u4e00\u4e2a\u679a\u4e3e\u91cf\uff09\uff1b\u7ebf\u7a0b\u5b89\u5168\u3002\u552f\u4e00\u7684\u7f3a\u70b9\u662f\u975e\u61d2\u52a0\u8f7d\u65b9\u5f0f\u3002","title":"5. \u679a\u4e3e\u5f0f\uff08\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528\uff09"},{"location":"Design-Patterns/2-SingletonPattern/#6","text":"/** * \u901a\u8fc7\u4f7f\u7528\u9759\u6001\u5185\u90e8\u7c7b\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u61d2\u52a0\u8f7d\u4e14\u7ebf\u7a0b\u5b89\u5168\u7684\u521b\u5efa\u5355\u4f8b. */ public class Singleton { private Singleton () {} /** * \u9759\u6001\u5185\u90e8\u7c7b. */ private static final class SingletonHolder { private SingletonHolder () {} private static Singleton4 instance = new Singleton (); } /** * \u901a\u8fc7\u61d2\u52a0\u8f7d\u7684\u65b9\u5f0f\u83b7\u53d6Singleton\u552f\u4e00\u5b9e\u4f8b\u7684\u65b9\u6cd5. * @return Singleton\u5b9e\u4f8b */ public static Singleton getInstance () { return SingletonHolder . instance ; } } \u6ce8 \uff1a\u8fd9\u79cd\u65b9\u5f0f\u5229\u7528\u4e86 ClassLoader \u7684\u673a\u5236\u4fdd\u8bc1\u521d\u59cb\u5316 instance \u65f6\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u5176\u53ea\u6709\u663e\u793a\u901a\u8fc7\u8c03\u7528 getInstance \u65b9\u6cd5\u65f6\uff0c\u624d\u4f1a\u663e\u793a\u88c5\u8f7d SingletonHolder \u7c7b\uff0c\u4ece\u800c\u5b9e\u4f8b\u5316 instance \u3002","title":"6. \u9759\u6001\u5185\u90e8\u7c7b\uff08\u63a8\u8350\u4f7f\u7528\uff09"},{"location":"Design-Patterns/2-SingletonPattern/#_7","text":"\u5355\u4f8b\u6a21\u5f0f\u7684\u76ee\u7684\u662f\u4fdd\u8bc1\u4e00\u4e2a\u7c7b\u4ec5\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u8bbf\u95ee\u5b83\u7684\u5168\u5c40\u8bbf\u95ee\u70b9\u3002\u5355\u4f8b\u6a21\u5f0f\u5305\u542b\u7684\u89d2\u8272\u53ea\u6709\u4e00\u4e2a\uff0c\u5c31\u662f\u5355\u4f8b\u7c7b\u2014\u2014 Singleton \u3002","title":"\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/2-SingletonPattern/#_8","text":"\u63d0\u4f9b\u4e86\u5bf9\u552f\u4e00\u5b9e\u4f8b\u7684\u53d7\u63a7\u8bbf\u95ee\u3002\u56e0\u4e3a\u5355\u4f8b\u7c7b\u5c01\u88c5\u4e86\u5b83\u7684\u552f\u4e00\u5b9e\u4f8b\uff0c\u6240\u4ee5\u5b83\u53ef\u4ee5\u4e25\u683c\u63a7\u5236\u5ba2\u6237\u600e\u6837\u4ee5\u53ca\u4f55\u65f6\u8bbf\u95ee\u5b83\uff0c\u5e76\u4e3a\u8bbe\u8ba1\u53ca\u5f00\u53d1\u56e2\u961f\u63d0\u4f9b\u4e86\u5171\u4eab\u7684\u6982\u5ff5\u3002 \u7531\u4e8e\u5728\u7cfb\u7edf\u5185\u5b58\u4e2d\u53ea\u5b58\u5728\u4e00\u4e2a\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u8282\u7ea6\u7cfb\u7edf\u8d44\u6e90\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u9700\u8981\u9891\u7e41\u521b\u5efa\u548c\u9500\u6bc1\u7684\u5bf9\u8c61\uff0c\u5355\u4f8b\u6a21\u5f0f\u65e0\u7591\u53ef\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u7684\u6027\u80fd\u3002 \u5141\u8bb8\u53ef\u53d8\u6570\u76ee\u7684\u5b9e\u4f8b\u3002\u6211\u4eec\u53ef\u4ee5\u57fa\u4e8e\u5355\u4f8b\u6a21\u5f0f\u8fdb\u884c\u6269\u5c55\uff0c\u4f7f\u7528\u4e0e\u5355\u4f8b\u63a7\u5236\u76f8\u4f3c\u7684\u65b9\u6cd5\u6765\u83b7\u5f97\u6307\u5b9a\u4e2a\u6570\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002","title":"\u4f18\u70b9"},{"location":"Design-Patterns/2-SingletonPattern/#_9","text":"\u7531\u4e8e\u5355\u4f8b\u6a21\u5f0f\u4e2d\u6ca1\u6709\u62bd\u8c61\u5c42\uff0c\u56e0\u6b64\u5355\u4f8b\u7c7b\u7684\u6269\u5c55\u6709\u5f88\u5927\u7684\u56f0\u96be\u3002 \u5355\u4f8b\u7c7b\u7684\u804c\u8d23\u8fc7\u91cd\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u8fdd\u80cc\u4e86\u201c\u5355\u4e00\u804c\u8d23\u539f\u5219\u201d\u3002\u56e0\u4e3a\u5355\u4f8b\u7c7b\u65e2\u5145\u5f53\u4e86\u5de5\u5382\u89d2\u8272\uff0c\u63d0\u4f9b\u4e86\u5de5\u5382\u65b9\u6cd5\uff0c\u540c\u65f6\u53c8\u5145\u5f53\u4e86\u4ea7\u54c1\u89d2\u8272\uff0c\u5305\u542b\u4e00\u4e9b\u4e1a\u52a1\u65b9\u6cd5\uff0c\u5c06\u4ea7\u54c1\u7684\u521b\u5efa\u548c\u4ea7\u54c1\u7684\u672c\u8eab\u7684\u529f\u80fd\u878d\u5408\u5230\u4e00\u8d77\u3002 \u6ee5\u7528\u5355\u4f8b\u5c06\u5e26\u6765\u4e00\u4e9b\u8d1f\u9762\u95ee\u9898\uff0c\u5982\u4e3a\u4e86\u8282\u7701\u8d44\u6e90\u5c06\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5bf9\u8c61\u8bbe\u8ba1\u4e3a\u5355\u4f8b\u7c7b\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5171\u4eab\u8fde\u63a5\u6c60\u5bf9\u8c61\u7684\u7a0b\u5e8f\u8fc7\u591a\u800c\u51fa\u73b0\u8fde\u63a5\u6c60\u6ea2\u51fa\uff1b\u73b0\u5728\u5f88\u591a\u9762\u5411\u5bf9\u8c61\u8bed\u8a00(\u5982 Java \u3001 C# )\u7684\u8fd0\u884c\u73af\u5883\u90fd\u63d0\u4f9b\u4e86\u81ea\u52a8\u5783\u573e\u56de\u6536\u7684\u6280\u672f\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u957f\u65f6\u95f4\u4e0d\u88ab\u5229\u7528\uff0c\u7cfb\u7edf\u4f1a\u8ba4\u4e3a\u5b83\u662f\u5783\u573e\uff0c\u4f1a\u81ea\u52a8\u9500\u6bc1\u5e76\u56de\u6536\u8d44\u6e90\uff0c\u4e0b\u6b21\u5229\u7528\u65f6\u53c8\u5c06\u91cd\u65b0\u5b9e\u4f8b\u5316\uff0c\u8fd9\u5c06\u5bfc\u81f4\u5bf9\u8c61\u72b6\u6001\u7684\u4e22\u5931\u3002","title":"\u7f3a\u70b9"},{"location":"Design-Patterns/2-SingletonPattern/#_10","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\uff1a \u7cfb\u7edf\u53ea\u9700\u8981\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u5982\u7cfb\u7edf\u8981\u6c42\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u7684\u5e8f\u5217\u53f7\u751f\u6210\u5668\uff0c\u6216\u8005\u9700\u8981\u8003\u8651\u8d44\u6e90\u6d88\u8017\u592a\u5927\u800c\u53ea\u5141\u8bb8\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u3002 \u5ba2\u6237\u8c03\u7528\u7c7b\u7684\u5355\u4e2a\u5b9e\u4f8b\u53ea\u5141\u8bb8\u4f7f\u7528\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u70b9\uff0c\u9664\u4e86\u8be5\u516c\u5171\u8bbf\u95ee\u70b9\uff0c\u4e0d\u80fd\u901a\u8fc7\u5176\u4ed6\u9014\u5f84\u8bbf\u95ee\u8be5\u5b9e\u4f8b\u3002 \u5728\u4e00\u4e2a\u7cfb\u7edf\u4e2d\u8981\u6c42\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u65f6\u624d\u5e94\u5f53\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\u3002\u53cd\u8fc7\u6765\uff0c\u5982\u679c\u4e00\u4e2a\u7c7b\u53ef\u4ee5\u6709\u51e0\u4e2a\u5b9e\u4f8b\u5171\u5b58\uff0c\u5c31\u9700\u8981\u5bf9\u5355\u4f8b\u6a21\u5f0f\u8fdb\u884c\u6539\u8fdb\uff0c\u4f7f\u4e4b\u6210\u4e3a\u591a\u4f8b\u6a21\u5f0f\u3002","title":"\u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/2-SingletonPattern/#_11","text":"\u5355\u4f8b\u6a21\u5f0f\u786e\u4fdd\u67d0\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u800c\u4e14\u81ea\u884c\u5b9e\u4f8b\u5316\u5e76\u5411\u6574\u4e2a\u7cfb\u7edf\u63d0\u4f9b\u8fd9\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u7c7b\u79f0\u4e3a\u5355\u4f8b\u7c7b\uff0c\u5b83\u63d0\u4f9b\u5168\u5c40\u8bbf\u95ee\u7684\u65b9\u6cd5\u3002\u5355\u4f8b\u6a21\u5f0f\u7684\u8981\u70b9\u6709\u4e09\u4e2a\uff1a\u4e00\u662f\u67d0\u4e2a\u7c7b\u53ea\u80fd\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff1b\u4e8c\u662f\u5b83\u5fc5\u987b\u81ea\u884c\u521b\u5efa\u8fd9\u4e2a\u5b9e\u4f8b\uff1b\u4e09\u662f\u5b83\u5fc5\u987b\u81ea\u884c\u5411\u6574\u4e2a\u7cfb\u7edf\u63d0\u4f9b\u8fd9\u4e2a\u5b9e\u4f8b\u3002\u5355\u4f8b\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u521b\u5efa\u578b\u6a21\u5f0f\u3002 \u5355\u4f8b\u6a21\u5f0f\u53ea\u5305\u542b\u4e00\u4e2a\u5355\u4f8b\u89d2\u8272\uff1a\u5728\u5355\u4f8b\u7c7b\u7684\u5185\u90e8\u5b9e\u73b0\u53ea\u751f\u6210\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u540c\u65f6\u5b83\u63d0\u4f9b\u4e00\u4e2a\u9759\u6001\u7684\u5de5\u5382\u65b9\u6cd5\uff0c\u8ba9\u5ba2\u6237\u53ef\u4ee5\u4f7f\u7528\u5b83\u7684\u552f\u4e00\u5b9e\u4f8b\uff1b\u4e3a\u4e86\u9632\u6b62\u5728\u5916\u90e8\u5bf9\u5176\u5b9e\u4f8b\u5316\uff0c\u5c06\u5176\u6784\u9020\u51fd\u6570\u8bbe\u8ba1\u4e3a\u79c1\u6709\u3002 \u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\uff0c\u5982\u679c\u4e0d\u9700\u8981\u61d2\u52a0\u8f7d\u7684\u6548\u679c\uff0c\u5219\u63a8\u8350\u4f7f\u7528\u679a\u4e3e\u548c\u997f\u6c49\u5f0f\u7684\u65b9\u5f0f\uff1b\u5982\u679c\u9700\u8981\u61d2\u52a0\u8f7d\u7684\u6548\u679c\uff0c\u5219\u63a8\u8350\u4f7f\u7528\u9759\u6001\u5185\u90e8\u7c7b\u6765\u5b9e\u73b0\u66f4\u597d\u3002 \u5355\u4f8b\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u63d0\u4f9b\u4e86\u5bf9\u552f\u4e00\u5b9e\u4f8b\u7684\u53d7\u63a7\u8bbf\u95ee\u5e76\u53ef\u4ee5\u8282\u7ea6\u7cfb\u7edf\u8d44\u6e90\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u56e0\u4e3a\u7f3a\u5c11\u62bd\u8c61\u5c42\u800c\u96be\u4ee5\u6269\u5c55\uff0c\u4e14\u5355\u4f8b\u7c7b\u804c\u8d23\u8fc7\u91cd\u3002 \u5355\u4f8b\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u7cfb\u7edf\u53ea\u9700\u8981\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff1b\u5ba2\u6237\u8c03\u7528\u7c7b\u7684\u5355\u4e2a\u5b9e\u4f8b\u53ea\u5141\u8bb8\u4f7f\u7528\u4e00\u4e2a\u516c\u5171\u8bbf\u95ee\u70b9\u3002","title":"\u603b\u7ed3"},{"location":"Design-Patterns/3-FactoryPattern/","text":"\u4e00\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f( Factory Method Pattern )\u53c8\u79f0\u4e3a\u5de5\u5382\u6a21\u5f0f\uff0c\u4e5f\u53eb\u865a\u62df\u6784\u9020\u5668(Virtual Constructor)\u6a21\u5f0f\u6216\u8005\u591a\u6001\u5de5\u5382(Polymorphic Factory)\u6a21\u5f0f\uff0c\u5b83\u5c5e\u4e8e\u7c7b\u521b\u5efa\u578b\u6a21\u5f0f\u3002\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5de5\u5382\u7236\u7c7b\u8d1f\u8d23\u5b9a\u4e49\u521b\u5efa\u4ea7\u54c1\u5bf9\u8c61\u7684\u516c\u5171\u63a5\u53e3\uff0c\u800c\u5de5\u5382\u5b50\u7c7b\u5219\u8d1f\u8d23\u751f\u6210\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u5c06\u4ea7\u54c1\u7c7b\u7684\u5b9e\u4f8b\u5316\u64cd\u4f5c\u5ef6\u8fdf\u5230\u5de5\u5382\u5b50\u7c7b\u4e2d\u5b8c\u6210\uff0c\u5373\u901a\u8fc7\u5de5\u5382\u5b50\u7c7b\u6765\u786e\u5b9a\u7a76\u7adf\u5e94\u8be5\u5b9e\u4f8b\u5316\u54ea\u4e00\u4e2a\u5177\u4f53\u4ea7\u54c1\u7c7b\u3002 \u4e8c\u3001\u6a21\u5f0f\u7ed3\u6784 \u00b6 1. \u89d2\u8272\u7ec4\u6210 \u00b6 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Product \uff1a\u62bd\u8c61\u4ea7\u54c1 ConcreteProduct \uff1a\u5177\u4f53\u4ea7\u54c1 Factory \uff1a\u62bd\u8c61\u5de5\u5382 ConcreteFactory \uff1a\u5177\u4f53\u5de5\u5382 2. \u7ed3\u6784\u56fe \u00b6 3. \u65f6\u5e8f\u56fe \u00b6 \u4e09\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684\u4ea7\u54c1\u7c7b\u548c\u5177\u4f53\u7684\u4ea7\u54c1\u7c7b\uff1a /** * \u62bd\u8c61\u4ea7\u54c1\u7c7b * */ public abstract class Product { /** * \u4ea7\u54c1\u7c7b\u7684\u516c\u5171\u65b9\u6cd5 */ public void method1 () { System . out . println ( \"\u8fd9\u662f\u4ea7\u54c1\u7c7b\u7684\u516c\u5171\u65b9\u6cd5\" ); } /** * \u62bd\u8c61\u65b9\u6cd5 */ public abstract void method2 (); } /** * \u5177\u4f53\u4ea7\u54c1\u7c7b1 * */ public class ConcreteProduct1 extends Product { @Override public void method2 () { System . out . println ( \"ConcreteProduct1\u7684method2\u65b9\u6cd5\" ); } } /** * \u5177\u4f53\u4ea7\u54c1\u7c7b2 * */ public class ConcreteProduct2 extends Product { @Override public void method2 () { System . out . println ( \"ConcreteProduct2\u7684method2\u65b9\u6cd5\" ); } } \u7136\u540e\uff0c\u662f\u62bd\u8c61\u7684\u5de5\u5382\u7c7b\u548c\u5177\u4f53\u7684\u5de5\u5382\u7c7b\uff1a /** * \u62bd\u8c61\u7684\u5de5\u5382\u7c7b * */ public abstract class Factory { /** * \u8fd0\u7528\u4e86Java\u4e2d\u7684\u6cdb\u578b\u548c\u53cd\u5c04\u6280\u672f,\u751f\u6210\u67d0\u79cd\u5177\u4f53\u7684\u4ea7\u54c1 * \u5176\u8f93\u5165\u7c7b\u578b\u53ef\u4ee5\u81ea\u884c\u8bbe\u7f6e * @param c * @param <T> * @return */ public abstract < T extends Product > T createProduct ( Class < T > c ); } /** * \u5177\u4f53\u751f\u4ea7\u4ea7\u54c1\u7684\u5de5\u5382\u7c7b * */ public class ConcreteFactory extends Factory { /** * \u8fd0\u7528\u4e86Java\u4e2d\u7684\u6cdb\u578b\u548c\u53cd\u5c04\u6280\u672f,\u751f\u6210\u67d0\u79cd\u5177\u4f53\u7684\u4ea7\u54c1 * \u5176\u8f93\u5165\u7c7b\u578b\u53ef\u4ee5\u81ea\u884c\u8bbe\u7f6e * @param c * @param <T> * @return */ @Override public < T extends Product > T createProduct ( Class < T > c ) { Product product = null ; try { product = ( Product ) Class . forName ( c . getName ()). newInstance (); } catch ( Exception e ) { System . out . println ( \"\u751f\u4ea7\u4ea7\u54c1\u51fa\u9519\" ); e . printStackTrace (); } return ( T ) product ; } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class Client { public static void main ( String [] args ) { Factory factory = new ConcreteFactory (); Product product1 = factory . createProduct ( ConcreteProduct1 . class ); product1 . method1 (); product1 . method2 (); Product product2 = factory . createProduct ( ConcreteProduct2 . class ); product2 . method1 (); product2 . method2 (); } } \u56db\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u6838\u5fc3\u7684\u5de5\u5382\u7c7b\u4e0d\u518d\u8d1f\u8d23\u6240\u6709\u4ea7\u54c1\u7684\u521b\u5efa\uff0c\u800c\u662f\u5c06\u5177\u4f53\u521b\u5efa\u5de5\u4f5c\u4ea4\u7ed9\u5b50\u7c7b\u53bb\u505a\u3002\u8fd9\u4e2a\u6838\u5fc3\u7c7b\u4ec5\u4ec5\u8d1f\u8d23\u7ed9\u51fa\u5177\u4f53\u5de5\u5382\u5fc5\u987b\u5b9e\u73b0\u7684\u63a5\u53e3\uff0c\u800c\u4e0d\u8d1f\u8d23\u54ea\u4e00\u4e2a\u4ea7\u54c1\u7c7b\u88ab\u5b9e\u4f8b\u5316\u8fd9\u79cd\u7ec6\u8282\uff0c\u8fd9\u4f7f\u5f97\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u53ef\u4ee5\u5141\u8bb8\u7cfb\u7edf\u5728\u4e0d\u4fee\u6539\u5de5\u5382\u89d2\u8272\u7684\u60c5\u51b5\u4e0b\u5f15\u8fdb\u65b0\u4ea7\u54c1\u3002 1. \u4f18\u70b9 \u00b6 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5de5\u5382\u65b9\u6cd5\u7528\u6765\u521b\u5efa\u5ba2\u6237\u6240\u9700\u8981\u7684\u4ea7\u54c1\uff0c\u540c\u65f6\u8fd8\u5411\u5ba2\u6237\u9690\u85cf\u4e86\u54ea\u79cd\u5177\u4f53\u4ea7\u54c1\u7c7b\u5c06\u88ab\u5b9e\u4f8b\u5316\u8fd9\u4e00\u7ec6\u8282\uff0c\u7528\u6237\u53ea\u9700\u8981\u5173\u5fc3\u6240\u9700\u4ea7\u54c1\u5bf9\u5e94\u7684\u5de5\u5382\uff0c\u65e0\u987b\u5173\u5fc3\u521b\u5efa\u7ec6\u8282\uff0c\u751a\u81f3\u65e0\u987b\u77e5\u9053\u5177\u4f53\u4ea7\u54c1\u7c7b\u7684\u7c7b\u540d\u3002 \u57fa\u4e8e\u5de5\u5382\u89d2\u8272\u548c\u4ea7\u54c1\u89d2\u8272\u7684\u591a\u6001\u6027\u8bbe\u8ba1\u662f\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u5173\u952e\u3002\u5b83\u80fd\u591f\u4f7f\u5de5\u5382\u53ef\u4ee5\u81ea\u4e3b\u786e\u5b9a\u521b\u5efa\u4f55\u79cd\u4ea7\u54c1\u5bf9\u8c61\uff0c\u800c\u5982\u4f55\u521b\u5efa\u8fd9\u4e2a\u5bf9\u8c61\u7684\u7ec6\u8282\u5219\u5b8c\u5168\u5c01\u88c5\u5728\u5177\u4f53\u5de5\u5382\u5185\u90e8\u3002\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e4b\u6240\u4ee5\u53c8\u88ab\u79f0\u4e3a\u591a\u6001\u5de5\u5382\u6a21\u5f0f\uff0c\u662f\u56e0\u4e3a\u6240\u6709\u7684\u5177\u4f53\u5de5\u5382\u7c7b\u90fd\u5177\u6709\u540c\u4e00\u62bd\u8c61\u7236\u7c7b\u3002 \u4f7f\u7528\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u53e6\u4e00\u4e2a\u4f18\u70b9\u662f\u5728\u7cfb\u7edf\u4e2d\u52a0\u5165\u65b0\u4ea7\u54c1\u65f6\uff0c\u65e0\u987b\u4fee\u6539\u62bd\u8c61\u5de5\u5382\u548c\u62bd\u8c61\u4ea7\u54c1\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u65e0\u987b\u4fee\u6539\u5ba2\u6237\u7aef\uff0c\u4e5f\u65e0\u987b\u4fee\u6539\u5176\u4ed6\u7684\u5177\u4f53\u5de5\u5382\u548c\u5177\u4f53\u4ea7\u54c1\uff0c\u800c\u53ea\u8981\u6dfb\u52a0\u4e00\u4e2a\u5177\u4f53\u5de5\u5382\u548c\u5177\u4f53\u4ea7\u54c1\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u6837\uff0c\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\u4e5f\u5c31\u53d8\u5f97\u975e\u5e38\u597d\uff0c\u5b8c\u5168\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002 2. \u7f3a\u70b9 \u00b6 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5728\u6dfb\u52a0\u65b0\u4ea7\u54c1\u65f6\uff0c\u9700\u8981\u7f16\u5199\u65b0\u7684\u5177\u4f53\u4ea7\u54c1\u7c7b\uff0c\u800c\u4e14\u8fd8\u8981\u63d0\u4f9b\u4e0e\u4e4b\u5bf9\u5e94\u7684\u5177\u4f53\u5de5\u5382\u7c7b\uff0c\u7cfb\u7edf\u4e2d\u7c7b\u7684\u4e2a\u6570\u5c06\u6210\u5bf9\u589e\u52a0\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\uff0c\u6709\u66f4\u591a\u7684\u7c7b\u9700\u8981\u7f16\u8bd1\u548c\u8fd0\u884c\uff0c\u4f1a\u7ed9\u7cfb\u7edf\u5e26\u6765\u4e00\u4e9b\u989d\u5916\u7684\u5f00\u9500\u3002 \u7531\u4e8e\u8003\u8651\u5230\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\uff0c\u9700\u8981\u5f15\u5165\u62bd\u8c61\u5c42\uff0c\u5728\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u5747\u4f7f\u7528\u62bd\u8c61\u5c42\u8fdb\u884c\u5b9a\u4e49\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u62bd\u8c61\u6027\u548c\u7406\u89e3\u96be\u5ea6\uff0c\u4e14\u5728\u5b9e\u73b0\u65f6\u53ef\u80fd\u9700\u8981\u7528\u5230 DOM\u3001\u53cd\u5c04\u7b49\u6280\u672f\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u5b9e\u73b0\u96be\u5ea6\u3002 3. \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\uff1a \u4e00\u4e2a\u7c7b\u4e0d\u77e5\u9053\u5b83\u6240\u9700\u8981\u7684\u5bf9\u8c61\u7684\u7c7b\uff1a\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5ba2\u6237\u7aef\u4e0d\u9700\u8981\u77e5\u9053\u5177\u4f53\u4ea7\u54c1\u7c7b\u7684\u7c7b\u540d\uff0c\u53ea\u9700\u8981\u77e5\u9053\u6240\u5bf9\u5e94\u7684\u5de5\u5382\u5373\u53ef\uff0c\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61\u7531\u5177\u4f53\u5de5\u5382\u7c7b\u521b\u5efa\uff1b\u5ba2\u6237\u7aef\u9700\u8981\u77e5\u9053\u521b\u5efa\u5177\u4f53\u4ea7\u54c1\u7684\u5de5\u5382\u7c7b\u3002 \u4e00\u4e2a\u7c7b\u901a\u8fc7\u5176\u5b50\u7c7b\u6765\u6307\u5b9a\u521b\u5efa\u54ea\u4e2a\u5bf9\u8c61\uff1a\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5bf9\u4e8e\u62bd\u8c61\u5de5\u5382\u7c7b\u53ea\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u521b\u5efa\u4ea7\u54c1\u7684\u63a5\u53e3\uff0c\u800c\u7531\u5176\u5b50\u7c7b\u6765\u786e\u5b9a\u5177\u4f53\u8981\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u5229\u7528\u9762\u5411\u5bf9\u8c61\u7684\u591a\u6001\u6027\u548c\u91cc\u6c0f\u4ee3\u6362\u539f\u5219\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5b50\u7c7b\u5bf9\u8c61\u5c06\u8986\u76d6\u7236\u7c7b\u5bf9\u8c61\uff0c\u4ece\u800c\u4f7f\u5f97\u7cfb\u7edf\u66f4\u5bb9\u6613\u6269\u5c55\u3002 \u5c06\u521b\u5efa\u5bf9\u8c61\u7684\u4efb\u52a1\u59d4\u6258\u7ed9\u591a\u4e2a\u5de5\u5382\u5b50\u7c7b\u4e2d\u7684\u67d0\u4e00\u4e2a\uff0c\u5ba2\u6237\u7aef\u5728\u4f7f\u7528\u65f6\u53ef\u4ee5\u65e0\u987b\u5173\u5fc3\u662f\u54ea\u4e00\u4e2a\u5de5\u5382\u5b50\u7c7b\u521b\u5efa\u4ea7\u54c1\u5b50\u7c7b\uff0c\u9700\u8981\u65f6\u518d\u52a8\u6001\u6307\u5b9a\uff0c\u53ef\u5c06\u5177\u4f53\u5de5\u5382\u7c7b\u7684\u7c7b\u540d\u5b58\u50a8\u5728\u914d\u7f6e\u6587\u4ef6\u6216\u6570\u636e\u5e93\u4e2d\u3002 \u4e94\u3001\u6a21\u5f0f\u6269\u5c55 \u00b6 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u6709\u5f88\u591a\u6269\u5c55\uff0c\u800c\u4e14\u4e0e\u5176\u4ed6\u6a21\u5f0f\u7ed3\u5408\u4f7f\u7528\u5a01\u529b\u66f4\u5927\uff0c\u4e0b\u9762\u4ecb\u7ecd 4 \u79cd\u5e38\u7528\u6269\u5c55\u3002 1. \u7b80\u5355\u5de5\u5382\u6a21\u5f0f \u00b6 \u6211\u4eec\u8fd9\u6837\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff1a\u4e00\u4e2a\u6a21\u5757\u4ec5\u9700\u8981\u4e00\u4e2a\u5de5\u5382\u7c7b\uff0c\u6ca1\u6709\u5fc5\u8981\u628a\u5b83\u4ea7\u751f\u51fa\u6765\uff0c\u4f7f\u7528\u9759\u6001\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002\u56e0\u6b64\u53bb\u6389\u5de5\u5382\u7c7b\u4e2d\u7ee7\u627f\u7684\u62bd\u8c61\u7c7b\uff0c\u628a\u65b9\u6cd5\u6539\u6210\u9759\u6001\u5373\u53ef\u3002\u901a\u7528\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u4e2d\u7684\u5de5\u5382\u7c7b * */ public class SimpleFactory { /** * \u8fd0\u7528\u4e86Java\u4e2d\u7684\u6cdb\u578b\u548c\u53cd\u5c04\u6280\u672f,\u751f\u6210\u67d0\u79cd\u5177\u4f53\u7684\u4ea7\u54c1 * \u5176\u8f93\u5165\u7c7b\u578b\u53ef\u4ee5\u81ea\u884c\u8bbe\u7f6e * @param c * @param <T> * @return */ public static < T extends Product > T createProduct ( Class < T > c ) { Product product = null ; try { product = ( Product ) Class . forName ( c . getName ()). newInstance (); } catch ( Exception e ) { System . out . println ( \"\u751f\u4ea7\u4ea7\u54c1\u51fa\u9519\" ); e . printStackTrace (); } return ( T ) product ; } } /** * \u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class SimpleClient { public static void main ( String [] args ) { Product product1 = SimpleFactory . createProduct ( ConcreteProduct1 . class ); product1 . method1 (); product1 . method2 (); Product product2 = SimpleFactory . createProduct ( ConcreteProduct2 . class ); product2 . method1 (); product2 . method2 (); } } \u8fd0\u884c\u7ed3\u679c\u6ca1\u6709\u53d1\u751f\u53d8\u5316\uff0c\u4f46\u662f\u7c7b\u56fe\u7b80\u5355\u4e86\uff0c\u8c03\u7528\u8005\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u662f\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u5f31\u5316\uff0c\u4e5f\u53eb\u505a\u9759\u6001\u5de5\u5382\u6a21\u5f0f\u3002\u5176\u7f3a\u70b9\u662f\u5de5\u5382\u7c7b\u7684\u6269\u5c55\u6bd4\u8f83\u56f0\u96be\uff0c\u4e0d\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\uff0c\u4f46\u5b83\u4ecd\u7136\u662f\u4e00\u4e2a\u975e\u5e38\u5b9e\u7528\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002 2. \u591a\u5de5\u5382\u7c7b\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f \u00b6 \u5f53\u6211\u4eec\u5728\u4e00\u4e2a\u6bd4\u8f83\u590d\u6742\u7684\u9879\u76ee\u65f6\uff0c\u7ecf\u5e38\u4f1a\u9047\u5230\u521d\u59cb\u5316\u4e00\u4e2a\u5bf9\u8c61\u5f88\u8017\u8d39\u7cbe\u529b\u7684\u60c5\u51b5\uff0c\u6240\u6709\u7684\u4ea7\u54c1\u7c7b\u90fd\u653e\u5230\u4e00\u4e2a\u5de5\u5382\u65b9\u6cd5\u4e2d\u8fdb\u884c\u521d\u59cb\u5316\u4f1a\u4f7f\u4ee3\u7801\u7ed3\u6784\u4e0d\u6e05\u6670\u3002\u4e3a\u4e86\u8ba9\u7ed3\u6784\u6e05\u6670\uff0c\u6211\u4eec\u5c31\u4e3a\u6bcf\u7c7b\u4ea7\u54c1\u5b9a\u4e49\u4e00\u4e2a\u521b\u9020\u8005\uff0c\u7136\u540e\u7531\u8c03\u7528\u8005\u81ea\u5df1\u53bb\u9009\u62e9\u4e0e\u54ea\u4e2a\u5de5\u5382\u65b9\u6cd5\u5173\u8054\u3002\u591a\u5de5\u5382\u6a21\u5f0f\u7684\u901a\u7528\u4ee3\u7801\u5982\u4e0b\uff1a \u591a\u5de5\u5382\u6a21\u5f0f\u7684\u62bd\u8c61\u5de5\u5382\u7c7b\uff1a /** * \u751f\u6210\u591a\u4e2a\u4ea7\u54c1\u7684\u62bd\u8c61\u5de5\u5382\u7c7b * */ public abstract class MultiFactory { /** * \u751f\u6210\u67d0\u79cd\u4ea7\u54c1\u7684\u65b9\u6cd5 * @return */ public abstract Product createProduct (); } \u7b2c\u4e00\u79cd\u4ea7\u54c1\u7684\u521b\u5efa\u5de5\u5382\u5b9e\u73b0\uff1a /** * \u751f\u6210\u4ea7\u54c11\u7684\u5177\u4f53\u5de5\u5382\u7c7b1 * */ public class ConcreteFactory1 extends MultiFactory { /** * \u751f\u6210\u4ea7\u54c11\u7684\u65b9\u6cd5 * @return */ @Override public Product createProduct () { return new ConcreteProduct1 (); } } \u7b2c\u4e8c\u79cd\u4ea7\u54c1\u7684\u521b\u5efa\u5de5\u5382\u5b9e\u73b0\uff1a /** * \u751f\u6210\u4ea7\u54c12\u7684\u5177\u4f53\u5de5\u5382\u7c7b2 * */ public class ConcreteFactory2 extends MultiFactory { /** * \u751f\u6210\u4ea7\u54c12\u7684\u65b9\u6cd5 * @return */ @Override public Product createProduct () { return new ConcreteProduct2 (); } } \u591a\u5de5\u5382\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b /** * \u591a\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class MultiClient { public static void main ( String [] args ) { Product concreteProduct1 = ( new ConcreteFactory1 ()). createProduct (); concreteProduct1 . method1 (); concreteProduct1 . method2 (); Product concreteProduct2 = ( new ConcreteFactory2 ()). createProduct (); concreteProduct1 . method1 (); concreteProduct1 . method2 (); } } 3. \u5de5\u5382\u65b9\u6cd5\u7684\u5355\u4f8b\u6a21\u5f0f \u00b6 \u5355\u4f8b\u6a21\u5f0f\u7684\u6838\u5fc3\u8981\u6c42\u5c31\u662f\u5728\u5185\u5b58\u4e2d\u53ea\u6709\u4e00\u4e2a\u5bf9\u8c61\uff0c\u901a\u8fc7\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e5f\u53ef\u4ee5\u53ea\u5728\u5185\u5b58\u4e2d\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u800c\u5b9e\u73b0\u5355\u4f8b\u7684\u529f\u80fd\u3002 \u4e0b\u9762\u662f\u5355\u4f8b\u7c7b\uff0c\u5176\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a private \u7684\u65e0\u53c2\u6784\u9020\u51fd\u6570\uff0c\u76ee\u7684\u662f\u4e0d\u5141\u8bb8\u901a\u8fc7 new \u7684\u65b9\u5f0f\u521b\u5efa\u5bf9\u8c61\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\u7684\u5355\u4f8b\u7c7b * */ public class Singleton { /** * \u79c1\u6709\u5316\u6784\u9020\u65b9\u6cd5\uff0c\u4e0d\u5141\u8bb8new\u4ea7\u751f\u4e00\u4e2a\u5bf9\u8c61 */ private Singleton () {} /** * \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\u7684\u5355\u4f8b\u6a21\u5f0f\u4e1a\u52a1\u65b9\u6cd5 */ public void doSomething () { System . out . println ( \"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\u7684\u5355\u4f8b\u6a21\u5f0f\u65b9\u6cd5\u3002\u3002\u3002\" ); } } \u4ee5\u4e0a\u5355\u4f8b\u7c7b\u4e2d\u4e0d\u80fd\u901a\u8fc7\u6b63\u5e38\u7684\u6e20\u9053\u5efa\u7acb\u4e00\u4e2a\u5bf9\u8c61\uff0c\u90a3\u5355\u4f8b\u7684\u5de5\u5382\u7c7b\u4e2d\u5982\u4f55\u5efa\u7acb\u4e00\u4e2a\u5355\u4f8b\u5bf9\u8c61\u5462\uff1f\u7b54\u6848\u662f\u901a\u8fc7\u53cd\u5c04\u65b9\u5f0f\u521b\u5efa\uff0c\u5355\u4f8b\u5de5\u5382\u7c7b\u7684\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u751f\u6210\u5355\u4f8b\u7684\u5de5\u5382\u7c7b * */ public class SingletonFactory { private static Singleton singleton ; static { try { Class c = Class . forName ( Singleton . class . getName ()); // \u83b7\u5f97\u65e0\u53c2\u6784\u9020 Constructor constructor = c . getDeclaredConstructor (); // \u8bbe\u7f6e\u65e0\u53c2\u6784\u9020\u662f\u53ef\u8bbf\u95ee\u7684 constructor . setAccessible ( true ); // \u4ea7\u751f\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61 singleton = ( Singleton ) constructor . newInstance (); } catch ( Exception e ) { e . printStackTrace (); System . out . println ( \"\u751f\u6210\u5355\u4f8b\u7684\u5de5\u5382\u7c7b\u65b9\u6cd5\u4e2d\u751f\u6210\u5355\u4f8b\u51fa\u9519\" ); zuihou } } public static Singleton getSingleton () { return singleton ; } } \u6700\u540e\u662f\u5de5\u5382\u65b9\u6cd5\u5355\u4f8b\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u5de5\u5382\u65b9\u6cd5\u5355\u4f8b\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class SingleClient { public static void main ( String [] args ) { Singleton singleton = SingletonFactory . getSingleton (); singleton . doSomething (); } } 4. \u5de5\u5382\u65b9\u6cd5\u7684\u5ef6\u8fdf\u521d\u59cb\u5316 \u00b6 \u4f55\u4e3a\u5ef6\u8fdf\u521d\u59cb\u5316\uff1f\u4e00\u4e2a\u5bf9\u8c61\u88ab\u6d88\u8d39\u5b8c\u6bd5\u540e\uff0c\u5e76\u4e0d\u7acb\u5373\u91ca\u653e\uff0c\u5de5\u5382\u7c7b\u4fdd\u6301\u5176\u521d\u59cb\u72b6\u6001\uff0c\u7b49\u5f85\u518d\u6b21\u4f7f\u7528\u3002\u5ef6\u8fdf\u521d\u59cb\u5316\u662f\u5de5\u5382\u6a21\u5f0f\u7684\u4e00\u4e2a\u6269\u5c55\u5e94\u7528\uff0c\u5176\u901a\u7528\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u5ef6\u8fdf\u52a0\u8f7d\u7684\u5de5\u5382\u7c7b * */ public class LazyFactory { private static final Map < String , Product > lazyMap = new HashMap < String , Product > (); public static synchronized Product createProduct ( String type ) { Product product = null ; // \u5982\u679cmap\u4e2d\u5df2\u7ecf\u6709\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u5219\u76f4\u63a5\u53d6\u51fa\u8be5\u5bf9\u8c61\u5373\u53ef\uff0c\u5426\u5219\u521b\u5efa\u5e76\u653e\u5728\u7f13\u5b58\u5bb9\u5668\u4e2d if ( lazyMap . containsKey ( type )) { return lazyMap . get ( type ); } // \u6839\u636e\u7c7b\u578b\u521b\u5efa\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61 if ( \"product1\" . equals ( type )) { product = new ConcreteProduct1 (); } else { product = new ConcreteProduct2 (); } // \u540c\u65f6\u628a\u5bf9\u8c61\u653e\u5230\u7f13\u5b58\u5bb9\u5668\u4e2d lazyMap . put ( \"type\" , product ); return product ; } } \u4e0a\u9762\u5373\u4e3a\u5ef6\u8fdf\u52a0\u8f7d\u7684\u5de5\u5382\u7c7b\u3002\u4ee3\u7801\u6bd4\u8f83\u7b80\u5355\uff0c\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a map \u5bb9\u5668\u6765\u5bb9\u7eb3\u6240\u6709\u4ea7\u751f\u7684\u5bf9\u8c61\uff0c\u5982\u679c\u5728 map \u5bb9\u5668\u4e2d\u5df2\u7ecf\u6709\u7684\u5bf9\u8c61\uff0c\u5219\u76f4\u63a5\u53d6\u51fa\u8fd4\u56de\uff1b\u5982\u679c\u6ca1\u6709\uff0c\u5219\u6839\u636e\u9700\u8981\u7684\u7c7b\u578b\u4ea7\u751f\u4e00\u4e2a\u5bf9\u8c61\u5e76\u653e\u5165\u5230 map \u5bb9\u5668\u4e2d\uff0c\u4ee5\u4fbf\u4e0b\u6b21\u8c03\u7528\u3002 \u5ef6\u8fdf\u52a0\u8f7d\u7684\u5de5\u5382\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u5ef6\u8fdf\u52a0\u8f7d\u7684\u5de5\u5382\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class LazyClient { public static void main ( String [] args ) { Product product1 = LazyFactory . createProduct ( \"product1\" ); Product product11 = LazyFactory . createProduct ( \"product1\" ); } } \u516d\u3001\u603b\u7ed3 \u00b6 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u53c8\u79f0\u4e3a\u5de5\u5382\u6a21\u5f0f\uff0c\u5b83\u5c5e\u4e8e\u7c7b\u521b\u5efa\u578b\u6a21\u5f0f\u3002\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5de5\u5382\u7236\u7c7b\u8d1f\u8d23\u5b9a\u4e49\u521b\u5efa\u4ea7\u54c1\u5bf9\u8c61\u7684\u516c\u5171\u63a5\u53e3\uff0c\u800c\u5de5\u5382\u5b50\u7c7b\u5219\u8d1f\u8d23\u751f\u6210\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u5c06\u4ea7\u54c1\u7c7b\u7684\u5b9e\u4f8b\u5316\u64cd\u4f5c\u5ef6\u8fdf\u5230\u5de5\u5382\u5b50\u7c7b\u4e2d\u5b8c\u6210\uff0c\u5373\u901a\u8fc7\u5de5\u5382\u5b50\u7c7b\u6765\u786e\u5b9a\u7a76\u7adf\u5e94\u8be5\u5b9e\u4f8b\u5316\u54ea\u4e00\u4e2a\u5177\u4f53\u4ea7\u54c1\u7c7b\u3002 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u4ea7\u54c1\u662f\u5b9a\u4e49\u4ea7\u54c1\u7684\u63a5\u53e3\uff0c\u662f\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u6240\u521b\u5efa\u5bf9\u8c61\u7684\u8d85\u7c7b\u578b\uff0c\u5373\u4ea7\u54c1\u5bf9\u8c61\u7684\u5171\u540c\u7236\u7c7b\u6216\u63a5\u53e3\uff1b\u5177\u4f53\u4ea7\u54c1\u5b9e\u73b0\u4e86\u62bd\u8c61\u4ea7\u54c1\u63a5\u53e3\uff0c\u67d0\u79cd\u7c7b\u578b\u7684\u5177\u4f53\u4ea7\u54c1\u7531\u4e13\u95e8\u7684\u5177\u4f53\u5de5\u5382\u521b\u5efa\uff0c\u5b83\u4eec\u4e4b\u95f4\u5f80\u5f80\u4e00\u4e00\u5bf9\u5e94\uff1b\u62bd\u8c61\u5de5\u5382\u4e2d\u58f0\u660e\u4e86\u5de5\u5382\u65b9\u6cd5\uff0c\u7528\u4e8e\u8fd4\u56de\u4e00\u4e2a\u4ea7\u54c1\uff0c\u5b83\u662f\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u6838\u5fc3\uff0c\u4efb\u4f55\u5728\u6a21\u5f0f\u4e2d\u521b\u5efa\u5bf9\u8c61\u7684\u5de5\u5382\u7c7b\u90fd\u5fc5\u987b\u5b9e\u73b0\u8be5\u63a5\u53e3\uff1b\u5177\u4f53\u5de5\u5382\u662f\u62bd\u8c61\u5de5\u5382\u7c7b\u7684\u5b50\u7c7b\uff0c\u5b9e\u73b0\u4e86\u62bd\u8c61\u5de5\u5382\u4e2d\u5b9a\u4e49\u7684\u5de5\u5382\u65b9\u6cd5\uff0c\u5e76\u53ef\u7531\u5ba2\u6237\u8c03\u7528\uff0c\u8fd4\u56de\u4e00\u4e2a\u5177\u4f53\u4ea7\u54c1\u7c7b\u7684\u5b9e\u4f8b\u3002 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u662f\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u7684\u8fdb\u4e00\u6b65\u62bd\u8c61\u548c\u63a8\u5e7f\u3002\u7531\u4e8e\u4f7f\u7528\u4e86\u9762\u5411\u5bf9\u8c61\u7684\u591a\u6001\u6027\uff0c\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4fdd\u6301\u4e86\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u7684\u4f18\u70b9\uff0c\u800c\u4e14\u514b\u670d\u4e86\u5b83\u7684\u7f3a\u70b9\u3002\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u6838\u5fc3\u7684\u5de5\u5382\u7c7b\u4e0d\u518d\u8d1f\u8d23\u6240\u6709\u4ea7\u54c1\u7684\u521b\u5efa\uff0c\u800c\u662f\u5c06\u5177\u4f53\u521b\u5efa\u5de5\u4f5c\u4ea4\u7ed9\u5b50\u7c7b\u53bb\u505a\u3002\u8fd9\u4e2a\u6838\u5fc3\u7c7b\u4ec5\u4ec5\u8d1f\u8d23\u7ed9\u51fa\u5177\u4f53\u5de5\u5382\u5fc5\u987b\u5b9e\u73b0\u7684\u63a5\u53e3\uff0c\u800c\u4e0d\u8d1f\u8d23\u4ea7\u54c1\u7c7b\u88ab\u5b9e\u4f8b\u5316\u8fd9\u79cd\u7ec6\u8282\uff0c\u8fd9\u4f7f\u5f97\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u53ef\u4ee5\u5141\u8bb8\u7cfb\u7edf\u5728\u4e0d\u4fee\u6539\u5de5\u5382\u89d2\u8272\u7684\u60c5\u51b5\u4e0b\u5f15\u8fdb\u65b0\u4ea7\u54c1\u3002 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u589e\u52a0\u65b0\u7684\u4ea7\u54c1\u7c7b\u65f6\u65e0\u987b\u4fee\u6539\u73b0\u6709\u7cfb\u7edf\uff0c\u5e76\u5c01\u88c5\u4e86\u4ea7\u54c1\u5bf9\u8c61\u7684\u521b\u5efa\u7ec6\u8282\uff0c\u7cfb\u7edf\u5177\u6709\u826f\u597d\u7684\u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u589e\u52a0\u65b0\u4ea7\u54c1\u7684\u540c\u65f6\u9700\u8981\u589e\u52a0\u65b0\u7684\u5de5\u5382\uff0c\u5bfc\u81f4\u7cfb\u7edf\u7c7b\u7684\u4e2a\u6570\u6210\u5bf9\u589e\u52a0\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u6027\u3002 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u4e00\u4e2a\u7c7b\u4e0d\u77e5\u9053\u5b83\u6240\u9700\u8981\u7684\u5bf9\u8c61\u7684\u7c7b\uff1b\u4e00\u4e2a\u7c7b\u901a\u8fc7\u5176\u5b50\u7c7b\u6765\u6307\u5b9a\u521b\u5efa\u54ea\u4e2a\u5bf9\u8c61\uff1b\u5c06\u521b\u5efa\u5bf9\u8c61\u7684\u4efb\u52a1\u59d4\u6258\u7ed9\u591a\u4e2a\u5de5\u5382\u5b50\u7c7b\u4e2d\u7684\u67d0\u4e00\u4e2a\uff0c\u5ba2\u6237\u7aef\u5728\u4f7f\u7528\u65f6\u53ef\u4ee5\u65e0\u987b\u5173\u5fc3\u662f\u54ea\u4e00\u4e2a\u5de5\u5382\u5b50\u7c7b\u521b\u5efa\u4ea7\u54c1\u5b50\u7c7b\uff0c\u9700\u8981\u65f6\u518d\u52a8\u6001\u6307\u5b9a\u3002","title":"\u5de5\u5382\u6a21\u5f0f\uff08Factory Pattern\uff09"},{"location":"Design-Patterns/3-FactoryPattern/#_1","text":"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f( Factory Method Pattern )\u53c8\u79f0\u4e3a\u5de5\u5382\u6a21\u5f0f\uff0c\u4e5f\u53eb\u865a\u62df\u6784\u9020\u5668(Virtual Constructor)\u6a21\u5f0f\u6216\u8005\u591a\u6001\u5de5\u5382(Polymorphic Factory)\u6a21\u5f0f\uff0c\u5b83\u5c5e\u4e8e\u7c7b\u521b\u5efa\u578b\u6a21\u5f0f\u3002\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5de5\u5382\u7236\u7c7b\u8d1f\u8d23\u5b9a\u4e49\u521b\u5efa\u4ea7\u54c1\u5bf9\u8c61\u7684\u516c\u5171\u63a5\u53e3\uff0c\u800c\u5de5\u5382\u5b50\u7c7b\u5219\u8d1f\u8d23\u751f\u6210\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u5c06\u4ea7\u54c1\u7c7b\u7684\u5b9e\u4f8b\u5316\u64cd\u4f5c\u5ef6\u8fdf\u5230\u5de5\u5382\u5b50\u7c7b\u4e2d\u5b8c\u6210\uff0c\u5373\u901a\u8fc7\u5de5\u5382\u5b50\u7c7b\u6765\u786e\u5b9a\u7a76\u7adf\u5e94\u8be5\u5b9e\u4f8b\u5316\u54ea\u4e00\u4e2a\u5177\u4f53\u4ea7\u54c1\u7c7b\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/3-FactoryPattern/#_2","text":"","title":"\u4e8c\u3001\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/3-FactoryPattern/#1","text":"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Product \uff1a\u62bd\u8c61\u4ea7\u54c1 ConcreteProduct \uff1a\u5177\u4f53\u4ea7\u54c1 Factory \uff1a\u62bd\u8c61\u5de5\u5382 ConcreteFactory \uff1a\u5177\u4f53\u5de5\u5382","title":"1. \u89d2\u8272\u7ec4\u6210"},{"location":"Design-Patterns/3-FactoryPattern/#2","text":"","title":"2. \u7ed3\u6784\u56fe"},{"location":"Design-Patterns/3-FactoryPattern/#3","text":"","title":"3. \u65f6\u5e8f\u56fe"},{"location":"Design-Patterns/3-FactoryPattern/#_3","text":"\u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684\u4ea7\u54c1\u7c7b\u548c\u5177\u4f53\u7684\u4ea7\u54c1\u7c7b\uff1a /** * \u62bd\u8c61\u4ea7\u54c1\u7c7b * */ public abstract class Product { /** * \u4ea7\u54c1\u7c7b\u7684\u516c\u5171\u65b9\u6cd5 */ public void method1 () { System . out . println ( \"\u8fd9\u662f\u4ea7\u54c1\u7c7b\u7684\u516c\u5171\u65b9\u6cd5\" ); } /** * \u62bd\u8c61\u65b9\u6cd5 */ public abstract void method2 (); } /** * \u5177\u4f53\u4ea7\u54c1\u7c7b1 * */ public class ConcreteProduct1 extends Product { @Override public void method2 () { System . out . println ( \"ConcreteProduct1\u7684method2\u65b9\u6cd5\" ); } } /** * \u5177\u4f53\u4ea7\u54c1\u7c7b2 * */ public class ConcreteProduct2 extends Product { @Override public void method2 () { System . out . println ( \"ConcreteProduct2\u7684method2\u65b9\u6cd5\" ); } } \u7136\u540e\uff0c\u662f\u62bd\u8c61\u7684\u5de5\u5382\u7c7b\u548c\u5177\u4f53\u7684\u5de5\u5382\u7c7b\uff1a /** * \u62bd\u8c61\u7684\u5de5\u5382\u7c7b * */ public abstract class Factory { /** * \u8fd0\u7528\u4e86Java\u4e2d\u7684\u6cdb\u578b\u548c\u53cd\u5c04\u6280\u672f,\u751f\u6210\u67d0\u79cd\u5177\u4f53\u7684\u4ea7\u54c1 * \u5176\u8f93\u5165\u7c7b\u578b\u53ef\u4ee5\u81ea\u884c\u8bbe\u7f6e * @param c * @param <T> * @return */ public abstract < T extends Product > T createProduct ( Class < T > c ); } /** * \u5177\u4f53\u751f\u4ea7\u4ea7\u54c1\u7684\u5de5\u5382\u7c7b * */ public class ConcreteFactory extends Factory { /** * \u8fd0\u7528\u4e86Java\u4e2d\u7684\u6cdb\u578b\u548c\u53cd\u5c04\u6280\u672f,\u751f\u6210\u67d0\u79cd\u5177\u4f53\u7684\u4ea7\u54c1 * \u5176\u8f93\u5165\u7c7b\u578b\u53ef\u4ee5\u81ea\u884c\u8bbe\u7f6e * @param c * @param <T> * @return */ @Override public < T extends Product > T createProduct ( Class < T > c ) { Product product = null ; try { product = ( Product ) Class . forName ( c . getName ()). newInstance (); } catch ( Exception e ) { System . out . println ( \"\u751f\u4ea7\u4ea7\u54c1\u51fa\u9519\" ); e . printStackTrace (); } return ( T ) product ; } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class Client { public static void main ( String [] args ) { Factory factory = new ConcreteFactory (); Product product1 = factory . createProduct ( ConcreteProduct1 . class ); product1 . method1 (); product1 . method2 (); Product product2 = factory . createProduct ( ConcreteProduct2 . class ); product2 . method1 (); product2 . method2 (); } }","title":"\u4e09\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/3-FactoryPattern/#_4","text":"\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u6838\u5fc3\u7684\u5de5\u5382\u7c7b\u4e0d\u518d\u8d1f\u8d23\u6240\u6709\u4ea7\u54c1\u7684\u521b\u5efa\uff0c\u800c\u662f\u5c06\u5177\u4f53\u521b\u5efa\u5de5\u4f5c\u4ea4\u7ed9\u5b50\u7c7b\u53bb\u505a\u3002\u8fd9\u4e2a\u6838\u5fc3\u7c7b\u4ec5\u4ec5\u8d1f\u8d23\u7ed9\u51fa\u5177\u4f53\u5de5\u5382\u5fc5\u987b\u5b9e\u73b0\u7684\u63a5\u53e3\uff0c\u800c\u4e0d\u8d1f\u8d23\u54ea\u4e00\u4e2a\u4ea7\u54c1\u7c7b\u88ab\u5b9e\u4f8b\u5316\u8fd9\u79cd\u7ec6\u8282\uff0c\u8fd9\u4f7f\u5f97\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u53ef\u4ee5\u5141\u8bb8\u7cfb\u7edf\u5728\u4e0d\u4fee\u6539\u5de5\u5382\u89d2\u8272\u7684\u60c5\u51b5\u4e0b\u5f15\u8fdb\u65b0\u4ea7\u54c1\u3002","title":"\u56db\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/3-FactoryPattern/#1_1","text":"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5de5\u5382\u65b9\u6cd5\u7528\u6765\u521b\u5efa\u5ba2\u6237\u6240\u9700\u8981\u7684\u4ea7\u54c1\uff0c\u540c\u65f6\u8fd8\u5411\u5ba2\u6237\u9690\u85cf\u4e86\u54ea\u79cd\u5177\u4f53\u4ea7\u54c1\u7c7b\u5c06\u88ab\u5b9e\u4f8b\u5316\u8fd9\u4e00\u7ec6\u8282\uff0c\u7528\u6237\u53ea\u9700\u8981\u5173\u5fc3\u6240\u9700\u4ea7\u54c1\u5bf9\u5e94\u7684\u5de5\u5382\uff0c\u65e0\u987b\u5173\u5fc3\u521b\u5efa\u7ec6\u8282\uff0c\u751a\u81f3\u65e0\u987b\u77e5\u9053\u5177\u4f53\u4ea7\u54c1\u7c7b\u7684\u7c7b\u540d\u3002 \u57fa\u4e8e\u5de5\u5382\u89d2\u8272\u548c\u4ea7\u54c1\u89d2\u8272\u7684\u591a\u6001\u6027\u8bbe\u8ba1\u662f\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u5173\u952e\u3002\u5b83\u80fd\u591f\u4f7f\u5de5\u5382\u53ef\u4ee5\u81ea\u4e3b\u786e\u5b9a\u521b\u5efa\u4f55\u79cd\u4ea7\u54c1\u5bf9\u8c61\uff0c\u800c\u5982\u4f55\u521b\u5efa\u8fd9\u4e2a\u5bf9\u8c61\u7684\u7ec6\u8282\u5219\u5b8c\u5168\u5c01\u88c5\u5728\u5177\u4f53\u5de5\u5382\u5185\u90e8\u3002\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e4b\u6240\u4ee5\u53c8\u88ab\u79f0\u4e3a\u591a\u6001\u5de5\u5382\u6a21\u5f0f\uff0c\u662f\u56e0\u4e3a\u6240\u6709\u7684\u5177\u4f53\u5de5\u5382\u7c7b\u90fd\u5177\u6709\u540c\u4e00\u62bd\u8c61\u7236\u7c7b\u3002 \u4f7f\u7528\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u53e6\u4e00\u4e2a\u4f18\u70b9\u662f\u5728\u7cfb\u7edf\u4e2d\u52a0\u5165\u65b0\u4ea7\u54c1\u65f6\uff0c\u65e0\u987b\u4fee\u6539\u62bd\u8c61\u5de5\u5382\u548c\u62bd\u8c61\u4ea7\u54c1\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u65e0\u987b\u4fee\u6539\u5ba2\u6237\u7aef\uff0c\u4e5f\u65e0\u987b\u4fee\u6539\u5176\u4ed6\u7684\u5177\u4f53\u5de5\u5382\u548c\u5177\u4f53\u4ea7\u54c1\uff0c\u800c\u53ea\u8981\u6dfb\u52a0\u4e00\u4e2a\u5177\u4f53\u5de5\u5382\u548c\u5177\u4f53\u4ea7\u54c1\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u6837\uff0c\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\u4e5f\u5c31\u53d8\u5f97\u975e\u5e38\u597d\uff0c\u5b8c\u5168\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002","title":"1. \u4f18\u70b9"},{"location":"Design-Patterns/3-FactoryPattern/#2_1","text":"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5728\u6dfb\u52a0\u65b0\u4ea7\u54c1\u65f6\uff0c\u9700\u8981\u7f16\u5199\u65b0\u7684\u5177\u4f53\u4ea7\u54c1\u7c7b\uff0c\u800c\u4e14\u8fd8\u8981\u63d0\u4f9b\u4e0e\u4e4b\u5bf9\u5e94\u7684\u5177\u4f53\u5de5\u5382\u7c7b\uff0c\u7cfb\u7edf\u4e2d\u7c7b\u7684\u4e2a\u6570\u5c06\u6210\u5bf9\u589e\u52a0\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\uff0c\u6709\u66f4\u591a\u7684\u7c7b\u9700\u8981\u7f16\u8bd1\u548c\u8fd0\u884c\uff0c\u4f1a\u7ed9\u7cfb\u7edf\u5e26\u6765\u4e00\u4e9b\u989d\u5916\u7684\u5f00\u9500\u3002 \u7531\u4e8e\u8003\u8651\u5230\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\uff0c\u9700\u8981\u5f15\u5165\u62bd\u8c61\u5c42\uff0c\u5728\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u5747\u4f7f\u7528\u62bd\u8c61\u5c42\u8fdb\u884c\u5b9a\u4e49\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u62bd\u8c61\u6027\u548c\u7406\u89e3\u96be\u5ea6\uff0c\u4e14\u5728\u5b9e\u73b0\u65f6\u53ef\u80fd\u9700\u8981\u7528\u5230 DOM\u3001\u53cd\u5c04\u7b49\u6280\u672f\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u5b9e\u73b0\u96be\u5ea6\u3002","title":"2. \u7f3a\u70b9"},{"location":"Design-Patterns/3-FactoryPattern/#3_1","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\uff1a \u4e00\u4e2a\u7c7b\u4e0d\u77e5\u9053\u5b83\u6240\u9700\u8981\u7684\u5bf9\u8c61\u7684\u7c7b\uff1a\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5ba2\u6237\u7aef\u4e0d\u9700\u8981\u77e5\u9053\u5177\u4f53\u4ea7\u54c1\u7c7b\u7684\u7c7b\u540d\uff0c\u53ea\u9700\u8981\u77e5\u9053\u6240\u5bf9\u5e94\u7684\u5de5\u5382\u5373\u53ef\uff0c\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61\u7531\u5177\u4f53\u5de5\u5382\u7c7b\u521b\u5efa\uff1b\u5ba2\u6237\u7aef\u9700\u8981\u77e5\u9053\u521b\u5efa\u5177\u4f53\u4ea7\u54c1\u7684\u5de5\u5382\u7c7b\u3002 \u4e00\u4e2a\u7c7b\u901a\u8fc7\u5176\u5b50\u7c7b\u6765\u6307\u5b9a\u521b\u5efa\u54ea\u4e2a\u5bf9\u8c61\uff1a\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5bf9\u4e8e\u62bd\u8c61\u5de5\u5382\u7c7b\u53ea\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u521b\u5efa\u4ea7\u54c1\u7684\u63a5\u53e3\uff0c\u800c\u7531\u5176\u5b50\u7c7b\u6765\u786e\u5b9a\u5177\u4f53\u8981\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u5229\u7528\u9762\u5411\u5bf9\u8c61\u7684\u591a\u6001\u6027\u548c\u91cc\u6c0f\u4ee3\u6362\u539f\u5219\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5b50\u7c7b\u5bf9\u8c61\u5c06\u8986\u76d6\u7236\u7c7b\u5bf9\u8c61\uff0c\u4ece\u800c\u4f7f\u5f97\u7cfb\u7edf\u66f4\u5bb9\u6613\u6269\u5c55\u3002 \u5c06\u521b\u5efa\u5bf9\u8c61\u7684\u4efb\u52a1\u59d4\u6258\u7ed9\u591a\u4e2a\u5de5\u5382\u5b50\u7c7b\u4e2d\u7684\u67d0\u4e00\u4e2a\uff0c\u5ba2\u6237\u7aef\u5728\u4f7f\u7528\u65f6\u53ef\u4ee5\u65e0\u987b\u5173\u5fc3\u662f\u54ea\u4e00\u4e2a\u5de5\u5382\u5b50\u7c7b\u521b\u5efa\u4ea7\u54c1\u5b50\u7c7b\uff0c\u9700\u8981\u65f6\u518d\u52a8\u6001\u6307\u5b9a\uff0c\u53ef\u5c06\u5177\u4f53\u5de5\u5382\u7c7b\u7684\u7c7b\u540d\u5b58\u50a8\u5728\u914d\u7f6e\u6587\u4ef6\u6216\u6570\u636e\u5e93\u4e2d\u3002","title":"3. \u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/3-FactoryPattern/#_5","text":"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u6709\u5f88\u591a\u6269\u5c55\uff0c\u800c\u4e14\u4e0e\u5176\u4ed6\u6a21\u5f0f\u7ed3\u5408\u4f7f\u7528\u5a01\u529b\u66f4\u5927\uff0c\u4e0b\u9762\u4ecb\u7ecd 4 \u79cd\u5e38\u7528\u6269\u5c55\u3002","title":"\u4e94\u3001\u6a21\u5f0f\u6269\u5c55"},{"location":"Design-Patterns/3-FactoryPattern/#1_2","text":"\u6211\u4eec\u8fd9\u6837\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff1a\u4e00\u4e2a\u6a21\u5757\u4ec5\u9700\u8981\u4e00\u4e2a\u5de5\u5382\u7c7b\uff0c\u6ca1\u6709\u5fc5\u8981\u628a\u5b83\u4ea7\u751f\u51fa\u6765\uff0c\u4f7f\u7528\u9759\u6001\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002\u56e0\u6b64\u53bb\u6389\u5de5\u5382\u7c7b\u4e2d\u7ee7\u627f\u7684\u62bd\u8c61\u7c7b\uff0c\u628a\u65b9\u6cd5\u6539\u6210\u9759\u6001\u5373\u53ef\u3002\u901a\u7528\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u4e2d\u7684\u5de5\u5382\u7c7b * */ public class SimpleFactory { /** * \u8fd0\u7528\u4e86Java\u4e2d\u7684\u6cdb\u578b\u548c\u53cd\u5c04\u6280\u672f,\u751f\u6210\u67d0\u79cd\u5177\u4f53\u7684\u4ea7\u54c1 * \u5176\u8f93\u5165\u7c7b\u578b\u53ef\u4ee5\u81ea\u884c\u8bbe\u7f6e * @param c * @param <T> * @return */ public static < T extends Product > T createProduct ( Class < T > c ) { Product product = null ; try { product = ( Product ) Class . forName ( c . getName ()). newInstance (); } catch ( Exception e ) { System . out . println ( \"\u751f\u4ea7\u4ea7\u54c1\u51fa\u9519\" ); e . printStackTrace (); } return ( T ) product ; } } /** * \u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class SimpleClient { public static void main ( String [] args ) { Product product1 = SimpleFactory . createProduct ( ConcreteProduct1 . class ); product1 . method1 (); product1 . method2 (); Product product2 = SimpleFactory . createProduct ( ConcreteProduct2 . class ); product2 . method1 (); product2 . method2 (); } } \u8fd0\u884c\u7ed3\u679c\u6ca1\u6709\u53d1\u751f\u53d8\u5316\uff0c\u4f46\u662f\u7c7b\u56fe\u7b80\u5355\u4e86\uff0c\u8c03\u7528\u8005\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u662f\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u5f31\u5316\uff0c\u4e5f\u53eb\u505a\u9759\u6001\u5de5\u5382\u6a21\u5f0f\u3002\u5176\u7f3a\u70b9\u662f\u5de5\u5382\u7c7b\u7684\u6269\u5c55\u6bd4\u8f83\u56f0\u96be\uff0c\u4e0d\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\uff0c\u4f46\u5b83\u4ecd\u7136\u662f\u4e00\u4e2a\u975e\u5e38\u5b9e\u7528\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002","title":"1. \u7b80\u5355\u5de5\u5382\u6a21\u5f0f"},{"location":"Design-Patterns/3-FactoryPattern/#2_2","text":"\u5f53\u6211\u4eec\u5728\u4e00\u4e2a\u6bd4\u8f83\u590d\u6742\u7684\u9879\u76ee\u65f6\uff0c\u7ecf\u5e38\u4f1a\u9047\u5230\u521d\u59cb\u5316\u4e00\u4e2a\u5bf9\u8c61\u5f88\u8017\u8d39\u7cbe\u529b\u7684\u60c5\u51b5\uff0c\u6240\u6709\u7684\u4ea7\u54c1\u7c7b\u90fd\u653e\u5230\u4e00\u4e2a\u5de5\u5382\u65b9\u6cd5\u4e2d\u8fdb\u884c\u521d\u59cb\u5316\u4f1a\u4f7f\u4ee3\u7801\u7ed3\u6784\u4e0d\u6e05\u6670\u3002\u4e3a\u4e86\u8ba9\u7ed3\u6784\u6e05\u6670\uff0c\u6211\u4eec\u5c31\u4e3a\u6bcf\u7c7b\u4ea7\u54c1\u5b9a\u4e49\u4e00\u4e2a\u521b\u9020\u8005\uff0c\u7136\u540e\u7531\u8c03\u7528\u8005\u81ea\u5df1\u53bb\u9009\u62e9\u4e0e\u54ea\u4e2a\u5de5\u5382\u65b9\u6cd5\u5173\u8054\u3002\u591a\u5de5\u5382\u6a21\u5f0f\u7684\u901a\u7528\u4ee3\u7801\u5982\u4e0b\uff1a \u591a\u5de5\u5382\u6a21\u5f0f\u7684\u62bd\u8c61\u5de5\u5382\u7c7b\uff1a /** * \u751f\u6210\u591a\u4e2a\u4ea7\u54c1\u7684\u62bd\u8c61\u5de5\u5382\u7c7b * */ public abstract class MultiFactory { /** * \u751f\u6210\u67d0\u79cd\u4ea7\u54c1\u7684\u65b9\u6cd5 * @return */ public abstract Product createProduct (); } \u7b2c\u4e00\u79cd\u4ea7\u54c1\u7684\u521b\u5efa\u5de5\u5382\u5b9e\u73b0\uff1a /** * \u751f\u6210\u4ea7\u54c11\u7684\u5177\u4f53\u5de5\u5382\u7c7b1 * */ public class ConcreteFactory1 extends MultiFactory { /** * \u751f\u6210\u4ea7\u54c11\u7684\u65b9\u6cd5 * @return */ @Override public Product createProduct () { return new ConcreteProduct1 (); } } \u7b2c\u4e8c\u79cd\u4ea7\u54c1\u7684\u521b\u5efa\u5de5\u5382\u5b9e\u73b0\uff1a /** * \u751f\u6210\u4ea7\u54c12\u7684\u5177\u4f53\u5de5\u5382\u7c7b2 * */ public class ConcreteFactory2 extends MultiFactory { /** * \u751f\u6210\u4ea7\u54c12\u7684\u65b9\u6cd5 * @return */ @Override public Product createProduct () { return new ConcreteProduct2 (); } } \u591a\u5de5\u5382\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b /** * \u591a\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class MultiClient { public static void main ( String [] args ) { Product concreteProduct1 = ( new ConcreteFactory1 ()). createProduct (); concreteProduct1 . method1 (); concreteProduct1 . method2 (); Product concreteProduct2 = ( new ConcreteFactory2 ()). createProduct (); concreteProduct1 . method1 (); concreteProduct1 . method2 (); } }","title":"2. \u591a\u5de5\u5382\u7c7b\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f"},{"location":"Design-Patterns/3-FactoryPattern/#3_2","text":"\u5355\u4f8b\u6a21\u5f0f\u7684\u6838\u5fc3\u8981\u6c42\u5c31\u662f\u5728\u5185\u5b58\u4e2d\u53ea\u6709\u4e00\u4e2a\u5bf9\u8c61\uff0c\u901a\u8fc7\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e5f\u53ef\u4ee5\u53ea\u5728\u5185\u5b58\u4e2d\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u800c\u5b9e\u73b0\u5355\u4f8b\u7684\u529f\u80fd\u3002 \u4e0b\u9762\u662f\u5355\u4f8b\u7c7b\uff0c\u5176\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a private \u7684\u65e0\u53c2\u6784\u9020\u51fd\u6570\uff0c\u76ee\u7684\u662f\u4e0d\u5141\u8bb8\u901a\u8fc7 new \u7684\u65b9\u5f0f\u521b\u5efa\u5bf9\u8c61\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\u7684\u5355\u4f8b\u7c7b * */ public class Singleton { /** * \u79c1\u6709\u5316\u6784\u9020\u65b9\u6cd5\uff0c\u4e0d\u5141\u8bb8new\u4ea7\u751f\u4e00\u4e2a\u5bf9\u8c61 */ private Singleton () {} /** * \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\u7684\u5355\u4f8b\u6a21\u5f0f\u4e1a\u52a1\u65b9\u6cd5 */ public void doSomething () { System . out . println ( \"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\u7684\u5355\u4f8b\u6a21\u5f0f\u65b9\u6cd5\u3002\u3002\u3002\" ); } } \u4ee5\u4e0a\u5355\u4f8b\u7c7b\u4e2d\u4e0d\u80fd\u901a\u8fc7\u6b63\u5e38\u7684\u6e20\u9053\u5efa\u7acb\u4e00\u4e2a\u5bf9\u8c61\uff0c\u90a3\u5355\u4f8b\u7684\u5de5\u5382\u7c7b\u4e2d\u5982\u4f55\u5efa\u7acb\u4e00\u4e2a\u5355\u4f8b\u5bf9\u8c61\u5462\uff1f\u7b54\u6848\u662f\u901a\u8fc7\u53cd\u5c04\u65b9\u5f0f\u521b\u5efa\uff0c\u5355\u4f8b\u5de5\u5382\u7c7b\u7684\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u751f\u6210\u5355\u4f8b\u7684\u5de5\u5382\u7c7b * */ public class SingletonFactory { private static Singleton singleton ; static { try { Class c = Class . forName ( Singleton . class . getName ()); // \u83b7\u5f97\u65e0\u53c2\u6784\u9020 Constructor constructor = c . getDeclaredConstructor (); // \u8bbe\u7f6e\u65e0\u53c2\u6784\u9020\u662f\u53ef\u8bbf\u95ee\u7684 constructor . setAccessible ( true ); // \u4ea7\u751f\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61 singleton = ( Singleton ) constructor . newInstance (); } catch ( Exception e ) { e . printStackTrace (); System . out . println ( \"\u751f\u6210\u5355\u4f8b\u7684\u5de5\u5382\u7c7b\u65b9\u6cd5\u4e2d\u751f\u6210\u5355\u4f8b\u51fa\u9519\" ); zuihou } } public static Singleton getSingleton () { return singleton ; } } \u6700\u540e\u662f\u5de5\u5382\u65b9\u6cd5\u5355\u4f8b\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u5de5\u5382\u65b9\u6cd5\u5355\u4f8b\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class SingleClient { public static void main ( String [] args ) { Singleton singleton = SingletonFactory . getSingleton (); singleton . doSomething (); } }","title":"3. \u5de5\u5382\u65b9\u6cd5\u7684\u5355\u4f8b\u6a21\u5f0f"},{"location":"Design-Patterns/3-FactoryPattern/#4","text":"\u4f55\u4e3a\u5ef6\u8fdf\u521d\u59cb\u5316\uff1f\u4e00\u4e2a\u5bf9\u8c61\u88ab\u6d88\u8d39\u5b8c\u6bd5\u540e\uff0c\u5e76\u4e0d\u7acb\u5373\u91ca\u653e\uff0c\u5de5\u5382\u7c7b\u4fdd\u6301\u5176\u521d\u59cb\u72b6\u6001\uff0c\u7b49\u5f85\u518d\u6b21\u4f7f\u7528\u3002\u5ef6\u8fdf\u521d\u59cb\u5316\u662f\u5de5\u5382\u6a21\u5f0f\u7684\u4e00\u4e2a\u6269\u5c55\u5e94\u7528\uff0c\u5176\u901a\u7528\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u5ef6\u8fdf\u52a0\u8f7d\u7684\u5de5\u5382\u7c7b * */ public class LazyFactory { private static final Map < String , Product > lazyMap = new HashMap < String , Product > (); public static synchronized Product createProduct ( String type ) { Product product = null ; // \u5982\u679cmap\u4e2d\u5df2\u7ecf\u6709\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u5219\u76f4\u63a5\u53d6\u51fa\u8be5\u5bf9\u8c61\u5373\u53ef\uff0c\u5426\u5219\u521b\u5efa\u5e76\u653e\u5728\u7f13\u5b58\u5bb9\u5668\u4e2d if ( lazyMap . containsKey ( type )) { return lazyMap . get ( type ); } // \u6839\u636e\u7c7b\u578b\u521b\u5efa\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61 if ( \"product1\" . equals ( type )) { product = new ConcreteProduct1 (); } else { product = new ConcreteProduct2 (); } // \u540c\u65f6\u628a\u5bf9\u8c61\u653e\u5230\u7f13\u5b58\u5bb9\u5668\u4e2d lazyMap . put ( \"type\" , product ); return product ; } } \u4e0a\u9762\u5373\u4e3a\u5ef6\u8fdf\u52a0\u8f7d\u7684\u5de5\u5382\u7c7b\u3002\u4ee3\u7801\u6bd4\u8f83\u7b80\u5355\uff0c\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a map \u5bb9\u5668\u6765\u5bb9\u7eb3\u6240\u6709\u4ea7\u751f\u7684\u5bf9\u8c61\uff0c\u5982\u679c\u5728 map \u5bb9\u5668\u4e2d\u5df2\u7ecf\u6709\u7684\u5bf9\u8c61\uff0c\u5219\u76f4\u63a5\u53d6\u51fa\u8fd4\u56de\uff1b\u5982\u679c\u6ca1\u6709\uff0c\u5219\u6839\u636e\u9700\u8981\u7684\u7c7b\u578b\u4ea7\u751f\u4e00\u4e2a\u5bf9\u8c61\u5e76\u653e\u5165\u5230 map \u5bb9\u5668\u4e2d\uff0c\u4ee5\u4fbf\u4e0b\u6b21\u8c03\u7528\u3002 \u5ef6\u8fdf\u52a0\u8f7d\u7684\u5de5\u5382\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\u4ee3\u7801\u5982\u4e0b\uff1a /** * \u5ef6\u8fdf\u52a0\u8f7d\u7684\u5de5\u5382\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class LazyClient { public static void main ( String [] args ) { Product product1 = LazyFactory . createProduct ( \"product1\" ); Product product11 = LazyFactory . createProduct ( \"product1\" ); } }","title":"4. \u5de5\u5382\u65b9\u6cd5\u7684\u5ef6\u8fdf\u521d\u59cb\u5316"},{"location":"Design-Patterns/3-FactoryPattern/#_6","text":"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u53c8\u79f0\u4e3a\u5de5\u5382\u6a21\u5f0f\uff0c\u5b83\u5c5e\u4e8e\u7c7b\u521b\u5efa\u578b\u6a21\u5f0f\u3002\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u5de5\u5382\u7236\u7c7b\u8d1f\u8d23\u5b9a\u4e49\u521b\u5efa\u4ea7\u54c1\u5bf9\u8c61\u7684\u516c\u5171\u63a5\u53e3\uff0c\u800c\u5de5\u5382\u5b50\u7c7b\u5219\u8d1f\u8d23\u751f\u6210\u5177\u4f53\u7684\u4ea7\u54c1\u5bf9\u8c61\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u5c06\u4ea7\u54c1\u7c7b\u7684\u5b9e\u4f8b\u5316\u64cd\u4f5c\u5ef6\u8fdf\u5230\u5de5\u5382\u5b50\u7c7b\u4e2d\u5b8c\u6210\uff0c\u5373\u901a\u8fc7\u5de5\u5382\u5b50\u7c7b\u6765\u786e\u5b9a\u7a76\u7adf\u5e94\u8be5\u5b9e\u4f8b\u5316\u54ea\u4e00\u4e2a\u5177\u4f53\u4ea7\u54c1\u7c7b\u3002 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u4ea7\u54c1\u662f\u5b9a\u4e49\u4ea7\u54c1\u7684\u63a5\u53e3\uff0c\u662f\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u6240\u521b\u5efa\u5bf9\u8c61\u7684\u8d85\u7c7b\u578b\uff0c\u5373\u4ea7\u54c1\u5bf9\u8c61\u7684\u5171\u540c\u7236\u7c7b\u6216\u63a5\u53e3\uff1b\u5177\u4f53\u4ea7\u54c1\u5b9e\u73b0\u4e86\u62bd\u8c61\u4ea7\u54c1\u63a5\u53e3\uff0c\u67d0\u79cd\u7c7b\u578b\u7684\u5177\u4f53\u4ea7\u54c1\u7531\u4e13\u95e8\u7684\u5177\u4f53\u5de5\u5382\u521b\u5efa\uff0c\u5b83\u4eec\u4e4b\u95f4\u5f80\u5f80\u4e00\u4e00\u5bf9\u5e94\uff1b\u62bd\u8c61\u5de5\u5382\u4e2d\u58f0\u660e\u4e86\u5de5\u5382\u65b9\u6cd5\uff0c\u7528\u4e8e\u8fd4\u56de\u4e00\u4e2a\u4ea7\u54c1\uff0c\u5b83\u662f\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u6838\u5fc3\uff0c\u4efb\u4f55\u5728\u6a21\u5f0f\u4e2d\u521b\u5efa\u5bf9\u8c61\u7684\u5de5\u5382\u7c7b\u90fd\u5fc5\u987b\u5b9e\u73b0\u8be5\u63a5\u53e3\uff1b\u5177\u4f53\u5de5\u5382\u662f\u62bd\u8c61\u5de5\u5382\u7c7b\u7684\u5b50\u7c7b\uff0c\u5b9e\u73b0\u4e86\u62bd\u8c61\u5de5\u5382\u4e2d\u5b9a\u4e49\u7684\u5de5\u5382\u65b9\u6cd5\uff0c\u5e76\u53ef\u7531\u5ba2\u6237\u8c03\u7528\uff0c\u8fd4\u56de\u4e00\u4e2a\u5177\u4f53\u4ea7\u54c1\u7c7b\u7684\u5b9e\u4f8b\u3002 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u662f\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u7684\u8fdb\u4e00\u6b65\u62bd\u8c61\u548c\u63a8\u5e7f\u3002\u7531\u4e8e\u4f7f\u7528\u4e86\u9762\u5411\u5bf9\u8c61\u7684\u591a\u6001\u6027\uff0c\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4fdd\u6301\u4e86\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u7684\u4f18\u70b9\uff0c\u800c\u4e14\u514b\u670d\u4e86\u5b83\u7684\u7f3a\u70b9\u3002\u5728\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u4e2d\uff0c\u6838\u5fc3\u7684\u5de5\u5382\u7c7b\u4e0d\u518d\u8d1f\u8d23\u6240\u6709\u4ea7\u54c1\u7684\u521b\u5efa\uff0c\u800c\u662f\u5c06\u5177\u4f53\u521b\u5efa\u5de5\u4f5c\u4ea4\u7ed9\u5b50\u7c7b\u53bb\u505a\u3002\u8fd9\u4e2a\u6838\u5fc3\u7c7b\u4ec5\u4ec5\u8d1f\u8d23\u7ed9\u51fa\u5177\u4f53\u5de5\u5382\u5fc5\u987b\u5b9e\u73b0\u7684\u63a5\u53e3\uff0c\u800c\u4e0d\u8d1f\u8d23\u4ea7\u54c1\u7c7b\u88ab\u5b9e\u4f8b\u5316\u8fd9\u79cd\u7ec6\u8282\uff0c\u8fd9\u4f7f\u5f97\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u53ef\u4ee5\u5141\u8bb8\u7cfb\u7edf\u5728\u4e0d\u4fee\u6539\u5de5\u5382\u89d2\u8272\u7684\u60c5\u51b5\u4e0b\u5f15\u8fdb\u65b0\u4ea7\u54c1\u3002 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u589e\u52a0\u65b0\u7684\u4ea7\u54c1\u7c7b\u65f6\u65e0\u987b\u4fee\u6539\u73b0\u6709\u7cfb\u7edf\uff0c\u5e76\u5c01\u88c5\u4e86\u4ea7\u54c1\u5bf9\u8c61\u7684\u521b\u5efa\u7ec6\u8282\uff0c\u7cfb\u7edf\u5177\u6709\u826f\u597d\u7684\u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027\uff1b\u5176\u7f3a\u70b9\u5728\u4e8e\u589e\u52a0\u65b0\u4ea7\u54c1\u7684\u540c\u65f6\u9700\u8981\u589e\u52a0\u65b0\u7684\u5de5\u5382\uff0c\u5bfc\u81f4\u7cfb\u7edf\u7c7b\u7684\u4e2a\u6570\u6210\u5bf9\u589e\u52a0\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u6027\u3002 \u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u4e00\u4e2a\u7c7b\u4e0d\u77e5\u9053\u5b83\u6240\u9700\u8981\u7684\u5bf9\u8c61\u7684\u7c7b\uff1b\u4e00\u4e2a\u7c7b\u901a\u8fc7\u5176\u5b50\u7c7b\u6765\u6307\u5b9a\u521b\u5efa\u54ea\u4e2a\u5bf9\u8c61\uff1b\u5c06\u521b\u5efa\u5bf9\u8c61\u7684\u4efb\u52a1\u59d4\u6258\u7ed9\u591a\u4e2a\u5de5\u5382\u5b50\u7c7b\u4e2d\u7684\u67d0\u4e00\u4e2a\uff0c\u5ba2\u6237\u7aef\u5728\u4f7f\u7528\u65f6\u53ef\u4ee5\u65e0\u987b\u5173\u5fc3\u662f\u54ea\u4e00\u4e2a\u5de5\u5382\u5b50\u7c7b\u521b\u5efa\u4ea7\u54c1\u5b50\u7c7b\uff0c\u9700\u8981\u65f6\u518d\u52a8\u6001\u6307\u5b9a\u3002","title":"\u516d\u3001\u603b\u7ed3"},{"location":"Design-Patterns/4-BuilderPattern/","text":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a \u00b6 \u65e0\u8bba\u662f\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\u8fd8\u662f\u5728\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u90fd\u5b58\u5728\u4e00\u4e9b\u590d\u6742\u7684\u5bf9\u8c61\uff0c\u5b83\u4eec\u62e5\u6709\u591a\u4e2a\u7ec4\u6210\u90e8\u5206\uff0c\u5982\u6c7d\u8f66\uff0c\u5b83\u5305\u62ec\u8f66\u8f6e\u3001\u65b9\u5411\u76d8\u3001\u53d1\u52a8\u673a\u7b49\u5404\u79cd\u90e8\u4ef6\u3002\u800c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u6237\u800c\u8a00\uff0c\u65e0\u987b\u77e5\u9053\u8fd9\u4e9b\u90e8\u4ef6\u7684\u88c5\u914d\u7ec6\u8282\uff0c\u4e5f\u51e0\u4e4e\u4e0d\u4f1a\u4f7f\u7528\u5355\u72ec\u67d0\u4e2a\u90e8\u4ef6\uff0c\u800c\u662f\u4f7f\u7528\u4e00\u8f86\u5b8c\u6574\u7684\u6c7d\u8f66\uff0c\u53ef\u4ee5\u901a\u8fc7\u5efa\u9020\u8005\u6a21\u5f0f\u5bf9\u5176\u8fdb\u884c\u8bbe\u8ba1\u4e0e\u63cf\u8ff0\uff0c\u5efa\u9020\u8005\u6a21\u5f0f\u53ef\u4ee5\u5c06\u90e8\u4ef6\u548c\u5176\u7ec4\u88c5\u8fc7\u7a0b\u5206\u5f00\uff0c\u4e00\u6b65\u4e00\u6b65\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\u3002\u7528\u6237\u53ea\u9700\u8981\u6307\u5b9a\u590d\u6742\u5bf9\u8c61\u7684\u7c7b\u578b\u5c31\u53ef\u4ee5\u5f97\u5230\u8be5\u5bf9\u8c61\uff0c\u800c\u65e0\u987b\u77e5\u9053\u5176\u5185\u90e8\u7684\u5177\u4f53\u6784\u9020\u7ec6\u8282\u3002 \u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\uff0c\u4e5f\u5b58\u5728\u5927\u91cf\u7c7b\u4f3c\u6c7d\u8f66\u4e00\u6837\u7684\u590d\u6742\u5bf9\u8c61\uff0c\u5b83\u4eec\u62e5\u6709\u4e00\u7cfb\u5217\u6210\u5458\u5c5e\u6027\uff0c\u8fd9\u4e9b\u6210\u5458\u5c5e\u6027\u4e2d\u6709\u4e9b\u662f\u5f15\u7528\u7c7b\u578b\u7684\u6210\u5458\u5bf9\u8c61\u3002\u800c\u4e14\u5728\u8fd9\u4e9b\u590d\u6742\u5bf9\u8c61\u4e2d\uff0c\u8fd8\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u9650\u5236\u6761\u4ef6\uff0c\u5982\u67d0\u4e9b\u5c5e\u6027\u6ca1\u6709\u8d4b\u503c\u5219\u590d\u6742\u5bf9\u8c61\u4e0d\u80fd\u4f5c\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684\u4ea7\u54c1\u4f7f\u7528\uff1b\u6709\u4e9b\u5c5e\u6027\u7684\u8d4b\u503c\u5fc5\u987b\u6309\u7167\u67d0\u4e2a\u987a\u5e8f\uff0c\u4e00\u4e2a\u5c5e\u6027\u6ca1\u6709\u8d4b\u503c\u4e4b\u524d\uff0c\u53e6\u4e00\u4e2a\u5c5e\u6027\u53ef\u80fd\u65e0\u6cd5\u8d4b\u503c\u7b49\u3002 \u590d\u6742\u5bf9\u8c61\u76f8\u5f53\u4e8e\u4e00\u8f86\u6709\u5f85\u5efa\u9020\u7684\u6c7d\u8f66\uff0c\u800c\u5bf9\u8c61\u7684\u5c5e\u6027\u76f8\u5f53\u4e8e\u6c7d\u8f66\u7684\u90e8\u4ef6\uff0c\u5efa\u9020\u4ea7\u54c1\u7684\u8fc7\u7a0b\u5c31\u76f8\u5f53\u4e8e\u7ec4\u5408\u90e8\u4ef6\u7684\u8fc7\u7a0b\u3002\u7531\u4e8e\u7ec4\u5408\u90e8\u4ef6\u7684\u8fc7\u7a0b\u5f88\u590d\u6742\uff0c\u56e0\u6b64\uff0c\u8fd9\u4e9b\u90e8\u4ef6\u7684\u7ec4\u5408\u8fc7\u7a0b\u5f80\u5f80\u88ab\u201c\u5916\u90e8\u5316\u201d\u5230\u4e00\u4e2a\u79f0\u4f5c\u5efa\u9020\u8005\u7684\u5bf9\u8c61\u91cc\uff0c\u5efa\u9020\u8005\u8fd4\u8fd8\u7ed9\u5ba2\u6237\u7aef\u7684\u662f\u4e00\u4e2a\u5df2\u7ecf\u5efa\u9020\u5b8c\u6bd5\u7684\u5b8c\u6574\u4ea7\u54c1\u5bf9\u8c61\uff0c\u800c\u7528\u6237\u65e0\u987b\u5173\u5fc3\u8be5\u5bf9\u8c61\u6240\u5305\u542b\u7684\u5c5e\u6027\u4ee5\u53ca\u5b83\u4eec\u7684\u7ec4\u88c5\u65b9\u5f0f\uff0c\u8fd9\u5c31\u662f\u5efa\u9020\u8005\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002 \u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u9020\u8005\u6a21\u5f0f( Builder Pattern )\uff1a\u5c06\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u4e0e\u5b83\u7684\u8868\u793a\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u8868\u793a\u3002\u5efa\u9020\u8005\u6a21\u5f0f\u5c5e\u4e8e \u5bf9\u8c61\u521b\u5efa\u578b\u6a21\u5f0f \u3002\u5efa\u9020\u8005\u6a21\u5f0f\u53c8\u53ef\u4ee5\u79f0\u4e3a \u751f\u6210\u5668\u6a21\u5f0f \u3002 \u5efa\u9020\u8005\u6a21\u5f0f\u662f\u4e00\u6b65\u4e00\u6b65\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u53ea\u901a\u8fc7\u6307\u5b9a\u590d\u6742\u5bf9\u8c61\u7684\u7c7b\u578b\u548c\u5185\u5bb9\u5c31\u53ef\u4ee5\u6784\u5efa\u5b83\u4eec\uff0c\u7528\u6237\u4e0d\u9700\u8981\u77e5\u9053\u5185\u90e8\u7684\u5177\u4f53\u6784\u5efa\u7ec6\u8282\u3002 \u4e09\u3001\u6a21\u5f0f\u7ed3\u6784 \u00b6 1. \u89d2\u8272\u7ec4\u6210 \u00b6 \u5efa\u9020\u8005\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Builder \uff1a\u62bd\u8c61\u5efa\u9020\u8005 ConcreteBuilder \uff1a\u5177\u4f53\u5efa\u9020\u8005 Director \uff1a\u5bfc\u6f14\u8005 Product \uff1a\u4ea7\u54c1\u89d2\u8272 2. \u7ed3\u6784\u56fe \u00b6 \u56db\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\uff0c\u662f\u4ea7\u54c1\u7c7b\uff1a /** * \u4ea7\u54c1\u7c7b. */ public class Product { private String part1 ; private String part2 ; /* getter \u548c setter\u65b9\u6cd5. */ public String getPart1 () { return part1 ; } public void setPart1 ( String part1 ) { this . part1 = part1 ; } public String getPart2 () { return part2 ; } public void setPart2 ( String part2 ) { this . part2 = part2 ; } } \u5176\u5b9e\uff0c\u662f\u62bd\u8c61\u7684\u5efa\u9020\u8005 Builder \u63a5\u53e3\u548c\u5177\u4f53\u7684\u5efa\u9020\u8005 ConcreteBuilder \u7c7b\uff1a /** * \u62bd\u8c61\u7684\u5efa\u9020\u8005. */ public interface Builder { /** * \u4ea7\u54c1\u5efa\u9020\u90e8\u52061. */ void buildPart1 (); /** * \u4ea7\u54c1\u5efa\u9020\u90e8\u52062. */ void buildPart2 (); /** * \u5f97\u5230\u5efa\u9020\u7684\u4ea7\u54c1. * * @return \u4ea7\u54c1 */ Product getResult (); } /** * \u5177\u4f53\u7684\u5efa\u9020\u8005\u5b9e\u73b0\u7c7b. */ public class ConcreteBuilder implements Builder { /** \u4ea7\u54c1. */ private Product product = new Product (); /** * \u4ea7\u54c1\u5efa\u9020\u90e8\u52061. */ @Override public void buildPart1 () { product . setPart1 ( \"\u7f16\u53f7\uff1a95757\" ); } /** * \u4ea7\u54c1\u5efa\u9020\u90e8\u52062. */ @Override public void buildPart2 () { product . setPart2 ( \"\u540d\u79f0\uff1a\u5c0f\u673a\u5668\u4eba\" ); } /** * \u5f97\u5230\u5efa\u9020\u7684\u4ea7\u54c1. * * @return \u4ea7\u54c1 */ @Override public Product getResult () { return product ; } } \u6700\u540e\uff0c\u5bfc\u6f14\u8005 Director \u7c7b\uff1a /** * \u5bfc\u6f14\u8005\u7c7b. */ public class Director { /** \u5f53\u524d\u9700\u8981\u7684\u5efa\u9020\u8005\u5bf9\u8c61. */ private Builder builder ; /** * \u6784\u9020\u65b9\u6cd5. * * @param builder */ public Director ( Builder builder ) { this . builder = builder ; } /** * \u4ea7\u54c1\u6784\u9020\u65b9\u6cd5\uff0c\u8d1f\u8d23\u8c03\u7528\u5404\u4e2a\u96f6\u4ef6\u5efa\u9020\u65b9\u6cd5. */ public void construct () { builder . buildPart1 (); builder . buildPart2 (); } } \u4ee5\u4e0b\u662f\u5efa\u9020\u8005\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u5efa\u9020\u8005\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b. */ public class BuilderClient { /** * \u4e3b\u5165\u53e3\u65b9\u6cd5. * * @param args \u6570\u7ec4\u53c2\u6570 */ public static void main ( String [] args ) { Builder builder = new ConcreteBuilder (); Director director = new Director ( builder ); director . construct (); Product product = builder . getResult (); System . out . println ( product . getPart1 ()); System . out . println ( product . getPart2 ()); } } \u4e94\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u62bd\u8c61\u5efa\u9020\u8005\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u4ea7\u54c1\u7684\u521b\u5efa\u65b9\u6cd5\u548c\u8fd4\u56de\u65b9\u6cd5; \u5efa\u9020\u8005\u6a21\u5f0f\u7684\u7ed3\u6784\u4e2d\u8fd8\u5f15\u5165\u4e86\u4e00\u4e2a\u5bfc\u6f14\u8005\u7c7b Director \uff0c\u8be5\u7c7b\u7684\u4f5c\u7528\u4e3b\u8981\u6709\u4e24\u4e2a\uff1a\u4e00\u65b9\u9762\u5b83\u9694\u79bb\u4e86\u5ba2\u6237\u4e0e\u751f\u4ea7\u8fc7\u7a0b\uff1b\u53e6\u4e00\u65b9\u9762\u5b83\u8d1f\u8d23\u63a7\u5236\u4ea7\u54c1\u7684\u751f\u6210\u8fc7\u7a0b\u3002\u5bfc\u6f14\u8005\u9488\u5bf9\u62bd\u8c61\u5efa\u9020\u8005\u7f16\u7a0b\uff0c\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u77e5\u9053\u5177\u4f53\u5efa\u9020\u8005\u7684\u7c7b\u578b\uff0c\u5373\u53ef\u901a\u8fc7\u5bfc\u6f14\u8005\u7c7b\u8c03\u7528\u5efa\u9020\u8005\u7684\u76f8\u5173\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b8c\u6574\u7684\u4ea7\u54c1\u5bf9\u8c61 \u5728\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\uff0c\u65e0\u987b\u5173\u5fc3\u4ea7\u54c1\u5bf9\u8c61\u7684\u5177\u4f53\u7ec4\u88c5\u8fc7\u7a0b\uff0c\u53ea\u9700\u786e\u5b9a\u5177\u4f53\u5efa\u9020\u8005\u7684\u7c7b\u578b\u5373\u53ef\uff0c\u5efa\u9020\u8005\u6a21\u5f0f\u5c06\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u4e0e\u5bf9\u8c61\u7684\u8868\u73b0\u5206\u79bb\u5f00\u6765\uff0c\u8fd9\u6837\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u51fa\u4e0d\u540c\u7684\u8868\u73b0\u3002 1. \u4f18\u70b9 \u00b6 \u5efa\u9020\u8005\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u5728\u5efa\u9020\u8005\u6a21\u5f0f\u4e2d\uff0c \u5ba2\u6237\u7aef\u4e0d\u5fc5\u77e5\u9053\u4ea7\u54c1\u5185\u90e8\u7ec4\u6210\u7684\u7ec6\u8282\uff0c\u5c06\u4ea7\u54c1\u672c\u8eab\u4e0e\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b\u89e3\u8026\uff0c\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u4ea7\u54c1\u5bf9\u8c61\u3002 \u6bcf\u4e00\u4e2a\u5177\u4f53\u5efa\u9020\u8005\u90fd\u76f8\u5bf9\u72ec\u7acb\uff0c\u800c\u4e0e\u5176\u4ed6\u7684\u5177\u4f53\u5efa\u9020\u8005\u65e0\u5173\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u66ff\u6362\u5177\u4f53\u5efa\u9020\u8005\u6216\u589e\u52a0\u65b0\u7684\u5177\u4f53\u5efa\u9020\u8005\uff0c \u7528\u6237\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u5efa\u9020\u8005\u5373\u53ef\u5f97\u5230\u4e0d\u540c\u7684\u4ea7\u54c1\u5bf9\u8c61 \u3002 \u53ef\u4ee5\u66f4\u52a0\u7cbe\u7ec6\u5730\u63a7\u5236\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b \u3002\u5c06\u590d\u6742\u4ea7\u54c1\u7684\u521b\u5efa\u6b65\u9aa4\u5206\u89e3\u5728\u4e0d\u540c\u7684\u65b9\u6cd5\u4e2d\uff0c\u4f7f\u5f97\u521b\u5efa\u8fc7\u7a0b\u66f4\u52a0\u6e05\u6670\uff0c\u4e5f\u66f4\u65b9\u4fbf\u4f7f\u7528\u7a0b\u5e8f\u6765\u63a7\u5236\u521b\u5efa\u8fc7\u7a0b\u3002 \u589e\u52a0\u65b0\u7684\u5177\u4f53\u5efa\u9020\u8005\u65e0\u987b\u4fee\u6539\u539f\u6709\u7c7b\u5e93\u7684\u4ee3\u7801\uff0c\u6307\u6325\u8005\u7c7b\u9488\u5bf9\u62bd\u8c61\u5efa\u9020\u8005\u7c7b\u7f16\u7a0b\uff0c\u7cfb\u7edf\u6269\u5c55\u65b9\u4fbf\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002 2. \u7f3a\u70b9 \u00b6 \u5efa\u9020\u8005\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5efa\u9020\u8005\u6a21\u5f0f\u6240\u521b\u5efa\u7684\u4ea7\u54c1\u4e00\u822c\u5177\u6709\u8f83\u591a\u7684\u5171\u540c\u70b9\uff0c\u5176\u7ec4\u6210\u90e8\u5206\u76f8\u4f3c\uff0c\u5982\u679c\u4ea7\u54c1\u4e4b\u95f4\u7684\u5dee\u5f02\u6027\u5f88\u5927\uff0c\u5219\u4e0d\u9002\u5408\u4f7f\u7528\u5efa\u9020\u8005\u6a21\u5f0f\uff0c\u56e0\u6b64\u5176\u4f7f\u7528\u8303\u56f4\u53d7\u5230\u4e00\u5b9a\u7684\u9650\u5236\u3002 \u5982\u679c\u4ea7\u54c1\u7684\u5185\u90e8\u53d8\u5316\u590d\u6742\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9700\u8981\u5b9a\u4e49\u5f88\u591a\u5177\u4f53\u5efa\u9020\u8005\u7c7b\u6765\u5b9e\u73b0\u8fd9\u79cd\u53d8\u5316\uff0c\u5bfc\u81f4\u7cfb\u7edf\u53d8\u5f97\u5f88\u5e9e\u5927\u3002 3. \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5efa\u9020\u8005\u6a21\u5f0f\uff1a \u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u6709\u590d\u6742\u7684\u5185\u90e8\u7ed3\u6784\uff0c\u8fd9\u4e9b\u4ea7\u54c1\u5bf9\u8c61\u901a\u5e38\u5305\u542b\u591a\u4e2a\u6210\u5458\u5c5e\u6027\u3002 \u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u7684\u5c5e\u6027\u76f8\u4e92\u4f9d\u8d56\uff0c\u9700\u8981\u6307\u5b9a\u5176\u751f\u6210\u987a\u5e8f\u3002 \u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u72ec\u7acb\u4e8e\u521b\u5efa\u8be5\u5bf9\u8c61\u7684\u7c7b\u3002\u5728\u5efa\u9020\u8005\u6a21\u5f0f\u4e2d\u5f15\u5165\u4e86\u6307\u6325\u8005\u7c7b\uff0c\u5c06\u521b\u5efa\u8fc7\u7a0b\u5c01\u88c5\u5728\u6307\u6325\u8005\u7c7b\u4e2d\uff0c\u800c\u4e0d\u5728\u5efa\u9020\u8005\u7c7b\u4e2d\u3002 \u9694\u79bb\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f7f\u7528\uff0c\u5e76\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u4ea7\u54c1\u3002 4. \u5efa\u9020\u8005\u6a21\u5f0f\u4e0e\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u7684\u6bd4\u8f83 \u00b6 \u4e0e\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u76f8\u6bd4\uff0c\u5efa\u9020\u8005\u6a21\u5f0f\u8fd4\u56de\u4e00\u4e2a\u7ec4\u88c5\u597d\u7684\u5b8c\u6574\u4ea7\u54c1\uff0c\u800c\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u8fd4\u56de\u4e00\u7cfb\u5217\u76f8\u5173\u7684\u4ea7\u54c1\uff0c\u8fd9\u4e9b\u4ea7\u54c1\u4f4d\u4e8e\u4e0d\u540c\u7684\u4ea7\u54c1\u7b49\u7ea7\u7ed3\u6784\uff0c\u6784\u6210\u4e86\u4e00\u4e2a\u4ea7\u54c1\u65cf\u3002 \u5728\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u4e2d\uff0c\u5ba2\u6237\u7aef\u5b9e\u4f8b\u5316\u5de5\u5382\u7c7b\uff0c\u7136\u540e\u8c03\u7528\u5de5\u5382\u65b9\u6cd5\u83b7\u53d6\u6240\u9700\u4ea7\u54c1\u5bf9\u8c61\uff0c\u800c\u5728\u5efa\u9020\u8005\u6a21\u5f0f\u4e2d\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0d\u76f4\u63a5\u8c03\u7528\u5efa\u9020\u8005\u7684\u76f8\u5173\u65b9\u6cd5\uff0c\u800c\u662f\u901a\u8fc7\u6307\u6325\u8005\u7c7b\u6765\u6307\u5bfc\u5982\u4f55\u751f\u6210\u5bf9\u8c61\uff0c\u5305\u62ec\u5bf9\u8c61\u7684\u7ec4\u88c5\u8fc7\u7a0b\u548c\u5efa\u9020\u6b65\u9aa4\uff0c\u5b83\u4fa7\u91cd\u4e8e\u4e00\u6b65\u6b65\u6784\u9020\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b8c\u6574\u7684\u5bf9\u8c61\u3002 \u5982\u679c\u5c06\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u770b\u6210\u6c7d\u8f66\u914d\u4ef6\u751f\u4ea7\u5de5\u5382\uff0c\u751f\u4ea7\u4e00\u4e2a\u4ea7\u54c1\u65cf\u7684\u4ea7\u54c1\uff0c\u90a3\u4e48\u5efa\u9020\u8005\u6a21\u5f0f\u5c31\u662f\u4e00\u4e2a\u6c7d\u8f66\u7ec4\u88c5\u5de5\u5382\uff0c\u901a\u8fc7\u5bf9\u90e8\u4ef6\u7684\u7ec4\u88c5\u53ef\u4ee5\u8fd4\u56de\u4e00\u8f86\u5b8c\u6574\u7684\u6c7d\u8f66\u3002 \u516d\u3001\u6a21\u5f0f\u603b\u7ed3 \u00b6 \u5efa\u9020\u8005\u6a21\u5f0f\u5c06\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u4e0e\u5b83\u7684\u8868\u793a\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u8868\u793a\u3002\u5efa\u9020\u8005\u6a21\u5f0f\u662f\u4e00\u6b65\u4e00\u6b65\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u53ea\u901a\u8fc7\u6307\u5b9a\u590d\u6742\u5bf9\u8c61\u7684\u7c7b\u578b\u548c\u5185\u5bb9\u5c31\u53ef\u4ee5\u6784\u5efa\u5b83\u4eec\uff0c\u7528\u6237\u4e0d\u9700\u8981\u77e5\u9053\u5185\u90e8\u7684\u5177\u4f53\u6784\u5efa\u7ec6\u8282\u3002\u5efa\u9020\u8005\u6a21\u5f0f\u5c5e\u4e8e\u5bf9\u8c61\u521b\u5efa\u578b\u6a21\u5f0f\u3002 \u5efa\u9020\u8005\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u5efa\u9020\u8005\u4e3a\u521b\u5efa\u4e00\u4e2a\u4ea7\u54c1\u5bf9\u8c61\u7684\u5404\u4e2a\u90e8\u4ef6\u6307\u5b9a\u62bd\u8c61\u63a5\u53e3\uff1b\u5177\u4f53\u5efa\u9020\u8005\u5b9e\u73b0\u4e86\u62bd\u8c61\u5efa\u9020\u8005\u63a5\u53e3\uff0c\u5b9e\u73b0\u5404\u4e2a\u90e8\u4ef6\u7684\u6784\u9020\u548c\u88c5\u914d\u65b9\u6cd5\uff0c\u5b9a\u4e49\u5e76\u660e\u786e\u5b83\u6240\u521b\u5efa\u7684\u590d\u6742\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u65b9\u6cd5\u8fd4\u56de\u521b\u5efa\u597d\u7684\u590d\u6742\u4ea7\u54c1\u5bf9\u8c61\uff1b\u4ea7\u54c1\u89d2\u8272\u662f\u88ab\u6784\u5efa\u7684\u590d\u6742\u5bf9\u8c61\uff0c\u5305\u542b\u591a\u4e2a\u7ec4\u6210\u90e8\u4ef6\uff1b\u6307\u6325\u8005\u8d1f\u8d23\u5b89\u6392\u590d\u6742\u5bf9\u8c61\u7684\u5efa\u9020\u6b21\u5e8f\uff0c\u6307\u6325\u8005\u4e0e\u62bd\u8c61\u5efa\u9020\u8005\u4e4b\u95f4\u5b58\u5728\u5173\u8054\u5173\u7cfb\uff0c\u53ef\u4ee5\u5728\u5176 construct() \u5efa\u9020\u65b9\u6cd5\u4e2d\u8c03\u7528\u5efa\u9020\u8005\u5bf9\u8c61\u7684\u90e8\u4ef6\u6784\u9020\u4e0e\u88c5\u914d\u65b9\u6cd5\uff0c\u5b8c\u6210\u590d\u6742\u5bf9\u8c61\u7684\u5efa\u9020 \u5728\u5efa\u9020\u8005\u6a21\u5f0f\u7684\u7ed3\u6784\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u5bfc\u6f14\u8005\u7c7b\uff0c\u8be5\u7c7b\u7684\u4f5c\u7528\u4e3b\u8981\u6709\u4e24\u4e2a\uff1a\u4e00\u65b9\u9762\u5b83\u9694\u79bb\u4e86\u5ba2\u6237\u4e0e\u751f\u4ea7\u8fc7\u7a0b\uff1b\u53e6\u4e00\u65b9\u9762\u5b83\u8d1f\u8d23\u63a7\u5236\u4ea7\u54c1\u7684\u751f\u6210\u8fc7\u7a0b\u3002\u6307\u6325\u8005\u9488\u5bf9\u62bd\u8c61\u5efa\u9020\u8005\u7f16\u7a0b\uff0c\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u77e5\u9053\u5177\u4f53\u5efa\u9020\u8005\u7684\u7c7b\u578b\uff0c\u5373\u53ef\u901a\u8fc7\u6307\u6325\u8005\u7c7b\u8c03\u7528\u5efa\u9020\u8005\u7684\u76f8\u5173\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b8c\u6574\u7684\u4ea7\u54c1\u5bf9\u8c61\u3002 \u5efa\u9020\u8005\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u5ba2\u6237\u7aef\u4e0d\u5fc5\u77e5\u9053\u4ea7\u54c1\u5185\u90e8\u7ec4\u6210\u7684\u7ec6\u8282\uff0c\u5c06\u4ea7\u54c1\u672c\u8eab\u4e0e\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b\u89e3\u8026\uff0c\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u4ea7\u54c1\u5bf9\u8c61\uff0c\u6bcf\u4e00\u4e2a\u5177\u4f53\u5efa\u9020\u8005\u90fd\u76f8\u5bf9\u72ec\u7acb\uff0c\u800c\u4e0e\u5176\u4ed6\u7684\u5177\u4f53\u5efa\u9020\u8005\u65e0\u5173\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u66ff\u6362\u5177\u4f53\u5efa\u9020\u8005\u6216\u589e\u52a0\u65b0\u7684\u5177\u4f53\u5efa\u9020\u8005\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\uff0c\u8fd8\u53ef\u4ee5\u66f4\u52a0\u7cbe\u7ec6\u5730\u63a7\u5236\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u7531\u4e8e\u5efa\u9020\u8005\u6a21\u5f0f\u6240\u521b\u5efa\u7684\u4ea7\u54c1\u4e00\u822c\u5177\u6709\u8f83\u591a\u7684\u5171\u540c\u70b9\uff0c\u5176\u7ec4\u6210\u90e8\u5206\u76f8\u4f3c\uff0c\u56e0\u6b64\u5176\u4f7f\u7528\u8303\u56f4\u53d7\u5230\u4e00\u5b9a\u7684\u9650\u5236\uff0c\u5982\u679c\u4ea7\u54c1\u7684\u5185\u90e8\u53d8\u5316\u590d\u6742\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9700\u8981\u5b9a\u4e49\u5f88\u591a\u5177\u4f53\u5efa\u9020\u8005\u7c7b\u6765\u5b9e\u73b0\u8fd9\u79cd\u53d8\u5316\uff0c\u5bfc\u81f4\u7cfb\u7edf\u53d8\u5f97\u5f88\u5e9e\u5927\u3002 \u5efa\u9020\u8005\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u6709\u590d\u6742\u7684\u5185\u90e8\u7ed3\u6784\uff0c\u8fd9\u4e9b\u4ea7\u54c1\u5bf9\u8c61\u901a\u5e38\u5305\u542b\u591a\u4e2a\u6210\u5458\u5c5e\u6027\uff1b\u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u7684\u5c5e\u6027\u76f8\u4e92\u4f9d\u8d56\uff0c\u9700\u8981\u6307\u5b9a\u5176\u751f\u6210\u987a\u5e8f\uff1b\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u72ec\u7acb\u4e8e\u521b\u5efa\u8be5\u5bf9\u8c61\u7684\u7c7b\uff1b\u9694\u79bb\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f7f\u7528\uff0c\u5e76\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7c7b\u578b\u7684\u4ea7\u54c1\u3002","title":"\u5efa\u9020\u8005\u6a21\u5f0f\uff08Builder Pattern\uff09"},{"location":"Design-Patterns/4-BuilderPattern/#_1","text":"\u65e0\u8bba\u662f\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\u8fd8\u662f\u5728\u8f6f\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u90fd\u5b58\u5728\u4e00\u4e9b\u590d\u6742\u7684\u5bf9\u8c61\uff0c\u5b83\u4eec\u62e5\u6709\u591a\u4e2a\u7ec4\u6210\u90e8\u5206\uff0c\u5982\u6c7d\u8f66\uff0c\u5b83\u5305\u62ec\u8f66\u8f6e\u3001\u65b9\u5411\u76d8\u3001\u53d1\u52a8\u673a\u7b49\u5404\u79cd\u90e8\u4ef6\u3002\u800c\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u6237\u800c\u8a00\uff0c\u65e0\u987b\u77e5\u9053\u8fd9\u4e9b\u90e8\u4ef6\u7684\u88c5\u914d\u7ec6\u8282\uff0c\u4e5f\u51e0\u4e4e\u4e0d\u4f1a\u4f7f\u7528\u5355\u72ec\u67d0\u4e2a\u90e8\u4ef6\uff0c\u800c\u662f\u4f7f\u7528\u4e00\u8f86\u5b8c\u6574\u7684\u6c7d\u8f66\uff0c\u53ef\u4ee5\u901a\u8fc7\u5efa\u9020\u8005\u6a21\u5f0f\u5bf9\u5176\u8fdb\u884c\u8bbe\u8ba1\u4e0e\u63cf\u8ff0\uff0c\u5efa\u9020\u8005\u6a21\u5f0f\u53ef\u4ee5\u5c06\u90e8\u4ef6\u548c\u5176\u7ec4\u88c5\u8fc7\u7a0b\u5206\u5f00\uff0c\u4e00\u6b65\u4e00\u6b65\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\u3002\u7528\u6237\u53ea\u9700\u8981\u6307\u5b9a\u590d\u6742\u5bf9\u8c61\u7684\u7c7b\u578b\u5c31\u53ef\u4ee5\u5f97\u5230\u8be5\u5bf9\u8c61\uff0c\u800c\u65e0\u987b\u77e5\u9053\u5176\u5185\u90e8\u7684\u5177\u4f53\u6784\u9020\u7ec6\u8282\u3002 \u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\uff0c\u4e5f\u5b58\u5728\u5927\u91cf\u7c7b\u4f3c\u6c7d\u8f66\u4e00\u6837\u7684\u590d\u6742\u5bf9\u8c61\uff0c\u5b83\u4eec\u62e5\u6709\u4e00\u7cfb\u5217\u6210\u5458\u5c5e\u6027\uff0c\u8fd9\u4e9b\u6210\u5458\u5c5e\u6027\u4e2d\u6709\u4e9b\u662f\u5f15\u7528\u7c7b\u578b\u7684\u6210\u5458\u5bf9\u8c61\u3002\u800c\u4e14\u5728\u8fd9\u4e9b\u590d\u6742\u5bf9\u8c61\u4e2d\uff0c\u8fd8\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u9650\u5236\u6761\u4ef6\uff0c\u5982\u67d0\u4e9b\u5c5e\u6027\u6ca1\u6709\u8d4b\u503c\u5219\u590d\u6742\u5bf9\u8c61\u4e0d\u80fd\u4f5c\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684\u4ea7\u54c1\u4f7f\u7528\uff1b\u6709\u4e9b\u5c5e\u6027\u7684\u8d4b\u503c\u5fc5\u987b\u6309\u7167\u67d0\u4e2a\u987a\u5e8f\uff0c\u4e00\u4e2a\u5c5e\u6027\u6ca1\u6709\u8d4b\u503c\u4e4b\u524d\uff0c\u53e6\u4e00\u4e2a\u5c5e\u6027\u53ef\u80fd\u65e0\u6cd5\u8d4b\u503c\u7b49\u3002 \u590d\u6742\u5bf9\u8c61\u76f8\u5f53\u4e8e\u4e00\u8f86\u6709\u5f85\u5efa\u9020\u7684\u6c7d\u8f66\uff0c\u800c\u5bf9\u8c61\u7684\u5c5e\u6027\u76f8\u5f53\u4e8e\u6c7d\u8f66\u7684\u90e8\u4ef6\uff0c\u5efa\u9020\u4ea7\u54c1\u7684\u8fc7\u7a0b\u5c31\u76f8\u5f53\u4e8e\u7ec4\u5408\u90e8\u4ef6\u7684\u8fc7\u7a0b\u3002\u7531\u4e8e\u7ec4\u5408\u90e8\u4ef6\u7684\u8fc7\u7a0b\u5f88\u590d\u6742\uff0c\u56e0\u6b64\uff0c\u8fd9\u4e9b\u90e8\u4ef6\u7684\u7ec4\u5408\u8fc7\u7a0b\u5f80\u5f80\u88ab\u201c\u5916\u90e8\u5316\u201d\u5230\u4e00\u4e2a\u79f0\u4f5c\u5efa\u9020\u8005\u7684\u5bf9\u8c61\u91cc\uff0c\u5efa\u9020\u8005\u8fd4\u8fd8\u7ed9\u5ba2\u6237\u7aef\u7684\u662f\u4e00\u4e2a\u5df2\u7ecf\u5efa\u9020\u5b8c\u6bd5\u7684\u5b8c\u6574\u4ea7\u54c1\u5bf9\u8c61\uff0c\u800c\u7528\u6237\u65e0\u987b\u5173\u5fc3\u8be5\u5bf9\u8c61\u6240\u5305\u542b\u7684\u5c5e\u6027\u4ee5\u53ca\u5b83\u4eec\u7684\u7ec4\u88c5\u65b9\u5f0f\uff0c\u8fd9\u5c31\u662f\u5efa\u9020\u8005\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/4-BuilderPattern/#_2","text":"\u9020\u8005\u6a21\u5f0f( Builder Pattern )\uff1a\u5c06\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u4e0e\u5b83\u7684\u8868\u793a\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u8868\u793a\u3002\u5efa\u9020\u8005\u6a21\u5f0f\u5c5e\u4e8e \u5bf9\u8c61\u521b\u5efa\u578b\u6a21\u5f0f \u3002\u5efa\u9020\u8005\u6a21\u5f0f\u53c8\u53ef\u4ee5\u79f0\u4e3a \u751f\u6210\u5668\u6a21\u5f0f \u3002 \u5efa\u9020\u8005\u6a21\u5f0f\u662f\u4e00\u6b65\u4e00\u6b65\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u53ea\u901a\u8fc7\u6307\u5b9a\u590d\u6742\u5bf9\u8c61\u7684\u7c7b\u578b\u548c\u5185\u5bb9\u5c31\u53ef\u4ee5\u6784\u5efa\u5b83\u4eec\uff0c\u7528\u6237\u4e0d\u9700\u8981\u77e5\u9053\u5185\u90e8\u7684\u5177\u4f53\u6784\u5efa\u7ec6\u8282\u3002","title":"\u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/4-BuilderPattern/#_3","text":"","title":"\u4e09\u3001\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/4-BuilderPattern/#1","text":"\u5efa\u9020\u8005\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Builder \uff1a\u62bd\u8c61\u5efa\u9020\u8005 ConcreteBuilder \uff1a\u5177\u4f53\u5efa\u9020\u8005 Director \uff1a\u5bfc\u6f14\u8005 Product \uff1a\u4ea7\u54c1\u89d2\u8272","title":"1. \u89d2\u8272\u7ec4\u6210"},{"location":"Design-Patterns/4-BuilderPattern/#2","text":"","title":"2. \u7ed3\u6784\u56fe"},{"location":"Design-Patterns/4-BuilderPattern/#_4","text":"\u9996\u5148\uff0c\u662f\u4ea7\u54c1\u7c7b\uff1a /** * \u4ea7\u54c1\u7c7b. */ public class Product { private String part1 ; private String part2 ; /* getter \u548c setter\u65b9\u6cd5. */ public String getPart1 () { return part1 ; } public void setPart1 ( String part1 ) { this . part1 = part1 ; } public String getPart2 () { return part2 ; } public void setPart2 ( String part2 ) { this . part2 = part2 ; } } \u5176\u5b9e\uff0c\u662f\u62bd\u8c61\u7684\u5efa\u9020\u8005 Builder \u63a5\u53e3\u548c\u5177\u4f53\u7684\u5efa\u9020\u8005 ConcreteBuilder \u7c7b\uff1a /** * \u62bd\u8c61\u7684\u5efa\u9020\u8005. */ public interface Builder { /** * \u4ea7\u54c1\u5efa\u9020\u90e8\u52061. */ void buildPart1 (); /** * \u4ea7\u54c1\u5efa\u9020\u90e8\u52062. */ void buildPart2 (); /** * \u5f97\u5230\u5efa\u9020\u7684\u4ea7\u54c1. * * @return \u4ea7\u54c1 */ Product getResult (); } /** * \u5177\u4f53\u7684\u5efa\u9020\u8005\u5b9e\u73b0\u7c7b. */ public class ConcreteBuilder implements Builder { /** \u4ea7\u54c1. */ private Product product = new Product (); /** * \u4ea7\u54c1\u5efa\u9020\u90e8\u52061. */ @Override public void buildPart1 () { product . setPart1 ( \"\u7f16\u53f7\uff1a95757\" ); } /** * \u4ea7\u54c1\u5efa\u9020\u90e8\u52062. */ @Override public void buildPart2 () { product . setPart2 ( \"\u540d\u79f0\uff1a\u5c0f\u673a\u5668\u4eba\" ); } /** * \u5f97\u5230\u5efa\u9020\u7684\u4ea7\u54c1. * * @return \u4ea7\u54c1 */ @Override public Product getResult () { return product ; } } \u6700\u540e\uff0c\u5bfc\u6f14\u8005 Director \u7c7b\uff1a /** * \u5bfc\u6f14\u8005\u7c7b. */ public class Director { /** \u5f53\u524d\u9700\u8981\u7684\u5efa\u9020\u8005\u5bf9\u8c61. */ private Builder builder ; /** * \u6784\u9020\u65b9\u6cd5. * * @param builder */ public Director ( Builder builder ) { this . builder = builder ; } /** * \u4ea7\u54c1\u6784\u9020\u65b9\u6cd5\uff0c\u8d1f\u8d23\u8c03\u7528\u5404\u4e2a\u96f6\u4ef6\u5efa\u9020\u65b9\u6cd5. */ public void construct () { builder . buildPart1 (); builder . buildPart2 (); } } \u4ee5\u4e0b\u662f\u5efa\u9020\u8005\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u5efa\u9020\u8005\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b. */ public class BuilderClient { /** * \u4e3b\u5165\u53e3\u65b9\u6cd5. * * @param args \u6570\u7ec4\u53c2\u6570 */ public static void main ( String [] args ) { Builder builder = new ConcreteBuilder (); Director director = new Director ( builder ); director . construct (); Product product = builder . getResult (); System . out . println ( product . getPart1 ()); System . out . println ( product . getPart2 ()); } }","title":"\u56db\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/4-BuilderPattern/#_5","text":"\u62bd\u8c61\u5efa\u9020\u8005\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u4ea7\u54c1\u7684\u521b\u5efa\u65b9\u6cd5\u548c\u8fd4\u56de\u65b9\u6cd5; \u5efa\u9020\u8005\u6a21\u5f0f\u7684\u7ed3\u6784\u4e2d\u8fd8\u5f15\u5165\u4e86\u4e00\u4e2a\u5bfc\u6f14\u8005\u7c7b Director \uff0c\u8be5\u7c7b\u7684\u4f5c\u7528\u4e3b\u8981\u6709\u4e24\u4e2a\uff1a\u4e00\u65b9\u9762\u5b83\u9694\u79bb\u4e86\u5ba2\u6237\u4e0e\u751f\u4ea7\u8fc7\u7a0b\uff1b\u53e6\u4e00\u65b9\u9762\u5b83\u8d1f\u8d23\u63a7\u5236\u4ea7\u54c1\u7684\u751f\u6210\u8fc7\u7a0b\u3002\u5bfc\u6f14\u8005\u9488\u5bf9\u62bd\u8c61\u5efa\u9020\u8005\u7f16\u7a0b\uff0c\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u77e5\u9053\u5177\u4f53\u5efa\u9020\u8005\u7684\u7c7b\u578b\uff0c\u5373\u53ef\u901a\u8fc7\u5bfc\u6f14\u8005\u7c7b\u8c03\u7528\u5efa\u9020\u8005\u7684\u76f8\u5173\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b8c\u6574\u7684\u4ea7\u54c1\u5bf9\u8c61 \u5728\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\uff0c\u65e0\u987b\u5173\u5fc3\u4ea7\u54c1\u5bf9\u8c61\u7684\u5177\u4f53\u7ec4\u88c5\u8fc7\u7a0b\uff0c\u53ea\u9700\u786e\u5b9a\u5177\u4f53\u5efa\u9020\u8005\u7684\u7c7b\u578b\u5373\u53ef\uff0c\u5efa\u9020\u8005\u6a21\u5f0f\u5c06\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u4e0e\u5bf9\u8c61\u7684\u8868\u73b0\u5206\u79bb\u5f00\u6765\uff0c\u8fd9\u6837\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u51fa\u4e0d\u540c\u7684\u8868\u73b0\u3002","title":"\u4e94\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/4-BuilderPattern/#1_1","text":"\u5efa\u9020\u8005\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u5728\u5efa\u9020\u8005\u6a21\u5f0f\u4e2d\uff0c \u5ba2\u6237\u7aef\u4e0d\u5fc5\u77e5\u9053\u4ea7\u54c1\u5185\u90e8\u7ec4\u6210\u7684\u7ec6\u8282\uff0c\u5c06\u4ea7\u54c1\u672c\u8eab\u4e0e\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b\u89e3\u8026\uff0c\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u4ea7\u54c1\u5bf9\u8c61\u3002 \u6bcf\u4e00\u4e2a\u5177\u4f53\u5efa\u9020\u8005\u90fd\u76f8\u5bf9\u72ec\u7acb\uff0c\u800c\u4e0e\u5176\u4ed6\u7684\u5177\u4f53\u5efa\u9020\u8005\u65e0\u5173\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u66ff\u6362\u5177\u4f53\u5efa\u9020\u8005\u6216\u589e\u52a0\u65b0\u7684\u5177\u4f53\u5efa\u9020\u8005\uff0c \u7528\u6237\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u5efa\u9020\u8005\u5373\u53ef\u5f97\u5230\u4e0d\u540c\u7684\u4ea7\u54c1\u5bf9\u8c61 \u3002 \u53ef\u4ee5\u66f4\u52a0\u7cbe\u7ec6\u5730\u63a7\u5236\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b \u3002\u5c06\u590d\u6742\u4ea7\u54c1\u7684\u521b\u5efa\u6b65\u9aa4\u5206\u89e3\u5728\u4e0d\u540c\u7684\u65b9\u6cd5\u4e2d\uff0c\u4f7f\u5f97\u521b\u5efa\u8fc7\u7a0b\u66f4\u52a0\u6e05\u6670\uff0c\u4e5f\u66f4\u65b9\u4fbf\u4f7f\u7528\u7a0b\u5e8f\u6765\u63a7\u5236\u521b\u5efa\u8fc7\u7a0b\u3002 \u589e\u52a0\u65b0\u7684\u5177\u4f53\u5efa\u9020\u8005\u65e0\u987b\u4fee\u6539\u539f\u6709\u7c7b\u5e93\u7684\u4ee3\u7801\uff0c\u6307\u6325\u8005\u7c7b\u9488\u5bf9\u62bd\u8c61\u5efa\u9020\u8005\u7c7b\u7f16\u7a0b\uff0c\u7cfb\u7edf\u6269\u5c55\u65b9\u4fbf\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002","title":"1. \u4f18\u70b9"},{"location":"Design-Patterns/4-BuilderPattern/#2_1","text":"\u5efa\u9020\u8005\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5efa\u9020\u8005\u6a21\u5f0f\u6240\u521b\u5efa\u7684\u4ea7\u54c1\u4e00\u822c\u5177\u6709\u8f83\u591a\u7684\u5171\u540c\u70b9\uff0c\u5176\u7ec4\u6210\u90e8\u5206\u76f8\u4f3c\uff0c\u5982\u679c\u4ea7\u54c1\u4e4b\u95f4\u7684\u5dee\u5f02\u6027\u5f88\u5927\uff0c\u5219\u4e0d\u9002\u5408\u4f7f\u7528\u5efa\u9020\u8005\u6a21\u5f0f\uff0c\u56e0\u6b64\u5176\u4f7f\u7528\u8303\u56f4\u53d7\u5230\u4e00\u5b9a\u7684\u9650\u5236\u3002 \u5982\u679c\u4ea7\u54c1\u7684\u5185\u90e8\u53d8\u5316\u590d\u6742\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9700\u8981\u5b9a\u4e49\u5f88\u591a\u5177\u4f53\u5efa\u9020\u8005\u7c7b\u6765\u5b9e\u73b0\u8fd9\u79cd\u53d8\u5316\uff0c\u5bfc\u81f4\u7cfb\u7edf\u53d8\u5f97\u5f88\u5e9e\u5927\u3002","title":"2. \u7f3a\u70b9"},{"location":"Design-Patterns/4-BuilderPattern/#3","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u5efa\u9020\u8005\u6a21\u5f0f\uff1a \u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u6709\u590d\u6742\u7684\u5185\u90e8\u7ed3\u6784\uff0c\u8fd9\u4e9b\u4ea7\u54c1\u5bf9\u8c61\u901a\u5e38\u5305\u542b\u591a\u4e2a\u6210\u5458\u5c5e\u6027\u3002 \u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u7684\u5c5e\u6027\u76f8\u4e92\u4f9d\u8d56\uff0c\u9700\u8981\u6307\u5b9a\u5176\u751f\u6210\u987a\u5e8f\u3002 \u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u72ec\u7acb\u4e8e\u521b\u5efa\u8be5\u5bf9\u8c61\u7684\u7c7b\u3002\u5728\u5efa\u9020\u8005\u6a21\u5f0f\u4e2d\u5f15\u5165\u4e86\u6307\u6325\u8005\u7c7b\uff0c\u5c06\u521b\u5efa\u8fc7\u7a0b\u5c01\u88c5\u5728\u6307\u6325\u8005\u7c7b\u4e2d\uff0c\u800c\u4e0d\u5728\u5efa\u9020\u8005\u7c7b\u4e2d\u3002 \u9694\u79bb\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f7f\u7528\uff0c\u5e76\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u4ea7\u54c1\u3002","title":"3. \u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/4-BuilderPattern/#4","text":"\u4e0e\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u76f8\u6bd4\uff0c\u5efa\u9020\u8005\u6a21\u5f0f\u8fd4\u56de\u4e00\u4e2a\u7ec4\u88c5\u597d\u7684\u5b8c\u6574\u4ea7\u54c1\uff0c\u800c\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u8fd4\u56de\u4e00\u7cfb\u5217\u76f8\u5173\u7684\u4ea7\u54c1\uff0c\u8fd9\u4e9b\u4ea7\u54c1\u4f4d\u4e8e\u4e0d\u540c\u7684\u4ea7\u54c1\u7b49\u7ea7\u7ed3\u6784\uff0c\u6784\u6210\u4e86\u4e00\u4e2a\u4ea7\u54c1\u65cf\u3002 \u5728\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u4e2d\uff0c\u5ba2\u6237\u7aef\u5b9e\u4f8b\u5316\u5de5\u5382\u7c7b\uff0c\u7136\u540e\u8c03\u7528\u5de5\u5382\u65b9\u6cd5\u83b7\u53d6\u6240\u9700\u4ea7\u54c1\u5bf9\u8c61\uff0c\u800c\u5728\u5efa\u9020\u8005\u6a21\u5f0f\u4e2d\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0d\u76f4\u63a5\u8c03\u7528\u5efa\u9020\u8005\u7684\u76f8\u5173\u65b9\u6cd5\uff0c\u800c\u662f\u901a\u8fc7\u6307\u6325\u8005\u7c7b\u6765\u6307\u5bfc\u5982\u4f55\u751f\u6210\u5bf9\u8c61\uff0c\u5305\u62ec\u5bf9\u8c61\u7684\u7ec4\u88c5\u8fc7\u7a0b\u548c\u5efa\u9020\u6b65\u9aa4\uff0c\u5b83\u4fa7\u91cd\u4e8e\u4e00\u6b65\u6b65\u6784\u9020\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b8c\u6574\u7684\u5bf9\u8c61\u3002 \u5982\u679c\u5c06\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u770b\u6210\u6c7d\u8f66\u914d\u4ef6\u751f\u4ea7\u5de5\u5382\uff0c\u751f\u4ea7\u4e00\u4e2a\u4ea7\u54c1\u65cf\u7684\u4ea7\u54c1\uff0c\u90a3\u4e48\u5efa\u9020\u8005\u6a21\u5f0f\u5c31\u662f\u4e00\u4e2a\u6c7d\u8f66\u7ec4\u88c5\u5de5\u5382\uff0c\u901a\u8fc7\u5bf9\u90e8\u4ef6\u7684\u7ec4\u88c5\u53ef\u4ee5\u8fd4\u56de\u4e00\u8f86\u5b8c\u6574\u7684\u6c7d\u8f66\u3002","title":"4. \u5efa\u9020\u8005\u6a21\u5f0f\u4e0e\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u7684\u6bd4\u8f83"},{"location":"Design-Patterns/4-BuilderPattern/#_6","text":"\u5efa\u9020\u8005\u6a21\u5f0f\u5c06\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa\u4e0e\u5b83\u7684\u8868\u793a\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u8868\u793a\u3002\u5efa\u9020\u8005\u6a21\u5f0f\u662f\u4e00\u6b65\u4e00\u6b65\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u7684\u5bf9\u8c61\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u53ea\u901a\u8fc7\u6307\u5b9a\u590d\u6742\u5bf9\u8c61\u7684\u7c7b\u578b\u548c\u5185\u5bb9\u5c31\u53ef\u4ee5\u6784\u5efa\u5b83\u4eec\uff0c\u7528\u6237\u4e0d\u9700\u8981\u77e5\u9053\u5185\u90e8\u7684\u5177\u4f53\u6784\u5efa\u7ec6\u8282\u3002\u5efa\u9020\u8005\u6a21\u5f0f\u5c5e\u4e8e\u5bf9\u8c61\u521b\u5efa\u578b\u6a21\u5f0f\u3002 \u5efa\u9020\u8005\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u5efa\u9020\u8005\u4e3a\u521b\u5efa\u4e00\u4e2a\u4ea7\u54c1\u5bf9\u8c61\u7684\u5404\u4e2a\u90e8\u4ef6\u6307\u5b9a\u62bd\u8c61\u63a5\u53e3\uff1b\u5177\u4f53\u5efa\u9020\u8005\u5b9e\u73b0\u4e86\u62bd\u8c61\u5efa\u9020\u8005\u63a5\u53e3\uff0c\u5b9e\u73b0\u5404\u4e2a\u90e8\u4ef6\u7684\u6784\u9020\u548c\u88c5\u914d\u65b9\u6cd5\uff0c\u5b9a\u4e49\u5e76\u660e\u786e\u5b83\u6240\u521b\u5efa\u7684\u590d\u6742\u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u65b9\u6cd5\u8fd4\u56de\u521b\u5efa\u597d\u7684\u590d\u6742\u4ea7\u54c1\u5bf9\u8c61\uff1b\u4ea7\u54c1\u89d2\u8272\u662f\u88ab\u6784\u5efa\u7684\u590d\u6742\u5bf9\u8c61\uff0c\u5305\u542b\u591a\u4e2a\u7ec4\u6210\u90e8\u4ef6\uff1b\u6307\u6325\u8005\u8d1f\u8d23\u5b89\u6392\u590d\u6742\u5bf9\u8c61\u7684\u5efa\u9020\u6b21\u5e8f\uff0c\u6307\u6325\u8005\u4e0e\u62bd\u8c61\u5efa\u9020\u8005\u4e4b\u95f4\u5b58\u5728\u5173\u8054\u5173\u7cfb\uff0c\u53ef\u4ee5\u5728\u5176 construct() \u5efa\u9020\u65b9\u6cd5\u4e2d\u8c03\u7528\u5efa\u9020\u8005\u5bf9\u8c61\u7684\u90e8\u4ef6\u6784\u9020\u4e0e\u88c5\u914d\u65b9\u6cd5\uff0c\u5b8c\u6210\u590d\u6742\u5bf9\u8c61\u7684\u5efa\u9020 \u5728\u5efa\u9020\u8005\u6a21\u5f0f\u7684\u7ed3\u6784\u4e2d\u5f15\u5165\u4e86\u4e00\u4e2a\u5bfc\u6f14\u8005\u7c7b\uff0c\u8be5\u7c7b\u7684\u4f5c\u7528\u4e3b\u8981\u6709\u4e24\u4e2a\uff1a\u4e00\u65b9\u9762\u5b83\u9694\u79bb\u4e86\u5ba2\u6237\u4e0e\u751f\u4ea7\u8fc7\u7a0b\uff1b\u53e6\u4e00\u65b9\u9762\u5b83\u8d1f\u8d23\u63a7\u5236\u4ea7\u54c1\u7684\u751f\u6210\u8fc7\u7a0b\u3002\u6307\u6325\u8005\u9488\u5bf9\u62bd\u8c61\u5efa\u9020\u8005\u7f16\u7a0b\uff0c\u5ba2\u6237\u7aef\u53ea\u9700\u8981\u77e5\u9053\u5177\u4f53\u5efa\u9020\u8005\u7684\u7c7b\u578b\uff0c\u5373\u53ef\u901a\u8fc7\u6307\u6325\u8005\u7c7b\u8c03\u7528\u5efa\u9020\u8005\u7684\u76f8\u5173\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b8c\u6574\u7684\u4ea7\u54c1\u5bf9\u8c61\u3002 \u5efa\u9020\u8005\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u5ba2\u6237\u7aef\u4e0d\u5fc5\u77e5\u9053\u4ea7\u54c1\u5185\u90e8\u7ec4\u6210\u7684\u7ec6\u8282\uff0c\u5c06\u4ea7\u54c1\u672c\u8eab\u4e0e\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b\u89e3\u8026\uff0c\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u4ea7\u54c1\u5bf9\u8c61\uff0c\u6bcf\u4e00\u4e2a\u5177\u4f53\u5efa\u9020\u8005\u90fd\u76f8\u5bf9\u72ec\u7acb\uff0c\u800c\u4e0e\u5176\u4ed6\u7684\u5177\u4f53\u5efa\u9020\u8005\u65e0\u5173\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u66ff\u6362\u5177\u4f53\u5efa\u9020\u8005\u6216\u589e\u52a0\u65b0\u7684\u5177\u4f53\u5efa\u9020\u8005\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\uff0c\u8fd8\u53ef\u4ee5\u66f4\u52a0\u7cbe\u7ec6\u5730\u63a7\u5236\u4ea7\u54c1\u7684\u521b\u5efa\u8fc7\u7a0b\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u7531\u4e8e\u5efa\u9020\u8005\u6a21\u5f0f\u6240\u521b\u5efa\u7684\u4ea7\u54c1\u4e00\u822c\u5177\u6709\u8f83\u591a\u7684\u5171\u540c\u70b9\uff0c\u5176\u7ec4\u6210\u90e8\u5206\u76f8\u4f3c\uff0c\u56e0\u6b64\u5176\u4f7f\u7528\u8303\u56f4\u53d7\u5230\u4e00\u5b9a\u7684\u9650\u5236\uff0c\u5982\u679c\u4ea7\u54c1\u7684\u5185\u90e8\u53d8\u5316\u590d\u6742\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9700\u8981\u5b9a\u4e49\u5f88\u591a\u5177\u4f53\u5efa\u9020\u8005\u7c7b\u6765\u5b9e\u73b0\u8fd9\u79cd\u53d8\u5316\uff0c\u5bfc\u81f4\u7cfb\u7edf\u53d8\u5f97\u5f88\u5e9e\u5927\u3002 \u5efa\u9020\u8005\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u6709\u590d\u6742\u7684\u5185\u90e8\u7ed3\u6784\uff0c\u8fd9\u4e9b\u4ea7\u54c1\u5bf9\u8c61\u901a\u5e38\u5305\u542b\u591a\u4e2a\u6210\u5458\u5c5e\u6027\uff1b\u9700\u8981\u751f\u6210\u7684\u4ea7\u54c1\u5bf9\u8c61\u7684\u5c5e\u6027\u76f8\u4e92\u4f9d\u8d56\uff0c\u9700\u8981\u6307\u5b9a\u5176\u751f\u6210\u987a\u5e8f\uff1b\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u72ec\u7acb\u4e8e\u521b\u5efa\u8be5\u5bf9\u8c61\u7684\u7c7b\uff1b\u9694\u79bb\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f7f\u7528\uff0c\u5e76\u4f7f\u5f97\u76f8\u540c\u7684\u521b\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7c7b\u578b\u7684\u4ea7\u54c1\u3002","title":"\u516d\u3001\u6a21\u5f0f\u603b\u7ed3"},{"location":"Design-Patterns/5-MediatorPattern/","text":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a \u00b6 \u5728\u7528\u6237\u4e0e\u7528\u6237\u76f4\u63a5\u804a\u5929\u7684\u8bbe\u8ba1\u65b9\u6848\u4e2d\uff0c\u7528\u6237\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u5f88\u5f3a\u7684\u5173\u8054\u6027\uff0c\u5c06\u5bfc\u81f4\u7cfb\u7edf\u51fa\u73b0\u5982\u4e0b\u95ee\u9898\uff1a \u7cfb\u7edf\u7ed3\u6784\u590d\u6742\uff1a\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u5927\u91cf\u7684\u76f8\u4e92\u5173\u8054\u548c\u8c03\u7528\uff0c\u82e5\u6709\u4e00\u4e2a\u5bf9\u8c61\u53d1\u751f\u53d8\u5316\uff0c\u5219\u9700\u8981\u8ddf\u8e2a\u548c\u8be5\u5bf9\u8c61\u5173\u8054\u7684\u5176\u4ed6\u6240\u6709\u5bf9\u8c61\uff0c\u5e76\u8fdb\u884c\u9002\u5f53\u5904\u7406\u3002 \u5bf9\u8c61\u53ef\u91cd\u7528\u6027\u5dee\uff1a\u7531\u4e8e\u4e00\u4e2a\u5bf9\u8c61\u548c\u5176\u4ed6\u5bf9\u8c61\u5177\u6709\u5f88\u5f3a\u7684\u5173\u8054\uff0c\u82e5\u6ca1\u6709\u5176\u4ed6\u5bf9\u8c61\u7684\u652f\u6301\uff0c\u4e00\u4e2a\u5bf9\u8c61\u5f88\u96be\u88ab\u53e6\u4e00\u4e2a\u7cfb\u7edf\u6216\u6a21\u5757\u91cd\u7528\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u8868\u73b0\u51fa\u6765\u66f4\u50cf\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u6574\u4f53\uff0c\u804c\u8d23\u8f83\u4e3a\u6df7\u4e71\u3002 \u7cfb\u7edf\u6269\u5c55\u6027\u4f4e\uff1a\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u9700\u8981\u5728\u539f\u6709\u76f8\u5173\u5bf9\u8c61\u4e0a\u589e\u52a0\u5f15\u7528\uff0c\u589e\u52a0\u65b0\u7684\u5f15\u7528\u5173\u7cfb\u4e5f\u9700\u8981\u8c03\u6574\u539f\u6709\u5bf9\u8c61\uff0c\u7cfb\u7edf\u8026\u5408\u5ea6\u5f88\u9ad8\uff0c\u5bf9\u8c61\u64cd\u4f5c\u5f88\u4e0d\u7075\u6d3b\uff0c\u6269\u5c55\u6027\u5dee\u3002 \u5728\u9762\u5411\u5bf9\u8c61\u7684\u8f6f\u4ef6\u8bbe\u8ba1\u4e0e\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6839\u636e\u201c\u5355\u4e00\u804c\u8d23\u539f\u5219\u201d\uff0c\u6211\u4eec\u5e94\u8be5\u5c3d\u91cf\u5c06\u5bf9\u8c61\u7ec6\u5316\uff0c\u4f7f\u5176\u53ea\u8d1f\u8d23\u6216\u5448\u73b0\u5355\u4e00\u7684\u804c\u8d23\u3002 \u5bf9\u4e8e\u4e00\u4e2a\u6a21\u5757\uff0c\u53ef\u80fd\u7531\u5f88\u591a\u5bf9\u8c61\u6784\u6210\uff0c\u800c\u4e14\u8fd9\u4e9b\u5bf9\u8c61\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u76f8\u4e92\u7684\u5f15\u7528\uff0c\u4e3a\u4e86\u51cf\u5c11\u5bf9\u8c61\u4e24\u4e24\u4e4b\u95f4\u590d\u6742\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u4f7f\u4e4b\u6210\u4e3a\u4e00\u4e2a\u677e\u8026\u5408\u7684\u7cfb\u7edf\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4e2d\u4ecb\u8005\u6a21\u5f0f\uff0c\u8fd9\u5c31\u662f\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002 \u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u4e2d\u4ecb\u8005\u6a21\u5f0f( Mediator Pattern ) \uff1a\u7528\u4e00\u4e2a\u4e2d\u4ecb\u5bf9\u8c61\u6765\u5c01\u88c5\u4e00\u7cfb\u5217\u7684\u5bf9\u8c61\u4ea4\u4e92\uff0c\u4e2d\u4ecb\u8005\u4f7f\u5404\u5bf9\u8c61\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u76f8\u4e92\u5f15\u7528\uff0c\u4ece\u800c\u4f7f\u5176\u8026\u5408\u677e\u6563\uff0c\u800c\u4e14\u53ef\u4ee5\u72ec\u7acb\u5730\u6539\u53d8\u5b83\u4eec\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002\u4e2d\u4ecb\u8005\u6a21\u5f0f\u53c8\u79f0\u4e3a \u8c03\u505c\u8005\u6a21\u5f0f \uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u4e09\u3001\u6a21\u5f0f\u7ed3\u6784 \u00b6 1. \u89d2\u8272\u7ec4\u6210 \u00b6 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Mediator : \u62bd\u8c61\u4e2d\u4ecb\u8005 ConcreteMediator : \u5177\u4f53\u4e2d\u4ecb\u8005 Colleague : \u62bd\u8c61\u540c\u4e8b\u7c7b ConcreteColleague : \u5177\u4f53\u540c\u4e8b\u7c7b 2. \u7ed3\u6784\u56fe \u00b6 \u56db\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684 Mediator \u7c7b\u548c\u5177\u4f53\u7684 ConcreteMediator \u7c7b\uff1a /** * \u901a\u7528\u62bd\u8c61\u4e2d\u4ecb\u8005\u7c7b. */ public abstract class Mediator { /** \u5b9a\u4e49\u540c\u4e8b\u7c7b1. */ protected ConcreteColleague1 colleague1 ; /** \u5b9a\u4e49\u540c\u4e8b\u7c7b2. */ protected ConcreteColleague2 colleague2 ; /* getter \u548c setter \u65b9\u6cd5 */ public ConcreteColleague1 getColleague1 () { return colleague1 ; } public void setColleague1 ( ConcreteColleague1 colleague1 ) { this . colleague1 = colleague1 ; } public ConcreteColleague2 getColleague2 () { return colleague2 ; } public void setColleague2 ( ConcreteColleague2 colleague2 ) { this . colleague2 = colleague2 ; } /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u62bd\u8c61\u4e1a\u52a1\u903b\u8f911. */ public abstract void doSomething1 (); /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u62bd\u8c61\u4e1a\u52a1\u903b\u8f912. */ public abstract void doSomething2 (); } /** * \u5177\u4f53\u7684\u901a\u7528\u4e2d\u4ecb\u8005\u7c7b. */ public class ConcreteMediator extends Mediator { /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u5177\u4f53\u4e1a\u52a1\u903b\u8f911. */ @Override public void doSomething1 () { super . colleague1 . selfMethod1 (); super . colleague2 . selfMethod2 (); } /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u5177\u4f53\u4e1a\u52a1\u903b\u8f912. */ @Override public void doSomething2 () { super . colleague1 . selfMethod1 (); super . colleague2 . selfMethod2 (); } } \u5176\u5b9e\uff0c\u662f\u62bd\u8c61\u7684 Colleague \u7c7b\u548c\u5177\u4f53\u7684 ConcreteColleague \u7c7b\uff1a /** * \u62bd\u8c61\u7684\u540c\u4e8b\u7c7b. */ public abstract class Colleague { /** \u4e2d\u4ecb\u8005. */ protected Mediator mediator ; public Colleague ( Mediator mediator ) { this . mediator = mediator ; } } /** * \u5177\u4f53\u7684\u540c\u4e8b\u7c7b1. */ public class ConcreteColleague1 extends Colleague { public ConcreteColleague1 ( Mediator mediator ) { super ( mediator ); } /** * \u81ea\u6709\u65b9\u6cd5. */ public void selfMethod1 () { System . out . println ( \"------ConcreteColleague1-\u5904\u7406\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f911--------\" ); } /** * \u4f9d\u8d56\u65b9\u6cd5. */ public void depMethod1 () { System . out . println ( \"------ConcreteColleague1-\u59d4\u6258\u7ed9\u4e2d\u4ecb\u8005\u7684\u4e1a\u52a1\u903b\u8f911--------\" ); super . mediator . doSomething1 (); } } /** * \u5177\u4f53\u7684\u540c\u4e8b\u7c7b2. */ public class ConcreteColleague2 extends Colleague { public ConcreteColleague2 ( Mediator mediator ) { super ( mediator ); } /** * \u81ea\u6709\u65b9\u6cd52. */ public void selfMethod2 () { System . out . println ( \"------ConcreteColleague2-\u5904\u7406\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f912--------\" ); } /** * \u4f9d\u8d56\u65b9\u6cd52. */ public void depMethod2 () { System . out . println ( \"------ConcreteColleague2-\u59d4\u6258\u7ed9\u4e2d\u4ecb\u8005\u7684\u4e1a\u52a1\u903b\u8f912--------\" ); super . mediator . doSomething2 (); } } \u4ee5\u4e0b\u662f\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u573a\u666f\u7c7b */ public class MediatorClient { public static void main ( String [] args ) { Mediator mediator = new ConcreteMediator (); ConcreteColleague1 colleague1 = new ConcreteColleague1 ( mediator ); ConcreteColleague2 colleague2 = new ConcreteColleague2 ( mediator ); mediator . setColleague1 ( colleague1 ); mediator . setColleague2 ( colleague2 ); colleague1 . depMethod1 (); colleague2 . depMethod2 (); mediator . doSomething1 (); mediator . doSomething2 (); } } \u4e94\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u53ef\u4ee5\u4f7f\u5bf9\u8c61\u4e4b\u95f4\u7684\u5173\u7cfb\u6570\u91cf\u6025\u5267\u51cf\u5c11\u3002 \u4e2d\u4ecb\u8005\u627f\u62c5\u4e24\u65b9\u9762\u7684\u804c\u8d23\uff1a \u4e2d\u8f6c\u4f5c\u7528\uff08\u7ed3\u6784\u6027\uff09 \uff1a\u901a\u8fc7\u4e2d\u4ecb\u8005\u63d0\u4f9b\u7684\u4e2d\u8f6c\u4f5c\u7528\uff0c\u5404\u4e2a\u540c\u4e8b\u5bf9\u8c61\u5c31\u4e0d\u518d\u9700\u8981\u663e\u5f0f\u5f15\u7528\u5176\u4ed6\u540c\u4e8b\uff0c\u5f53\u9700\u8981\u548c\u5176\u4ed6\u540c\u4e8b\u8fdb\u884c\u901a\u4fe1\u65f6\uff0c\u901a\u8fc7\u4e2d\u4ecb\u8005\u5373\u53ef\u3002\u8be5\u4e2d\u8f6c\u4f5c\u7528\u5c5e\u4e8e\u4e2d\u4ecb\u8005\u5728\u7ed3\u6784\u4e0a\u7684\u652f\u6301\u3002 \u534f\u8c03\u4f5c\u7528\uff08\u884c\u4e3a\u6027\uff09 \uff1a\u4e2d\u4ecb\u8005\u53ef\u4ee5\u66f4\u8fdb\u4e00\u6b65\u7684\u5bf9\u540c\u4e8b\u4e4b\u95f4\u7684\u5173\u7cfb\u8fdb\u884c\u5c01\u88c5\uff0c\u540c\u4e8b\u53ef\u4ee5\u4e00\u81f4\u5730\u548c\u4e2d\u4ecb\u8005\u8fdb\u884c\u4ea4\u4e92\uff0c\u800c\u4e0d\u9700\u8981\u6307\u660e\u4e2d\u4ecb\u8005\u9700\u8981\u5177\u4f53\u600e\u4e48\u505a\uff0c\u4e2d\u4ecb\u8005\u6839\u636e\u5c01\u88c5\u5728\u81ea\u8eab\u5185\u90e8\u7684\u534f\u8c03\u903b\u8f91\uff0c\u5bf9\u540c\u4e8b\u7684\u8bf7\u6c42\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u5c06\u540c\u4e8b\u6210\u5458\u4e4b\u95f4\u7684\u5173\u7cfb\u884c\u4e3a\u8fdb\u884c\u5206\u79bb\u548c\u5c01\u88c5\u3002\u8be5\u534f\u8c03\u4f5c\u7528\u5c5e\u4e8e\u4e2d\u4ecb\u8005\u5728\u884c\u4e3a\u4e0a\u7684\u652f\u6301\u3002 1. \u4f18\u70b9 \u00b6 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u7b80\u5316\u4e86\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002 \u5c06\u5404\u540c\u4e8b\u89e3\u8026\u3002 \u51cf\u5c11\u5b50\u7c7b\u751f\u6210\u3002 \u53ef\u4ee5\u7b80\u5316\u5404\u540c\u4e8b\u7c7b\u7684\u8bbe\u8ba1\u548c\u5b9e\u73b0\u3002 2. \u7f3a\u70b9 \u00b6 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5728\u5177\u4f53\u4e2d\u4ecb\u8005\u7c7b\u4e2d\u5305\u542b\u4e86\u540c\u4e8b\u4e4b\u95f4\u7684\u4ea4\u4e92\u7ec6\u8282\uff0c \u53ef\u80fd\u4f1a\u5bfc\u81f4\u5177\u4f53\u4e2d\u4ecb\u8005\u7c7b\u975e\u5e38\u590d\u6742\uff0c\u4f7f\u5f97\u7cfb\u7edf\u96be\u4ee5\u7ef4\u62a4 \u3002 3. \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u4e2d\u4ecb\u8005\u6a21\u5f0f\uff1a \u7cfb\u7edf\u4e2d\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u590d\u6742\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u4ea7\u751f\u7684\u76f8\u4e92\u4f9d\u8d56\u5173\u7cfb\u7ed3\u6784\u6df7\u4e71\u4e14\u96be\u4ee5\u7406\u89e3\u3002 \u4e00\u4e2a\u5bf9\u8c61\u7531\u4e8e\u5f15\u7528\u4e86\u5176\u4ed6\u5f88\u591a\u5bf9\u8c61\u5e76\u4e14\u76f4\u63a5\u548c\u8fd9\u4e9b\u5bf9\u8c61\u901a\u4fe1\uff0c\u5bfc\u81f4\u96be\u4ee5\u590d\u7528\u8be5\u5bf9\u8c61\u3002 \u60f3\u901a\u8fc7\u4e00\u4e2a\u4e2d\u95f4\u7c7b\u6765\u5c01\u88c5\u591a\u4e2a\u7c7b\u4e2d\u7684\u884c\u4e3a\uff0c\u800c\u53c8\u4e0d\u60f3\u751f\u6210\u592a\u591a\u7684\u5b50\u7c7b\u3002\u53ef\u4ee5\u901a\u8fc7\u5f15\u5165\u4e2d\u4ecb\u8005\u7c7b\u6765\u5b9e\u73b0\uff0c\u5728\u4e2d\u4ecb\u8005\u4e2d\u5b9a\u4e49\u5bf9\u8c61\u3002 \u4ea4\u4e92\u7684\u516c\u5171\u884c\u4e3a\uff0c\u5982\u679c\u9700\u8981\u6539\u53d8\u884c\u4e3a\u5219\u53ef\u4ee5\u589e\u52a0\u65b0\u7684\u4e2d\u4ecb\u8005\u7c7b\u3002 \u516d\u3001\u6a21\u5f0f\u603b\u7ed3 \u00b6 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7528\u4e00\u4e2a\u4e2d\u4ecb\u5bf9\u8c61\u6765\u5c01\u88c5\u4e00\u7cfb\u5217\u7684\u5bf9\u8c61\u4ea4\u4e92\uff0c\u4e2d\u4ecb\u8005\u4f7f\u5404\u5bf9\u8c61\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u76f8\u4e92\u5f15\u7528\uff0c\u4ece\u800c\u4f7f\u5176\u8026\u5408\u677e\u6563\uff0c\u800c\u4e14\u53ef\u4ee5\u72ec\u7acb\u5730\u6539\u53d8\u5b83\u4eec\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002\u4e2d\u4ecb\u8005\u6a21\u5f0f\u53c8\u79f0\u4e3a\u8c03\u505c\u8005\u6a21\u5f0f\uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u4e2d\u4ecb\u8005\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u7528\u4e8e\u4e0e\u5404\u540c\u4e8b\u5bf9\u8c61\u4e4b\u95f4\u7684\u901a\u4fe1\uff1b\u5177\u4f53\u4e2d\u4ecb\u8005\u662f\u62bd\u8c61\u4e2d\u4ecb\u8005\u7684\u5b50\u7c7b\uff0c\u901a\u8fc7\u534f\u8c03\u5404\u4e2a\u540c\u4e8b\u5bf9\u8c61\u6765\u5b9e\u73b0\u534f\u4f5c\u884c\u4e3a\uff0c\u4e86\u89e3\u5e76\u7ef4\u62a4\u5b83\u7684\u5404\u4e2a\u540c\u4e8b\u5bf9\u8c61\u7684\u5f15\u7528\uff1b\u62bd\u8c61\u540c\u4e8b\u7c7b\u5b9a\u4e49\u5404\u540c\u4e8b\u7684\u516c\u6709\u65b9\u6cd5\uff1b\u5177\u4f53\u540c\u4e8b\u7c7b\u662f\u62bd\u8c61\u540c\u4e8b\u7c7b\u7684\u5b50\u7c7b\uff0c\u6bcf\u4e00\u4e2a\u540c\u4e8b\u5bf9\u8c61\u90fd\u5f15\u7528\u4e00\u4e2a\u4e2d\u4ecb\u8005\u5bf9\u8c61\uff1b\u6bcf\u4e00\u4e2a\u540c\u4e8b\u5bf9\u8c61\u5728\u9700\u8981\u548c\u5176\u4ed6\u540c\u4e8b\u5bf9\u8c61\u901a\u4fe1\u65f6\uff0c\u5148\u4e0e\u4e2d\u4ecb\u8005\u901a\u4fe1\uff0c\u901a\u8fc7\u4e2d\u4ecb\u8005\u6765\u95f4\u63a5\u5b8c\u6210\u4e0e\u5176\u4ed6\u540c\u4e8b\u7c7b\u7684\u901a\u4fe1\uff1b\u5728\u5177\u4f53\u540c\u4e8b\u7c7b\u4e2d\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u540c\u4e8b\u7c7b\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\u3002 \u901a\u8fc7\u5f15\u5165\u4e2d\u4ecb\u8005\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5c06\u7cfb\u7edf\u7684\u7f51\u72b6\u7ed3\u6784\u53d8\u6210\u4ee5\u4e2d\u4ecb\u8005\u4e3a\u4e2d\u5fc3\u7684\u661f\u5f62\u7ed3\u6784\uff0c\u4e2d\u4ecb\u8005\u627f\u62c5\u4e86\u4e2d\u8f6c\u4f5c\u7528\u548c\u534f\u8c03\u4f5c\u7528\u3002\u4e2d\u4ecb\u8005\u7c7b\u662f\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u6838\u5fc3\uff0c\u5b83\u5bf9\u6574\u4e2a\u7cfb\u7edf\u8fdb\u884c\u63a7\u5236\u548c\u534f\u8c03\uff0c\u7b80\u5316\u4e86\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u8fd8\u53ef\u4ee5\u5bf9\u5bf9\u8c61\u95f4\u7684\u4ea4\u4e92\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u63a7\u5236\u3002 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u7b80\u5316\u4e86\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u5c06\u5404\u540c\u4e8b\u89e3\u8026\uff0c\u8fd8\u53ef\u4ee5\u51cf\u5c11\u5b50\u7c7b\u751f\u6210\uff0c\u5bf9\u4e8e\u590d\u6742\u7684\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u901a\u8fc7\u5f15\u5165\u4e2d\u4ecb\u8005\uff0c\u53ef\u4ee5\u7b80\u5316\u5404\u540c\u4e8b\u7c7b\u7684\u8bbe\u8ba1\u548c\u5b9e\u73b0\uff1b\u4e2d\u4ecb\u8005\u6a21\u5f0f\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u5177\u4f53\u4e2d\u4ecb\u8005\u7c7b\u4e2d\u5305\u542b\u4e86\u540c\u4e8b\u4e4b\u95f4\u7684\u4ea4\u4e92\u7ec6\u8282\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5177\u4f53\u4e2d\u4ecb\u8005\u7c7b\u975e\u5e38\u590d\u6742\uff0c\u4f7f\u5f97\u7cfb\u7edf\u96be\u4ee5\u7ef4\u62a4\u3002 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u7cfb\u7edf\u4e2d\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u590d\u6742\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u4ea7\u751f\u7684\u76f8\u4e92\u4f9d\u8d56\u5173\u7cfb\u7ed3\u6784\u6df7\u4e71\u4e14\u96be\u4ee5\u7406\u89e3\uff1b\u4e00\u4e2a\u5bf9\u8c61\u7531\u4e8e\u5f15\u7528\u4e86\u5176\u4ed6\u5f88\u591a\u5bf9\u8c61\u5e76\u4e14\u76f4\u63a5\u548c\u8fd9\u4e9b\u5bf9\u8c61\u901a\u4fe1\uff0c\u5bfc\u81f4\u96be\u4ee5\u590d\u7528\u8be5\u5bf9\u8c61\uff1b\u60f3\u901a\u8fc7\u4e00\u4e2a\u4e2d\u95f4\u7c7b\u6765\u5c01\u88c5\u591a\u4e2a\u7c7b\u4e2d\u7684\u884c\u4e3a\uff0c\u800c\u53c8\u4e0d\u60f3\u751f\u6210\u592a\u591a\u7684\u5b50\u7c7b\u3002","title":"\u4e2d\u4ecb\u8005\u6a21\u5f0f\uff08Mediator Pattern\uff09"},{"location":"Design-Patterns/5-MediatorPattern/#_1","text":"\u5728\u7528\u6237\u4e0e\u7528\u6237\u76f4\u63a5\u804a\u5929\u7684\u8bbe\u8ba1\u65b9\u6848\u4e2d\uff0c\u7528\u6237\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u5f88\u5f3a\u7684\u5173\u8054\u6027\uff0c\u5c06\u5bfc\u81f4\u7cfb\u7edf\u51fa\u73b0\u5982\u4e0b\u95ee\u9898\uff1a \u7cfb\u7edf\u7ed3\u6784\u590d\u6742\uff1a\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u5927\u91cf\u7684\u76f8\u4e92\u5173\u8054\u548c\u8c03\u7528\uff0c\u82e5\u6709\u4e00\u4e2a\u5bf9\u8c61\u53d1\u751f\u53d8\u5316\uff0c\u5219\u9700\u8981\u8ddf\u8e2a\u548c\u8be5\u5bf9\u8c61\u5173\u8054\u7684\u5176\u4ed6\u6240\u6709\u5bf9\u8c61\uff0c\u5e76\u8fdb\u884c\u9002\u5f53\u5904\u7406\u3002 \u5bf9\u8c61\u53ef\u91cd\u7528\u6027\u5dee\uff1a\u7531\u4e8e\u4e00\u4e2a\u5bf9\u8c61\u548c\u5176\u4ed6\u5bf9\u8c61\u5177\u6709\u5f88\u5f3a\u7684\u5173\u8054\uff0c\u82e5\u6ca1\u6709\u5176\u4ed6\u5bf9\u8c61\u7684\u652f\u6301\uff0c\u4e00\u4e2a\u5bf9\u8c61\u5f88\u96be\u88ab\u53e6\u4e00\u4e2a\u7cfb\u7edf\u6216\u6a21\u5757\u91cd\u7528\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u8868\u73b0\u51fa\u6765\u66f4\u50cf\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u6574\u4f53\uff0c\u804c\u8d23\u8f83\u4e3a\u6df7\u4e71\u3002 \u7cfb\u7edf\u6269\u5c55\u6027\u4f4e\uff1a\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u9700\u8981\u5728\u539f\u6709\u76f8\u5173\u5bf9\u8c61\u4e0a\u589e\u52a0\u5f15\u7528\uff0c\u589e\u52a0\u65b0\u7684\u5f15\u7528\u5173\u7cfb\u4e5f\u9700\u8981\u8c03\u6574\u539f\u6709\u5bf9\u8c61\uff0c\u7cfb\u7edf\u8026\u5408\u5ea6\u5f88\u9ad8\uff0c\u5bf9\u8c61\u64cd\u4f5c\u5f88\u4e0d\u7075\u6d3b\uff0c\u6269\u5c55\u6027\u5dee\u3002 \u5728\u9762\u5411\u5bf9\u8c61\u7684\u8f6f\u4ef6\u8bbe\u8ba1\u4e0e\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6839\u636e\u201c\u5355\u4e00\u804c\u8d23\u539f\u5219\u201d\uff0c\u6211\u4eec\u5e94\u8be5\u5c3d\u91cf\u5c06\u5bf9\u8c61\u7ec6\u5316\uff0c\u4f7f\u5176\u53ea\u8d1f\u8d23\u6216\u5448\u73b0\u5355\u4e00\u7684\u804c\u8d23\u3002 \u5bf9\u4e8e\u4e00\u4e2a\u6a21\u5757\uff0c\u53ef\u80fd\u7531\u5f88\u591a\u5bf9\u8c61\u6784\u6210\uff0c\u800c\u4e14\u8fd9\u4e9b\u5bf9\u8c61\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u76f8\u4e92\u7684\u5f15\u7528\uff0c\u4e3a\u4e86\u51cf\u5c11\u5bf9\u8c61\u4e24\u4e24\u4e4b\u95f4\u590d\u6742\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u4f7f\u4e4b\u6210\u4e3a\u4e00\u4e2a\u677e\u8026\u5408\u7684\u7cfb\u7edf\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4e2d\u4ecb\u8005\u6a21\u5f0f\uff0c\u8fd9\u5c31\u662f\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/5-MediatorPattern/#_2","text":"\u4e2d\u4ecb\u8005\u6a21\u5f0f( Mediator Pattern ) \uff1a\u7528\u4e00\u4e2a\u4e2d\u4ecb\u5bf9\u8c61\u6765\u5c01\u88c5\u4e00\u7cfb\u5217\u7684\u5bf9\u8c61\u4ea4\u4e92\uff0c\u4e2d\u4ecb\u8005\u4f7f\u5404\u5bf9\u8c61\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u76f8\u4e92\u5f15\u7528\uff0c\u4ece\u800c\u4f7f\u5176\u8026\u5408\u677e\u6563\uff0c\u800c\u4e14\u53ef\u4ee5\u72ec\u7acb\u5730\u6539\u53d8\u5b83\u4eec\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002\u4e2d\u4ecb\u8005\u6a21\u5f0f\u53c8\u79f0\u4e3a \u8c03\u505c\u8005\u6a21\u5f0f \uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002","title":"\u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/5-MediatorPattern/#_3","text":"","title":"\u4e09\u3001\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/5-MediatorPattern/#1","text":"\u4e2d\u4ecb\u8005\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Mediator : \u62bd\u8c61\u4e2d\u4ecb\u8005 ConcreteMediator : \u5177\u4f53\u4e2d\u4ecb\u8005 Colleague : \u62bd\u8c61\u540c\u4e8b\u7c7b ConcreteColleague : \u5177\u4f53\u540c\u4e8b\u7c7b","title":"1. \u89d2\u8272\u7ec4\u6210"},{"location":"Design-Patterns/5-MediatorPattern/#2","text":"","title":"2. \u7ed3\u6784\u56fe"},{"location":"Design-Patterns/5-MediatorPattern/#_4","text":"\u9996\u5148\uff0c\u662f\u62bd\u8c61\u7684 Mediator \u7c7b\u548c\u5177\u4f53\u7684 ConcreteMediator \u7c7b\uff1a /** * \u901a\u7528\u62bd\u8c61\u4e2d\u4ecb\u8005\u7c7b. */ public abstract class Mediator { /** \u5b9a\u4e49\u540c\u4e8b\u7c7b1. */ protected ConcreteColleague1 colleague1 ; /** \u5b9a\u4e49\u540c\u4e8b\u7c7b2. */ protected ConcreteColleague2 colleague2 ; /* getter \u548c setter \u65b9\u6cd5 */ public ConcreteColleague1 getColleague1 () { return colleague1 ; } public void setColleague1 ( ConcreteColleague1 colleague1 ) { this . colleague1 = colleague1 ; } public ConcreteColleague2 getColleague2 () { return colleague2 ; } public void setColleague2 ( ConcreteColleague2 colleague2 ) { this . colleague2 = colleague2 ; } /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u62bd\u8c61\u4e1a\u52a1\u903b\u8f911. */ public abstract void doSomething1 (); /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u62bd\u8c61\u4e1a\u52a1\u903b\u8f912. */ public abstract void doSomething2 (); } /** * \u5177\u4f53\u7684\u901a\u7528\u4e2d\u4ecb\u8005\u7c7b. */ public class ConcreteMediator extends Mediator { /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u5177\u4f53\u4e1a\u52a1\u903b\u8f911. */ @Override public void doSomething1 () { super . colleague1 . selfMethod1 (); super . colleague2 . selfMethod2 (); } /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u5177\u4f53\u4e1a\u52a1\u903b\u8f912. */ @Override public void doSomething2 () { super . colleague1 . selfMethod1 (); super . colleague2 . selfMethod2 (); } } \u5176\u5b9e\uff0c\u662f\u62bd\u8c61\u7684 Colleague \u7c7b\u548c\u5177\u4f53\u7684 ConcreteColleague \u7c7b\uff1a /** * \u62bd\u8c61\u7684\u540c\u4e8b\u7c7b. */ public abstract class Colleague { /** \u4e2d\u4ecb\u8005. */ protected Mediator mediator ; public Colleague ( Mediator mediator ) { this . mediator = mediator ; } } /** * \u5177\u4f53\u7684\u540c\u4e8b\u7c7b1. */ public class ConcreteColleague1 extends Colleague { public ConcreteColleague1 ( Mediator mediator ) { super ( mediator ); } /** * \u81ea\u6709\u65b9\u6cd5. */ public void selfMethod1 () { System . out . println ( \"------ConcreteColleague1-\u5904\u7406\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f911--------\" ); } /** * \u4f9d\u8d56\u65b9\u6cd5. */ public void depMethod1 () { System . out . println ( \"------ConcreteColleague1-\u59d4\u6258\u7ed9\u4e2d\u4ecb\u8005\u7684\u4e1a\u52a1\u903b\u8f911--------\" ); super . mediator . doSomething1 (); } } /** * \u5177\u4f53\u7684\u540c\u4e8b\u7c7b2. */ public class ConcreteColleague2 extends Colleague { public ConcreteColleague2 ( Mediator mediator ) { super ( mediator ); } /** * \u81ea\u6709\u65b9\u6cd52. */ public void selfMethod2 () { System . out . println ( \"------ConcreteColleague2-\u5904\u7406\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f912--------\" ); } /** * \u4f9d\u8d56\u65b9\u6cd52. */ public void depMethod2 () { System . out . println ( \"------ConcreteColleague2-\u59d4\u6258\u7ed9\u4e2d\u4ecb\u8005\u7684\u4e1a\u52a1\u903b\u8f912--------\" ); super . mediator . doSomething2 (); } } \u4ee5\u4e0b\u662f\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u573a\u666f\u7c7b */ public class MediatorClient { public static void main ( String [] args ) { Mediator mediator = new ConcreteMediator (); ConcreteColleague1 colleague1 = new ConcreteColleague1 ( mediator ); ConcreteColleague2 colleague2 = new ConcreteColleague2 ( mediator ); mediator . setColleague1 ( colleague1 ); mediator . setColleague2 ( colleague2 ); colleague1 . depMethod1 (); colleague2 . depMethod2 (); mediator . doSomething1 (); mediator . doSomething2 (); } }","title":"\u56db\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/5-MediatorPattern/#_5","text":"\u4e2d\u4ecb\u8005\u6a21\u5f0f\u53ef\u4ee5\u4f7f\u5bf9\u8c61\u4e4b\u95f4\u7684\u5173\u7cfb\u6570\u91cf\u6025\u5267\u51cf\u5c11\u3002 \u4e2d\u4ecb\u8005\u627f\u62c5\u4e24\u65b9\u9762\u7684\u804c\u8d23\uff1a \u4e2d\u8f6c\u4f5c\u7528\uff08\u7ed3\u6784\u6027\uff09 \uff1a\u901a\u8fc7\u4e2d\u4ecb\u8005\u63d0\u4f9b\u7684\u4e2d\u8f6c\u4f5c\u7528\uff0c\u5404\u4e2a\u540c\u4e8b\u5bf9\u8c61\u5c31\u4e0d\u518d\u9700\u8981\u663e\u5f0f\u5f15\u7528\u5176\u4ed6\u540c\u4e8b\uff0c\u5f53\u9700\u8981\u548c\u5176\u4ed6\u540c\u4e8b\u8fdb\u884c\u901a\u4fe1\u65f6\uff0c\u901a\u8fc7\u4e2d\u4ecb\u8005\u5373\u53ef\u3002\u8be5\u4e2d\u8f6c\u4f5c\u7528\u5c5e\u4e8e\u4e2d\u4ecb\u8005\u5728\u7ed3\u6784\u4e0a\u7684\u652f\u6301\u3002 \u534f\u8c03\u4f5c\u7528\uff08\u884c\u4e3a\u6027\uff09 \uff1a\u4e2d\u4ecb\u8005\u53ef\u4ee5\u66f4\u8fdb\u4e00\u6b65\u7684\u5bf9\u540c\u4e8b\u4e4b\u95f4\u7684\u5173\u7cfb\u8fdb\u884c\u5c01\u88c5\uff0c\u540c\u4e8b\u53ef\u4ee5\u4e00\u81f4\u5730\u548c\u4e2d\u4ecb\u8005\u8fdb\u884c\u4ea4\u4e92\uff0c\u800c\u4e0d\u9700\u8981\u6307\u660e\u4e2d\u4ecb\u8005\u9700\u8981\u5177\u4f53\u600e\u4e48\u505a\uff0c\u4e2d\u4ecb\u8005\u6839\u636e\u5c01\u88c5\u5728\u81ea\u8eab\u5185\u90e8\u7684\u534f\u8c03\u903b\u8f91\uff0c\u5bf9\u540c\u4e8b\u7684\u8bf7\u6c42\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u5c06\u540c\u4e8b\u6210\u5458\u4e4b\u95f4\u7684\u5173\u7cfb\u884c\u4e3a\u8fdb\u884c\u5206\u79bb\u548c\u5c01\u88c5\u3002\u8be5\u534f\u8c03\u4f5c\u7528\u5c5e\u4e8e\u4e2d\u4ecb\u8005\u5728\u884c\u4e3a\u4e0a\u7684\u652f\u6301\u3002","title":"\u4e94\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/5-MediatorPattern/#1_1","text":"\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u7b80\u5316\u4e86\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002 \u5c06\u5404\u540c\u4e8b\u89e3\u8026\u3002 \u51cf\u5c11\u5b50\u7c7b\u751f\u6210\u3002 \u53ef\u4ee5\u7b80\u5316\u5404\u540c\u4e8b\u7c7b\u7684\u8bbe\u8ba1\u548c\u5b9e\u73b0\u3002","title":"1. \u4f18\u70b9"},{"location":"Design-Patterns/5-MediatorPattern/#2_1","text":"\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5728\u5177\u4f53\u4e2d\u4ecb\u8005\u7c7b\u4e2d\u5305\u542b\u4e86\u540c\u4e8b\u4e4b\u95f4\u7684\u4ea4\u4e92\u7ec6\u8282\uff0c \u53ef\u80fd\u4f1a\u5bfc\u81f4\u5177\u4f53\u4e2d\u4ecb\u8005\u7c7b\u975e\u5e38\u590d\u6742\uff0c\u4f7f\u5f97\u7cfb\u7edf\u96be\u4ee5\u7ef4\u62a4 \u3002","title":"2. \u7f3a\u70b9"},{"location":"Design-Patterns/5-MediatorPattern/#3","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u4e2d\u4ecb\u8005\u6a21\u5f0f\uff1a \u7cfb\u7edf\u4e2d\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u590d\u6742\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u4ea7\u751f\u7684\u76f8\u4e92\u4f9d\u8d56\u5173\u7cfb\u7ed3\u6784\u6df7\u4e71\u4e14\u96be\u4ee5\u7406\u89e3\u3002 \u4e00\u4e2a\u5bf9\u8c61\u7531\u4e8e\u5f15\u7528\u4e86\u5176\u4ed6\u5f88\u591a\u5bf9\u8c61\u5e76\u4e14\u76f4\u63a5\u548c\u8fd9\u4e9b\u5bf9\u8c61\u901a\u4fe1\uff0c\u5bfc\u81f4\u96be\u4ee5\u590d\u7528\u8be5\u5bf9\u8c61\u3002 \u60f3\u901a\u8fc7\u4e00\u4e2a\u4e2d\u95f4\u7c7b\u6765\u5c01\u88c5\u591a\u4e2a\u7c7b\u4e2d\u7684\u884c\u4e3a\uff0c\u800c\u53c8\u4e0d\u60f3\u751f\u6210\u592a\u591a\u7684\u5b50\u7c7b\u3002\u53ef\u4ee5\u901a\u8fc7\u5f15\u5165\u4e2d\u4ecb\u8005\u7c7b\u6765\u5b9e\u73b0\uff0c\u5728\u4e2d\u4ecb\u8005\u4e2d\u5b9a\u4e49\u5bf9\u8c61\u3002 \u4ea4\u4e92\u7684\u516c\u5171\u884c\u4e3a\uff0c\u5982\u679c\u9700\u8981\u6539\u53d8\u884c\u4e3a\u5219\u53ef\u4ee5\u589e\u52a0\u65b0\u7684\u4e2d\u4ecb\u8005\u7c7b\u3002","title":"3. \u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/5-MediatorPattern/#_6","text":"\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7528\u4e00\u4e2a\u4e2d\u4ecb\u5bf9\u8c61\u6765\u5c01\u88c5\u4e00\u7cfb\u5217\u7684\u5bf9\u8c61\u4ea4\u4e92\uff0c\u4e2d\u4ecb\u8005\u4f7f\u5404\u5bf9\u8c61\u4e0d\u9700\u8981\u663e\u5f0f\u5730\u76f8\u4e92\u5f15\u7528\uff0c\u4ece\u800c\u4f7f\u5176\u8026\u5408\u677e\u6563\uff0c\u800c\u4e14\u53ef\u4ee5\u72ec\u7acb\u5730\u6539\u53d8\u5b83\u4eec\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002\u4e2d\u4ecb\u8005\u6a21\u5f0f\u53c8\u79f0\u4e3a\u8c03\u505c\u8005\u6a21\u5f0f\uff0c\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u4e2d\u4ecb\u8005\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u7528\u4e8e\u4e0e\u5404\u540c\u4e8b\u5bf9\u8c61\u4e4b\u95f4\u7684\u901a\u4fe1\uff1b\u5177\u4f53\u4e2d\u4ecb\u8005\u662f\u62bd\u8c61\u4e2d\u4ecb\u8005\u7684\u5b50\u7c7b\uff0c\u901a\u8fc7\u534f\u8c03\u5404\u4e2a\u540c\u4e8b\u5bf9\u8c61\u6765\u5b9e\u73b0\u534f\u4f5c\u884c\u4e3a\uff0c\u4e86\u89e3\u5e76\u7ef4\u62a4\u5b83\u7684\u5404\u4e2a\u540c\u4e8b\u5bf9\u8c61\u7684\u5f15\u7528\uff1b\u62bd\u8c61\u540c\u4e8b\u7c7b\u5b9a\u4e49\u5404\u540c\u4e8b\u7684\u516c\u6709\u65b9\u6cd5\uff1b\u5177\u4f53\u540c\u4e8b\u7c7b\u662f\u62bd\u8c61\u540c\u4e8b\u7c7b\u7684\u5b50\u7c7b\uff0c\u6bcf\u4e00\u4e2a\u540c\u4e8b\u5bf9\u8c61\u90fd\u5f15\u7528\u4e00\u4e2a\u4e2d\u4ecb\u8005\u5bf9\u8c61\uff1b\u6bcf\u4e00\u4e2a\u540c\u4e8b\u5bf9\u8c61\u5728\u9700\u8981\u548c\u5176\u4ed6\u540c\u4e8b\u5bf9\u8c61\u901a\u4fe1\u65f6\uff0c\u5148\u4e0e\u4e2d\u4ecb\u8005\u901a\u4fe1\uff0c\u901a\u8fc7\u4e2d\u4ecb\u8005\u6765\u95f4\u63a5\u5b8c\u6210\u4e0e\u5176\u4ed6\u540c\u4e8b\u7c7b\u7684\u901a\u4fe1\uff1b\u5728\u5177\u4f53\u540c\u4e8b\u7c7b\u4e2d\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u540c\u4e8b\u7c7b\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\u3002 \u901a\u8fc7\u5f15\u5165\u4e2d\u4ecb\u8005\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5c06\u7cfb\u7edf\u7684\u7f51\u72b6\u7ed3\u6784\u53d8\u6210\u4ee5\u4e2d\u4ecb\u8005\u4e3a\u4e2d\u5fc3\u7684\u661f\u5f62\u7ed3\u6784\uff0c\u4e2d\u4ecb\u8005\u627f\u62c5\u4e86\u4e2d\u8f6c\u4f5c\u7528\u548c\u534f\u8c03\u4f5c\u7528\u3002\u4e2d\u4ecb\u8005\u7c7b\u662f\u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u6838\u5fc3\uff0c\u5b83\u5bf9\u6574\u4e2a\u7cfb\u7edf\u8fdb\u884c\u63a7\u5236\u548c\u534f\u8c03\uff0c\u7b80\u5316\u4e86\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u8fd8\u53ef\u4ee5\u5bf9\u5bf9\u8c61\u95f4\u7684\u4ea4\u4e92\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u63a7\u5236\u3002 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u7b80\u5316\u4e86\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u5c06\u5404\u540c\u4e8b\u89e3\u8026\uff0c\u8fd8\u53ef\u4ee5\u51cf\u5c11\u5b50\u7c7b\u751f\u6210\uff0c\u5bf9\u4e8e\u590d\u6742\u7684\u5bf9\u8c61\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u901a\u8fc7\u5f15\u5165\u4e2d\u4ecb\u8005\uff0c\u53ef\u4ee5\u7b80\u5316\u5404\u540c\u4e8b\u7c7b\u7684\u8bbe\u8ba1\u548c\u5b9e\u73b0\uff1b\u4e2d\u4ecb\u8005\u6a21\u5f0f\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u5177\u4f53\u4e2d\u4ecb\u8005\u7c7b\u4e2d\u5305\u542b\u4e86\u540c\u4e8b\u4e4b\u95f4\u7684\u4ea4\u4e92\u7ec6\u8282\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5177\u4f53\u4e2d\u4ecb\u8005\u7c7b\u975e\u5e38\u590d\u6742\uff0c\u4f7f\u5f97\u7cfb\u7edf\u96be\u4ee5\u7ef4\u62a4\u3002 \u4e2d\u4ecb\u8005\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u7cfb\u7edf\u4e2d\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u590d\u6742\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u4ea7\u751f\u7684\u76f8\u4e92\u4f9d\u8d56\u5173\u7cfb\u7ed3\u6784\u6df7\u4e71\u4e14\u96be\u4ee5\u7406\u89e3\uff1b\u4e00\u4e2a\u5bf9\u8c61\u7531\u4e8e\u5f15\u7528\u4e86\u5176\u4ed6\u5f88\u591a\u5bf9\u8c61\u5e76\u4e14\u76f4\u63a5\u548c\u8fd9\u4e9b\u5bf9\u8c61\u901a\u4fe1\uff0c\u5bfc\u81f4\u96be\u4ee5\u590d\u7528\u8be5\u5bf9\u8c61\uff1b\u60f3\u901a\u8fc7\u4e00\u4e2a\u4e2d\u95f4\u7c7b\u6765\u5c01\u88c5\u591a\u4e2a\u7c7b\u4e2d\u7684\u884c\u4e3a\uff0c\u800c\u53c8\u4e0d\u60f3\u751f\u6210\u592a\u591a\u7684\u5b50\u7c7b\u3002","title":"\u516d\u3001\u6a21\u5f0f\u603b\u7ed3"},{"location":"Design-Patterns/6-ObserverPattern/","text":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a \u00b6 \u5efa\u7acb\u4e00\u79cd\u5bf9\u8c61\u4e0e\u5bf9\u8c61\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4e00\u4e2a\u5bf9\u8c61\u53d1\u751f\u6539\u53d8\u65f6\u5c06\u81ea\u52a8\u901a\u77e5\u5176\u4ed6\u5bf9\u8c61\uff0c\u5176\u4ed6\u5bf9\u8c61\u5c06\u76f8\u5e94\u505a\u51fa\u53cd\u5e94\u3002\u5728\u6b64\uff0c\u53d1\u751f\u6539\u53d8\u7684\u5bf9\u8c61\u79f0\u4e3a\u89c2\u5bdf\u76ee\u6807\uff0c\u800c\u88ab\u901a\u77e5\u7684\u5bf9\u8c61\u79f0\u4e3a\u89c2\u5bdf\u8005\uff0c\u4e00\u4e2a\u89c2\u5bdf\u76ee\u6807\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u89c2\u5bdf\u8005\uff0c\u800c\u4e14\u8fd9\u4e9b\u89c2\u5bdf\u8005\u4e4b\u95f4\u6ca1\u6709\u76f8\u4e92\u8054\u7cfb\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u589e\u52a0\u548c\u5220\u9664\u89c2\u5bdf\u8005\uff0c\u4f7f\u5f97\u7cfb\u7edf\u66f4\u6613\u4e8e\u6269\u5c55\uff0c\u8fd9\u5c31\u662f\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002 \u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u89c2\u5bdf\u8005\u6a21\u5f0f( Observer Pattern )\uff1a\u5b9a\u4e49\u5bf9\u8c61\u95f4\u7684\u4e00\u79cd\u4e00\u5bf9\u591a\u4f9d\u8d56\u5173\u7cfb\uff0c\u4f7f\u5f97\u6bcf\u5f53\u4e00\u4e2a\u5bf9\u8c61\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u5176\u76f8\u5173\u4f9d\u8d56\u5bf9\u8c61\u7686\u5f97\u5230\u901a\u77e5\u5e76\u88ab\u81ea\u52a8\u66f4\u65b0\u3002\u89c2\u5bdf\u8005\u6a21\u5f0f\u53c8\u53eb\u505a\u53d1\u5e03-\u8ba2\u9605\uff08 Publish / Subscribe \uff09\u6a21\u5f0f\u3001\u6a21\u578b-\u89c6\u56fe\uff08 Model / View \uff09\u6a21\u5f0f\u3001\u6e90-\u76d1\u542c\u5668\uff08 Source / Listener \uff09\u6a21\u5f0f\u6216\u4ece\u5c5e\u8005\uff08 Dependents \uff09\u6a21\u5f0f\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u662f\u4e00\u79cd \u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f \u3002 \u4e09\u3001\u6a21\u5f0f\u7ed3\u6784 \u00b6 1. \u89d2\u8272\u7ec4\u6210 \u00b6 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Subject : \u76ee\u6807\uff08\u62bd\u8c61\u7684\u88ab\u89c2\u5bdf\u7740\uff09 ConcreteSubject : \u5177\u4f53\u76ee\u6807\uff08\u5177\u4f53\u7684\u88ab\u89c2\u5bdf\u8005\uff09 Observer : \u89c2\u5bdf\u8005 ConcreteObserver : \u5177\u4f53\u89c2\u5bdf\u8005 2. \u7ed3\u6784\u56fe \u00b6 3. \u65f6\u5e8f\u56fe \u00b6 \u56db\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\uff0c\u662f\u89c2\u5bdf\u8005\u63a5\u53e3\uff1a /** * \u89c2\u5bdf\u8005\u63a5\u53e3 * */ public interface Observer { // \u66f4\u65b0\u7684\u65b9\u6cd5 public void update (); } \u63a5\u4e0b\u6765\uff0c\u662f\u5177\u4f53\u7684\u89c2\u5bdf\u8005\u7c7b\uff1a /** * \u5177\u4f53\u7684\u89c2\u5bdf\u8005. */ public class ConcreteObserver implements Observer { /** * \u5b9e\u73b0\u66f4\u65b0\u65b9\u6cd5. */ @Override public void update () { System . out . println ( \"\u63a5\u6536\u5230\u4fe1\u606f,\u5e76\u8fdb\u884c\u5904\u7406...\" ); } } \u7136\u540e\uff0c\u662f\u88ab\u89c2\u5bdf\u8005\u7684\u62bd\u8c61\u7c7b\uff1a /** * \u88ab\u89c2\u5bdf\u8005\u7684\u62bd\u8c61\u7c7b. */ public abstract class Subject { /** \u5b9a\u4e49\u4e00\u4e2a\u89c2\u5bdf\u8005\u7684\u96c6\u5408. */ private List < Observer > observers = new ArrayList < Observer > (); /** * \u589e\u52a0\u4e00\u4e2a\u89c2\u5bdf\u8005. * * @param o */ public void addObserver ( Observer o ) { this . observers . add ( o ); } /** * \u5220\u9664\u4e00\u4e2a\u89c2\u5bdf\u8005. * * @param o */ public void delObserver ( Observer o ) { this . observers . remove ( o ); } /** * \u901a\u77e5\u6240\u6709\u89c2\u5bdf\u8005. */ public void notifyObservers () { for ( Observer o : observers ) { o . update (); } } } \u5177\u4f53\u7684\u88ab\u89c2\u5bdf\u8005\uff1a /** * \u5177\u4f53\u7684\u88ab\u89c2\u5bdf\u8005. */ public class ConcreteSubject extends Subject { /** * \u5177\u4f53\u7684\u4e1a\u52a1. */ public void doSomething () { super . notifyObservers (); } } \u6700\u540e\uff0c\u662f\u7528\u4e8e\u6d4b\u8bd5\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u89c2\u5bdf\u8005\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b. */ public class ObserverClient { public static void main ( String [] args ) { // \u521b\u5efa\u4e00\u4e2a\u88ab\u89c2\u5bdf\u8005\u548c\u89c2\u5bdf\u8005. ConcreteSubject sub = new ConcreteSubject (); Observer obs = new ConcreteObserver (); // \u89c2\u5bdf\u8005\u89c2\u5bdf\u88ab\u89c2\u5bdf\u8005. sub . addObserver ( obs ); // \u89c2\u5bdf\u8005\u5f00\u59cb\u6d3b\u52a8\u4e86. sub . doSomething (); } } \u4e94\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u89c2\u5bdf\u8005\u6a21\u5f0f\u63cf\u8ff0\u4e86\u5982\u4f55\u5efa\u7acb\u5bf9\u8c61\u4e0e\u5bf9\u8c61\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5982\u4f55\u6784\u9020\u6ee1\u8db3\u8fd9\u79cd\u9700\u6c42\u7684\u7cfb\u7edf\u3002 \u8fd9\u4e00\u6a21\u5f0f\u4e2d\u7684\u5173\u952e\u5bf9\u8c61\u662f\u89c2\u5bdf\u76ee\u6807\u548c\u89c2\u5bdf\u8005\uff0c\u4e00\u4e2a\u76ee\u6807\u53ef\u4ee5\u6709\u4efb\u610f\u6570\u76ee\u7684\u4e0e\u4e4b\u76f8\u4f9d\u8d56\u7684\u89c2\u5bdf\u8005\uff0c\u4e00\u65e6\u76ee\u6807\u7684\u72b6\u6001\u53d1\u751f\u6539\u53d8\uff0c\u6240\u6709\u7684\u89c2\u5bdf\u8005\u90fd\u5c06\u5f97\u5230\u901a\u77e5\u3002 \u4f5c\u4e3a\u5bf9\u8fd9\u4e2a\u901a\u77e5\u7684\u54cd\u5e94\uff0c\u6bcf\u4e2a\u89c2\u5bdf\u8005\u90fd\u5c06\u5373\u65f6\u66f4\u65b0\u81ea\u5df1\u7684\u72b6\u6001\uff0c\u4ee5\u4e0e\u76ee\u6807\u72b6\u6001\u540c\u6b65\uff0c\u8fd9\u79cd\u4ea4\u4e92\u4e5f\u79f0\u4e3a \u53d1\u5e03-\u8ba2\u9605 ( publish-subscribe )\u3002\u76ee\u6807\u662f\u901a\u77e5\u7684\u53d1\u5e03\u8005\uff0c\u5b83\u53d1\u51fa\u901a\u77e5\u65f6\u5e76\u4e0d\u9700\u8981\u77e5\u9053\u8c01\u662f\u5b83\u7684\u89c2\u5bdf\u8005\uff0c\u53ef\u4ee5\u6709\u4efb\u610f\u6570\u76ee\u7684\u89c2\u5bdf\u8005\u8ba2\u9605\u5b83\u5e76\u63a5\u6536\u901a\u3002 1. \u4f18\u70b9 \u00b6 \u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u89c2\u5bdf\u8005\u6a21\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u8868\u793a\u5c42\u548c\u6570\u636e\u903b\u8f91\u5c42\u7684\u5206\u79bb\uff0c\u5e76\u5b9a\u4e49\u4e86\u7a33\u5b9a\u7684\u6d88\u606f\u66f4\u65b0\u4f20\u9012\u673a\u5236\uff0c\u62bd\u8c61\u4e86\u66f4\u65b0\u63a5\u53e3\uff0c\u4f7f\u5f97\u53ef\u4ee5\u6709\u5404\u79cd\u5404\u6837\u4e0d\u540c\u7684\u8868\u793a\u5c42\u4f5c\u4e3a\u5177\u4f53\u89c2\u5bdf\u8005\u89d2\u8272\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5728\u89c2\u5bdf\u76ee\u6807\u548c\u89c2\u5bdf\u8005\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u62bd\u8c61\u7684\u8026\u5408\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u652f\u6301\u5e7f\u64ad\u901a\u4fe1\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u8981\u6c42\u3002 2. \u7f3a\u70b9 \u00b6 \u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5982\u679c\u4e00\u4e2a\u89c2\u5bdf\u76ee\u6807\u5bf9\u8c61\u6709\u5f88\u591a\u76f4\u63a5\u548c\u95f4\u63a5\u7684\u89c2\u5bdf\u8005\u7684\u8bdd\uff0c\u5c06\u6240\u6709\u7684\u89c2\u5bdf\u8005\u90fd\u901a\u77e5\u5230\u4f1a\u82b1\u8d39\u5f88\u591a\u65f6\u95f4\u3002 \u5982\u679c\u5728\u89c2\u5bdf\u8005\u548c\u89c2\u5bdf\u76ee\u6807\u4e4b\u95f4\u6709\u5faa\u73af\u4f9d\u8d56\u7684\u8bdd\uff0c\u89c2\u5bdf\u76ee\u6807\u4f1a\u89e6\u53d1\u5b83\u4eec\u4e4b\u95f4\u8fdb\u884c\u5faa\u73af\u8c03\u7528\uff0c\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u5d29\u6e83\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u6ca1\u6709\u76f8\u5e94\u7684\u673a\u5236\u8ba9\u89c2\u5bdf\u8005\u77e5\u9053\u6240\u89c2\u5bdf\u7684\u76ee\u6807\u5bf9\u8c61\u662f\u600e\u4e48\u53d1\u751f\u53d8\u5316\u7684\uff0c\u800c\u4ec5\u4ec5\u53ea\u662f\u77e5\u9053\u89c2\u5bdf\u76ee\u6807\u53d1\u751f\u4e86\u53d8\u5316\u3002 3.\u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f\uff1a \u4e00\u4e2a\u62bd\u8c61\u6a21\u578b\u6709\u4e24\u4e2a\u65b9\u9762\uff0c\u5176\u4e2d\u4e00\u4e2a\u65b9\u9762\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u65b9\u9762\u3002\u5c06\u8fd9\u4e9b\u65b9\u9762\u5c01\u88c5\u5728\u72ec\u7acb\u7684\u5bf9\u8c61\u4e2d\u4f7f\u5b83\u4eec\u53ef\u4ee5\u5404\u81ea\u72ec\u7acb\u5730\u6539\u53d8\u548c\u590d\u7528\u3002 \u4e00\u4e2a\u5bf9\u8c61\u7684\u6539\u53d8\u5c06\u5bfc\u81f4\u5176\u4ed6\u4e00\u4e2a\u6216\u591a\u4e2a\u5bf9\u8c61\u4e5f\u53d1\u751f\u6539\u53d8\uff0c\u800c\u4e0d\u77e5\u9053\u5177\u4f53\u6709\u591a\u5c11\u5bf9\u8c61\u5c06\u53d1\u751f\u6539\u53d8\uff0c\u53ef\u4ee5\u964d\u4f4e\u5bf9\u8c61\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\u3002 \u4e00\u4e2a\u5bf9\u8c61\u5fc5\u987b\u901a\u77e5\u5176\u4ed6\u5bf9\u8c61\uff0c\u800c\u5e76\u4e0d\u77e5\u9053\u8fd9\u4e9b\u5bf9\u8c61\u662f\u8c01\u3002 \u9700\u8981\u5728\u7cfb\u7edf\u4e2d\u521b\u5efa\u4e00\u4e2a\u89e6\u53d1\u94fe\uff0cA \u5bf9\u8c61\u7684\u884c\u4e3a\u5c06\u5f71\u54cd B \u5bf9\u8c61\uff0cB \u5bf9\u8c61\u7684\u884c\u4e3a\u5c06\u5f71\u54cd C \u5bf9\u8c61\u2026\u2026\uff0c\u53ef\u4ee5\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f\u521b\u5efa\u4e00\u79cd\u94fe\u5f0f\u89e6\u53d1\u673a\u5236\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u5982\u67d0\u7535\u5b50\u5546\u52a1\u7f51\u7ad9\u53ef\u4ee5\u5728\u6267\u884c\u53d1\u9001\u64cd\u4f5c\u540e\u7ed9\u7528\u6237\u591a\u4e2a\u53d1\u9001\u5546\u54c1\u6253\u6298\u4fe1\u606f\uff0c\u67d0\u56e2\u961f\u6218\u6597\u6e38\u620f\u4e2d\u67d0\u961f\u53cb\u727a\u7272\u5c06\u7ed9\u6240\u6709\u6210\u5458\u63d0\u793a\u7b49\u7b49\uff0c\u51e1\u662f\u6d89\u53ca\u5230\u4e00\u5bf9\u4e00\u6216\u8005\u4e00\u5bf9\u591a\u7684\u5bf9\u8c61\u4ea4\u4e92\u573a\u666f\u90fd\u53ef\u4ee5\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f\u3002 \u516d\u3001\u603b\u7ed3 \u00b6 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5b9a\u4e49\u5bf9\u8c61\u95f4\u7684\u4e00\u79cd\u4e00\u5bf9\u591a\u4f9d\u8d56\u5173\u7cfb\uff0c\u4f7f\u5f97\u6bcf\u5f53\u4e00\u4e2a\u5bf9\u8c61\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u5176\u76f8\u5173\u4f9d\u8d56\u5bf9\u8c61\u7686\u5f97\u5230\u901a\u77e5\u5e76\u88ab\u81ea\u52a8\u66f4\u65b0\u3002\u89c2\u5bdf\u8005\u6a21\u5f0f\u53c8\u53eb\u505a\u53d1\u5e03-\u8ba2\u9605\u6a21\u5f0f\u3001\u6a21\u578b-\u89c6\u56fe\u6a21\u5f0f\u3001\u6e90-\u76d1\u542c\u5668\u6a21\u5f0f\u6216\u4ece\u5c5e\u8005\u6a21\u5f0f\u3002\u89c2\u5bdf\u8005\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u76ee\u6807\u53c8\u79f0\u4e3a\u4e3b\u9898\uff0c\u5b83\u662f\u6307\u88ab\u89c2\u5bdf\u7684\u5bf9\u8c61\uff1b\u5177\u4f53\u76ee\u6807\u662f\u76ee\u6807\u7c7b\u7684\u5b50\u7c7b\uff0c\u901a\u5e38\u5b83\u5305\u542b\u6709\u7ecf\u5e38\u53d1\u751f\u6539\u53d8\u7684\u6570\u636e\uff0c\u5f53\u5b83\u7684\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u5411\u5b83\u7684\u5404\u4e2a\u89c2\u5bdf\u8005\u53d1\u51fa\u901a\u77e5\uff1b\u89c2\u5bdf\u8005\u5c06\u5bf9\u89c2\u5bdf\u76ee\u6807\u7684\u6539\u53d8\u505a\u51fa\u53cd\u5e94\uff1b\u5728\u5177\u4f53\u89c2\u5bdf\u8005\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u6307\u5411\u5177\u4f53\u76ee\u6807\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5b83\u5b58\u50a8\u5177\u4f53\u89c2\u5bdf\u8005\u7684\u6709\u5173\u72b6\u6001\uff0c\u8fd9\u4e9b\u72b6\u6001\u9700\u8981\u548c\u5177\u4f53\u76ee\u6807\u7684\u72b6\u6001\u4fdd\u6301\u4e00\u81f4\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5b9a\u4e49\u4e86\u4e00\u79cd\u4e00\u5bf9\u591a\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u8ba9\u591a\u4e2a\u89c2\u5bdf\u8005\u5bf9\u8c61\u540c\u65f6\u76d1\u542c\u67d0\u4e00\u4e2a\u76ee\u6807\u5bf9\u8c61\uff0c\u5f53\u8fd9\u4e2a\u76ee\u6807\u5bf9\u8c61\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u901a\u77e5\u6240\u6709\u89c2\u5bdf\u8005\u5bf9\u8c61\uff0c\u4f7f\u5b83\u4eec\u80fd\u591f\u81ea\u52a8\u66f4\u65b0\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u53ef\u4ee5\u5b9e\u73b0\u8868\u793a\u5c42\u548c\u6570\u636e\u903b\u8f91\u5c42\u7684\u5206\u79bb\uff0c\u5e76\u5728\u89c2\u5bdf\u76ee\u6807\u548c\u89c2\u5bdf\u8005\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u62bd\u8c61\u7684\u8026\u5408\uff0c\u652f\u6301\u5e7f\u64ad\u901a\u4fe1\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u5982\u679c\u4e00\u4e2a\u89c2\u5bdf\u76ee\u6807\u5bf9\u8c61\u6709\u5f88\u591a\u76f4\u63a5\u548c\u95f4\u63a5\u7684\u89c2\u5bdf\u8005\u7684\u8bdd\uff0c\u5c06\u6240\u6709\u7684\u89c2\u5bdf\u8005\u90fd\u901a\u77e5\u5230\u4f1a\u82b1\u8d39\u5f88\u591a\u65f6\u95f4\uff0c\u800c\u4e14\u5982\u679c\u5728\u89c2\u5bdf\u8005\u548c\u89c2\u5bdf\u76ee\u6807\u4e4b\u95f4\u6709\u5faa\u73af\u4f9d\u8d56\u7684\u8bdd\uff0c\u89c2\u5bdf\u76ee\u6807\u4f1a\u89e6\u53d1\u5b83\u4eec\u4e4b\u95f4\u8fdb\u884c\u5faa\u73af\u8c03\u7528\uff0c\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u5d29\u6e83\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u4e00\u4e2a\u62bd\u8c61\u6a21\u578b\u6709\u4e24\u4e2a\u65b9\u9762\uff0c\u5176\u4e2d\u4e00\u4e2a\u65b9\u9762\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u65b9\u9762\uff1b\u4e00\u4e2a\u5bf9\u8c61\u7684\u6539\u53d8\u5c06\u5bfc\u81f4\u5176\u4ed6\u4e00\u4e2a\u6216\u591a\u4e2a\u5bf9\u8c61\u4e5f\u53d1\u751f\u6539\u53d8\uff0c\u800c\u4e0d\u77e5\u9053\u5177\u4f53\u6709\u591a\u5c11\u5bf9\u8c61\u5c06\u53d1\u751f\u6539\u53d8\uff1b\u4e00\u4e2a\u5bf9\u8c61\u5fc5\u987b\u901a\u77e5\u5176\u4ed6\u5bf9\u8c61\uff0c\u800c\u5e76\u4e0d\u77e5\u9053\u8fd9\u4e9b\u5bf9\u8c61\u662f\u8c01\uff1b\u9700\u8981\u5728\u7cfb\u7edf\u4e2d\u521b\u5efa\u4e00\u4e2a\u89e6\u53d1\u94fe\u3002 \u5728 JDK \u7684 java.util \u5305\u4e2d\uff0c\u63d0\u4f9b\u4e86 Observable \u7c7b\u4ee5\u53ca Observer \u63a5\u53e3\uff0c\u5b83\u4eec\u6784\u6210\u4e86 Java \u8bed\u8a00\u5bf9\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u652f\u6301\u3002","title":"\u89c2\u5bdf\u8005\u6a21\u5f0f\uff08Observer Pattern\uff09"},{"location":"Design-Patterns/6-ObserverPattern/#_1","text":"\u5efa\u7acb\u4e00\u79cd\u5bf9\u8c61\u4e0e\u5bf9\u8c61\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4e00\u4e2a\u5bf9\u8c61\u53d1\u751f\u6539\u53d8\u65f6\u5c06\u81ea\u52a8\u901a\u77e5\u5176\u4ed6\u5bf9\u8c61\uff0c\u5176\u4ed6\u5bf9\u8c61\u5c06\u76f8\u5e94\u505a\u51fa\u53cd\u5e94\u3002\u5728\u6b64\uff0c\u53d1\u751f\u6539\u53d8\u7684\u5bf9\u8c61\u79f0\u4e3a\u89c2\u5bdf\u76ee\u6807\uff0c\u800c\u88ab\u901a\u77e5\u7684\u5bf9\u8c61\u79f0\u4e3a\u89c2\u5bdf\u8005\uff0c\u4e00\u4e2a\u89c2\u5bdf\u76ee\u6807\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u89c2\u5bdf\u8005\uff0c\u800c\u4e14\u8fd9\u4e9b\u89c2\u5bdf\u8005\u4e4b\u95f4\u6ca1\u6709\u76f8\u4e92\u8054\u7cfb\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u589e\u52a0\u548c\u5220\u9664\u89c2\u5bdf\u8005\uff0c\u4f7f\u5f97\u7cfb\u7edf\u66f4\u6613\u4e8e\u6269\u5c55\uff0c\u8fd9\u5c31\u662f\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/6-ObserverPattern/#_2","text":"\u89c2\u5bdf\u8005\u6a21\u5f0f( Observer Pattern )\uff1a\u5b9a\u4e49\u5bf9\u8c61\u95f4\u7684\u4e00\u79cd\u4e00\u5bf9\u591a\u4f9d\u8d56\u5173\u7cfb\uff0c\u4f7f\u5f97\u6bcf\u5f53\u4e00\u4e2a\u5bf9\u8c61\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u5176\u76f8\u5173\u4f9d\u8d56\u5bf9\u8c61\u7686\u5f97\u5230\u901a\u77e5\u5e76\u88ab\u81ea\u52a8\u66f4\u65b0\u3002\u89c2\u5bdf\u8005\u6a21\u5f0f\u53c8\u53eb\u505a\u53d1\u5e03-\u8ba2\u9605\uff08 Publish / Subscribe \uff09\u6a21\u5f0f\u3001\u6a21\u578b-\u89c6\u56fe\uff08 Model / View \uff09\u6a21\u5f0f\u3001\u6e90-\u76d1\u542c\u5668\uff08 Source / Listener \uff09\u6a21\u5f0f\u6216\u4ece\u5c5e\u8005\uff08 Dependents \uff09\u6a21\u5f0f\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u662f\u4e00\u79cd \u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f \u3002","title":"\u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/6-ObserverPattern/#_3","text":"","title":"\u4e09\u3001\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/6-ObserverPattern/#1","text":"\u89c2\u5bdf\u8005\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Subject : \u76ee\u6807\uff08\u62bd\u8c61\u7684\u88ab\u89c2\u5bdf\u7740\uff09 ConcreteSubject : \u5177\u4f53\u76ee\u6807\uff08\u5177\u4f53\u7684\u88ab\u89c2\u5bdf\u8005\uff09 Observer : \u89c2\u5bdf\u8005 ConcreteObserver : \u5177\u4f53\u89c2\u5bdf\u8005","title":"1. \u89d2\u8272\u7ec4\u6210"},{"location":"Design-Patterns/6-ObserverPattern/#2","text":"","title":"2. \u7ed3\u6784\u56fe"},{"location":"Design-Patterns/6-ObserverPattern/#3","text":"","title":"3. \u65f6\u5e8f\u56fe"},{"location":"Design-Patterns/6-ObserverPattern/#_4","text":"\u9996\u5148\uff0c\u662f\u89c2\u5bdf\u8005\u63a5\u53e3\uff1a /** * \u89c2\u5bdf\u8005\u63a5\u53e3 * */ public interface Observer { // \u66f4\u65b0\u7684\u65b9\u6cd5 public void update (); } \u63a5\u4e0b\u6765\uff0c\u662f\u5177\u4f53\u7684\u89c2\u5bdf\u8005\u7c7b\uff1a /** * \u5177\u4f53\u7684\u89c2\u5bdf\u8005. */ public class ConcreteObserver implements Observer { /** * \u5b9e\u73b0\u66f4\u65b0\u65b9\u6cd5. */ @Override public void update () { System . out . println ( \"\u63a5\u6536\u5230\u4fe1\u606f,\u5e76\u8fdb\u884c\u5904\u7406...\" ); } } \u7136\u540e\uff0c\u662f\u88ab\u89c2\u5bdf\u8005\u7684\u62bd\u8c61\u7c7b\uff1a /** * \u88ab\u89c2\u5bdf\u8005\u7684\u62bd\u8c61\u7c7b. */ public abstract class Subject { /** \u5b9a\u4e49\u4e00\u4e2a\u89c2\u5bdf\u8005\u7684\u96c6\u5408. */ private List < Observer > observers = new ArrayList < Observer > (); /** * \u589e\u52a0\u4e00\u4e2a\u89c2\u5bdf\u8005. * * @param o */ public void addObserver ( Observer o ) { this . observers . add ( o ); } /** * \u5220\u9664\u4e00\u4e2a\u89c2\u5bdf\u8005. * * @param o */ public void delObserver ( Observer o ) { this . observers . remove ( o ); } /** * \u901a\u77e5\u6240\u6709\u89c2\u5bdf\u8005. */ public void notifyObservers () { for ( Observer o : observers ) { o . update (); } } } \u5177\u4f53\u7684\u88ab\u89c2\u5bdf\u8005\uff1a /** * \u5177\u4f53\u7684\u88ab\u89c2\u5bdf\u8005. */ public class ConcreteSubject extends Subject { /** * \u5177\u4f53\u7684\u4e1a\u52a1. */ public void doSomething () { super . notifyObservers (); } } \u6700\u540e\uff0c\u662f\u7528\u4e8e\u6d4b\u8bd5\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u89c2\u5bdf\u8005\u6a21\u5f0f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b. */ public class ObserverClient { public static void main ( String [] args ) { // \u521b\u5efa\u4e00\u4e2a\u88ab\u89c2\u5bdf\u8005\u548c\u89c2\u5bdf\u8005. ConcreteSubject sub = new ConcreteSubject (); Observer obs = new ConcreteObserver (); // \u89c2\u5bdf\u8005\u89c2\u5bdf\u88ab\u89c2\u5bdf\u8005. sub . addObserver ( obs ); // \u89c2\u5bdf\u8005\u5f00\u59cb\u6d3b\u52a8\u4e86. sub . doSomething (); } }","title":"\u56db\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/6-ObserverPattern/#_5","text":"\u89c2\u5bdf\u8005\u6a21\u5f0f\u63cf\u8ff0\u4e86\u5982\u4f55\u5efa\u7acb\u5bf9\u8c61\u4e0e\u5bf9\u8c61\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5982\u4f55\u6784\u9020\u6ee1\u8db3\u8fd9\u79cd\u9700\u6c42\u7684\u7cfb\u7edf\u3002 \u8fd9\u4e00\u6a21\u5f0f\u4e2d\u7684\u5173\u952e\u5bf9\u8c61\u662f\u89c2\u5bdf\u76ee\u6807\u548c\u89c2\u5bdf\u8005\uff0c\u4e00\u4e2a\u76ee\u6807\u53ef\u4ee5\u6709\u4efb\u610f\u6570\u76ee\u7684\u4e0e\u4e4b\u76f8\u4f9d\u8d56\u7684\u89c2\u5bdf\u8005\uff0c\u4e00\u65e6\u76ee\u6807\u7684\u72b6\u6001\u53d1\u751f\u6539\u53d8\uff0c\u6240\u6709\u7684\u89c2\u5bdf\u8005\u90fd\u5c06\u5f97\u5230\u901a\u77e5\u3002 \u4f5c\u4e3a\u5bf9\u8fd9\u4e2a\u901a\u77e5\u7684\u54cd\u5e94\uff0c\u6bcf\u4e2a\u89c2\u5bdf\u8005\u90fd\u5c06\u5373\u65f6\u66f4\u65b0\u81ea\u5df1\u7684\u72b6\u6001\uff0c\u4ee5\u4e0e\u76ee\u6807\u72b6\u6001\u540c\u6b65\uff0c\u8fd9\u79cd\u4ea4\u4e92\u4e5f\u79f0\u4e3a \u53d1\u5e03-\u8ba2\u9605 ( publish-subscribe )\u3002\u76ee\u6807\u662f\u901a\u77e5\u7684\u53d1\u5e03\u8005\uff0c\u5b83\u53d1\u51fa\u901a\u77e5\u65f6\u5e76\u4e0d\u9700\u8981\u77e5\u9053\u8c01\u662f\u5b83\u7684\u89c2\u5bdf\u8005\uff0c\u53ef\u4ee5\u6709\u4efb\u610f\u6570\u76ee\u7684\u89c2\u5bdf\u8005\u8ba2\u9605\u5b83\u5e76\u63a5\u6536\u901a\u3002","title":"\u4e94\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/6-ObserverPattern/#1_1","text":"\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u89c2\u5bdf\u8005\u6a21\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u8868\u793a\u5c42\u548c\u6570\u636e\u903b\u8f91\u5c42\u7684\u5206\u79bb\uff0c\u5e76\u5b9a\u4e49\u4e86\u7a33\u5b9a\u7684\u6d88\u606f\u66f4\u65b0\u4f20\u9012\u673a\u5236\uff0c\u62bd\u8c61\u4e86\u66f4\u65b0\u63a5\u53e3\uff0c\u4f7f\u5f97\u53ef\u4ee5\u6709\u5404\u79cd\u5404\u6837\u4e0d\u540c\u7684\u8868\u793a\u5c42\u4f5c\u4e3a\u5177\u4f53\u89c2\u5bdf\u8005\u89d2\u8272\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5728\u89c2\u5bdf\u76ee\u6807\u548c\u89c2\u5bdf\u8005\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u62bd\u8c61\u7684\u8026\u5408\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u652f\u6301\u5e7f\u64ad\u901a\u4fe1\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u7684\u8981\u6c42\u3002","title":"1. \u4f18\u70b9"},{"location":"Design-Patterns/6-ObserverPattern/#2_1","text":"\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u5982\u679c\u4e00\u4e2a\u89c2\u5bdf\u76ee\u6807\u5bf9\u8c61\u6709\u5f88\u591a\u76f4\u63a5\u548c\u95f4\u63a5\u7684\u89c2\u5bdf\u8005\u7684\u8bdd\uff0c\u5c06\u6240\u6709\u7684\u89c2\u5bdf\u8005\u90fd\u901a\u77e5\u5230\u4f1a\u82b1\u8d39\u5f88\u591a\u65f6\u95f4\u3002 \u5982\u679c\u5728\u89c2\u5bdf\u8005\u548c\u89c2\u5bdf\u76ee\u6807\u4e4b\u95f4\u6709\u5faa\u73af\u4f9d\u8d56\u7684\u8bdd\uff0c\u89c2\u5bdf\u76ee\u6807\u4f1a\u89e6\u53d1\u5b83\u4eec\u4e4b\u95f4\u8fdb\u884c\u5faa\u73af\u8c03\u7528\uff0c\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u5d29\u6e83\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u6ca1\u6709\u76f8\u5e94\u7684\u673a\u5236\u8ba9\u89c2\u5bdf\u8005\u77e5\u9053\u6240\u89c2\u5bdf\u7684\u76ee\u6807\u5bf9\u8c61\u662f\u600e\u4e48\u53d1\u751f\u53d8\u5316\u7684\uff0c\u800c\u4ec5\u4ec5\u53ea\u662f\u77e5\u9053\u89c2\u5bdf\u76ee\u6807\u53d1\u751f\u4e86\u53d8\u5316\u3002","title":"2. \u7f3a\u70b9"},{"location":"Design-Patterns/6-ObserverPattern/#3_1","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f\uff1a \u4e00\u4e2a\u62bd\u8c61\u6a21\u578b\u6709\u4e24\u4e2a\u65b9\u9762\uff0c\u5176\u4e2d\u4e00\u4e2a\u65b9\u9762\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u65b9\u9762\u3002\u5c06\u8fd9\u4e9b\u65b9\u9762\u5c01\u88c5\u5728\u72ec\u7acb\u7684\u5bf9\u8c61\u4e2d\u4f7f\u5b83\u4eec\u53ef\u4ee5\u5404\u81ea\u72ec\u7acb\u5730\u6539\u53d8\u548c\u590d\u7528\u3002 \u4e00\u4e2a\u5bf9\u8c61\u7684\u6539\u53d8\u5c06\u5bfc\u81f4\u5176\u4ed6\u4e00\u4e2a\u6216\u591a\u4e2a\u5bf9\u8c61\u4e5f\u53d1\u751f\u6539\u53d8\uff0c\u800c\u4e0d\u77e5\u9053\u5177\u4f53\u6709\u591a\u5c11\u5bf9\u8c61\u5c06\u53d1\u751f\u6539\u53d8\uff0c\u53ef\u4ee5\u964d\u4f4e\u5bf9\u8c61\u4e4b\u95f4\u7684\u8026\u5408\u5ea6\u3002 \u4e00\u4e2a\u5bf9\u8c61\u5fc5\u987b\u901a\u77e5\u5176\u4ed6\u5bf9\u8c61\uff0c\u800c\u5e76\u4e0d\u77e5\u9053\u8fd9\u4e9b\u5bf9\u8c61\u662f\u8c01\u3002 \u9700\u8981\u5728\u7cfb\u7edf\u4e2d\u521b\u5efa\u4e00\u4e2a\u89e6\u53d1\u94fe\uff0cA \u5bf9\u8c61\u7684\u884c\u4e3a\u5c06\u5f71\u54cd B \u5bf9\u8c61\uff0cB \u5bf9\u8c61\u7684\u884c\u4e3a\u5c06\u5f71\u54cd C \u5bf9\u8c61\u2026\u2026\uff0c\u53ef\u4ee5\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f\u521b\u5efa\u4e00\u79cd\u94fe\u5f0f\u89e6\u53d1\u673a\u5236\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u5982\u67d0\u7535\u5b50\u5546\u52a1\u7f51\u7ad9\u53ef\u4ee5\u5728\u6267\u884c\u53d1\u9001\u64cd\u4f5c\u540e\u7ed9\u7528\u6237\u591a\u4e2a\u53d1\u9001\u5546\u54c1\u6253\u6298\u4fe1\u606f\uff0c\u67d0\u56e2\u961f\u6218\u6597\u6e38\u620f\u4e2d\u67d0\u961f\u53cb\u727a\u7272\u5c06\u7ed9\u6240\u6709\u6210\u5458\u63d0\u793a\u7b49\u7b49\uff0c\u51e1\u662f\u6d89\u53ca\u5230\u4e00\u5bf9\u4e00\u6216\u8005\u4e00\u5bf9\u591a\u7684\u5bf9\u8c61\u4ea4\u4e92\u573a\u666f\u90fd\u53ef\u4ee5\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f\u3002","title":"3.\u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/6-ObserverPattern/#_6","text":"\u89c2\u5bdf\u8005\u6a21\u5f0f\u5b9a\u4e49\u5bf9\u8c61\u95f4\u7684\u4e00\u79cd\u4e00\u5bf9\u591a\u4f9d\u8d56\u5173\u7cfb\uff0c\u4f7f\u5f97\u6bcf\u5f53\u4e00\u4e2a\u5bf9\u8c61\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u5176\u76f8\u5173\u4f9d\u8d56\u5bf9\u8c61\u7686\u5f97\u5230\u901a\u77e5\u5e76\u88ab\u81ea\u52a8\u66f4\u65b0\u3002\u89c2\u5bdf\u8005\u6a21\u5f0f\u53c8\u53eb\u505a\u53d1\u5e03-\u8ba2\u9605\u6a21\u5f0f\u3001\u6a21\u578b-\u89c6\u56fe\u6a21\u5f0f\u3001\u6e90-\u76d1\u542c\u5668\u6a21\u5f0f\u6216\u4ece\u5c5e\u8005\u6a21\u5f0f\u3002\u89c2\u5bdf\u8005\u6a21\u5f0f\u662f\u4e00\u79cd\u5bf9\u8c61\u884c\u4e3a\u578b\u6a21\u5f0f\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u76ee\u6807\u53c8\u79f0\u4e3a\u4e3b\u9898\uff0c\u5b83\u662f\u6307\u88ab\u89c2\u5bdf\u7684\u5bf9\u8c61\uff1b\u5177\u4f53\u76ee\u6807\u662f\u76ee\u6807\u7c7b\u7684\u5b50\u7c7b\uff0c\u901a\u5e38\u5b83\u5305\u542b\u6709\u7ecf\u5e38\u53d1\u751f\u6539\u53d8\u7684\u6570\u636e\uff0c\u5f53\u5b83\u7684\u72b6\u6001\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u5411\u5b83\u7684\u5404\u4e2a\u89c2\u5bdf\u8005\u53d1\u51fa\u901a\u77e5\uff1b\u89c2\u5bdf\u8005\u5c06\u5bf9\u89c2\u5bdf\u76ee\u6807\u7684\u6539\u53d8\u505a\u51fa\u53cd\u5e94\uff1b\u5728\u5177\u4f53\u89c2\u5bdf\u8005\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u6307\u5411\u5177\u4f53\u76ee\u6807\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5b83\u5b58\u50a8\u5177\u4f53\u89c2\u5bdf\u8005\u7684\u6709\u5173\u72b6\u6001\uff0c\u8fd9\u4e9b\u72b6\u6001\u9700\u8981\u548c\u5177\u4f53\u76ee\u6807\u7684\u72b6\u6001\u4fdd\u6301\u4e00\u81f4\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u5b9a\u4e49\u4e86\u4e00\u79cd\u4e00\u5bf9\u591a\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u8ba9\u591a\u4e2a\u89c2\u5bdf\u8005\u5bf9\u8c61\u540c\u65f6\u76d1\u542c\u67d0\u4e00\u4e2a\u76ee\u6807\u5bf9\u8c61\uff0c\u5f53\u8fd9\u4e2a\u76ee\u6807\u5bf9\u8c61\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u901a\u77e5\u6240\u6709\u89c2\u5bdf\u8005\u5bf9\u8c61\uff0c\u4f7f\u5b83\u4eec\u80fd\u591f\u81ea\u52a8\u66f4\u65b0\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u53ef\u4ee5\u5b9e\u73b0\u8868\u793a\u5c42\u548c\u6570\u636e\u903b\u8f91\u5c42\u7684\u5206\u79bb\uff0c\u5e76\u5728\u89c2\u5bdf\u76ee\u6807\u548c\u89c2\u5bdf\u8005\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u62bd\u8c61\u7684\u8026\u5408\uff0c\u652f\u6301\u5e7f\u64ad\u901a\u4fe1\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u5982\u679c\u4e00\u4e2a\u89c2\u5bdf\u76ee\u6807\u5bf9\u8c61\u6709\u5f88\u591a\u76f4\u63a5\u548c\u95f4\u63a5\u7684\u89c2\u5bdf\u8005\u7684\u8bdd\uff0c\u5c06\u6240\u6709\u7684\u89c2\u5bdf\u8005\u90fd\u901a\u77e5\u5230\u4f1a\u82b1\u8d39\u5f88\u591a\u65f6\u95f4\uff0c\u800c\u4e14\u5982\u679c\u5728\u89c2\u5bdf\u8005\u548c\u89c2\u5bdf\u76ee\u6807\u4e4b\u95f4\u6709\u5faa\u73af\u4f9d\u8d56\u7684\u8bdd\uff0c\u89c2\u5bdf\u76ee\u6807\u4f1a\u89e6\u53d1\u5b83\u4eec\u4e4b\u95f4\u8fdb\u884c\u5faa\u73af\u8c03\u7528\uff0c\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u5d29\u6e83\u3002 \u89c2\u5bdf\u8005\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u4e00\u4e2a\u62bd\u8c61\u6a21\u578b\u6709\u4e24\u4e2a\u65b9\u9762\uff0c\u5176\u4e2d\u4e00\u4e2a\u65b9\u9762\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u65b9\u9762\uff1b\u4e00\u4e2a\u5bf9\u8c61\u7684\u6539\u53d8\u5c06\u5bfc\u81f4\u5176\u4ed6\u4e00\u4e2a\u6216\u591a\u4e2a\u5bf9\u8c61\u4e5f\u53d1\u751f\u6539\u53d8\uff0c\u800c\u4e0d\u77e5\u9053\u5177\u4f53\u6709\u591a\u5c11\u5bf9\u8c61\u5c06\u53d1\u751f\u6539\u53d8\uff1b\u4e00\u4e2a\u5bf9\u8c61\u5fc5\u987b\u901a\u77e5\u5176\u4ed6\u5bf9\u8c61\uff0c\u800c\u5e76\u4e0d\u77e5\u9053\u8fd9\u4e9b\u5bf9\u8c61\u662f\u8c01\uff1b\u9700\u8981\u5728\u7cfb\u7edf\u4e2d\u521b\u5efa\u4e00\u4e2a\u89e6\u53d1\u94fe\u3002 \u5728 JDK \u7684 java.util \u5305\u4e2d\uff0c\u63d0\u4f9b\u4e86 Observable \u7c7b\u4ee5\u53ca Observer \u63a5\u53e3\uff0c\u5b83\u4eec\u6784\u6210\u4e86 Java \u8bed\u8a00\u5bf9\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u652f\u6301\u3002","title":"\u516d\u3001\u603b\u7ed3"},{"location":"Design-Patterns/7-AdapterPattern/","text":"\u6a21\u5f0f\u52a8\u673a \u00b6 \u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u91c7\u7528\u7c7b\u4f3c\u4e8e\u7535\u6e90\u9002\u914d\u5668\u7684\u8bbe\u8ba1\u548c\u7f16\u7801\u6280\u5de7\u88ab\u79f0\u4e3a\u9002\u914d\u5668\u6a21\u5f0f\u3002 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u76ee\u6807\u7c7b\u7684\u63a5\u53e3\u8bbf\u95ee\u5b83\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u3002\u6709\u65f6\uff0c\u73b0\u6709\u7684\u7c7b\u53ef\u4ee5\u6ee1\u8db3\u5ba2\u6237\u7c7b\u7684\u529f\u80fd\u9700\u8981\uff0c\u4f46\u662f\u5b83\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u4e0d\u4e00\u5b9a\u662f\u5ba2\u6237\u7c7b\u6240\u671f\u671b\u7684\uff0c\u8fd9\u53ef\u80fd\u662f\u56e0\u4e3a\u73b0\u6709\u7c7b\u4e2d\u65b9\u6cd5\u540d\u4e0e\u76ee\u6807\u7c7b\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\u540d\u4e0d\u4e00\u81f4\u7b49\u539f\u56e0\u6240\u5bfc\u81f4\u7684\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u73b0\u6709\u7684\u63a5\u53e3\u9700\u8981\u8f6c\u5316\u4e3a\u5ba2\u6237\u7c7b\u671f\u671b\u7684\u63a5\u53e3\uff0c\u8fd9\u6837\u4fdd\u8bc1\u4e86\u5bf9\u73b0\u6709\u7c7b\u7684\u91cd\u7528\u3002\u5982\u679c\u4e0d\u8fdb\u884c\u8fd9\u6837\u7684\u8f6c\u5316\uff0c\u5ba2\u6237\u7c7b\u5c31\u4e0d\u80fd\u5229\u7528\u73b0\u6709\u7c7b\u6240\u63d0\u4f9b\u7684\u529f\u80fd\uff0c\u9002\u914d\u5668\u6a21\u5f0f\u53ef\u4ee5\u5b8c\u6210\u8fd9\u6837\u7684\u8f6c\u5316\u3002 \u5728\u9002\u914d\u5668\u6a21\u5f0f\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u5305\u88c5\u7c7b\uff0c\u5305\u88c5\u4e0d\u517c\u5bb9\u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5305\u88c5\u7c7b\u6307\u7684\u5c31\u662f\u9002\u914d\u5668( Adapter )\uff0c\u5b83\u6240\u5305\u88c5\u7684\u5bf9\u8c61\u5c31\u662f\u9002\u914d\u8005( Adaptee )\uff0c\u5373\u88ab\u9002\u914d\u7684\u7c7b\u3002 \u9002\u914d\u5668\u63d0\u4f9b\u5ba2\u6237\u7c7b\u9700\u8981\u7684\u63a5\u53e3\uff0c\u9002\u914d\u5668\u7684\u5b9e\u73b0\u5c31\u662f\u628a\u5ba2\u6237\u7c7b\u7684\u8bf7\u6c42\u8f6c\u5316\u4e3a\u5bf9\u9002\u914d\u8005\u7684\u76f8\u5e94\u63a5\u53e3\u7684\u8c03\u7528\u3002\u4e5f\u5c31\u662f\u8bf4\uff1a\u5f53\u5ba2\u6237\u7c7b\u8c03\u7528\u9002\u914d\u5668\u7684\u65b9\u6cd5\u65f6\uff0c\u5728\u9002\u914d\u5668\u7c7b\u7684\u5185\u90e8\u5c06\u8c03\u7528\u9002\u914d\u8005\u7c7b\u7684\u65b9\u6cd5\uff0c\u800c\u8fd9\u4e2a\u8fc7\u7a0b\u5bf9\u5ba2\u6237\u7c7b\u662f\u900f\u660e\u7684\uff0c\u5ba2\u6237\u7c7b\u5e76\u4e0d\u76f4\u63a5\u8bbf\u95ee\u9002\u914d\u8005\u7c7b\u3002\u56e0\u6b64\uff0c\u9002\u914d\u5668\u53ef\u4ee5\u4f7f\u7531\u4e8e\u63a5\u53e3\u4e0d\u517c\u5bb9\u800c\u4e0d\u80fd\u4ea4\u4e92\u7684\u7c7b\u53ef\u4ee5\u4e00\u8d77\u5de5\u4f5c\u3002\u8fd9\u5c31\u662f\u9002\u914d\u5668\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002 \u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u9002\u914d\u5668\u6a21\u5f0f ( Adapter Pattern ) \uff1a\u5c06\u4e00\u4e2a\u63a5\u53e3\u8f6c\u6362\u6210\u5ba2\u6237\u5e0c\u671b\u7684\u53e6\u4e00\u4e2a\u63a5\u53e3\uff0c\u4f7f\u63a5\u53e3\u4e0d\u517c\u5bb9\u7684\u90a3\u4e9b\u7c7b\u53ef\u4ee5\u4e00\u8d77\u5de5\u4f5c\uff0c\u5176\u522b\u540d\u4e3a\u5305\u88c5\u5668( Wrapper )\u3002\u9002\u914d\u5668\u6a21\u5f0f\u65e2\u53ef\u4ee5\u4f5c\u4e3a\u7c7b\u7ed3\u6784\u578b\u6a21\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002\u9002\u914d\u5668\u6a21\u5f0f\u662f\u4e00\u79cd \u7ed3\u6784\u578b\u6a21\u5f0f \u3002 \u6a21\u5f0f\u7ed3\u6784 \u00b6 \u53c2\u4e0e\u89d2\u8272 \u00b6 \u9002\u914d\u5668\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Target \uff1a\u76ee\u6807\u62bd\u8c61\u7c7b Adapter \uff1a\u9002\u914d\u5668\u7c7b Adaptee \uff1a\u9002\u914d\u8005\u7c7b Client \uff1a\u5ba2\u6237\u7c7b UML \u7c7b\u56fe \u00b6 \u4ee3\u7801\u793a\u4f8b \u00b6 \u9996\u5148\uff0c\u662f\u76ee\u6807\u89d2\u8272\u63a5\u53e3\u548c\u5177\u4f53\u76ee\u6807\u5b9e\u73b0\u7c7b\uff1a /** * Target \u76ee\u6807\u89d2\u8272\u7c7b. */ public interface Target { /** * \u76ee\u6807\u89d2\u8272\u81ea\u5df1\u7684\u65b9\u6cd5. */ void request (); } /** * \u5177\u4f53\u7684\u76ee\u6807\u89d2\u8272\u5b9e\u73b0\u7c7b. */ public class ConcreteTarget implements Target { /** * \u76ee\u6807\u89d2\u8272\u81ea\u5df1\u7684\u65b9\u6cd5. */ @Override public void request () { System . out . println ( \"hello, I'm concrete target method.\" ); } } \u5176\u6b21\uff0c\u662f\u9002\u914d\u8005\u7c7b\uff1a /** * \u9002\u914d\u8005\u7c7b. */ public class Adaptee { /** * \u8fd9\u662f\u539f\u6709\u7684\u4e1a\u52a1\u903b\u8f91\u65b9\u6cd5. */ public void doSomething () { System . out . println ( \"Hello, I'm Adaptee method.\" ); } } \u7136\u540e\uff0c\u662f\u9002\u914d\u5668\u89d2\u8272\u7c7b\uff1a /** * \u9002\u914d\u5668\u7c7b. */ public class Adapter extends Adaptee implements Target { /** * \u9002\u914d\u4e86\u76ee\u6807\u89d2\u8272\u81ea\u5df1\u7684\u65b9\u6cd5. */ @Override public void request () { super . doSomething (); System . out . println ( \"\u9002\u914d\u5668\u9002\u914d\u4e86\u76ee\u6807\u89d2\u8272\u65b9\u6cd5.\" ); } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u5ba2\u6237\u7aef\u573a\u666f\u7c7b. */ public class Client { /** * main\u65b9\u6cd5. * * @param args \u6570\u7ec4\u53c2\u6570 */ public static void main ( String [] args ) { // \u539f\u6709\u4e1a\u52a1\u903b\u8f91. Target target = new ConcreteTarget (); target . request (); // \u589e\u52a0\u4e86\u9002\u914d\u5668\u89d2\u8272\u540e\u7684\u4e1a\u52a1\u903b\u8f91. Target adaptTarget = new Adapter (); adaptTarget . request (); } } \u6a21\u5f0f\u5206\u6790 \u00b6 \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u9002\u914d\u5668\u6a21\u5f0f\uff1a \u7cfb\u7edf\u9700\u8981\u4f7f\u7528\u73b0\u6709\u7684\u7c7b\uff0c\u800c\u8fd9\u4e9b\u7c7b\u7684\u63a5\u53e3\u4e0d\u7b26\u5408\u7cfb\u7edf\u7684\u9700\u8981\u3002 \u60f3\u8981\u5efa\u7acb\u4e00\u4e2a\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\u7684\u7c7b\uff0c\u7528\u4e8e\u4e0e\u4e00\u4e9b\u5f7c\u6b64\u4e4b\u95f4\u6ca1\u6709\u592a\u5927\u5173\u8054\u7684\u4e00\u4e9b\u7c7b\uff0c\u5305\u62ec\u4e00\u4e9b\u53ef\u80fd\u5728\u5c06\u6765\u5f15\u8fdb\u7684\u7c7b\u4e00\u8d77\u5de5\u4f5c\u3002 \u4f18\u70b9 \u00b6 \u5c06\u76ee\u6807\u7c7b\u548c\u9002\u914d\u8005\u7c7b\u89e3\u8026\uff0c\u901a\u8fc7\u5f15\u5165\u4e00\u4e2a\u9002\u914d\u5668\u7c7b\u6765\u91cd\u7528\u73b0\u6709\u7684\u9002\u914d\u8005\u7c7b\uff0c\u800c\u65e0\u987b\u4fee\u6539\u539f\u6709\u4ee3\u7801\u3002 \u589e\u52a0\u4e86\u7c7b\u7684\u900f\u660e\u6027\u548c\u590d\u7528\u6027\uff0c\u5c06\u5177\u4f53\u7684\u5b9e\u73b0\u5c01\u88c5\u5728\u9002\u914d\u8005\u7c7b\u4e2d\uff0c\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7c7b\u6765\u8bf4\u662f\u900f\u660e\u7684\uff0c\u800c\u4e14\u63d0\u9ad8\u4e86\u9002\u914d\u8005\u7684\u590d\u7528\u6027\u3002 \u7075\u6d3b\u6027\u548c\u6269\u5c55\u6027\u90fd\u975e\u5e38\u597d\uff0c\u901a\u8fc7\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u66f4\u6362\u9002\u914d\u5668\uff0c\u4e5f\u53ef\u4ee5\u5728\u4e0d\u4fee\u6539\u539f\u6709\u4ee3\u7801\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u65b0\u7684\u9002\u914d\u5668\u7c7b\uff0c\u5b8c\u5168\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002 \u7f3a\u70b9 \u00b6 \u5982\u679c\u4e00\u5b9a\u8981\u7f6e\u6362\u6389\u9002\u914d\u8005\u7c7b\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u65b9\u6cd5\uff0c\u5c31\u53ea\u597d\u5148\u505a\u4e00\u4e2a\u9002\u914d\u8005\u7c7b\u7684\u5b50\u7c7b\uff0c\u5c06\u9002\u914d\u8005\u7c7b\u7684\u65b9\u6cd5\u7f6e\u6362\u6389\uff0c\u7136\u540e\u518d\u628a\u9002\u914d\u8005\u7c7b\u7684\u5b50\u7c7b\u5f53\u505a\u771f\u6b63\u7684\u9002\u914d\u8005\u8fdb\u884c\u9002\u914d\uff0c\u5b9e\u73b0\u8fc7\u7a0b\u8f83\u4e3a\u590d\u6742\u3002 \u6a21\u5f0f\u5e94\u7528 \u00b6 Sun \u516c\u53f8\u5728 1996 \u5e74\u516c\u5f00\u4e86 Java \u8bed\u8a00\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5de5\u5177 JDBC\uff0cJDBC \u4f7f\u5f97 Java \u8bed\u8a00\u7a0b\u5e8f\u80fd\u591f\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u5e76\u4f7f\u7528 SQL \u8bed\u8a00\u6765\u67e5\u8be2\u548c\u64cd\u4f5c\u6570\u636e\u3002JDBC \u7ed9\u51fa\u4e00\u4e2a\u5ba2\u6237\u7aef\u901a\u7528\u7684\u62bd\u8c61\u63a5\u53e3\uff0c\u6bcf\u4e00\u4e2a\u5177\u4f53\u6570\u636e\u5e93\u5f15\u64ce\uff08\u5982 SQL Server\u3001Oracle\u3001MySQL \u7b49\uff09\u7684 JDBC \u9a71\u52a8\u8f6f\u4ef6\u90fd\u662f\u4e00\u4e2a\u4ecb\u4e8e JDBC \u63a5\u53e3\u548c\u6570\u636e\u5e93\u5f15\u64ce\u63a5\u53e3\u4e4b\u95f4\u7684\u9002\u914d\u5668\u8f6f\u4ef6\u3002\u62bd\u8c61\u7684 JDBC \u63a5\u53e3\u548c\u5404\u4e2a\u6570\u636e\u5e93\u5f15\u64ce API \u4e4b\u95f4\u90fd\u9700\u8981\u76f8\u5e94\u7684\u9002\u914d\u5668\u8f6f\u4ef6\uff0c\u8fd9\u5c31\u662f\u4e3a\u5404\u4e2a\u4e0d\u540c\u6570\u636e\u5e93\u5f15\u64ce\u51c6\u5907\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002 \u603b\u7ed3 \u00b6 \u7ed3\u6784\u578b\u6a21\u5f0f\u63cf\u8ff0\u5982\u4f55\u5c06\u7c7b\u6216\u8005\u5bf9\u8c61\u7ed3\u5408\u5728\u4e00\u8d77\u5f62\u6210\u66f4\u5927\u7684\u7ed3\u6784\u3002 \u9002\u914d\u5668\u6a21\u5f0f\u7528\u4e8e\u5c06\u4e00\u4e2a\u63a5\u53e3\u8f6c\u6362\u6210\u5ba2\u6237\u5e0c\u671b\u7684\u53e6\u4e00\u4e2a\u63a5\u53e3\uff0c\u9002\u914d\u5668\u6a21\u5f0f\u4f7f\u63a5\u53e3\u4e0d\u517c\u5bb9\u7684\u90a3\u4e9b\u7c7b\u53ef\u4ee5\u4e00\u8d77\u5de5\u4f5c\uff0c\u5176\u522b\u540d\u4e3a\u5305\u88c5\u5668\u3002\u9002\u914d\u5668\u6a21\u5f0f\u65e2\u53ef\u4ee5\u4f5c\u4e3a\u7c7b\u7ed3\u6784\u578b\u6a21\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u9002\u914d\u5668\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u76ee\u6807\u62bd\u8c61\u7c7b\u5b9a\u4e49\u5ba2\u6237\u8981\u7528\u7684\u7279\u5b9a\u9886\u57df\u7684\u63a5\u53e3\uff1b\u9002\u914d\u5668\u7c7b\u53ef\u4ee5\u8c03\u7528\u53e6\u4e00\u4e2a\u63a5\u53e3\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u8f6c\u6362\u5668\uff0c\u5bf9\u9002\u914d\u8005\u548c\u62bd\u8c61\u76ee\u6807\u7c7b\u8fdb\u884c\u9002\u914d\uff0c\u5b83\u662f\u9002\u914d\u5668\u6a21\u5f0f\u7684\u6838\u5fc3\uff1b\u9002\u914d\u8005\u7c7b\u662f\u88ab\u9002\u914d\u7684\u89d2\u8272\uff0c\u5b83\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u9700\u8981\u9002\u914d\uff1b\u5728\u5ba2\u6237\u7c7b\u4e2d\u9488\u5bf9\u76ee\u6807\u62bd\u8c61\u7c7b\u8fdb\u884c\u7f16\u7a0b\uff0c\u8c03\u7528\u5728\u76ee\u6807\u62bd\u8c61\u7c7b\u4e2d\u5b9a\u4e49\u7684\u4e1a\u52a1\u65b9\u6cd5\u3002 \u5728\u7c7b\u9002\u914d\u5668\u6a21\u5f0f\u4e2d\uff0c\u9002\u914d\u5668\u7c7b\u5b9e\u73b0\u4e86\u76ee\u6807\u62bd\u8c61\u7c7b\u63a5\u53e3\u5e76\u7ee7\u627f\u4e86\u9002\u914d\u8005\u7c7b\uff0c\u5e76\u5728\u76ee\u6807\u62bd\u8c61\u7c7b\u7684\u5b9e\u73b0\u65b9\u6cd5\u4e2d\u8c03\u7528\u6240\u7ee7\u627f\u7684\u9002\u914d\u8005\u7c7b\u7684\u65b9\u6cd5\uff1b\u5728\u5bf9\u8c61\u9002\u914d\u5668\u6a21\u5f0f\u4e2d\uff0c\u9002\u914d\u5668\u7c7b\u7ee7\u627f\u4e86\u76ee\u6807\u62bd\u8c61\u7c7b\u5e76\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9002\u914d\u8005\u7c7b\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u5728\u6240\u7ee7\u627f\u7684\u76ee\u6807\u62bd\u8c61\u7c7b\u65b9\u6cd5\u4e2d\u8c03\u7528\u9002\u914d\u8005\u7c7b\u7684\u76f8\u5e94\u4e1a\u52a1\u65b9\u6cd5\u3002 \u9002\u914d\u5668\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u5c06\u76ee\u6807\u7c7b\u548c\u9002\u914d\u8005\u7c7b\u89e3\u8026\uff0c\u589e\u52a0\u4e86\u7c7b\u7684\u900f\u660e\u6027\u548c\u590d\u7528\u6027\uff0c\u540c\u65f6\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\u548c\u6269\u5c55\u6027\u90fd\u975e\u5e38\u597d\uff0c\u66f4\u6362\u9002\u914d\u5668\u6216\u8005\u589e\u52a0\u65b0\u7684\u9002\u914d\u5668\u90fd\u975e\u5e38\u65b9\u4fbf\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\uff1b\u7c7b\u9002\u914d\u5668\u6a21\u5f0f\u7684\u7f3a\u70b9\u662f\u9002\u914d\u5668\u7c7b\u5728\u5f88\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d\u4e0d\u80fd\u540c\u65f6\u9002\u914d\u591a\u4e2a\u9002\u914d\u8005\u7c7b\uff0c\u5bf9\u8c61\u9002\u914d\u5668\u6a21\u5f0f\u7684\u7f3a\u70b9\u662f\u5f88\u96be\u7f6e\u6362\u9002\u914d\u8005\u7c7b\u7684\u65b9\u6cd5\u3002 \u9002\u914d\u5668\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u7cfb\u7edf\u9700\u8981\u4f7f\u7528\u73b0\u6709\u7684\u7c7b\uff0c\u800c\u8fd9\u4e9b\u7c7b\u7684\u63a5\u53e3\u4e0d\u7b26\u5408\u7cfb\u7edf\u7684\u9700\u8981\uff1b\u60f3\u8981\u5efa\u7acb\u4e00\u4e2a\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\u7684\u7c7b\uff0c\u7528\u4e8e\u4e0e\u4e00\u4e9b\u5f7c\u6b64\u4e4b\u95f4\u6ca1\u6709\u592a\u5927\u5173\u8054\u7684\u4e00\u4e9b\u7c7b\u4e00\u8d77\u5de5\u4f5c\u3002 \u53c2\u8003\u81ea\uff1a \u9002\u914d\u5668\u6a21\u5f0f","title":"\u9002\u914d\u5668\u6a21\u5f0f\uff08Adapter Pattern\uff09"},{"location":"Design-Patterns/7-AdapterPattern/#_1","text":"\u5728\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u91c7\u7528\u7c7b\u4f3c\u4e8e\u7535\u6e90\u9002\u914d\u5668\u7684\u8bbe\u8ba1\u548c\u7f16\u7801\u6280\u5de7\u88ab\u79f0\u4e3a\u9002\u914d\u5668\u6a21\u5f0f\u3002 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u76ee\u6807\u7c7b\u7684\u63a5\u53e3\u8bbf\u95ee\u5b83\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u3002\u6709\u65f6\uff0c\u73b0\u6709\u7684\u7c7b\u53ef\u4ee5\u6ee1\u8db3\u5ba2\u6237\u7c7b\u7684\u529f\u80fd\u9700\u8981\uff0c\u4f46\u662f\u5b83\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u4e0d\u4e00\u5b9a\u662f\u5ba2\u6237\u7c7b\u6240\u671f\u671b\u7684\uff0c\u8fd9\u53ef\u80fd\u662f\u56e0\u4e3a\u73b0\u6709\u7c7b\u4e2d\u65b9\u6cd5\u540d\u4e0e\u76ee\u6807\u7c7b\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\u540d\u4e0d\u4e00\u81f4\u7b49\u539f\u56e0\u6240\u5bfc\u81f4\u7684\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u73b0\u6709\u7684\u63a5\u53e3\u9700\u8981\u8f6c\u5316\u4e3a\u5ba2\u6237\u7c7b\u671f\u671b\u7684\u63a5\u53e3\uff0c\u8fd9\u6837\u4fdd\u8bc1\u4e86\u5bf9\u73b0\u6709\u7c7b\u7684\u91cd\u7528\u3002\u5982\u679c\u4e0d\u8fdb\u884c\u8fd9\u6837\u7684\u8f6c\u5316\uff0c\u5ba2\u6237\u7c7b\u5c31\u4e0d\u80fd\u5229\u7528\u73b0\u6709\u7c7b\u6240\u63d0\u4f9b\u7684\u529f\u80fd\uff0c\u9002\u914d\u5668\u6a21\u5f0f\u53ef\u4ee5\u5b8c\u6210\u8fd9\u6837\u7684\u8f6c\u5316\u3002 \u5728\u9002\u914d\u5668\u6a21\u5f0f\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u5305\u88c5\u7c7b\uff0c\u5305\u88c5\u4e0d\u517c\u5bb9\u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5305\u88c5\u7c7b\u6307\u7684\u5c31\u662f\u9002\u914d\u5668( Adapter )\uff0c\u5b83\u6240\u5305\u88c5\u7684\u5bf9\u8c61\u5c31\u662f\u9002\u914d\u8005( Adaptee )\uff0c\u5373\u88ab\u9002\u914d\u7684\u7c7b\u3002 \u9002\u914d\u5668\u63d0\u4f9b\u5ba2\u6237\u7c7b\u9700\u8981\u7684\u63a5\u53e3\uff0c\u9002\u914d\u5668\u7684\u5b9e\u73b0\u5c31\u662f\u628a\u5ba2\u6237\u7c7b\u7684\u8bf7\u6c42\u8f6c\u5316\u4e3a\u5bf9\u9002\u914d\u8005\u7684\u76f8\u5e94\u63a5\u53e3\u7684\u8c03\u7528\u3002\u4e5f\u5c31\u662f\u8bf4\uff1a\u5f53\u5ba2\u6237\u7c7b\u8c03\u7528\u9002\u914d\u5668\u7684\u65b9\u6cd5\u65f6\uff0c\u5728\u9002\u914d\u5668\u7c7b\u7684\u5185\u90e8\u5c06\u8c03\u7528\u9002\u914d\u8005\u7c7b\u7684\u65b9\u6cd5\uff0c\u800c\u8fd9\u4e2a\u8fc7\u7a0b\u5bf9\u5ba2\u6237\u7c7b\u662f\u900f\u660e\u7684\uff0c\u5ba2\u6237\u7c7b\u5e76\u4e0d\u76f4\u63a5\u8bbf\u95ee\u9002\u914d\u8005\u7c7b\u3002\u56e0\u6b64\uff0c\u9002\u914d\u5668\u53ef\u4ee5\u4f7f\u7531\u4e8e\u63a5\u53e3\u4e0d\u517c\u5bb9\u800c\u4e0d\u80fd\u4ea4\u4e92\u7684\u7c7b\u53ef\u4ee5\u4e00\u8d77\u5de5\u4f5c\u3002\u8fd9\u5c31\u662f\u9002\u914d\u5668\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002","title":"\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/7-AdapterPattern/#_2","text":"\u9002\u914d\u5668\u6a21\u5f0f ( Adapter Pattern ) \uff1a\u5c06\u4e00\u4e2a\u63a5\u53e3\u8f6c\u6362\u6210\u5ba2\u6237\u5e0c\u671b\u7684\u53e6\u4e00\u4e2a\u63a5\u53e3\uff0c\u4f7f\u63a5\u53e3\u4e0d\u517c\u5bb9\u7684\u90a3\u4e9b\u7c7b\u53ef\u4ee5\u4e00\u8d77\u5de5\u4f5c\uff0c\u5176\u522b\u540d\u4e3a\u5305\u88c5\u5668( Wrapper )\u3002\u9002\u914d\u5668\u6a21\u5f0f\u65e2\u53ef\u4ee5\u4f5c\u4e3a\u7c7b\u7ed3\u6784\u578b\u6a21\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002\u9002\u914d\u5668\u6a21\u5f0f\u662f\u4e00\u79cd \u7ed3\u6784\u578b\u6a21\u5f0f \u3002","title":"\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/7-AdapterPattern/#_3","text":"","title":"\u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/7-AdapterPattern/#_4","text":"\u9002\u914d\u5668\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Target \uff1a\u76ee\u6807\u62bd\u8c61\u7c7b Adapter \uff1a\u9002\u914d\u5668\u7c7b Adaptee \uff1a\u9002\u914d\u8005\u7c7b Client \uff1a\u5ba2\u6237\u7c7b","title":"\u53c2\u4e0e\u89d2\u8272"},{"location":"Design-Patterns/7-AdapterPattern/#uml","text":"","title":"UML \u7c7b\u56fe"},{"location":"Design-Patterns/7-AdapterPattern/#_5","text":"\u9996\u5148\uff0c\u662f\u76ee\u6807\u89d2\u8272\u63a5\u53e3\u548c\u5177\u4f53\u76ee\u6807\u5b9e\u73b0\u7c7b\uff1a /** * Target \u76ee\u6807\u89d2\u8272\u7c7b. */ public interface Target { /** * \u76ee\u6807\u89d2\u8272\u81ea\u5df1\u7684\u65b9\u6cd5. */ void request (); } /** * \u5177\u4f53\u7684\u76ee\u6807\u89d2\u8272\u5b9e\u73b0\u7c7b. */ public class ConcreteTarget implements Target { /** * \u76ee\u6807\u89d2\u8272\u81ea\u5df1\u7684\u65b9\u6cd5. */ @Override public void request () { System . out . println ( \"hello, I'm concrete target method.\" ); } } \u5176\u6b21\uff0c\u662f\u9002\u914d\u8005\u7c7b\uff1a /** * \u9002\u914d\u8005\u7c7b. */ public class Adaptee { /** * \u8fd9\u662f\u539f\u6709\u7684\u4e1a\u52a1\u903b\u8f91\u65b9\u6cd5. */ public void doSomething () { System . out . println ( \"Hello, I'm Adaptee method.\" ); } } \u7136\u540e\uff0c\u662f\u9002\u914d\u5668\u89d2\u8272\u7c7b\uff1a /** * \u9002\u914d\u5668\u7c7b. */ public class Adapter extends Adaptee implements Target { /** * \u9002\u914d\u4e86\u76ee\u6807\u89d2\u8272\u81ea\u5df1\u7684\u65b9\u6cd5. */ @Override public void request () { super . doSomething (); System . out . println ( \"\u9002\u914d\u5668\u9002\u914d\u4e86\u76ee\u6807\u89d2\u8272\u65b9\u6cd5.\" ); } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * \u5ba2\u6237\u7aef\u573a\u666f\u7c7b. */ public class Client { /** * main\u65b9\u6cd5. * * @param args \u6570\u7ec4\u53c2\u6570 */ public static void main ( String [] args ) { // \u539f\u6709\u4e1a\u52a1\u903b\u8f91. Target target = new ConcreteTarget (); target . request (); // \u589e\u52a0\u4e86\u9002\u914d\u5668\u89d2\u8272\u540e\u7684\u4e1a\u52a1\u903b\u8f91. Target adaptTarget = new Adapter (); adaptTarget . request (); } }","title":"\u4ee3\u7801\u793a\u4f8b"},{"location":"Design-Patterns/7-AdapterPattern/#_6","text":"","title":"\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/7-AdapterPattern/#_7","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u9002\u914d\u5668\u6a21\u5f0f\uff1a \u7cfb\u7edf\u9700\u8981\u4f7f\u7528\u73b0\u6709\u7684\u7c7b\uff0c\u800c\u8fd9\u4e9b\u7c7b\u7684\u63a5\u53e3\u4e0d\u7b26\u5408\u7cfb\u7edf\u7684\u9700\u8981\u3002 \u60f3\u8981\u5efa\u7acb\u4e00\u4e2a\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\u7684\u7c7b\uff0c\u7528\u4e8e\u4e0e\u4e00\u4e9b\u5f7c\u6b64\u4e4b\u95f4\u6ca1\u6709\u592a\u5927\u5173\u8054\u7684\u4e00\u4e9b\u7c7b\uff0c\u5305\u62ec\u4e00\u4e9b\u53ef\u80fd\u5728\u5c06\u6765\u5f15\u8fdb\u7684\u7c7b\u4e00\u8d77\u5de5\u4f5c\u3002","title":"\u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/7-AdapterPattern/#_8","text":"\u5c06\u76ee\u6807\u7c7b\u548c\u9002\u914d\u8005\u7c7b\u89e3\u8026\uff0c\u901a\u8fc7\u5f15\u5165\u4e00\u4e2a\u9002\u914d\u5668\u7c7b\u6765\u91cd\u7528\u73b0\u6709\u7684\u9002\u914d\u8005\u7c7b\uff0c\u800c\u65e0\u987b\u4fee\u6539\u539f\u6709\u4ee3\u7801\u3002 \u589e\u52a0\u4e86\u7c7b\u7684\u900f\u660e\u6027\u548c\u590d\u7528\u6027\uff0c\u5c06\u5177\u4f53\u7684\u5b9e\u73b0\u5c01\u88c5\u5728\u9002\u914d\u8005\u7c7b\u4e2d\uff0c\u5bf9\u4e8e\u5ba2\u6237\u7aef\u7c7b\u6765\u8bf4\u662f\u900f\u660e\u7684\uff0c\u800c\u4e14\u63d0\u9ad8\u4e86\u9002\u914d\u8005\u7684\u590d\u7528\u6027\u3002 \u7075\u6d3b\u6027\u548c\u6269\u5c55\u6027\u90fd\u975e\u5e38\u597d\uff0c\u901a\u8fc7\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u66f4\u6362\u9002\u914d\u5668\uff0c\u4e5f\u53ef\u4ee5\u5728\u4e0d\u4fee\u6539\u539f\u6709\u4ee3\u7801\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u65b0\u7684\u9002\u914d\u5668\u7c7b\uff0c\u5b8c\u5168\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002","title":"\u4f18\u70b9"},{"location":"Design-Patterns/7-AdapterPattern/#_9","text":"\u5982\u679c\u4e00\u5b9a\u8981\u7f6e\u6362\u6389\u9002\u914d\u8005\u7c7b\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u65b9\u6cd5\uff0c\u5c31\u53ea\u597d\u5148\u505a\u4e00\u4e2a\u9002\u914d\u8005\u7c7b\u7684\u5b50\u7c7b\uff0c\u5c06\u9002\u914d\u8005\u7c7b\u7684\u65b9\u6cd5\u7f6e\u6362\u6389\uff0c\u7136\u540e\u518d\u628a\u9002\u914d\u8005\u7c7b\u7684\u5b50\u7c7b\u5f53\u505a\u771f\u6b63\u7684\u9002\u914d\u8005\u8fdb\u884c\u9002\u914d\uff0c\u5b9e\u73b0\u8fc7\u7a0b\u8f83\u4e3a\u590d\u6742\u3002","title":"\u7f3a\u70b9"},{"location":"Design-Patterns/7-AdapterPattern/#_10","text":"Sun \u516c\u53f8\u5728 1996 \u5e74\u516c\u5f00\u4e86 Java \u8bed\u8a00\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5de5\u5177 JDBC\uff0cJDBC \u4f7f\u5f97 Java \u8bed\u8a00\u7a0b\u5e8f\u80fd\u591f\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u5e76\u4f7f\u7528 SQL \u8bed\u8a00\u6765\u67e5\u8be2\u548c\u64cd\u4f5c\u6570\u636e\u3002JDBC \u7ed9\u51fa\u4e00\u4e2a\u5ba2\u6237\u7aef\u901a\u7528\u7684\u62bd\u8c61\u63a5\u53e3\uff0c\u6bcf\u4e00\u4e2a\u5177\u4f53\u6570\u636e\u5e93\u5f15\u64ce\uff08\u5982 SQL Server\u3001Oracle\u3001MySQL \u7b49\uff09\u7684 JDBC \u9a71\u52a8\u8f6f\u4ef6\u90fd\u662f\u4e00\u4e2a\u4ecb\u4e8e JDBC \u63a5\u53e3\u548c\u6570\u636e\u5e93\u5f15\u64ce\u63a5\u53e3\u4e4b\u95f4\u7684\u9002\u914d\u5668\u8f6f\u4ef6\u3002\u62bd\u8c61\u7684 JDBC \u63a5\u53e3\u548c\u5404\u4e2a\u6570\u636e\u5e93\u5f15\u64ce API \u4e4b\u95f4\u90fd\u9700\u8981\u76f8\u5e94\u7684\u9002\u914d\u5668\u8f6f\u4ef6\uff0c\u8fd9\u5c31\u662f\u4e3a\u5404\u4e2a\u4e0d\u540c\u6570\u636e\u5e93\u5f15\u64ce\u51c6\u5907\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002","title":"\u6a21\u5f0f\u5e94\u7528"},{"location":"Design-Patterns/7-AdapterPattern/#_11","text":"\u7ed3\u6784\u578b\u6a21\u5f0f\u63cf\u8ff0\u5982\u4f55\u5c06\u7c7b\u6216\u8005\u5bf9\u8c61\u7ed3\u5408\u5728\u4e00\u8d77\u5f62\u6210\u66f4\u5927\u7684\u7ed3\u6784\u3002 \u9002\u914d\u5668\u6a21\u5f0f\u7528\u4e8e\u5c06\u4e00\u4e2a\u63a5\u53e3\u8f6c\u6362\u6210\u5ba2\u6237\u5e0c\u671b\u7684\u53e6\u4e00\u4e2a\u63a5\u53e3\uff0c\u9002\u914d\u5668\u6a21\u5f0f\u4f7f\u63a5\u53e3\u4e0d\u517c\u5bb9\u7684\u90a3\u4e9b\u7c7b\u53ef\u4ee5\u4e00\u8d77\u5de5\u4f5c\uff0c\u5176\u522b\u540d\u4e3a\u5305\u88c5\u5668\u3002\u9002\u914d\u5668\u6a21\u5f0f\u65e2\u53ef\u4ee5\u4f5c\u4e3a\u7c7b\u7ed3\u6784\u578b\u6a21\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u9002\u914d\u5668\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u76ee\u6807\u62bd\u8c61\u7c7b\u5b9a\u4e49\u5ba2\u6237\u8981\u7528\u7684\u7279\u5b9a\u9886\u57df\u7684\u63a5\u53e3\uff1b\u9002\u914d\u5668\u7c7b\u53ef\u4ee5\u8c03\u7528\u53e6\u4e00\u4e2a\u63a5\u53e3\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u8f6c\u6362\u5668\uff0c\u5bf9\u9002\u914d\u8005\u548c\u62bd\u8c61\u76ee\u6807\u7c7b\u8fdb\u884c\u9002\u914d\uff0c\u5b83\u662f\u9002\u914d\u5668\u6a21\u5f0f\u7684\u6838\u5fc3\uff1b\u9002\u914d\u8005\u7c7b\u662f\u88ab\u9002\u914d\u7684\u89d2\u8272\uff0c\u5b83\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u9700\u8981\u9002\u914d\uff1b\u5728\u5ba2\u6237\u7c7b\u4e2d\u9488\u5bf9\u76ee\u6807\u62bd\u8c61\u7c7b\u8fdb\u884c\u7f16\u7a0b\uff0c\u8c03\u7528\u5728\u76ee\u6807\u62bd\u8c61\u7c7b\u4e2d\u5b9a\u4e49\u7684\u4e1a\u52a1\u65b9\u6cd5\u3002 \u5728\u7c7b\u9002\u914d\u5668\u6a21\u5f0f\u4e2d\uff0c\u9002\u914d\u5668\u7c7b\u5b9e\u73b0\u4e86\u76ee\u6807\u62bd\u8c61\u7c7b\u63a5\u53e3\u5e76\u7ee7\u627f\u4e86\u9002\u914d\u8005\u7c7b\uff0c\u5e76\u5728\u76ee\u6807\u62bd\u8c61\u7c7b\u7684\u5b9e\u73b0\u65b9\u6cd5\u4e2d\u8c03\u7528\u6240\u7ee7\u627f\u7684\u9002\u914d\u8005\u7c7b\u7684\u65b9\u6cd5\uff1b\u5728\u5bf9\u8c61\u9002\u914d\u5668\u6a21\u5f0f\u4e2d\uff0c\u9002\u914d\u5668\u7c7b\u7ee7\u627f\u4e86\u76ee\u6807\u62bd\u8c61\u7c7b\u5e76\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9002\u914d\u8005\u7c7b\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u5728\u6240\u7ee7\u627f\u7684\u76ee\u6807\u62bd\u8c61\u7c7b\u65b9\u6cd5\u4e2d\u8c03\u7528\u9002\u914d\u8005\u7c7b\u7684\u76f8\u5e94\u4e1a\u52a1\u65b9\u6cd5\u3002 \u9002\u914d\u5668\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u5c06\u76ee\u6807\u7c7b\u548c\u9002\u914d\u8005\u7c7b\u89e3\u8026\uff0c\u589e\u52a0\u4e86\u7c7b\u7684\u900f\u660e\u6027\u548c\u590d\u7528\u6027\uff0c\u540c\u65f6\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\u548c\u6269\u5c55\u6027\u90fd\u975e\u5e38\u597d\uff0c\u66f4\u6362\u9002\u914d\u5668\u6216\u8005\u589e\u52a0\u65b0\u7684\u9002\u914d\u5668\u90fd\u975e\u5e38\u65b9\u4fbf\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\uff1b\u7c7b\u9002\u914d\u5668\u6a21\u5f0f\u7684\u7f3a\u70b9\u662f\u9002\u914d\u5668\u7c7b\u5728\u5f88\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d\u4e0d\u80fd\u540c\u65f6\u9002\u914d\u591a\u4e2a\u9002\u914d\u8005\u7c7b\uff0c\u5bf9\u8c61\u9002\u914d\u5668\u6a21\u5f0f\u7684\u7f3a\u70b9\u662f\u5f88\u96be\u7f6e\u6362\u9002\u914d\u8005\u7c7b\u7684\u65b9\u6cd5\u3002 \u9002\u914d\u5668\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u7cfb\u7edf\u9700\u8981\u4f7f\u7528\u73b0\u6709\u7684\u7c7b\uff0c\u800c\u8fd9\u4e9b\u7c7b\u7684\u63a5\u53e3\u4e0d\u7b26\u5408\u7cfb\u7edf\u7684\u9700\u8981\uff1b\u60f3\u8981\u5efa\u7acb\u4e00\u4e2a\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\u7684\u7c7b\uff0c\u7528\u4e8e\u4e0e\u4e00\u4e9b\u5f7c\u6b64\u4e4b\u95f4\u6ca1\u6709\u592a\u5927\u5173\u8054\u7684\u4e00\u4e9b\u7c7b\u4e00\u8d77\u5de5\u4f5c\u3002 \u53c2\u8003\u81ea\uff1a \u9002\u914d\u5668\u6a21\u5f0f","title":"\u603b\u7ed3"},{"location":"Design-Patterns/8-BridgePattern/","text":"\u6a21\u5f0f\u52a8\u673a \u00b6 \u8bbe\u60f3\u5982\u679c\u8981\u7ed8\u5236\u77e9\u5f62\u3001\u5706\u5f62\u3001\u692d\u5706\u3001\u6b63\u65b9\u5f62\uff0c\u6211\u4eec\u81f3\u5c11\u9700\u8981 4 \u4e2a\u5f62\u72b6\u7c7b\uff0c\u4f46\u662f\u5982\u679c\u7ed8\u5236\u7684\u56fe\u5f62\u9700\u8981\u5177\u6709\u4e0d\u540c\u7684\u989c\u8272\uff0c\u5982\u7ea2\u8272\u3001\u7eff\u8272\u3001\u84dd\u8272\u7b49\uff0c\u6b64\u65f6\u81f3\u5c11\u6709\u5982\u4e0b\u4e24\u79cd\u8bbe\u8ba1\u65b9\u6848\uff1a \u7b2c\u4e00\u79cd\u8bbe\u8ba1\u65b9\u6848\u662f\u4e3a\u6bcf\u4e00\u79cd\u5f62\u72b6\u90fd\u63d0\u4f9b\u4e00\u5957\u5404\u79cd\u989c\u8272\u7684\u7248\u672c\u3002 \u7b2c\u4e8c\u79cd\u8bbe\u8ba1\u65b9\u6848\u662f\u6839\u636e\u5b9e\u9645\u9700\u8981\u5bf9\u5f62\u72b6\u548c\u989c\u8272\u8fdb\u884c\u7ec4\u5408 \u5bf9\u4e8e\u6709\u4e24\u4e2a\u53d8\u5316\u7ef4\u5ea6\uff08\u5373\u4e24\u4e2a\u53d8\u5316\u7684\u539f\u56e0\uff09\u7684\u7cfb\u7edf\uff0c\u91c7\u7528\u65b9\u6848\u4e8c\u6765\u8fdb\u884c\u8bbe\u8ba1\u7cfb\u7edf\u4e2d\u7c7b\u7684\u4e2a\u6570\u66f4\u5c11\uff0c\u4e14\u7cfb\u7edf\u6269\u5c55\u66f4\u4e3a\u65b9\u4fbf\u3002\u8bbe\u8ba1\u65b9\u6848\u4e8c\u5373\u662f\u6865\u63a5\u6a21\u5f0f\u7684\u5e94\u7528\u3002\u6865\u63a5\u6a21\u5f0f\u5c06\u7ee7\u627f\u5173\u7cfb\u8f6c\u6362\u4e3a\u5173\u8054\u5173\u7cfb\uff0c\u4ece\u800c\u964d\u4f4e\u4e86\u7c7b\u4e0e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408\uff0c\u51cf\u5c11\u4e86\u4ee3\u7801\u7f16\u5199\u91cf\u3002 \u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u6865\u63a5\u6a21\u5f0f ( Bridge Pattern )\uff1a\u5c06\u62bd\u8c61\u548c\u5b9e\u73b0\u89e3\u8026\uff0c\u4f7f\u5f97\u4e24\u8005\u53ef\u4ee5\u72ec\u7acb\u5730\u53d8\u5316\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\uff0c\u53c8\u79f0\u4e3a\u6865\u6881\u6a21\u5f0f\u3002 \u6a21\u5f0f\u89d2\u8272 \u00b6 \u6865\u63a5\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Abstraction \uff1a\u62bd\u8c61\u7c7b\u89d2\u8272 RefinedAbstraction \uff1a\u6269\u5145\u62bd\u8c61\u7c7b Implementor \uff1a\u5b9e\u73b0\u5316\u89d2\u8272 ConcreteImplementor \uff1a\u5177\u4f53\u5b9e\u73b0\u5316\u89d2\u8272\u7684\u5b9e\u73b0\u7c7b UML \u7c7b\u56fe \u00b6 \u4ee3\u7801\u793a\u4f8b \u00b6 \u9996\u5148\uff0c\u662f\u5b9e\u73b0\u5316\u89d2\u8272 Abstraction \u7c7b\uff1a /** * \u5b9e\u73b0\u5316\u89d2\u8272 Implementor. */ public interface Implementor { /** * \u57fa\u672c\u65b9\u6cd51. */ void doSomething (); /** * \u57fa\u672c\u65b9\u6cd52. */ void doAnything (); } \u7136\u540e\uff0c\u662f\u5404\u4e2a\u5177\u4f53\u7684\u5b9e\u73b0\u5316\u89d2\u8272\u7c7b\uff1a /** * ConcreteImplementor1. */ public class ConcreteImplementor1 implements Implementor { /** * \u57fa\u672c\u65b9\u6cd51. */ @Override public void doSomething () { System . out . println ( \"ConcreteImplementor1 \u7684\u4e1a\u52a1\u903b\u8f91 doSomething.\" ); } /** * \u57fa\u672c\u65b9\u6cd52. */ @Override public void doAnything () { System . out . println ( \"ConcreteImplementor1 \u7684\u4e1a\u52a1\u903b\u8f91 doAnything.\" ); } } /** * ConcreteImplementor2. */ public class ConcreteImplementor2 implements Implementor { /** * \u57fa\u672c\u65b9\u6cd51. */ @Override public void doSomething () { System . out . println ( \"ConcreteImplementor2 \u7684\u4e1a\u52a1\u903b\u8f91 doSomething.\" ); } /** * \u57fa\u672c\u65b9\u6cd52. */ @Override public void doAnything () { System . out . println ( \"ConcreteImplementor2 \u7684\u4e1a\u52a1\u903b\u8f91 doAnything.\" ); } } \u63a5\u4e0b\u6765\uff0c\u662f\u62bd\u8c61\u7c7b\u89d2\u8272 Abstraction \u7c7b\uff1a package com.blinkfox.patterns.bridge ; /** * \u62bd\u8c61\u5316\u89d2\u8272 Abstraction. */ public abstract class Abstraction { /** \u5b9a\u4e49\u5bf9\u5b9e\u73b0\u5316\u89d2\u8272\u7684\u5f15\u7528. */ private Implementor impl ; /** * \u6784\u9020\u65b9\u6cd5. * * @param impl \u5b9e\u73b0\u7c7b\u7684\u5b9e\u4f8b */ public Abstraction ( Implementor impl ) { this . impl = impl ; } /** * impl \u7684 getter\u65b9\u6cd5. * * @return impl */ public Implementor getImpl () { return impl ; } /** * \u81ea\u8eab\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5. */ public void request () { this . impl . doSomething (); } } \u518d\u6b21\uff0c\u662f\u6269\u5c55\u7684\u5177\u4f53\u62bd\u8c61\u5316\u89d2\u8272\u7c7b RefinedAbstraction \uff1a /** * RefinedAbstraction. */ public class RefinedAbstraction extends Abstraction { /** * \u6784\u9020\u65b9\u6cd5. * * @param impl \u5b9e\u73b0\u7c7b\u7684\u5b9e\u4f8b */ public RefinedAbstraction ( Implementor impl ) { super ( impl ); } /** * \u8986\u76d6\u540e\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5. */ @Override public void request () { System . out . println ( \"RefinedAbstraction \u5f00\u59cb\u505a\u4e1a\u52a1\u5904\u7406.\" ); super . request (); super . getImpl (). doAnything (); } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * Client. */ public class Client { /** * main\u65b9\u6cd5. * * @param args \u6570\u7ec4\u53c2\u6570 */ public static void main ( String [] args ) { // \u5b9a\u4e49\u4e00\u4e2a\u5b9e\u73b0\u5316\u89d2\u8272\u548c\u62bd\u8c61\u5316\u89d2\u8272,\u5e76\u6267\u884c\u8bf7\u6c42\u65b9\u6cd5. Implementor impl = new ConcreteImplementor1 (); Abstraction abs = new RefinedAbstraction ( impl ); abs . request (); } } \u6a21\u5f0f\u5206\u6790 \u00b6 \u7406\u89e3\u6865\u63a5\u6a21\u5f0f\uff0c\u91cd\u70b9\u9700\u8981\u7406\u89e3\u5982\u4f55\u5c06\u62bd\u8c61\u5316( Abstraction )\u4e0e\u5b9e\u73b0\u5316( Implementation )\u8131\u8026\uff0c\u4f7f\u5f97\u4e8c\u8005\u53ef\u4ee5\u72ec\u7acb\u5730\u53d8\u5316\u3002 \u62bd\u8c61\u5316 \uff1a\u62bd\u8c61\u5316\u5c31\u662f\u5ffd\u7565\u4e00\u4e9b\u4fe1\u606f\uff0c\u628a\u4e0d\u540c\u7684\u5b9e\u4f53\u5f53\u4f5c\u540c\u6837\u7684\u5b9e\u4f53\u5bf9\u5f85\u3002\u5728\u9762\u5411\u5bf9\u8c61\u4e2d\uff0c\u5c06\u5bf9\u8c61\u7684\u5171\u540c\u6027\u8d28\u62bd\u53d6\u51fa\u6765\u5f62\u6210\u7c7b\u7684\u8fc7\u7a0b\u5373\u4e3a\u62bd\u8c61\u5316\u7684\u8fc7\u7a0b\u3002 \u5b9e\u73b0\u5316 \uff1a\u9488\u5bf9\u62bd\u8c61\u5316\u7ed9\u51fa\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5c31\u662f\u5b9e\u73b0\u5316\uff0c\u62bd\u8c61\u5316\u4e0e\u5b9e\u73b0\u5316\u662f\u4e00\u5bf9\u4e92\u9006\u7684\u6982\u5ff5\uff0c\u5b9e\u73b0\u5316\u4ea7\u751f\u7684\u5bf9\u8c61\u6bd4\u62bd\u8c61\u5316\u66f4\u5177\u4f53\uff0c\u662f\u5bf9\u62bd\u8c61\u5316\u4e8b\u7269\u7684\u8fdb\u4e00\u6b65\u5177\u4f53\u5316\u7684\u4ea7\u7269\u3002 \u8131\u8026 \uff1a\u8131\u8026\u5c31\u662f\u5c06\u62bd\u8c61\u5316\u548c\u5b9e\u73b0\u5316\u4e4b\u95f4\u7684\u8026\u5408\u89e3\u8131\u5f00\uff0c\u6216\u8005\u8bf4\u662f\u5c06\u5b83\u4eec\u4e4b\u95f4\u7684\u5f3a\u5173\u8054\u6539\u6362\u6210\u5f31\u5173\u8054\uff0c\u5c06\u4e24\u4e2a\u89d2\u8272\u4e4b\u95f4\u7684\u7ee7\u627f\u5173\u7cfb\u6539\u4e3a\u5173\u8054\u5173\u7cfb\u3002 \u6865\u63a5\u6a21\u5f0f\u4e2d\u7684\u6240\u8c13\u8131\u8026\uff0c\u5c31\u662f\u6307\u5728\u4e00\u4e2a\u8f6f\u4ef6\u7cfb\u7edf\u7684\u62bd\u8c61\u5316\u548c\u5b9e\u73b0\u5316\u4e4b\u95f4\u4f7f\u7528\u5173\u8054\u5173\u7cfb\uff08\u7ec4\u5408\u6216\u8005\u805a\u5408\u5173\u7cfb\uff09\u800c\u4e0d\u662f\u7ee7\u627f\u5173\u7cfb\uff0c\u4ece\u800c\u4f7f\u4e24\u8005\u53ef\u4ee5\u76f8\u5bf9\u72ec\u7acb\u5730\u53d8\u5316\uff0c\u8fd9\u5c31\u662f\u6865\u63a5\u6a21\u5f0f\u7684\u7528\u610f\u3002 \u4f18\u70b9 \u00b6 \u6865\u63a5\u6a21\u5f0f\u7684\u4f18\u70b9: \u5206\u79bb\u62bd\u8c61\u63a5\u53e3\u53ca\u5176\u5b9e\u73b0\u90e8\u5206\u3002 \u6865\u63a5\u6a21\u5f0f\u6709\u65f6\u7c7b\u4f3c\u4e8e\u591a\u7ee7\u627f\u65b9\u6848\uff0c\u4f46\u662f\u591a\u7ee7\u627f\u65b9\u6848\u8fdd\u80cc\u4e86\u7c7b\u7684\u5355\u4e00\u804c\u8d23\u539f\u5219\uff08\u5373\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u53d8\u5316\u7684\u539f\u56e0\uff09\uff0c\u590d\u7528\u6027\u6bd4\u8f83\u5dee\uff0c\u800c\u4e14\u591a\u7ee7\u627f\u7ed3\u6784\u4e2d\u7c7b\u7684\u4e2a\u6570\u975e\u5e38\u5e9e\u5927\uff0c\u6865\u63a5\u6a21\u5f0f\u662f\u6bd4\u591a\u7ee7\u627f\u65b9\u6848\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\u3002 \u6865\u63a5\u6a21\u5f0f\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u53ef\u6269\u5145\u6027\uff0c\u5728\u4e24\u4e2a\u53d8\u5316\u7ef4\u5ea6\u4e2d\u4efb\u610f\u6269\u5c55\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u90fd\u4e0d\u9700\u8981\u4fee\u6539\u539f\u6709\u7cfb\u7edf\u3002 \u5b9e\u73b0\u7ec6\u8282\u5bf9\u5ba2\u6237\u900f\u660e\uff0c\u53ef\u4ee5\u5bf9\u7528\u6237\u9690\u85cf\u5b9e\u73b0\u7ec6\u8282\u3002 \u7f3a\u70b9 \u00b6 \u6865\u63a5\u6a21\u5f0f\u7684\u7f3a\u70b9: \u6865\u63a5\u6a21\u5f0f\u7684\u5f15\u5165\u4f1a\u589e\u52a0\u7cfb\u7edf\u7684\u7406\u89e3\u4e0e\u8bbe\u8ba1\u96be\u5ea6\uff0c\u7531\u4e8e\u805a\u5408\u5173\u8054\u5173\u7cfb\u5efa\u7acb\u5728\u62bd\u8c61\u5c42\uff0c\u8981\u6c42\u5f00\u53d1\u8005\u9488\u5bf9\u62bd\u8c61\u8fdb\u884c\u8bbe\u8ba1\u4e0e\u7f16\u7a0b\u3002 \u6865\u63a5\u6a21\u5f0f\u8981\u6c42\u6b63\u786e\u8bc6\u522b\u51fa\u7cfb\u7edf\u4e2d\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6\uff0c\u56e0\u6b64\u5176\u4f7f\u7528\u8303\u56f4\u5177\u6709\u4e00\u5b9a\u7684\u5c40\u9650\u6027\u3002 \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u6865\u63a5\u6a21\u5f0f\uff1a \u5982\u679c\u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u5728\u6784\u4ef6\u7684\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5177\u4f53\u5316\u89d2\u8272\u4e4b\u95f4\u589e\u52a0\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u907f\u514d\u5728\u4e24\u4e2a\u5c42\u6b21\u4e4b\u95f4\u5efa\u7acb\u9759\u6001\u7684\u7ee7\u627f\u8054\u7cfb\uff0c\u901a\u8fc7\u6865\u63a5\u6a21\u5f0f\u53ef\u4ee5\u4f7f\u5b83\u4eec\u5728\u62bd\u8c61\u5c42\u5efa\u7acb\u4e00\u4e2a\u5173\u8054\u5173\u7cfb\u3002 \u62bd\u8c61\u5316\u89d2\u8272\u548c\u5b9e\u73b0\u5316\u89d2\u8272\u53ef\u4ee5\u4ee5\u7ee7\u627f\u7684\u65b9\u5f0f\u72ec\u7acb\u6269\u5c55\u800c\u4e92\u4e0d\u5f71\u54cd\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u53ef\u4ee5\u52a8\u6001\u5c06\u4e00\u4e2a\u62bd\u8c61\u5316\u5b50\u7c7b\u7684\u5bf9\u8c61\u548c\u4e00\u4e2a\u5b9e\u73b0\u5316\u5b50\u7c7b\u7684\u5bf9\u8c61\u8fdb\u884c\u7ec4\u5408\uff0c\u5373\u7cfb\u7edf\u9700\u8981\u5bf9\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5b9e\u73b0\u5316\u89d2\u8272\u8fdb\u884c\u52a8\u6001\u8026\u5408\u3002 \u4e00\u4e2a\u7c7b\u5b58\u5728\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6\uff0c\u4e14\u8fd9\u4e24\u4e2a\u7ef4\u5ea6\u90fd\u9700\u8981\u8fdb\u884c\u6269\u5c55\u3002 \u867d\u7136\u5728\u7cfb\u7edf\u4e2d\u4f7f\u7528\u7ee7\u627f\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u4f46\u662f\u7531\u4e8e\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5177\u4f53\u5316\u89d2\u8272\u9700\u8981\u72ec\u7acb\u53d8\u5316\uff0c\u8bbe\u8ba1\u8981\u6c42\u9700\u8981\u72ec\u7acb\u7ba1\u7406\u8fd9\u4e24\u8005\u3002 \u5bf9\u4e8e\u90a3\u4e9b\u4e0d\u5e0c\u671b\u4f7f\u7528\u7ee7\u627f\u6216\u56e0\u4e3a\u591a\u5c42\u6b21\u7ee7\u627f\u5bfc\u81f4\u7cfb\u7edf\u7c7b\u7684\u4e2a\u6570\u6025\u5267\u589e\u52a0\u7684\u7cfb\u7edf\uff0c\u6865\u63a5\u6a21\u5f0f\u5c24\u4e3a\u9002\u7528\u3002 \u6a21\u5f0f\u5e94\u7528 \u00b6 \u4e00\u4e2a Java \u684c\u9762\u8f6f\u4ef6\u603b\u662f\u5e26\u6709\u6240\u5728\u64cd\u4f5c\u7cfb\u7edf\u7684\u89c6\u611f( LookAndFeel )\uff0c\u5982\u679c\u4e00\u4e2a Java \u8f6f\u4ef6\u662f\u5728 Unix \u7cfb\u7edf\u4e0a\u5f00\u53d1\u7684\uff0c\u90a3\u4e48\u5f00\u53d1\u4eba\u5458\u770b\u5230\u7684\u662f Motif \u7528\u6237\u754c\u9762\u7684\u89c6\u611f\uff1b\u5728 Windows \u4e0a\u9762\u4f7f\u7528\u8fd9\u4e2a\u7cfb\u7edf\u7684\u7528\u6237\u770b\u5230\u7684\u662f Windows \u7528\u6237\u754c\u9762\u7684\u89c6\u611f\uff1b\u800c\u4e00\u4e2a\u5728 Macintosh \u4e0a\u9762\u4f7f\u7528\u7684\u7528\u6237\u770b\u5230\u7684\u5219\u662f Macintosh \u7528\u6237\u754c\u9762\u7684\u89c6\u611f\uff0cJava \u8bed\u8a00\u662f\u901a\u8fc7\u6240\u8c13\u7684 Peer \u67b6\u6784\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u3002Java \u4e3a AWT \u4e2d\u7684\u6bcf\u4e00\u4e2a GUI \u6784\u4ef6\u90fd\u63d0\u4f9b\u4e86\u4e00\u4e2a Peer \u6784\u4ef6\uff0c\u5728 AWT \u4e2d\u7684 Peer \u67b6\u6784\u5c31\u4f7f\u7528\u4e86\u6865\u63a5\u6a21\u5f0f\u3002 \u6a21\u5f0f\u6269\u5c55 \u00b6 \u9002\u914d\u5668\u6a21\u5f0f\u4e0e\u6865\u63a5\u6a21\u5f0f\u7684\u8054\u7528: \u6865\u63a5\u6a21\u5f0f\u548c\u9002\u914d\u5668\u6a21\u5f0f\u7528\u4e8e\u8bbe\u8ba1\u7684\u4e0d\u540c\u9636\u6bb5\uff0c \u6865\u63a5\u6a21\u5f0f\u7528\u4e8e\u7cfb\u7edf\u7684\u521d\u6b65\u8bbe\u8ba1 \uff0c\u5bf9\u4e8e\u5b58\u5728\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7ef4\u5ea6\u7684\u7c7b\u53ef\u4ee5\u5c06\u5176\u5206\u4e3a\u62bd\u8c61\u5316\u548c\u5b9e\u73b0\u5316\u4e24\u4e2a\u89d2\u8272\uff0c\u4f7f\u5b83\u4eec\u53ef\u4ee5\u5206\u522b\u8fdb\u884c\u53d8\u5316\uff1b\u800c\u5728\u521d\u6b65\u8bbe\u8ba1\u5b8c\u6210\u4e4b\u540e\uff0c \u5f53\u53d1\u73b0\u7cfb\u7edf\u4e0e\u5df2\u6709\u7c7b\u65e0\u6cd5\u534f\u540c\u5de5\u4f5c\u65f6\uff0c\u53ef\u4ee5\u91c7\u7528\u9002\u914d\u5668\u6a21\u5f0f \u3002\u4f46\u6709\u65f6\u5019\u5728\u8bbe\u8ba1\u521d\u671f\u4e5f\u9700\u8981\u8003\u8651\u9002\u914d\u5668\u6a21\u5f0f\uff0c\u7279\u522b\u662f\u90a3\u4e9b\u6d89\u53ca\u5230\u5927\u91cf\u7b2c\u4e09\u65b9\u5e94\u7528\u63a5\u53e3\u7684\u60c5\u51b5\u3002 \u603b\u7ed3 \u00b6 \u6865\u63a5\u6a21\u5f0f\u5c06\u62bd\u8c61\u90e8\u5206\u4e0e\u5b83\u7684\u5b9e\u73b0\u90e8\u5206\u5206\u79bb\uff0c\u4f7f\u5b83\u4eec\u90fd\u53ef\u4ee5\u72ec\u7acb\u5730\u53d8\u5316\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u6865\u63a5\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5b9e\u73b0\u7c7b\u63a5\u53e3\u7c7b\u578b\u7684\u5bf9\u8c61\u5e76\u53ef\u4ee5\u7ef4\u62a4\u8be5\u5bf9\u8c61\uff1b\u6269\u5145\u62bd\u8c61\u7c7b\u6269\u5145\u7531\u62bd\u8c61\u7c7b\u5b9a\u4e49\u7684\u63a5\u53e3\uff0c\u5b83\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u7c7b\u4e2d\u5b9a\u4e49\u7684\u62bd\u8c61\u4e1a\u52a1\u65b9\u6cd5\uff0c\u5728\u6269\u5145\u62bd\u8c61\u7c7b\u4e2d\u53ef\u4ee5\u8c03\u7528\u5728\u5b9e\u73b0\u7c7b\u63a5\u53e3\u4e2d\u5b9a\u4e49\u7684\u4e1a\u52a1\u65b9\u6cd5\uff1b\u5b9e\u73b0\u7c7b\u63a5\u53e3\u5b9a\u4e49\u4e86\u5b9e\u73b0\u7c7b\u7684\u63a5\u53e3\uff0c\u5b9e\u73b0\u7c7b\u63a5\u53e3\u4ec5\u63d0\u4f9b\u57fa\u672c\u64cd\u4f5c\uff0c\u800c\u62bd\u8c61\u7c7b\u5b9a\u4e49\u7684\u63a5\u53e3\u53ef\u80fd\u4f1a\u505a\u66f4\u591a\u66f4\u590d\u6742\u7684\u64cd\u4f5c\uff1b\u5177\u4f53\u5b9e\u73b0\u7c7b\u5b9e\u73b0\u4e86\u5b9e\u73b0\u7c7b\u63a5\u53e3\u5e76\u4e14\u5177\u4f53\u5b9e\u73b0\u5b83\uff0c\u5728\u4e0d\u540c\u7684\u5177\u4f53\u5b9e\u73b0\u7c7b\u4e2d\u63d0\u4f9b\u57fa\u672c\u64cd\u4f5c\u7684\u4e0d\u540c\u5b9e\u73b0\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5177\u4f53\u5b9e\u73b0\u7c7b\u5bf9\u8c61\u5c06\u66ff\u6362\u5176\u7236\u7c7b\u5bf9\u8c61\uff0c\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\u5177\u4f53\u7684\u4e1a\u52a1\u64cd\u4f5c\u65b9\u6cd5\u3002 \u5728\u6865\u63a5\u6a21\u5f0f\u4e2d\uff0c\u62bd\u8c61\u5316( Abstraction )\u4e0e\u5b9e\u73b0\u5316( Implementation )\u8131\u8026\uff0c\u5b83\u4eec\u53ef\u4ee5\u6cbf\u7740\u5404\u81ea\u7684\u7ef4\u5ea6\u72ec\u7acb\u53d8\u5316\u3002 \u6865\u63a5\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u5206\u79bb\u62bd\u8c61\u63a5\u53e3\u53ca\u5176\u5b9e\u73b0\u90e8\u5206\uff0c\u662f\u6bd4\u591a\u7ee7\u627f\u65b9\u6848\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u6865\u63a5\u6a21\u5f0f\u8fd8\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u53ef\u6269\u5145\u6027\uff0c\u5728\u4e24\u4e2a\u53d8\u5316\u7ef4\u5ea6\u4e2d\u4efb\u610f\u6269\u5c55\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u90fd\u4e0d\u9700\u8981\u4fee\u6539\u539f\u6709\u7cfb\u7edf\uff0c\u5b9e\u73b0\u7ec6\u8282\u5bf9\u5ba2\u6237\u900f\u660e\uff0c\u53ef\u4ee5\u5bf9\u7528\u6237\u9690\u85cf\u5b9e\u73b0\u7ec6\u8282\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u662f\u589e\u52a0\u7cfb\u7edf\u7684\u7406\u89e3\u4e0e\u8bbe\u8ba1\u96be\u5ea6\uff0c\u4e14\u8bc6\u522b\u51fa\u7cfb\u7edf\u4e2d\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6\u5e76\u4e0d\u662f\u4e00\u4ef6\u5bb9\u6613\u7684\u4e8b\u60c5\u3002 \u6865\u63a5\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u9700\u8981\u5728\u6784\u4ef6\u7684\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5177\u4f53\u5316\u89d2\u8272\u4e4b\u95f4\u589e\u52a0\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u907f\u514d\u5728\u4e24\u4e2a\u5c42\u6b21\u4e4b\u95f4\u5efa\u7acb\u9759\u6001\u7684\u7ee7\u627f\u8054\u7cfb\uff1b\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5b9e\u73b0\u5316\u89d2\u8272\u53ef\u4ee5\u4ee5\u7ee7\u627f\u7684\u65b9\u5f0f\u72ec\u7acb\u6269\u5c55\u800c\u4e92\u4e0d\u5f71\u54cd\uff1b\u4e00\u4e2a\u7c7b\u5b58\u5728\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6\uff0c\u4e14\u8fd9\u4e24\u4e2a\u7ef4\u5ea6\u90fd\u9700\u8981\u8fdb\u884c\u6269\u5c55\uff1b\u8bbe\u8ba1\u8981\u6c42\u9700\u8981\u72ec\u7acb\u7ba1\u7406\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5177\u4f53\u5316\u89d2\u8272\uff1b\u4e0d\u5e0c\u671b\u4f7f\u7528\u7ee7\u627f\u6216\u56e0\u4e3a\u591a\u5c42\u6b21\u7ee7\u627f\u5bfc\u81f4\u7cfb\u7edf\u7c7b\u7684\u4e2a\u6570\u6025\u5267\u589e\u52a0\u7684\u7cfb\u7edf\u3002 \u53c2\u8003\u81ea\uff1a \u6865\u63a5\u6a21\u5f0f","title":"\u6865\u63a5\u6a21\u5f0f\uff08Bridge Pattern\uff09"},{"location":"Design-Patterns/8-BridgePattern/#_1","text":"\u8bbe\u60f3\u5982\u679c\u8981\u7ed8\u5236\u77e9\u5f62\u3001\u5706\u5f62\u3001\u692d\u5706\u3001\u6b63\u65b9\u5f62\uff0c\u6211\u4eec\u81f3\u5c11\u9700\u8981 4 \u4e2a\u5f62\u72b6\u7c7b\uff0c\u4f46\u662f\u5982\u679c\u7ed8\u5236\u7684\u56fe\u5f62\u9700\u8981\u5177\u6709\u4e0d\u540c\u7684\u989c\u8272\uff0c\u5982\u7ea2\u8272\u3001\u7eff\u8272\u3001\u84dd\u8272\u7b49\uff0c\u6b64\u65f6\u81f3\u5c11\u6709\u5982\u4e0b\u4e24\u79cd\u8bbe\u8ba1\u65b9\u6848\uff1a \u7b2c\u4e00\u79cd\u8bbe\u8ba1\u65b9\u6848\u662f\u4e3a\u6bcf\u4e00\u79cd\u5f62\u72b6\u90fd\u63d0\u4f9b\u4e00\u5957\u5404\u79cd\u989c\u8272\u7684\u7248\u672c\u3002 \u7b2c\u4e8c\u79cd\u8bbe\u8ba1\u65b9\u6848\u662f\u6839\u636e\u5b9e\u9645\u9700\u8981\u5bf9\u5f62\u72b6\u548c\u989c\u8272\u8fdb\u884c\u7ec4\u5408 \u5bf9\u4e8e\u6709\u4e24\u4e2a\u53d8\u5316\u7ef4\u5ea6\uff08\u5373\u4e24\u4e2a\u53d8\u5316\u7684\u539f\u56e0\uff09\u7684\u7cfb\u7edf\uff0c\u91c7\u7528\u65b9\u6848\u4e8c\u6765\u8fdb\u884c\u8bbe\u8ba1\u7cfb\u7edf\u4e2d\u7c7b\u7684\u4e2a\u6570\u66f4\u5c11\uff0c\u4e14\u7cfb\u7edf\u6269\u5c55\u66f4\u4e3a\u65b9\u4fbf\u3002\u8bbe\u8ba1\u65b9\u6848\u4e8c\u5373\u662f\u6865\u63a5\u6a21\u5f0f\u7684\u5e94\u7528\u3002\u6865\u63a5\u6a21\u5f0f\u5c06\u7ee7\u627f\u5173\u7cfb\u8f6c\u6362\u4e3a\u5173\u8054\u5173\u7cfb\uff0c\u4ece\u800c\u964d\u4f4e\u4e86\u7c7b\u4e0e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408\uff0c\u51cf\u5c11\u4e86\u4ee3\u7801\u7f16\u5199\u91cf\u3002","title":"\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/8-BridgePattern/#_2","text":"\u6865\u63a5\u6a21\u5f0f ( Bridge Pattern )\uff1a\u5c06\u62bd\u8c61\u548c\u5b9e\u73b0\u89e3\u8026\uff0c\u4f7f\u5f97\u4e24\u8005\u53ef\u4ee5\u72ec\u7acb\u5730\u53d8\u5316\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\uff0c\u53c8\u79f0\u4e3a\u6865\u6881\u6a21\u5f0f\u3002","title":"\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/8-BridgePattern/#_3","text":"\u6865\u63a5\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Abstraction \uff1a\u62bd\u8c61\u7c7b\u89d2\u8272 RefinedAbstraction \uff1a\u6269\u5145\u62bd\u8c61\u7c7b Implementor \uff1a\u5b9e\u73b0\u5316\u89d2\u8272 ConcreteImplementor \uff1a\u5177\u4f53\u5b9e\u73b0\u5316\u89d2\u8272\u7684\u5b9e\u73b0\u7c7b","title":"\u6a21\u5f0f\u89d2\u8272"},{"location":"Design-Patterns/8-BridgePattern/#uml","text":"","title":"UML \u7c7b\u56fe"},{"location":"Design-Patterns/8-BridgePattern/#_4","text":"\u9996\u5148\uff0c\u662f\u5b9e\u73b0\u5316\u89d2\u8272 Abstraction \u7c7b\uff1a /** * \u5b9e\u73b0\u5316\u89d2\u8272 Implementor. */ public interface Implementor { /** * \u57fa\u672c\u65b9\u6cd51. */ void doSomething (); /** * \u57fa\u672c\u65b9\u6cd52. */ void doAnything (); } \u7136\u540e\uff0c\u662f\u5404\u4e2a\u5177\u4f53\u7684\u5b9e\u73b0\u5316\u89d2\u8272\u7c7b\uff1a /** * ConcreteImplementor1. */ public class ConcreteImplementor1 implements Implementor { /** * \u57fa\u672c\u65b9\u6cd51. */ @Override public void doSomething () { System . out . println ( \"ConcreteImplementor1 \u7684\u4e1a\u52a1\u903b\u8f91 doSomething.\" ); } /** * \u57fa\u672c\u65b9\u6cd52. */ @Override public void doAnything () { System . out . println ( \"ConcreteImplementor1 \u7684\u4e1a\u52a1\u903b\u8f91 doAnything.\" ); } } /** * ConcreteImplementor2. */ public class ConcreteImplementor2 implements Implementor { /** * \u57fa\u672c\u65b9\u6cd51. */ @Override public void doSomething () { System . out . println ( \"ConcreteImplementor2 \u7684\u4e1a\u52a1\u903b\u8f91 doSomething.\" ); } /** * \u57fa\u672c\u65b9\u6cd52. */ @Override public void doAnything () { System . out . println ( \"ConcreteImplementor2 \u7684\u4e1a\u52a1\u903b\u8f91 doAnything.\" ); } } \u63a5\u4e0b\u6765\uff0c\u662f\u62bd\u8c61\u7c7b\u89d2\u8272 Abstraction \u7c7b\uff1a package com.blinkfox.patterns.bridge ; /** * \u62bd\u8c61\u5316\u89d2\u8272 Abstraction. */ public abstract class Abstraction { /** \u5b9a\u4e49\u5bf9\u5b9e\u73b0\u5316\u89d2\u8272\u7684\u5f15\u7528. */ private Implementor impl ; /** * \u6784\u9020\u65b9\u6cd5. * * @param impl \u5b9e\u73b0\u7c7b\u7684\u5b9e\u4f8b */ public Abstraction ( Implementor impl ) { this . impl = impl ; } /** * impl \u7684 getter\u65b9\u6cd5. * * @return impl */ public Implementor getImpl () { return impl ; } /** * \u81ea\u8eab\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5. */ public void request () { this . impl . doSomething (); } } \u518d\u6b21\uff0c\u662f\u6269\u5c55\u7684\u5177\u4f53\u62bd\u8c61\u5316\u89d2\u8272\u7c7b RefinedAbstraction \uff1a /** * RefinedAbstraction. */ public class RefinedAbstraction extends Abstraction { /** * \u6784\u9020\u65b9\u6cd5. * * @param impl \u5b9e\u73b0\u7c7b\u7684\u5b9e\u4f8b */ public RefinedAbstraction ( Implementor impl ) { super ( impl ); } /** * \u8986\u76d6\u540e\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5. */ @Override public void request () { System . out . println ( \"RefinedAbstraction \u5f00\u59cb\u505a\u4e1a\u52a1\u5904\u7406.\" ); super . request (); super . getImpl (). doAnything (); } } \u6700\u540e\uff0c\u662f\u5ba2\u6237\u7aef\u573a\u666f\u7c7b\uff1a /** * Client. */ public class Client { /** * main\u65b9\u6cd5. * * @param args \u6570\u7ec4\u53c2\u6570 */ public static void main ( String [] args ) { // \u5b9a\u4e49\u4e00\u4e2a\u5b9e\u73b0\u5316\u89d2\u8272\u548c\u62bd\u8c61\u5316\u89d2\u8272,\u5e76\u6267\u884c\u8bf7\u6c42\u65b9\u6cd5. Implementor impl = new ConcreteImplementor1 (); Abstraction abs = new RefinedAbstraction ( impl ); abs . request (); } }","title":"\u4ee3\u7801\u793a\u4f8b"},{"location":"Design-Patterns/8-BridgePattern/#_5","text":"\u7406\u89e3\u6865\u63a5\u6a21\u5f0f\uff0c\u91cd\u70b9\u9700\u8981\u7406\u89e3\u5982\u4f55\u5c06\u62bd\u8c61\u5316( Abstraction )\u4e0e\u5b9e\u73b0\u5316( Implementation )\u8131\u8026\uff0c\u4f7f\u5f97\u4e8c\u8005\u53ef\u4ee5\u72ec\u7acb\u5730\u53d8\u5316\u3002 \u62bd\u8c61\u5316 \uff1a\u62bd\u8c61\u5316\u5c31\u662f\u5ffd\u7565\u4e00\u4e9b\u4fe1\u606f\uff0c\u628a\u4e0d\u540c\u7684\u5b9e\u4f53\u5f53\u4f5c\u540c\u6837\u7684\u5b9e\u4f53\u5bf9\u5f85\u3002\u5728\u9762\u5411\u5bf9\u8c61\u4e2d\uff0c\u5c06\u5bf9\u8c61\u7684\u5171\u540c\u6027\u8d28\u62bd\u53d6\u51fa\u6765\u5f62\u6210\u7c7b\u7684\u8fc7\u7a0b\u5373\u4e3a\u62bd\u8c61\u5316\u7684\u8fc7\u7a0b\u3002 \u5b9e\u73b0\u5316 \uff1a\u9488\u5bf9\u62bd\u8c61\u5316\u7ed9\u51fa\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5c31\u662f\u5b9e\u73b0\u5316\uff0c\u62bd\u8c61\u5316\u4e0e\u5b9e\u73b0\u5316\u662f\u4e00\u5bf9\u4e92\u9006\u7684\u6982\u5ff5\uff0c\u5b9e\u73b0\u5316\u4ea7\u751f\u7684\u5bf9\u8c61\u6bd4\u62bd\u8c61\u5316\u66f4\u5177\u4f53\uff0c\u662f\u5bf9\u62bd\u8c61\u5316\u4e8b\u7269\u7684\u8fdb\u4e00\u6b65\u5177\u4f53\u5316\u7684\u4ea7\u7269\u3002 \u8131\u8026 \uff1a\u8131\u8026\u5c31\u662f\u5c06\u62bd\u8c61\u5316\u548c\u5b9e\u73b0\u5316\u4e4b\u95f4\u7684\u8026\u5408\u89e3\u8131\u5f00\uff0c\u6216\u8005\u8bf4\u662f\u5c06\u5b83\u4eec\u4e4b\u95f4\u7684\u5f3a\u5173\u8054\u6539\u6362\u6210\u5f31\u5173\u8054\uff0c\u5c06\u4e24\u4e2a\u89d2\u8272\u4e4b\u95f4\u7684\u7ee7\u627f\u5173\u7cfb\u6539\u4e3a\u5173\u8054\u5173\u7cfb\u3002 \u6865\u63a5\u6a21\u5f0f\u4e2d\u7684\u6240\u8c13\u8131\u8026\uff0c\u5c31\u662f\u6307\u5728\u4e00\u4e2a\u8f6f\u4ef6\u7cfb\u7edf\u7684\u62bd\u8c61\u5316\u548c\u5b9e\u73b0\u5316\u4e4b\u95f4\u4f7f\u7528\u5173\u8054\u5173\u7cfb\uff08\u7ec4\u5408\u6216\u8005\u805a\u5408\u5173\u7cfb\uff09\u800c\u4e0d\u662f\u7ee7\u627f\u5173\u7cfb\uff0c\u4ece\u800c\u4f7f\u4e24\u8005\u53ef\u4ee5\u76f8\u5bf9\u72ec\u7acb\u5730\u53d8\u5316\uff0c\u8fd9\u5c31\u662f\u6865\u63a5\u6a21\u5f0f\u7684\u7528\u610f\u3002","title":"\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/8-BridgePattern/#_6","text":"\u6865\u63a5\u6a21\u5f0f\u7684\u4f18\u70b9: \u5206\u79bb\u62bd\u8c61\u63a5\u53e3\u53ca\u5176\u5b9e\u73b0\u90e8\u5206\u3002 \u6865\u63a5\u6a21\u5f0f\u6709\u65f6\u7c7b\u4f3c\u4e8e\u591a\u7ee7\u627f\u65b9\u6848\uff0c\u4f46\u662f\u591a\u7ee7\u627f\u65b9\u6848\u8fdd\u80cc\u4e86\u7c7b\u7684\u5355\u4e00\u804c\u8d23\u539f\u5219\uff08\u5373\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u53d8\u5316\u7684\u539f\u56e0\uff09\uff0c\u590d\u7528\u6027\u6bd4\u8f83\u5dee\uff0c\u800c\u4e14\u591a\u7ee7\u627f\u7ed3\u6784\u4e2d\u7c7b\u7684\u4e2a\u6570\u975e\u5e38\u5e9e\u5927\uff0c\u6865\u63a5\u6a21\u5f0f\u662f\u6bd4\u591a\u7ee7\u627f\u65b9\u6848\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\u3002 \u6865\u63a5\u6a21\u5f0f\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u53ef\u6269\u5145\u6027\uff0c\u5728\u4e24\u4e2a\u53d8\u5316\u7ef4\u5ea6\u4e2d\u4efb\u610f\u6269\u5c55\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u90fd\u4e0d\u9700\u8981\u4fee\u6539\u539f\u6709\u7cfb\u7edf\u3002 \u5b9e\u73b0\u7ec6\u8282\u5bf9\u5ba2\u6237\u900f\u660e\uff0c\u53ef\u4ee5\u5bf9\u7528\u6237\u9690\u85cf\u5b9e\u73b0\u7ec6\u8282\u3002","title":"\u4f18\u70b9"},{"location":"Design-Patterns/8-BridgePattern/#_7","text":"\u6865\u63a5\u6a21\u5f0f\u7684\u7f3a\u70b9: \u6865\u63a5\u6a21\u5f0f\u7684\u5f15\u5165\u4f1a\u589e\u52a0\u7cfb\u7edf\u7684\u7406\u89e3\u4e0e\u8bbe\u8ba1\u96be\u5ea6\uff0c\u7531\u4e8e\u805a\u5408\u5173\u8054\u5173\u7cfb\u5efa\u7acb\u5728\u62bd\u8c61\u5c42\uff0c\u8981\u6c42\u5f00\u53d1\u8005\u9488\u5bf9\u62bd\u8c61\u8fdb\u884c\u8bbe\u8ba1\u4e0e\u7f16\u7a0b\u3002 \u6865\u63a5\u6a21\u5f0f\u8981\u6c42\u6b63\u786e\u8bc6\u522b\u51fa\u7cfb\u7edf\u4e2d\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6\uff0c\u56e0\u6b64\u5176\u4f7f\u7528\u8303\u56f4\u5177\u6709\u4e00\u5b9a\u7684\u5c40\u9650\u6027\u3002","title":"\u7f3a\u70b9"},{"location":"Design-Patterns/8-BridgePattern/#_8","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u6865\u63a5\u6a21\u5f0f\uff1a \u5982\u679c\u4e00\u4e2a\u7cfb\u7edf\u9700\u8981\u5728\u6784\u4ef6\u7684\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5177\u4f53\u5316\u89d2\u8272\u4e4b\u95f4\u589e\u52a0\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u907f\u514d\u5728\u4e24\u4e2a\u5c42\u6b21\u4e4b\u95f4\u5efa\u7acb\u9759\u6001\u7684\u7ee7\u627f\u8054\u7cfb\uff0c\u901a\u8fc7\u6865\u63a5\u6a21\u5f0f\u53ef\u4ee5\u4f7f\u5b83\u4eec\u5728\u62bd\u8c61\u5c42\u5efa\u7acb\u4e00\u4e2a\u5173\u8054\u5173\u7cfb\u3002 \u62bd\u8c61\u5316\u89d2\u8272\u548c\u5b9e\u73b0\u5316\u89d2\u8272\u53ef\u4ee5\u4ee5\u7ee7\u627f\u7684\u65b9\u5f0f\u72ec\u7acb\u6269\u5c55\u800c\u4e92\u4e0d\u5f71\u54cd\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u53ef\u4ee5\u52a8\u6001\u5c06\u4e00\u4e2a\u62bd\u8c61\u5316\u5b50\u7c7b\u7684\u5bf9\u8c61\u548c\u4e00\u4e2a\u5b9e\u73b0\u5316\u5b50\u7c7b\u7684\u5bf9\u8c61\u8fdb\u884c\u7ec4\u5408\uff0c\u5373\u7cfb\u7edf\u9700\u8981\u5bf9\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5b9e\u73b0\u5316\u89d2\u8272\u8fdb\u884c\u52a8\u6001\u8026\u5408\u3002 \u4e00\u4e2a\u7c7b\u5b58\u5728\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6\uff0c\u4e14\u8fd9\u4e24\u4e2a\u7ef4\u5ea6\u90fd\u9700\u8981\u8fdb\u884c\u6269\u5c55\u3002 \u867d\u7136\u5728\u7cfb\u7edf\u4e2d\u4f7f\u7528\u7ee7\u627f\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u4f46\u662f\u7531\u4e8e\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5177\u4f53\u5316\u89d2\u8272\u9700\u8981\u72ec\u7acb\u53d8\u5316\uff0c\u8bbe\u8ba1\u8981\u6c42\u9700\u8981\u72ec\u7acb\u7ba1\u7406\u8fd9\u4e24\u8005\u3002 \u5bf9\u4e8e\u90a3\u4e9b\u4e0d\u5e0c\u671b\u4f7f\u7528\u7ee7\u627f\u6216\u56e0\u4e3a\u591a\u5c42\u6b21\u7ee7\u627f\u5bfc\u81f4\u7cfb\u7edf\u7c7b\u7684\u4e2a\u6570\u6025\u5267\u589e\u52a0\u7684\u7cfb\u7edf\uff0c\u6865\u63a5\u6a21\u5f0f\u5c24\u4e3a\u9002\u7528\u3002","title":"\u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/8-BridgePattern/#_9","text":"\u4e00\u4e2a Java \u684c\u9762\u8f6f\u4ef6\u603b\u662f\u5e26\u6709\u6240\u5728\u64cd\u4f5c\u7cfb\u7edf\u7684\u89c6\u611f( LookAndFeel )\uff0c\u5982\u679c\u4e00\u4e2a Java \u8f6f\u4ef6\u662f\u5728 Unix \u7cfb\u7edf\u4e0a\u5f00\u53d1\u7684\uff0c\u90a3\u4e48\u5f00\u53d1\u4eba\u5458\u770b\u5230\u7684\u662f Motif \u7528\u6237\u754c\u9762\u7684\u89c6\u611f\uff1b\u5728 Windows \u4e0a\u9762\u4f7f\u7528\u8fd9\u4e2a\u7cfb\u7edf\u7684\u7528\u6237\u770b\u5230\u7684\u662f Windows \u7528\u6237\u754c\u9762\u7684\u89c6\u611f\uff1b\u800c\u4e00\u4e2a\u5728 Macintosh \u4e0a\u9762\u4f7f\u7528\u7684\u7528\u6237\u770b\u5230\u7684\u5219\u662f Macintosh \u7528\u6237\u754c\u9762\u7684\u89c6\u611f\uff0cJava \u8bed\u8a00\u662f\u901a\u8fc7\u6240\u8c13\u7684 Peer \u67b6\u6784\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u3002Java \u4e3a AWT \u4e2d\u7684\u6bcf\u4e00\u4e2a GUI \u6784\u4ef6\u90fd\u63d0\u4f9b\u4e86\u4e00\u4e2a Peer \u6784\u4ef6\uff0c\u5728 AWT \u4e2d\u7684 Peer \u67b6\u6784\u5c31\u4f7f\u7528\u4e86\u6865\u63a5\u6a21\u5f0f\u3002","title":"\u6a21\u5f0f\u5e94\u7528"},{"location":"Design-Patterns/8-BridgePattern/#_10","text":"\u9002\u914d\u5668\u6a21\u5f0f\u4e0e\u6865\u63a5\u6a21\u5f0f\u7684\u8054\u7528: \u6865\u63a5\u6a21\u5f0f\u548c\u9002\u914d\u5668\u6a21\u5f0f\u7528\u4e8e\u8bbe\u8ba1\u7684\u4e0d\u540c\u9636\u6bb5\uff0c \u6865\u63a5\u6a21\u5f0f\u7528\u4e8e\u7cfb\u7edf\u7684\u521d\u6b65\u8bbe\u8ba1 \uff0c\u5bf9\u4e8e\u5b58\u5728\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7ef4\u5ea6\u7684\u7c7b\u53ef\u4ee5\u5c06\u5176\u5206\u4e3a\u62bd\u8c61\u5316\u548c\u5b9e\u73b0\u5316\u4e24\u4e2a\u89d2\u8272\uff0c\u4f7f\u5b83\u4eec\u53ef\u4ee5\u5206\u522b\u8fdb\u884c\u53d8\u5316\uff1b\u800c\u5728\u521d\u6b65\u8bbe\u8ba1\u5b8c\u6210\u4e4b\u540e\uff0c \u5f53\u53d1\u73b0\u7cfb\u7edf\u4e0e\u5df2\u6709\u7c7b\u65e0\u6cd5\u534f\u540c\u5de5\u4f5c\u65f6\uff0c\u53ef\u4ee5\u91c7\u7528\u9002\u914d\u5668\u6a21\u5f0f \u3002\u4f46\u6709\u65f6\u5019\u5728\u8bbe\u8ba1\u521d\u671f\u4e5f\u9700\u8981\u8003\u8651\u9002\u914d\u5668\u6a21\u5f0f\uff0c\u7279\u522b\u662f\u90a3\u4e9b\u6d89\u53ca\u5230\u5927\u91cf\u7b2c\u4e09\u65b9\u5e94\u7528\u63a5\u53e3\u7684\u60c5\u51b5\u3002","title":"\u6a21\u5f0f\u6269\u5c55"},{"location":"Design-Patterns/8-BridgePattern/#_11","text":"\u6865\u63a5\u6a21\u5f0f\u5c06\u62bd\u8c61\u90e8\u5206\u4e0e\u5b83\u7684\u5b9e\u73b0\u90e8\u5206\u5206\u79bb\uff0c\u4f7f\u5b83\u4eec\u90fd\u53ef\u4ee5\u72ec\u7acb\u5730\u53d8\u5316\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u6865\u63a5\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5b9e\u73b0\u7c7b\u63a5\u53e3\u7c7b\u578b\u7684\u5bf9\u8c61\u5e76\u53ef\u4ee5\u7ef4\u62a4\u8be5\u5bf9\u8c61\uff1b\u6269\u5145\u62bd\u8c61\u7c7b\u6269\u5145\u7531\u62bd\u8c61\u7c7b\u5b9a\u4e49\u7684\u63a5\u53e3\uff0c\u5b83\u5b9e\u73b0\u4e86\u5728\u62bd\u8c61\u7c7b\u4e2d\u5b9a\u4e49\u7684\u62bd\u8c61\u4e1a\u52a1\u65b9\u6cd5\uff0c\u5728\u6269\u5145\u62bd\u8c61\u7c7b\u4e2d\u53ef\u4ee5\u8c03\u7528\u5728\u5b9e\u73b0\u7c7b\u63a5\u53e3\u4e2d\u5b9a\u4e49\u7684\u4e1a\u52a1\u65b9\u6cd5\uff1b\u5b9e\u73b0\u7c7b\u63a5\u53e3\u5b9a\u4e49\u4e86\u5b9e\u73b0\u7c7b\u7684\u63a5\u53e3\uff0c\u5b9e\u73b0\u7c7b\u63a5\u53e3\u4ec5\u63d0\u4f9b\u57fa\u672c\u64cd\u4f5c\uff0c\u800c\u62bd\u8c61\u7c7b\u5b9a\u4e49\u7684\u63a5\u53e3\u53ef\u80fd\u4f1a\u505a\u66f4\u591a\u66f4\u590d\u6742\u7684\u64cd\u4f5c\uff1b\u5177\u4f53\u5b9e\u73b0\u7c7b\u5b9e\u73b0\u4e86\u5b9e\u73b0\u7c7b\u63a5\u53e3\u5e76\u4e14\u5177\u4f53\u5b9e\u73b0\u5b83\uff0c\u5728\u4e0d\u540c\u7684\u5177\u4f53\u5b9e\u73b0\u7c7b\u4e2d\u63d0\u4f9b\u57fa\u672c\u64cd\u4f5c\u7684\u4e0d\u540c\u5b9e\u73b0\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5177\u4f53\u5b9e\u73b0\u7c7b\u5bf9\u8c61\u5c06\u66ff\u6362\u5176\u7236\u7c7b\u5bf9\u8c61\uff0c\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\u5177\u4f53\u7684\u4e1a\u52a1\u64cd\u4f5c\u65b9\u6cd5\u3002 \u5728\u6865\u63a5\u6a21\u5f0f\u4e2d\uff0c\u62bd\u8c61\u5316( Abstraction )\u4e0e\u5b9e\u73b0\u5316( Implementation )\u8131\u8026\uff0c\u5b83\u4eec\u53ef\u4ee5\u6cbf\u7740\u5404\u81ea\u7684\u7ef4\u5ea6\u72ec\u7acb\u53d8\u5316\u3002 \u6865\u63a5\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u5206\u79bb\u62bd\u8c61\u63a5\u53e3\u53ca\u5176\u5b9e\u73b0\u90e8\u5206\uff0c\u662f\u6bd4\u591a\u7ee7\u627f\u65b9\u6848\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u6865\u63a5\u6a21\u5f0f\u8fd8\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u53ef\u6269\u5145\u6027\uff0c\u5728\u4e24\u4e2a\u53d8\u5316\u7ef4\u5ea6\u4e2d\u4efb\u610f\u6269\u5c55\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u90fd\u4e0d\u9700\u8981\u4fee\u6539\u539f\u6709\u7cfb\u7edf\uff0c\u5b9e\u73b0\u7ec6\u8282\u5bf9\u5ba2\u6237\u900f\u660e\uff0c\u53ef\u4ee5\u5bf9\u7528\u6237\u9690\u85cf\u5b9e\u73b0\u7ec6\u8282\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u662f\u589e\u52a0\u7cfb\u7edf\u7684\u7406\u89e3\u4e0e\u8bbe\u8ba1\u96be\u5ea6\uff0c\u4e14\u8bc6\u522b\u51fa\u7cfb\u7edf\u4e2d\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6\u5e76\u4e0d\u662f\u4e00\u4ef6\u5bb9\u6613\u7684\u4e8b\u60c5\u3002 \u6865\u63a5\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u9700\u8981\u5728\u6784\u4ef6\u7684\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5177\u4f53\u5316\u89d2\u8272\u4e4b\u95f4\u589e\u52a0\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u907f\u514d\u5728\u4e24\u4e2a\u5c42\u6b21\u4e4b\u95f4\u5efa\u7acb\u9759\u6001\u7684\u7ee7\u627f\u8054\u7cfb\uff1b\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5b9e\u73b0\u5316\u89d2\u8272\u53ef\u4ee5\u4ee5\u7ee7\u627f\u7684\u65b9\u5f0f\u72ec\u7acb\u6269\u5c55\u800c\u4e92\u4e0d\u5f71\u54cd\uff1b\u4e00\u4e2a\u7c7b\u5b58\u5728\u4e24\u4e2a\u72ec\u7acb\u53d8\u5316\u7684\u7ef4\u5ea6\uff0c\u4e14\u8fd9\u4e24\u4e2a\u7ef4\u5ea6\u90fd\u9700\u8981\u8fdb\u884c\u6269\u5c55\uff1b\u8bbe\u8ba1\u8981\u6c42\u9700\u8981\u72ec\u7acb\u7ba1\u7406\u62bd\u8c61\u5316\u89d2\u8272\u548c\u5177\u4f53\u5316\u89d2\u8272\uff1b\u4e0d\u5e0c\u671b\u4f7f\u7528\u7ee7\u627f\u6216\u56e0\u4e3a\u591a\u5c42\u6b21\u7ee7\u627f\u5bfc\u81f4\u7cfb\u7edf\u7c7b\u7684\u4e2a\u6570\u6025\u5267\u589e\u52a0\u7684\u7cfb\u7edf\u3002 \u53c2\u8003\u81ea\uff1a \u6865\u63a5\u6a21\u5f0f","title":"\u603b\u7ed3"},{"location":"Design-Patterns/9-DecoratorPattern/","text":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a \u00b6 \u4e00\u822c\u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u7ed9\u4e00\u4e2a\u7c7b\u6216\u5bf9\u8c61\u589e\u52a0\u884c\u4e3a\uff1a \u7ee7\u627f\u673a\u5236 \uff0c\u4f7f\u7528\u7ee7\u627f\u673a\u5236\u662f\u7ed9\u73b0\u6709\u7c7b\u6dfb\u52a0\u529f\u80fd\u7684\u4e00\u79cd\u6709\u6548\u9014\u5f84\uff0c\u901a\u8fc7\u7ee7\u627f\u4e00\u4e2a\u73b0\u6709\u7c7b\u53ef\u4ee5\u4f7f\u5f97\u5b50\u7c7b\u5728\u62e5\u6709\u81ea\u8eab\u65b9\u6cd5\u7684\u540c\u65f6\u8fd8\u62e5\u6709\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u662f\u9759\u6001\u7684\uff0c\u7528\u6237\u4e0d\u80fd\u63a7\u5236\u589e\u52a0\u884c\u4e3a\u7684\u65b9\u5f0f\u548c\u65f6\u673a\u3002 \u5173\u8054\u673a\u5236 \uff0c\u5373\u5c06\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u5d4c\u5165\u53e6\u4e00\u4e2a\u5bf9\u8c61\u4e2d\uff0c\u7531\u53e6\u4e00\u4e2a\u5bf9\u8c61\u6765\u51b3\u5b9a\u662f\u5426\u8c03\u7528\u5d4c\u5165\u5bf9\u8c61\u7684\u884c\u4e3a\u4ee5\u4fbf\u6269\u5c55\u81ea\u5df1\u7684\u884c\u4e3a\uff0c\u6211\u4eec\u79f0\u8fd9\u4e2a\u5d4c\u5165\u7684\u5bf9\u8c61\u4e3a\u88c5\u9970\u5668(Decorator) \u88c5\u9970\u6a21\u5f0f\u4ee5\u5bf9\u5ba2\u6237\u900f\u660e\u7684\u65b9\u5f0f\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u9644\u52a0\u4e0a\u66f4\u591a\u7684\u8d23\u4efb \uff0c\u6362\u8a00\u4e4b\uff0c\u5ba2\u6237\u7aef\u5e76\u4e0d\u4f1a\u89c9\u5f97\u5bf9\u8c61\u5728\u88c5\u9970\u524d\u548c\u88c5\u9970\u540e\u6709\u4ec0\u4e48\u4e0d\u540c\u3002 \u88c5\u9970\u6a21\u5f0f\u53ef\u4ee5\u5728\u4e0d\u9700\u8981\u521b\u9020\u66f4\u591a\u5b50\u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5bf9\u8c61\u7684\u529f\u80fd\u52a0\u4ee5\u6269\u5c55 \u3002\u8fd9\u5c31\u662f\u88c5\u9970\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002 \u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49 \u00b6 \u88c5\u9970\u6a21\u5f0f(Decorator Pattern) \uff1a\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u804c\u8d23(Responsibility) \uff0c\u5c31\u589e\u52a0\u5bf9\u8c61\u529f\u80fd\u6765\u8bf4\uff0c\u88c5\u9970\u6a21\u5f0f\u6bd4\u751f\u6210\u5b50\u7c7b\u5b9e\u73b0\u66f4\u4e3a\u7075\u6d3b\u3002\u5176\u522b\u540d\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u5305\u88c5\u5668(Wrapper)\uff0c\u4e0e\u9002\u914d\u5668\u6a21\u5f0f\u7684\u522b\u540d\u76f8\u540c\uff0c\u4f46\u5b83\u4eec\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u573a\u5408\u3002\u6839\u636e\u7ffb\u8bd1\u7684\u4e0d\u540c\uff0c\u88c5\u9970\u6a21\u5f0f\u4e5f\u6709\u4eba\u79f0\u4e4b\u4e3a\u201c\u6cb9\u6f06\u5de5\u6a21\u5f0f\u201d\u3002 \u7b56\u7565\u6a21\u5f0f\u662f\u4e00\u79cd \u5bf9\u8c61\u7ed3\u6784\u578b \u6a21\u5f0f\u3002 \u4e09\u3001 \u6a21\u5f0f\u7ed3\u6784 \u00b6 \u88c5\u9970\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Component : \u62bd\u8c61\u6784\u4ef6 ConcreteComponent : \u5177\u4f53\u6784\u4ef6 Decorator : \u62bd\u8c61\u88c5\u9970\u7c7b ConcreteDecorator : \u5177\u4f53\u88c5\u9970\u7c7b \u7ed3\u6784\u56fe \u00b6 \u65f6\u5e8f\u56fe \u00b6 \u56db\u3001\u793a\u4f8b\u4ee3\u7801 \u00b6 \u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u62bd\u8c61\u6784\u4ef6\u63a5\u53e3\uff1a /** * \u62bd\u8c61\u6784\u4ef6 * */ public interface Component { // \u63a5\u53e3\u65b9\u6cd5 void operate (); } \u7136\u540e\u662f\u5177\u4f53\u6784\u4ef6\u5b9e\u73b0\u7c7b\uff1a /** * \u5177\u4f53\u6784\u4ef6 * */ public class ConcreteComponent implements Component { /** * \u5177\u4f53\u5b9e\u73b0\u65b9\u6cd5 */ @Override public void operate () { System . out . println ( \"do Something...\" ); } } \u63a5\u7740\u662f\u88c5\u9970\u89d2\u8272\uff1a /** * \u88c5\u9970\u89d2\u8272 * \u7ef4\u6301\u4e00\u4e2a\u6307\u5411Component\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2a\u4e0e Component\u63a5\u53e3\u4e00\u81f4\u7684\u63a5\u53e3\u3002 * */ public class Decorator implements Component { private Component component ; /** * \u901a\u8fc7\u6784\u9020\u51fd\u6570\u4f20\u9012\u88ab\u4fee\u9970\u8005 * @param component */ public Decorator ( Component component ) { this . component = component ; } /** * \u59d4\u6258\u7ed9\u88ab\u4fee\u9970\u8005\u6267\u884c */ @Override public void operate () { this . component . operate (); } } \u4e0b\u9762\u662f\u5177\u4f53\u7684\u88c5\u9970\u7c7b\uff1a /** * \u5177\u4f53\u7684\u88c5\u9970\u7c7b1 * */ public class ConcreteDecorator1 extends Decorator { /** * \u901a\u8fc7\u6784\u9020\u51fd\u6570\u4f20\u9012\u88ab\u4fee\u9970\u8005 * @param component */ public ConcreteDecorator1 ( Component component ) { super ( component ); } /** * \u5b9a\u4e49\u81ea\u5df1\u7684\u4fee\u9970\u65b9\u6cd51 */ private void method1 () { System . out . println ( \"method1\u4fee\u9970...\" ); } /** * \u91cd\u5199\u7236\u7c7b\u7684operate\u65b9\u6cd5 */ public void operate () { this . method1 (); super . operate (); } } /** * \u5177\u4f53\u7684\u88c5\u9970\u7c7b2 * */ public class ConcreteDecorator2 extends Decorator { /** * \u901a\u8fc7\u6784\u9020\u51fd\u6570\u4f20\u9012\u88ab\u4fee\u9970\u8005 * @param component */ public ConcreteDecorator2 ( Component component ) { super ( component ); } /** * \u5b9a\u4e49\u81ea\u5df1\u7684\u4fee\u9970\u65b9\u6cd52 */ private void method2 () { System . out . println ( \"method2\u4fee\u9970...\" ); } /** * \u91cd\u5199\u7236\u7c7b\u7684operate\u65b9\u6cd5 */ public void operate () { this . method2 (); super . operate (); } } \u6700\u540e\u662f\u5ba2\u6237\u7aef\u7684\u573a\u666f\u7c7b\uff1a /** * \u88c5\u9970\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class Client { public static void main ( String [] args ) { Component component = new ConcreteComponent (); // \u7b2c\u4e00\u4fee\u9970 component = new ConcreteDecorator1 ( component ); // \u7b2c\u4e8c\u4fee\u9970 component = new ConcreteDecorator2 ( component ); // \u4fee\u9970\u540e\u8fd0\u884c component . operate (); } } \u4e94\u3001\u6a21\u5f0f\u5206\u6790 \u00b6 \u603b\u4f53\u5206\u6790 \u00b6 \u4e0e\u7ee7\u627f\u5173\u7cfb\u76f8\u6bd4\uff0c\u5173\u8054\u5173\u7cfb\u7684\u4e3b\u8981\u4f18\u52bf\u5728\u4e8e\u4e0d\u4f1a\u7834\u574f\u7c7b\u7684\u5c01\u88c5\u6027\uff0c\u800c\u4e14\u7ee7\u627f\u662f\u4e00\u79cd\u8026\u5408\u5ea6\u8f83\u5927\u7684\u9759\u6001\u5173\u7cfb\uff0c\u65e0\u6cd5\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u52a8\u6001\u6269\u5c55 \u3002\u5728\u8f6f\u4ef6\u5f00\u53d1\u9636\u6bb5\uff0c\u5173\u8054\u5173\u7cfb\u867d\u7136\u4e0d\u4f1a\u6bd4\u7ee7\u627f\u5173\u7cfb\u51cf\u5c11\u7f16\u7801\u91cf\uff0c\u4f46\u662f\u5230\u4e86\u8f6f\u4ef6\u7ef4\u62a4\u9636\u6bb5\uff0c\u7531\u4e8e\u5173\u8054\u5173\u7cfb\u4f7f\u7cfb\u7edf\u5177\u6709\u8f83\u597d\u7684\u677e\u8026\u5408\u6027\uff0c\u56e0\u6b64\u4f7f\u5f97\u7cfb\u7edf\u66f4\u52a0\u5bb9\u6613\u7ef4\u62a4\u3002\u5f53\u7136\uff0c \u5173\u8054\u5173\u7cfb\u7684\u7f3a\u70b9\u662f\u6bd4\u7ee7\u627f\u5173\u7cfb\u8981\u521b\u5efa\u66f4\u591a\u7684\u5bf9\u8c61 \u3002 \u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\u6765\u5b9e\u73b0\u6269\u5c55\u6bd4\u7ee7\u627f\u66f4\u52a0\u7075\u6d3b\uff0c\u5b83\u4ee5\u5bf9\u5ba2\u6237\u900f\u660e\u7684\u65b9\u5f0f\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u9644\u52a0\u66f4\u591a\u7684\u8d23\u4efb \u3002\u88c5\u9970\u6a21\u5f0f\u53ef\u4ee5\u5728\u4e0d\u9700\u8981\u521b\u9020\u66f4\u591a\u5b50\u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5bf9\u8c61\u7684\u529f\u80fd\u52a0\u4ee5\u6269\u5c55\u3002 \u4f18\u70b9 \u00b6 \u88c5\u9970\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u88c5\u9970\u6a21\u5f0f\u4e0e\u7ee7\u627f\u5173\u7cfb\u7684\u76ee\u7684\u90fd\u662f\u8981\u6269\u5c55\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u4f46\u662f\u88c5\u9970\u6a21\u5f0f\u53ef\u4ee5\u63d0\u4f9b\u6bd4\u7ee7\u627f\u66f4\u591a\u7684\u7075\u6d3b\u6027\u3002 \u53ef\u4ee5\u901a\u8fc7\u4e00\u79cd\u52a8\u6001\u7684\u65b9\u5f0f\u6765\u6269\u5c55\u4e00\u4e2a\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u9009\u62e9\u4e0d\u540c\u7684\u88c5\u9970\u5668\uff0c\u4ece\u800c\u5b9e\u73b0\u4e0d\u540c\u7684\u884c\u4e3a\u3002 \u901a\u8fc7\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u88c5\u9970\u7c7b\u4ee5\u53ca\u8fd9\u4e9b\u88c5\u9970\u7c7b\u7684\u6392\u5217\u7ec4\u5408\uff0c\u53ef\u4ee5\u521b\u9020\u51fa\u5f88\u591a\u4e0d\u540c\u884c\u4e3a\u7684\u7ec4\u5408\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u5177\u4f53\u88c5\u9970\u7c7b\u6765\u88c5\u9970\u540c\u4e00\u5bf9\u8c61\uff0c\u5f97\u5230\u529f\u80fd\u66f4\u4e3a\u5f3a\u5927\u7684\u5bf9\u8c61\u3002 \u5177\u4f53\u6784\u4ef6\u7c7b\u4e0e\u5177\u4f53\u88c5\u9970\u7c7b\u53ef\u4ee5\u72ec\u7acb\u53d8\u5316\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u589e\u52a0\u65b0\u7684\u5177\u4f53\u6784\u4ef6\u7c7b\u548c\u5177\u4f53\u88c5\u9970\u7c7b\uff0c\u5728\u4f7f\u7528\u65f6\u518d\u5bf9\u5176\u8fdb\u884c\u7ec4\u5408\uff0c\u539f\u6709\u4ee3\u7801\u65e0\u987b\u6539\u53d8\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002 \u7f3a\u70b9 \u00b6 \u88c5\u9970\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\u8fdb\u884c\u7cfb\u7edf\u8bbe\u8ba1\u65f6\u5c06\u4ea7\u751f\u5f88\u591a\u5c0f\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u7684\u533a\u522b\u5728\u4e8e\u5b83\u4eec\u4e4b\u95f4\u76f8\u4e92\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u6240\u4e0d\u540c\uff0c\u800c\u4e0d\u662f\u5b83\u4eec\u7684\u7c7b\u6216\u8005\u5c5e\u6027\u503c\u6709\u6240\u4e0d\u540c\uff0c\u540c\u65f6\u8fd8\u5c06\u4ea7\u751f\u5f88\u591a\u5177\u4f53\u88c5\u9970\u7c7b\u3002\u8fd9\u4e9b\u88c5\u9970\u7c7b\u548c\u5c0f\u5bf9\u8c61\u7684\u4ea7\u751f\u5c06\u589e\u52a0\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\uff0c\u52a0\u5927\u5b66\u4e60\u4e0e\u7406\u89e3\u7684\u96be\u5ea6\u3002 \u8fd9\u79cd\u6bd4\u7ee7\u627f\u66f4\u52a0\u7075\u6d3b\u673a\u52a8\u7684\u7279\u6027\uff0c\u4e5f\u540c\u65f6\u610f\u5473\u7740\u88c5\u9970\u6a21\u5f0f\u6bd4\u7ee7\u627f\u66f4\u52a0\u6613\u4e8e\u51fa\u9519\uff0c\u6392\u9519\u4e5f\u5f88\u56f0\u96be\uff0c\u5bf9\u4e8e\u591a\u6b21\u88c5\u9970\u7684\u5bf9\u8c61\uff0c\u8c03\u8bd5\u65f6\u5bfb\u627e\u9519\u8bef\u53ef\u80fd\u9700\u8981\u9010\u7ea7\u6392\u67e5\uff0c\u8f83\u4e3a\u70e6\u7410\u3002 \u9002\u7528\u73af\u5883 \u00b6 \u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\uff1a \u5728\u4e0d\u5f71\u54cd\u5176\u4ed6\u5bf9\u8c61\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u52a8\u6001\u3001\u900f\u660e\u7684\u65b9\u5f0f\u7ed9\u5355\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u804c\u8d23\u3002 \u9700\u8981\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u4e5f\u53ef\u4ee5\u52a8\u6001\u5730\u88ab\u64a4\u9500\u3002 \u5f53\u4e0d\u80fd\u91c7\u7528\u7ee7\u627f\u7684\u65b9\u5f0f\u5bf9\u7cfb\u7edf\u8fdb\u884c\u6269\u5145\u6216\u8005\u91c7\u7528\u7ee7\u627f\u4e0d\u5229\u4e8e\u7cfb\u7edf\u6269\u5c55\u548c\u7ef4\u62a4\u65f6\u3002\u4e0d\u80fd\u91c7\u7528\u7ee7\u627f\u7684\u60c5\u51b5\u4e3b\u8981\u6709\u4e24\u7c7b\uff1a\u7b2c\u4e00\u7c7b\u662f\u7cfb\u7edf\u4e2d\u5b58\u5728\u5927\u91cf\u72ec\u7acb\u7684\u6269\u5c55\uff0c\u4e3a\u652f\u6301\u6bcf\u4e00\u79cd\u7ec4\u5408\u5c06\u4ea7\u751f\u5927\u91cf\u7684\u5b50\u7c7b\uff0c\u4f7f\u5f97\u5b50\u7c7b\u6570\u76ee\u5448\u7206\u70b8\u6027\u589e\u957f\uff1b\u7b2c\u4e8c\u7c7b\u662f\u56e0\u4e3a\u7c7b\u5b9a\u4e49\u4e0d\u80fd\u7ee7\u627f\uff08\u5982final\u7c7b\uff09\u3002 \u6a21\u5f0f\u6269\u5c55 \u00b6 \u88c5\u9970\u6a21\u5f0f\u7684\u7b80\u5316-\u9700\u8981\u6ce8\u610f\u7684\u95ee\u9898: \u4e00\u4e2a\u88c5\u9970\u7c7b\u7684\u63a5\u53e3\u5fc5\u987b\u4e0e\u88ab\u88c5\u9970\u7c7b\u7684\u63a5\u53e3\u4fdd\u6301\u76f8\u540c\uff0c\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u65e0\u8bba\u662f\u88c5\u9970\u4e4b\u524d\u7684\u5bf9\u8c61\u8fd8\u662f\u88c5\u9970\u4e4b\u540e\u7684\u5bf9\u8c61\u90fd\u53ef\u4ee5\u4e00\u81f4\u5bf9\u5f85\u3002 \u5c3d\u91cf\u4fdd\u6301\u5177\u4f53\u6784\u4ef6\u7c7bComponent\u4f5c\u4e3a\u4e00\u4e2a\u201c\u8f7b\u201d\u7c7b\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0d\u8981\u628a\u592a\u591a\u7684\u903b\u8f91\u548c\u72b6\u6001\u653e\u5728\u5177\u4f53\u6784\u4ef6\u7c7b\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u88c5\u9970\u7c7b\u3002 \u5982\u679c\u53ea\u6709\u4e00\u4e2a\u5177\u4f53\u6784\u4ef6\u7c7b\u800c\u6ca1\u6709\u62bd\u8c61\u6784\u4ef6\u7c7b\uff0c\u90a3\u4e48\u62bd\u8c61\u88c5\u9970\u7c7b\u53ef\u4ee5\u4f5c\u4e3a\u5177\u4f53\u6784\u4ef6\u7c7b\u7684\u76f4\u63a5\u5b50\u7c7b\u3002 \u516d\u3001\u603b\u7ed3 \u00b6 \u88c5\u9970\u6a21\u5f0f\u7528\u4e8e\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u804c\u8d23\uff0c\u5c31\u589e\u52a0\u5bf9\u8c61\u529f \u80fd\u6765\u8bf4\uff0c\u88c5\u9970\u6a21\u5f0f\u6bd4\u751f\u6210\u5b50\u7c7b\u5b9e\u73b0\u66f4\u4e3a\u7075\u6d3b\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u88c5\u9970\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u6784\u4ef6\u5b9a\u4e49\u4e86\u5bf9\u8c61\u7684\u63a5\u53e3\uff0c\u53ef\u4ee5\u7ed9\u8fd9\u4e9b\u5bf9 \u8c61\u52a8\u6001\u589e\u52a0\u804c\u8d23\uff08\u65b9\u6cd5\uff09\uff1b\u5177\u4f53\u6784\u4ef6\u5b9a\u4e49\u4e86\u5177\u4f53\u7684\u6784\u4ef6\u5bf9\u8c61\uff0c\u5b9e\u73b0\u4e86 \u5728\u62bd\u8c61\u6784\u4ef6\u4e2d\u58f0\u660e\u7684\u65b9\u6cd5\uff0c\u88c5\u9970\u5668\u53ef\u4ee5\u7ed9\u5b83\u589e\u52a0\u989d\u5916\u7684\u804c\u8d23\uff08\u65b9\u6cd5\uff09\uff1b \u62bd\u8c61\u88c5\u9970\u7c7b\u662f\u62bd\u8c61\u6784\u4ef6\u7c7b\u7684\u5b50\u7c7b\uff0c\u7528\u4e8e\u7ed9\u5177\u4f53\u6784\u4ef6\u589e\u52a0\u804c\u8d23\uff0c\u4f46\u662f\u5177 \u4f53\u804c\u8d23\u5728\u5176\u5b50\u7c7b\u4e2d\u5b9e\u73b0\uff1b\u5177\u4f53\u88c5\u9970\u7c7b\u662f\u62bd\u8c61\u88c5\u9970\u7c7b\u7684\u5b50\u7c7b\uff0c\u8d1f\u8d23\u5411\u6784 \u4ef6\u6dfb\u52a0\u65b0\u7684\u804c\u8d23\u3002 \u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\u6765\u5b9e\u73b0\u6269\u5c55\u6bd4\u7ee7\u627f\u66f4\u52a0\u7075\u6d3b\uff0c\u5b83\u4ee5\u5bf9\u5ba2\u6237\u900f\u660e\u7684\u65b9\u5f0f\u52a8 \u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u9644\u52a0\u66f4\u591a\u7684\u8d23\u4efb\u3002\u88c5\u9970\u6a21\u5f0f\u53ef\u4ee5\u5728\u4e0d\u9700\u8981\u521b\u9020\u66f4\u591a\u5b50 \u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5bf9\u8c61\u7684\u529f\u80fd\u52a0\u4ee5\u6269\u5c55\u3002 \u88c5\u9970\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u53ef\u4ee5\u63d0\u4f9b\u6bd4\u7ee7\u627f\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e00\u79cd\u52a8\u6001\u7684\u65b9\u5f0f\u6765\u6269\u5c55\u4e00\u4e2a\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u5e76\u901a\u8fc7\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u88c5\u9970\u7c7b\u4ee5\u53ca\u8fd9\u4e9b\u88c5\u9970\u7c7b\u7684\u6392\u5217\u7ec4\u5408\uff0c\u53ef\u4ee5\u521b\u9020\u51fa\u5f88\u591a\u4e0d\u540c\u884c\u4e3a\u7684\u7ec4\u5408\uff0c\u800c\u4e14\u5177\u4f53\u6784\u4ef6\u7c7b\u4e0e\u5177\u4f53\u88c5\u9970\u7c7b\u53ef\u4ee5\u72ec\u7acb\u53d8\u5316\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u589e\u52a0\u65b0\u7684\u5177\u4f53\u6784\u4ef6\u7c7b\u548c\u5177\u4f53\u88c5\u9970\u7c7b\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\u8fdb\u884c\u7cfb\u7edf\u8bbe\u8ba1\u65f6\u5c06\u4ea7\u751f\u5f88\u591a\u5c0f\u5bf9\u8c61\uff0c\u800c\u4e14\u88c5\u9970\u6a21\u5f0f\u6bd4\u7ee7\u627f\u66f4\u52a0\u6613\u4e8e\u51fa\u9519\uff0c\u6392\u9519\u4e5f\u5f88\u56f0\u96be\uff0c\u5bf9\u4e8e\u591a\u6b21\u88c5\u9970\u7684\u5bf9\u8c61\uff0c\u8c03\u8bd5\u65f6\u5bfb\u627e\u9519\u8bef\u53ef\u80fd\u9700\u8981\u9010\u7ea7\u6392\u67e5\uff0c\u8f83\u4e3a\u70e6\u7410\u3002 \u88c5\u9970\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u5728\u4e0d\u5f71\u54cd\u5176\u4ed6\u5bf9\u8c61\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u52a8\u6001\u3001\u900f\u660e\u7684\u65b9\u5f0f\u7ed9\u5355\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u804c\u8d23\uff1b\u9700\u8981\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u4e5f\u53ef\u4ee5\u52a8\u6001\u5730\u88ab\u64a4\u9500\uff1b\u5f53\u4e0d\u80fd\u91c7\u7528\u7ee7\u627f\u7684\u65b9\u5f0f\u5bf9\u7cfb\u7edf\u8fdb\u884c\u6269\u5145\u6216\u8005\u91c7\u7528\u7ee7\u627f\u4e0d\u5229\u4e8e\u7cfb\u7edf\u6269\u5c55 \u548c\u7ef4\u62a4\u65f6\u3002 \u88c5\u9970\u6a21\u5f0f\u53ef\u5206\u4e3a\u900f\u660e\u88c5\u9970\u6a21\u5f0f\u548c\u534a\u900f\u660e\u88c5\u9970\u6a21\u5f0f\uff1a\u5728\u900f\u660e\u88c5\u9970\u6a21\u5f0f\u4e2d\uff0c\u8981\u6c42\u5ba2\u6237\u7aef\u5b8c\u5168\u9488\u5bf9\u62bd\u8c61\u7f16\u7a0b\uff0c\u88c5\u9970\u6a21\u5f0f\u7684\u900f\u660e\u6027\u8981\u6c42\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e0d\u5e94\u8be5\u58f0\u660e\u5177\u4f53\u6784\u4ef6\u7c7b\u578b\u548c\u5177\u4f53\u88c5\u9970\u7c7b\u578b\uff0c\u800c\u5e94\u8be5\u5168\u90e8\u58f0\u660e\u4e3a\u62bd\u8c61\u6784\u4ef6\u7c7b\u578b\uff1b\u534a\u900f\u660e\u88c5\u9970\u6a21\u5f0f\u5141\u8bb8\u7528\u6237\u5728\u5ba2\u6237\u7aef\u58f0\u660e\u5177\u4f53\u88c5\u9970\u8005\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u8c03\u7528\u5728\u5177\u4f53\u88c5\u9970\u8005\u4e2d\u65b0\u589e\u7684\u65b9\u6cd5\u3002","title":"\u88c5\u9970\u6a21\u5f0f\uff08Decorator Pattern\uff09"},{"location":"Design-Patterns/9-DecoratorPattern/#_1","text":"\u4e00\u822c\u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u7ed9\u4e00\u4e2a\u7c7b\u6216\u5bf9\u8c61\u589e\u52a0\u884c\u4e3a\uff1a \u7ee7\u627f\u673a\u5236 \uff0c\u4f7f\u7528\u7ee7\u627f\u673a\u5236\u662f\u7ed9\u73b0\u6709\u7c7b\u6dfb\u52a0\u529f\u80fd\u7684\u4e00\u79cd\u6709\u6548\u9014\u5f84\uff0c\u901a\u8fc7\u7ee7\u627f\u4e00\u4e2a\u73b0\u6709\u7c7b\u53ef\u4ee5\u4f7f\u5f97\u5b50\u7c7b\u5728\u62e5\u6709\u81ea\u8eab\u65b9\u6cd5\u7684\u540c\u65f6\u8fd8\u62e5\u6709\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u662f\u9759\u6001\u7684\uff0c\u7528\u6237\u4e0d\u80fd\u63a7\u5236\u589e\u52a0\u884c\u4e3a\u7684\u65b9\u5f0f\u548c\u65f6\u673a\u3002 \u5173\u8054\u673a\u5236 \uff0c\u5373\u5c06\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u5d4c\u5165\u53e6\u4e00\u4e2a\u5bf9\u8c61\u4e2d\uff0c\u7531\u53e6\u4e00\u4e2a\u5bf9\u8c61\u6765\u51b3\u5b9a\u662f\u5426\u8c03\u7528\u5d4c\u5165\u5bf9\u8c61\u7684\u884c\u4e3a\u4ee5\u4fbf\u6269\u5c55\u81ea\u5df1\u7684\u884c\u4e3a\uff0c\u6211\u4eec\u79f0\u8fd9\u4e2a\u5d4c\u5165\u7684\u5bf9\u8c61\u4e3a\u88c5\u9970\u5668(Decorator) \u88c5\u9970\u6a21\u5f0f\u4ee5\u5bf9\u5ba2\u6237\u900f\u660e\u7684\u65b9\u5f0f\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u9644\u52a0\u4e0a\u66f4\u591a\u7684\u8d23\u4efb \uff0c\u6362\u8a00\u4e4b\uff0c\u5ba2\u6237\u7aef\u5e76\u4e0d\u4f1a\u89c9\u5f97\u5bf9\u8c61\u5728\u88c5\u9970\u524d\u548c\u88c5\u9970\u540e\u6709\u4ec0\u4e48\u4e0d\u540c\u3002 \u88c5\u9970\u6a21\u5f0f\u53ef\u4ee5\u5728\u4e0d\u9700\u8981\u521b\u9020\u66f4\u591a\u5b50\u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5bf9\u8c61\u7684\u529f\u80fd\u52a0\u4ee5\u6269\u5c55 \u3002\u8fd9\u5c31\u662f\u88c5\u9970\u6a21\u5f0f\u7684\u6a21\u5f0f\u52a8\u673a\u3002","title":"\u4e00\u3001\u6a21\u5f0f\u52a8\u673a"},{"location":"Design-Patterns/9-DecoratorPattern/#_2","text":"\u88c5\u9970\u6a21\u5f0f(Decorator Pattern) \uff1a\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u804c\u8d23(Responsibility) \uff0c\u5c31\u589e\u52a0\u5bf9\u8c61\u529f\u80fd\u6765\u8bf4\uff0c\u88c5\u9970\u6a21\u5f0f\u6bd4\u751f\u6210\u5b50\u7c7b\u5b9e\u73b0\u66f4\u4e3a\u7075\u6d3b\u3002\u5176\u522b\u540d\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u5305\u88c5\u5668(Wrapper)\uff0c\u4e0e\u9002\u914d\u5668\u6a21\u5f0f\u7684\u522b\u540d\u76f8\u540c\uff0c\u4f46\u5b83\u4eec\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u573a\u5408\u3002\u6839\u636e\u7ffb\u8bd1\u7684\u4e0d\u540c\uff0c\u88c5\u9970\u6a21\u5f0f\u4e5f\u6709\u4eba\u79f0\u4e4b\u4e3a\u201c\u6cb9\u6f06\u5de5\u6a21\u5f0f\u201d\u3002 \u7b56\u7565\u6a21\u5f0f\u662f\u4e00\u79cd \u5bf9\u8c61\u7ed3\u6784\u578b \u6a21\u5f0f\u3002","title":"\u4e8c\u3001\u6a21\u5f0f\u5b9a\u4e49"},{"location":"Design-Patterns/9-DecoratorPattern/#_3","text":"\u88c5\u9970\u6a21\u5f0f\u5305\u542b\u5982\u4e0b\u89d2\u8272\uff1a Component : \u62bd\u8c61\u6784\u4ef6 ConcreteComponent : \u5177\u4f53\u6784\u4ef6 Decorator : \u62bd\u8c61\u88c5\u9970\u7c7b ConcreteDecorator : \u5177\u4f53\u88c5\u9970\u7c7b","title":"\u4e09\u3001 \u6a21\u5f0f\u7ed3\u6784"},{"location":"Design-Patterns/9-DecoratorPattern/#_4","text":"","title":"\u7ed3\u6784\u56fe"},{"location":"Design-Patterns/9-DecoratorPattern/#_5","text":"","title":"\u65f6\u5e8f\u56fe"},{"location":"Design-Patterns/9-DecoratorPattern/#_6","text":"\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u62bd\u8c61\u6784\u4ef6\u63a5\u53e3\uff1a /** * \u62bd\u8c61\u6784\u4ef6 * */ public interface Component { // \u63a5\u53e3\u65b9\u6cd5 void operate (); } \u7136\u540e\u662f\u5177\u4f53\u6784\u4ef6\u5b9e\u73b0\u7c7b\uff1a /** * \u5177\u4f53\u6784\u4ef6 * */ public class ConcreteComponent implements Component { /** * \u5177\u4f53\u5b9e\u73b0\u65b9\u6cd5 */ @Override public void operate () { System . out . println ( \"do Something...\" ); } } \u63a5\u7740\u662f\u88c5\u9970\u89d2\u8272\uff1a /** * \u88c5\u9970\u89d2\u8272 * \u7ef4\u6301\u4e00\u4e2a\u6307\u5411Component\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2a\u4e0e Component\u63a5\u53e3\u4e00\u81f4\u7684\u63a5\u53e3\u3002 * */ public class Decorator implements Component { private Component component ; /** * \u901a\u8fc7\u6784\u9020\u51fd\u6570\u4f20\u9012\u88ab\u4fee\u9970\u8005 * @param component */ public Decorator ( Component component ) { this . component = component ; } /** * \u59d4\u6258\u7ed9\u88ab\u4fee\u9970\u8005\u6267\u884c */ @Override public void operate () { this . component . operate (); } } \u4e0b\u9762\u662f\u5177\u4f53\u7684\u88c5\u9970\u7c7b\uff1a /** * \u5177\u4f53\u7684\u88c5\u9970\u7c7b1 * */ public class ConcreteDecorator1 extends Decorator { /** * \u901a\u8fc7\u6784\u9020\u51fd\u6570\u4f20\u9012\u88ab\u4fee\u9970\u8005 * @param component */ public ConcreteDecorator1 ( Component component ) { super ( component ); } /** * \u5b9a\u4e49\u81ea\u5df1\u7684\u4fee\u9970\u65b9\u6cd51 */ private void method1 () { System . out . println ( \"method1\u4fee\u9970...\" ); } /** * \u91cd\u5199\u7236\u7c7b\u7684operate\u65b9\u6cd5 */ public void operate () { this . method1 (); super . operate (); } } /** * \u5177\u4f53\u7684\u88c5\u9970\u7c7b2 * */ public class ConcreteDecorator2 extends Decorator { /** * \u901a\u8fc7\u6784\u9020\u51fd\u6570\u4f20\u9012\u88ab\u4fee\u9970\u8005 * @param component */ public ConcreteDecorator2 ( Component component ) { super ( component ); } /** * \u5b9a\u4e49\u81ea\u5df1\u7684\u4fee\u9970\u65b9\u6cd52 */ private void method2 () { System . out . println ( \"method2\u4fee\u9970...\" ); } /** * \u91cd\u5199\u7236\u7c7b\u7684operate\u65b9\u6cd5 */ public void operate () { this . method2 (); super . operate (); } } \u6700\u540e\u662f\u5ba2\u6237\u7aef\u7684\u573a\u666f\u7c7b\uff1a /** * \u88c5\u9970\u6a21\u5f0f\u7684\u5ba2\u6237\u7aef\u573a\u666f\u7c7b * */ public class Client { public static void main ( String [] args ) { Component component = new ConcreteComponent (); // \u7b2c\u4e00\u4fee\u9970 component = new ConcreteDecorator1 ( component ); // \u7b2c\u4e8c\u4fee\u9970 component = new ConcreteDecorator2 ( component ); // \u4fee\u9970\u540e\u8fd0\u884c component . operate (); } }","title":"\u56db\u3001\u793a\u4f8b\u4ee3\u7801"},{"location":"Design-Patterns/9-DecoratorPattern/#_7","text":"","title":"\u4e94\u3001\u6a21\u5f0f\u5206\u6790"},{"location":"Design-Patterns/9-DecoratorPattern/#_8","text":"\u4e0e\u7ee7\u627f\u5173\u7cfb\u76f8\u6bd4\uff0c\u5173\u8054\u5173\u7cfb\u7684\u4e3b\u8981\u4f18\u52bf\u5728\u4e8e\u4e0d\u4f1a\u7834\u574f\u7c7b\u7684\u5c01\u88c5\u6027\uff0c\u800c\u4e14\u7ee7\u627f\u662f\u4e00\u79cd\u8026\u5408\u5ea6\u8f83\u5927\u7684\u9759\u6001\u5173\u7cfb\uff0c\u65e0\u6cd5\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u52a8\u6001\u6269\u5c55 \u3002\u5728\u8f6f\u4ef6\u5f00\u53d1\u9636\u6bb5\uff0c\u5173\u8054\u5173\u7cfb\u867d\u7136\u4e0d\u4f1a\u6bd4\u7ee7\u627f\u5173\u7cfb\u51cf\u5c11\u7f16\u7801\u91cf\uff0c\u4f46\u662f\u5230\u4e86\u8f6f\u4ef6\u7ef4\u62a4\u9636\u6bb5\uff0c\u7531\u4e8e\u5173\u8054\u5173\u7cfb\u4f7f\u7cfb\u7edf\u5177\u6709\u8f83\u597d\u7684\u677e\u8026\u5408\u6027\uff0c\u56e0\u6b64\u4f7f\u5f97\u7cfb\u7edf\u66f4\u52a0\u5bb9\u6613\u7ef4\u62a4\u3002\u5f53\u7136\uff0c \u5173\u8054\u5173\u7cfb\u7684\u7f3a\u70b9\u662f\u6bd4\u7ee7\u627f\u5173\u7cfb\u8981\u521b\u5efa\u66f4\u591a\u7684\u5bf9\u8c61 \u3002 \u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\u6765\u5b9e\u73b0\u6269\u5c55\u6bd4\u7ee7\u627f\u66f4\u52a0\u7075\u6d3b\uff0c\u5b83\u4ee5\u5bf9\u5ba2\u6237\u900f\u660e\u7684\u65b9\u5f0f\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u9644\u52a0\u66f4\u591a\u7684\u8d23\u4efb \u3002\u88c5\u9970\u6a21\u5f0f\u53ef\u4ee5\u5728\u4e0d\u9700\u8981\u521b\u9020\u66f4\u591a\u5b50\u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5bf9\u8c61\u7684\u529f\u80fd\u52a0\u4ee5\u6269\u5c55\u3002","title":"\u603b\u4f53\u5206\u6790"},{"location":"Design-Patterns/9-DecoratorPattern/#_9","text":"\u88c5\u9970\u6a21\u5f0f\u7684\u4f18\u70b9\uff1a \u88c5\u9970\u6a21\u5f0f\u4e0e\u7ee7\u627f\u5173\u7cfb\u7684\u76ee\u7684\u90fd\u662f\u8981\u6269\u5c55\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u4f46\u662f\u88c5\u9970\u6a21\u5f0f\u53ef\u4ee5\u63d0\u4f9b\u6bd4\u7ee7\u627f\u66f4\u591a\u7684\u7075\u6d3b\u6027\u3002 \u53ef\u4ee5\u901a\u8fc7\u4e00\u79cd\u52a8\u6001\u7684\u65b9\u5f0f\u6765\u6269\u5c55\u4e00\u4e2a\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u9009\u62e9\u4e0d\u540c\u7684\u88c5\u9970\u5668\uff0c\u4ece\u800c\u5b9e\u73b0\u4e0d\u540c\u7684\u884c\u4e3a\u3002 \u901a\u8fc7\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u88c5\u9970\u7c7b\u4ee5\u53ca\u8fd9\u4e9b\u88c5\u9970\u7c7b\u7684\u6392\u5217\u7ec4\u5408\uff0c\u53ef\u4ee5\u521b\u9020\u51fa\u5f88\u591a\u4e0d\u540c\u884c\u4e3a\u7684\u7ec4\u5408\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u5177\u4f53\u88c5\u9970\u7c7b\u6765\u88c5\u9970\u540c\u4e00\u5bf9\u8c61\uff0c\u5f97\u5230\u529f\u80fd\u66f4\u4e3a\u5f3a\u5927\u7684\u5bf9\u8c61\u3002 \u5177\u4f53\u6784\u4ef6\u7c7b\u4e0e\u5177\u4f53\u88c5\u9970\u7c7b\u53ef\u4ee5\u72ec\u7acb\u53d8\u5316\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u589e\u52a0\u65b0\u7684\u5177\u4f53\u6784\u4ef6\u7c7b\u548c\u5177\u4f53\u88c5\u9970\u7c7b\uff0c\u5728\u4f7f\u7528\u65f6\u518d\u5bf9\u5176\u8fdb\u884c\u7ec4\u5408\uff0c\u539f\u6709\u4ee3\u7801\u65e0\u987b\u6539\u53d8\uff0c\u7b26\u5408\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002","title":"\u4f18\u70b9"},{"location":"Design-Patterns/9-DecoratorPattern/#_10","text":"\u88c5\u9970\u6a21\u5f0f\u7684\u7f3a\u70b9\uff1a \u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\u8fdb\u884c\u7cfb\u7edf\u8bbe\u8ba1\u65f6\u5c06\u4ea7\u751f\u5f88\u591a\u5c0f\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u7684\u533a\u522b\u5728\u4e8e\u5b83\u4eec\u4e4b\u95f4\u76f8\u4e92\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u6240\u4e0d\u540c\uff0c\u800c\u4e0d\u662f\u5b83\u4eec\u7684\u7c7b\u6216\u8005\u5c5e\u6027\u503c\u6709\u6240\u4e0d\u540c\uff0c\u540c\u65f6\u8fd8\u5c06\u4ea7\u751f\u5f88\u591a\u5177\u4f53\u88c5\u9970\u7c7b\u3002\u8fd9\u4e9b\u88c5\u9970\u7c7b\u548c\u5c0f\u5bf9\u8c61\u7684\u4ea7\u751f\u5c06\u589e\u52a0\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\uff0c\u52a0\u5927\u5b66\u4e60\u4e0e\u7406\u89e3\u7684\u96be\u5ea6\u3002 \u8fd9\u79cd\u6bd4\u7ee7\u627f\u66f4\u52a0\u7075\u6d3b\u673a\u52a8\u7684\u7279\u6027\uff0c\u4e5f\u540c\u65f6\u610f\u5473\u7740\u88c5\u9970\u6a21\u5f0f\u6bd4\u7ee7\u627f\u66f4\u52a0\u6613\u4e8e\u51fa\u9519\uff0c\u6392\u9519\u4e5f\u5f88\u56f0\u96be\uff0c\u5bf9\u4e8e\u591a\u6b21\u88c5\u9970\u7684\u5bf9\u8c61\uff0c\u8c03\u8bd5\u65f6\u5bfb\u627e\u9519\u8bef\u53ef\u80fd\u9700\u8981\u9010\u7ea7\u6392\u67e5\uff0c\u8f83\u4e3a\u70e6\u7410\u3002","title":"\u7f3a\u70b9"},{"location":"Design-Patterns/9-DecoratorPattern/#_11","text":"\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\uff1a \u5728\u4e0d\u5f71\u54cd\u5176\u4ed6\u5bf9\u8c61\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u52a8\u6001\u3001\u900f\u660e\u7684\u65b9\u5f0f\u7ed9\u5355\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u804c\u8d23\u3002 \u9700\u8981\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u4e5f\u53ef\u4ee5\u52a8\u6001\u5730\u88ab\u64a4\u9500\u3002 \u5f53\u4e0d\u80fd\u91c7\u7528\u7ee7\u627f\u7684\u65b9\u5f0f\u5bf9\u7cfb\u7edf\u8fdb\u884c\u6269\u5145\u6216\u8005\u91c7\u7528\u7ee7\u627f\u4e0d\u5229\u4e8e\u7cfb\u7edf\u6269\u5c55\u548c\u7ef4\u62a4\u65f6\u3002\u4e0d\u80fd\u91c7\u7528\u7ee7\u627f\u7684\u60c5\u51b5\u4e3b\u8981\u6709\u4e24\u7c7b\uff1a\u7b2c\u4e00\u7c7b\u662f\u7cfb\u7edf\u4e2d\u5b58\u5728\u5927\u91cf\u72ec\u7acb\u7684\u6269\u5c55\uff0c\u4e3a\u652f\u6301\u6bcf\u4e00\u79cd\u7ec4\u5408\u5c06\u4ea7\u751f\u5927\u91cf\u7684\u5b50\u7c7b\uff0c\u4f7f\u5f97\u5b50\u7c7b\u6570\u76ee\u5448\u7206\u70b8\u6027\u589e\u957f\uff1b\u7b2c\u4e8c\u7c7b\u662f\u56e0\u4e3a\u7c7b\u5b9a\u4e49\u4e0d\u80fd\u7ee7\u627f\uff08\u5982final\u7c7b\uff09\u3002","title":"\u9002\u7528\u73af\u5883"},{"location":"Design-Patterns/9-DecoratorPattern/#_12","text":"\u88c5\u9970\u6a21\u5f0f\u7684\u7b80\u5316-\u9700\u8981\u6ce8\u610f\u7684\u95ee\u9898: \u4e00\u4e2a\u88c5\u9970\u7c7b\u7684\u63a5\u53e3\u5fc5\u987b\u4e0e\u88ab\u88c5\u9970\u7c7b\u7684\u63a5\u53e3\u4fdd\u6301\u76f8\u540c\uff0c\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u65e0\u8bba\u662f\u88c5\u9970\u4e4b\u524d\u7684\u5bf9\u8c61\u8fd8\u662f\u88c5\u9970\u4e4b\u540e\u7684\u5bf9\u8c61\u90fd\u53ef\u4ee5\u4e00\u81f4\u5bf9\u5f85\u3002 \u5c3d\u91cf\u4fdd\u6301\u5177\u4f53\u6784\u4ef6\u7c7bComponent\u4f5c\u4e3a\u4e00\u4e2a\u201c\u8f7b\u201d\u7c7b\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0d\u8981\u628a\u592a\u591a\u7684\u903b\u8f91\u548c\u72b6\u6001\u653e\u5728\u5177\u4f53\u6784\u4ef6\u7c7b\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u88c5\u9970\u7c7b\u3002 \u5982\u679c\u53ea\u6709\u4e00\u4e2a\u5177\u4f53\u6784\u4ef6\u7c7b\u800c\u6ca1\u6709\u62bd\u8c61\u6784\u4ef6\u7c7b\uff0c\u90a3\u4e48\u62bd\u8c61\u88c5\u9970\u7c7b\u53ef\u4ee5\u4f5c\u4e3a\u5177\u4f53\u6784\u4ef6\u7c7b\u7684\u76f4\u63a5\u5b50\u7c7b\u3002","title":"\u6a21\u5f0f\u6269\u5c55"},{"location":"Design-Patterns/9-DecoratorPattern/#_13","text":"\u88c5\u9970\u6a21\u5f0f\u7528\u4e8e\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u804c\u8d23\uff0c\u5c31\u589e\u52a0\u5bf9\u8c61\u529f \u80fd\u6765\u8bf4\uff0c\u88c5\u9970\u6a21\u5f0f\u6bd4\u751f\u6210\u5b50\u7c7b\u5b9e\u73b0\u66f4\u4e3a\u7075\u6d3b\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u8c61\u7ed3\u6784\u578b\u6a21\u5f0f\u3002 \u88c5\u9970\u6a21\u5f0f\u5305\u542b\u56db\u4e2a\u89d2\u8272\uff1a\u62bd\u8c61\u6784\u4ef6\u5b9a\u4e49\u4e86\u5bf9\u8c61\u7684\u63a5\u53e3\uff0c\u53ef\u4ee5\u7ed9\u8fd9\u4e9b\u5bf9 \u8c61\u52a8\u6001\u589e\u52a0\u804c\u8d23\uff08\u65b9\u6cd5\uff09\uff1b\u5177\u4f53\u6784\u4ef6\u5b9a\u4e49\u4e86\u5177\u4f53\u7684\u6784\u4ef6\u5bf9\u8c61\uff0c\u5b9e\u73b0\u4e86 \u5728\u62bd\u8c61\u6784\u4ef6\u4e2d\u58f0\u660e\u7684\u65b9\u6cd5\uff0c\u88c5\u9970\u5668\u53ef\u4ee5\u7ed9\u5b83\u589e\u52a0\u989d\u5916\u7684\u804c\u8d23\uff08\u65b9\u6cd5\uff09\uff1b \u62bd\u8c61\u88c5\u9970\u7c7b\u662f\u62bd\u8c61\u6784\u4ef6\u7c7b\u7684\u5b50\u7c7b\uff0c\u7528\u4e8e\u7ed9\u5177\u4f53\u6784\u4ef6\u589e\u52a0\u804c\u8d23\uff0c\u4f46\u662f\u5177 \u4f53\u804c\u8d23\u5728\u5176\u5b50\u7c7b\u4e2d\u5b9e\u73b0\uff1b\u5177\u4f53\u88c5\u9970\u7c7b\u662f\u62bd\u8c61\u88c5\u9970\u7c7b\u7684\u5b50\u7c7b\uff0c\u8d1f\u8d23\u5411\u6784 \u4ef6\u6dfb\u52a0\u65b0\u7684\u804c\u8d23\u3002 \u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\u6765\u5b9e\u73b0\u6269\u5c55\u6bd4\u7ee7\u627f\u66f4\u52a0\u7075\u6d3b\uff0c\u5b83\u4ee5\u5bf9\u5ba2\u6237\u900f\u660e\u7684\u65b9\u5f0f\u52a8 \u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u9644\u52a0\u66f4\u591a\u7684\u8d23\u4efb\u3002\u88c5\u9970\u6a21\u5f0f\u53ef\u4ee5\u5728\u4e0d\u9700\u8981\u521b\u9020\u66f4\u591a\u5b50 \u7c7b\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5bf9\u8c61\u7684\u529f\u80fd\u52a0\u4ee5\u6269\u5c55\u3002 \u88c5\u9970\u6a21\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u5728\u4e8e\u53ef\u4ee5\u63d0\u4f9b\u6bd4\u7ee7\u627f\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e00\u79cd\u52a8\u6001\u7684\u65b9\u5f0f\u6765\u6269\u5c55\u4e00\u4e2a\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u5e76\u901a\u8fc7\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u88c5\u9970\u7c7b\u4ee5\u53ca\u8fd9\u4e9b\u88c5\u9970\u7c7b\u7684\u6392\u5217\u7ec4\u5408\uff0c\u53ef\u4ee5\u521b\u9020\u51fa\u5f88\u591a\u4e0d\u540c\u884c\u4e3a\u7684\u7ec4\u5408\uff0c\u800c\u4e14\u5177\u4f53\u6784\u4ef6\u7c7b\u4e0e\u5177\u4f53\u88c5\u9970\u7c7b\u53ef\u4ee5\u72ec\u7acb\u53d8\u5316\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9700\u8981\u589e\u52a0\u65b0\u7684\u5177\u4f53\u6784\u4ef6\u7c7b\u548c\u5177\u4f53\u88c5\u9970\u7c7b\uff1b\u5176\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u4f7f\u7528\u88c5\u9970\u6a21\u5f0f\u8fdb\u884c\u7cfb\u7edf\u8bbe\u8ba1\u65f6\u5c06\u4ea7\u751f\u5f88\u591a\u5c0f\u5bf9\u8c61\uff0c\u800c\u4e14\u88c5\u9970\u6a21\u5f0f\u6bd4\u7ee7\u627f\u66f4\u52a0\u6613\u4e8e\u51fa\u9519\uff0c\u6392\u9519\u4e5f\u5f88\u56f0\u96be\uff0c\u5bf9\u4e8e\u591a\u6b21\u88c5\u9970\u7684\u5bf9\u8c61\uff0c\u8c03\u8bd5\u65f6\u5bfb\u627e\u9519\u8bef\u53ef\u80fd\u9700\u8981\u9010\u7ea7\u6392\u67e5\uff0c\u8f83\u4e3a\u70e6\u7410\u3002 \u88c5\u9970\u6a21\u5f0f\u9002\u7528\u60c5\u51b5\u5305\u62ec\uff1a\u5728\u4e0d\u5f71\u54cd\u5176\u4ed6\u5bf9\u8c61\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u52a8\u6001\u3001\u900f\u660e\u7684\u65b9\u5f0f\u7ed9\u5355\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u804c\u8d23\uff1b\u9700\u8981\u52a8\u6001\u5730\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u589e\u52a0\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u4e5f\u53ef\u4ee5\u52a8\u6001\u5730\u88ab\u64a4\u9500\uff1b\u5f53\u4e0d\u80fd\u91c7\u7528\u7ee7\u627f\u7684\u65b9\u5f0f\u5bf9\u7cfb\u7edf\u8fdb\u884c\u6269\u5145\u6216\u8005\u91c7\u7528\u7ee7\u627f\u4e0d\u5229\u4e8e\u7cfb\u7edf\u6269\u5c55 \u548c\u7ef4\u62a4\u65f6\u3002 \u88c5\u9970\u6a21\u5f0f\u53ef\u5206\u4e3a\u900f\u660e\u88c5\u9970\u6a21\u5f0f\u548c\u534a\u900f\u660e\u88c5\u9970\u6a21\u5f0f\uff1a\u5728\u900f\u660e\u88c5\u9970\u6a21\u5f0f\u4e2d\uff0c\u8981\u6c42\u5ba2\u6237\u7aef\u5b8c\u5168\u9488\u5bf9\u62bd\u8c61\u7f16\u7a0b\uff0c\u88c5\u9970\u6a21\u5f0f\u7684\u900f\u660e\u6027\u8981\u6c42\u5ba2\u6237\u7aef\u7a0b\u5e8f\u4e0d\u5e94\u8be5\u58f0\u660e\u5177\u4f53\u6784\u4ef6\u7c7b\u578b\u548c\u5177\u4f53\u88c5\u9970\u7c7b\u578b\uff0c\u800c\u5e94\u8be5\u5168\u90e8\u58f0\u660e\u4e3a\u62bd\u8c61\u6784\u4ef6\u7c7b\u578b\uff1b\u534a\u900f\u660e\u88c5\u9970\u6a21\u5f0f\u5141\u8bb8\u7528\u6237\u5728\u5ba2\u6237\u7aef\u58f0\u660e\u5177\u4f53\u88c5\u9970\u8005\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u8c03\u7528\u5728\u5177\u4f53\u88c5\u9970\u8005\u4e2d\u65b0\u589e\u7684\u65b9\u6cd5\u3002","title":"\u516d\u3001\u603b\u7ed3"},{"location":"Docker/1-Overview/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e00\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u6b64\u7cfb\u5217\u6587\u7ae0\u5171\u5305\u62ec\u5982\u4e0b\u7ae0\u8282\uff1a \u4e00\u3001Docker\u57fa\u7840\u5165\u95e8\u53ca\u67b6\u6784\u4ecb\u7ecd \u4e8c\u3001\u57fa\u4e8e Dockerfile \u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf \u4e09\u3001\u57fa\u4e8e Docker-registry/Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93 \u56db\u3001Docker \u7f51\u7edc\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5bb9\u5668\u4e92\u8054\u914d\u7f6e \u4e94\u3001Docker \u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18 \u516d\u3001\u57fa\u4e8e\u591a\u9636\u6bb5\u6784\u5efa\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef\u964d\u4f4e\u590d\u6742\u5ea6 \u4e03\u3001Docker Compose \u5165\u95e8\u53ca\u5b9e\u8df5 \u516b\u3001Docker \u5e38\u7528\u547d\u4ee4\u53ca\u793a\u4f8b \u4e5d\u3001Docker \u6700\u4f73\u5b9e\u8df5 \u90e8\u5206\u5185\u5bb9\u7ffb\u8bd1\u81ea Docker\u5b98\u65b9\u6587\u6863 \u6216\u53c2\u8003 \u300a Docker \u2014 \u4ece\u5165\u95e8\u5230\u5b9e\u8df5 \u300b\uff0c\u975e\u5e38\u611f\u8c22\u539f\u4f5c\u8005\u3002 \u4e00\u3001Docker \u6982\u8ff0 \u00b6 Docker \u662f\u4e00\u4e2a\u7528\u4e8e\u5f00\u53d1\uff0c\u4ea4\u4ed8\u548c\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u653e\u5e73\u53f0\u3002Docker \u4f7f\u60a8\u80fd\u591f\u5c06\u5e94\u7528\u7a0b\u5e8f\u4e0e\u57fa\u7840\u67b6\u6784\u5206\u5f00\uff0c\u4ece\u800c\u53ef\u4ee5\u5feb\u901f\u4ea4\u4ed8\u8f6f\u4ef6\u3002\u501f\u52a9 Docker\uff0c\u60a8\u53ef\u4ee5\u4ee5\u4e0e\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u76f8\u540c\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u57fa\u7840\u67b6\u6784\u3002\u901a\u8fc7\u5229\u7528 Docker \u7684\u5feb\u901f\u4ea4\u4ed8\uff0c\u6d4b\u8bd5\u548c\u90e8\u7f72\u4ee3\u7801\u7684\u65b9\u6cd5\uff0c\u60a8\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u7f16\u5199\u4ee3\u7801\u548c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8fd0\u884c\u4ee3\u7801\u4e4b\u95f4\u7684\u5ef6\u8fdf\u3002 \u5bb9\u5668\u5316\u8d8a\u6765\u8d8a\u53d7\u6b22\u8fce\uff0c\u662f\u56e0\u4e3a\u5bb9\u5668\uff1a \u7075\u6d3b \uff1a\u5373\u4f7f\u6700\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\u4e5f\u53ef\u4ee5\u5bb9\u5668\u5316\u3002 \u8f7b\u91cf\u7ea7 \uff1a\u5bb9\u5668\u5229\u7528\u5e76\u5171\u4eab\u4e3b\u673a\u5185\u6838\uff0c\u5728\u7cfb\u7edf\u8d44\u6e90\u65b9\u9762\u6bd4\u865a\u62df\u673a\u66f4\u52a0\u6709\u6548\u3002 \u53ef\u79fb\u690d\u6027 \uff1a\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u6784\u5efa\uff0c\u90e8\u7f72\u5230\u4e91\u5e76\u5728\u4efb\u4f55\u5730\u65b9\u8fd0\u884c\u3002 \u677e\u6563\u8026\u5408 \uff1a\u5bb9\u5668\u662f\u9ad8\u5ea6\u81ea\u7ed9\u81ea\u8db3\u5e76\u5c01\u88c5\u7684\u5bb9\u5668\uff0c\u4f7f\u60a8\u53ef\u4ee5\u5728\u4e0d\u7834\u574f\u5176\u4ed6\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u66f4\u6362\u6216\u5347\u7ea7\u5b83\u4eec\u3002 \u53ef\u6269\u5c55 \uff1a\u60a8\u53ef\u4ee5\u5728\u6570\u636e\u4e2d\u5fc3\u5185\u589e\u52a0\u5e76\u81ea\u52a8\u5206\u53d1\u5bb9\u5668\u526f\u672c\u3002 \u5b89\u5168 \uff1a\u5bb9\u5668\u5c06\u79ef\u6781\u7684\u7ea6\u675f\u548c\u9694\u79bb\u5e94\u7528\u4e8e\u6d41\u7a0b\uff0c\u800c\u65e0\u9700\u7528\u6237\u65b9\u9762\u7684\u4efb\u4f55\u914d\u7f6e\u3002 Docker \u5e73\u53f0 \u00b6 Docker \u63d0\u4f9b\u4e86\u5728\u677e\u6563\u9694\u79bb\u7684\u73af\u5883\uff08\u79f0\u4e3a\u5bb9\u5668\uff09\u4e2d\u6253\u5305\u548c\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684\u529f\u80fd\u3002\u9694\u79bb\u548c\u5b89\u5168\u6027\u4f7f\u60a8\u53ef\u4ee5\u5728\u7ed9\u5b9a\u4e3b\u673a\u4e0a\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\u3002\u5bb9\u5668\u662f\u8f7b\u91cf\u7ea7\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u9700\u8981\u7ba1\u7406\u7a0b\u5e8f\u7684\u989d\u5916\u8d1f\u62c5\uff0c\u800c\u662f\u76f4\u63a5\u5728\u4e3b\u673a\u7684\u5185\u6838\u4e2d\u8fd0\u884c\u3002\u8fd9\u610f\u5473\u7740\u4e0e\u4f7f\u7528\u865a\u62df\u673a\u76f8\u6bd4\uff0c\u60a8\u53ef\u4ee5\u5728\u7ed9\u5b9a\u7684\u786c\u4ef6\u7ec4\u5408\u4e0a\u8fd0\u884c\u66f4\u591a\u7684\u5bb9\u5668\u3002\u60a8\u751a\u81f3\u53ef\u4ee5\u5728\u5b9e\u9645\u4e0a\u662f\u865a\u62df\u673a\u7684\u4e3b\u673a\u4e2d\u8fd0\u884c Docker \u5bb9\u5668\uff01 Docker \u63d0\u4f9b\u4e86\u5de5\u5177\u548c\u5e73\u53f0\u6765\u7ba1\u7406\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\uff1a \u4f7f\u7528\u5bb9\u5668\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u652f\u6301\u7ec4\u4ef6\u3002 \u5bb9\u5668\u6210\u4e3a\u5206\u53d1\u548c\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u7684\u5355\u5143\u3002 \u51c6\u5907\u5c31\u7eea\u540e\uff0c\u53ef\u4ee5\u5c06\u5e94\u7528\u7a0b\u5e8f\u4f5c\u4e3a\u5bb9\u5668\u6216\u534f\u8c03\u670d\u52a1\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\u4e2d\u3002\u65e0\u8bba\u60a8\u7684\u751f\u4ea7\u73af\u5883\u662f\u672c\u5730\u6570\u636e\u4e2d\u5fc3\uff0c\u4e91\u63d0\u4f9b\u5546\u8fd8\u662f\u4e24\u8005\u7684\u6df7\u5408\uff0c\u5176\u5de5\u4f5c\u539f\u7406\u90fd\u76f8\u540c\u3002 \u6211\u53ef\u4ee5\u5c06 Docker \u7528\u4e8e\u4ec0\u4e48 \u00b6 \u5feb\u901f\uff0c\u4e00\u81f4\u5730\u4ea4\u4ed8\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f Docker \u901a\u8fc7\u5141\u8bb8\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u63d0\u4f9b\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u7684\u672c\u5730\u5bb9\u5668\u5728\u6807\u51c6\u5316\u73af\u5883\u4e2d\u5de5\u4f5c\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u5f00\u53d1\u751f\u547d\u5468\u671f\u3002\u5bb9\u5668\u975e\u5e38\u9002\u5408\u6301\u7eed\u96c6\u6210\u548c\u6301\u7eed\u4ea4\u4ed8\uff08CI / CD\uff09\u5de5\u4f5c\u6d41\u7a0b\u3002 \u54cd\u5e94\u5f0f\u90e8\u7f72\u548c\u6269\u5c55 Docker \u57fa\u4e8e\u5bb9\u5668\u7684\u5e73\u53f0\u5141\u8bb8\u9ad8\u5ea6\u53ef\u79fb\u690d\u7684\u5de5\u4f5c\u8d1f\u8f7d\u3002Docker \u5bb9\u5668\u53ef\u4ee5\u5728\u5f00\u53d1\u4eba\u5458\u7684\u672c\u5730\u7b14\u8bb0\u672c\u7535\u8111\u4e0a\uff0c\u6570\u636e\u4e2d\u5fc3\u4e2d\u7684\u7269\u7406\u6216\u865a\u62df\u673a\u4e0a\uff0c\u4e91\u63d0\u4f9b\u5546\u4e0a\u6216\u6df7\u5408\u73af\u5883\u4e2d\u8fd0\u884c\u3002 Docker \u7684\u53ef\u79fb\u690d\u6027\u548c\u8f7b\u91cf\u7ea7\u7684\u7279\u6027\u8fd8\u4f7f\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u52a8\u6001\u7ba1\u7406\u5de5\u4f5c\u8d1f\u8f7d\uff0c\u5e76\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u6307\u793a\u5b9e\u65f6\u6269\u5c55\u6216\u5173\u95ed\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u3002 \u5728\u540c\u4e00\u786c\u4ef6\u4e0a\u8fd0\u884c\u66f4\u591a\u5de5\u4f5c\u8d1f\u8f7d Docker \u8f7b\u5de7\u5feb\u901f\u3002\u5b83\u4e3a\u57fa\u4e8e\u865a\u62df\u673a\u7ba1\u7406\u7a0b\u5e8f\u7684\u865a\u62df\u673a\u63d0\u4f9b\u4e86\u53ef\u884c\u4e14\u7ecf\u6d4e\u9ad8\u6548\u7684\u66ff\u4ee3\u65b9\u6848\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u5229\u7528\u66f4\u591a\u7684\u8ba1\u7b97\u80fd\u529b\u6765\u5b9e\u73b0\u4e1a\u52a1\u76ee\u6807\u3002Docker \u975e\u5e38\u9002\u5408\u9ad8\u5bc6\u5ea6\u73af\u5883\u548c\u4e2d\u5c0f\u578b\u90e8\u7f72\uff0c\u800c\u60a8\u9700\u8981\u7528\u66f4\u5c11\u7684\u8d44\u6e90\u505a\u66f4\u591a\u7684\u4e8b\u60c5\u3002 \u5bb9\u5668 VS \u865a\u62df\u673a \u00b6 \u5bb9\u5668\u76f4\u63a5\u8fd0\u884c\u5728 Linux \u4e3b\u673a\u4e0a\uff0c\u5e76\u4e0e\u5176\u4ed6\u5bb9\u5668\u5171\u4eab\u4e3b\u673a\u7684\u5185\u6838\u3002\u5b83\u8fd0\u884c\u4e00\u4e2a\u79bb\u6563\u8fdb\u7a0b\uff0c\u4e0d\u5360\u7528\u6267\u884c\u7a0b\u5e8f\u4ee5\u5916\u7684\u4efb\u4f55\u5185\u5b58\uff0c\u4ece\u800c\u4f7f\u5176\u8f7b\u5de7\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u865a\u62df\u673a\uff08VM\uff09\u4f1a\u4ea7\u751f\u5927\u91cf\u5f00\u9500\uff0c\u8d85\u51fa\u4e86\u5e94\u7528\u7a0b\u5e8f\u6240\u6d88\u8017\u7684\u5f00\u9500\u3002 \u4e8c\u3001Docker \u5b89\u88c5\u53ca\u8fd0\u884c \u00b6 1\u3001\u83b7\u53d6 Docker \u00b6 Docker \u5206\u4e3a CE \u548c EE \u4e24\u5927\u7248\u672c\u3002Docker CE \u5206\u4e3a stable \u3001 test \u548c nightly \u4e09\u4e2a\u66f4\u65b0\u9891\u9053\u3002\u5b98\u65b9\u7f51\u7ad9\u4e0a\u6709\u5404\u79cd\u73af\u5883\u4e0b\u7684 \u5b89\u88c5\u6307\u5357 \uff0c\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u60c5\u51b5\u8fdb\u884c\u5b89\u88c5\u3002 2\u3001\u955c\u50cf\u52a0\u901f \u00b6 \u4e00\u822c\u56fd\u5185\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u62c9\u53d6 Docker \u955c\u50cf\u5341\u5206\u7f13\u6162\uff0c\u53ef\u4ee5\u914d\u7f6e Docker \u56fd\u5185\u955c\u50cf\u52a0\u901f\u3002\u5404\u4e2a\u514d\u8d39\u955c\u50cf\u7ad9\u6d4b\u8bd5\u7ed3\u679c\u8bf7\u5230 docker-practice/docker-registry-cn-mirror-test \u67e5\u770b\u3002\u63a8\u8350\u4f7f\u7528 \u963f\u91cc\u4e91\u514d\u8d39\u955c\u50cf\u52a0\u901f\u5668 \uff08\u9700\u767b\u5f55\uff09\uff0c\u7a33\u5b9a\u53ef\u9760\u3002 \u5bf9\u4e8e\u4f7f\u7528 macOS \u7684\u7528\u6237\uff0c\u5728\u4efb\u52a1\u680f\u70b9\u51fb Docker Desktop \u5e94\u7528\u56fe\u6807 -> Perferences \uff0c\u5728\u5de6\u4fa7\u5bfc\u822a\u83dc\u5355\u9009\u62e9 Docker Engine \uff0c\u5728\u53f3\u4fa7\u53c2\u8003\u5982\u4e0b\u5185\u5bb9\u7f16\u8f91 json \u6587\u4ef6\uff1a { \"registry-mirrors\" : [ \"https://dockerhub.azk8s.cn\" , \"https://hub-mirror.c.163.com\" ] } \u4fee\u6539\u5b8c\u6210\u4e4b\u540e\uff0c\u70b9\u51fb Apply & Restart \u6309\u94ae\uff0cDocker \u5c31\u4f1a\u91cd\u542f\u5e76\u5e94\u7528\u914d\u7f6e\u7684\u955c\u50cf\u3002\u6267\u884c $ docker info \uff0c\u5982\u679c\u4ece\u7ed3\u679c\u4e2d\u770b\u5230\u4e86\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u914d\u7f6e\u6210\u529f\u3002 Registry Mirrors: https://dockerhub.azk8s.cn/ https://hub-mirror.c.163.com 3\u3001\u5c0f\u8bd5\u725b\u5200 \u00b6 \u4ee5\u4e0b\u547d\u4ee4\u8fd0\u884c\u4e00\u4e2a ubuntu \u5bb9\u5668\uff0c\u4ee5\u4ea4\u4e92\u65b9\u5f0f\u9644\u52a0\u5230\u672c\u5730\u547d\u4ee4\u884c\u4f1a\u8bdd\uff0c\u7136\u540e\u8fd0\u884c /bin/bash \u3002 docker run -i -t ubuntu /bin/bash \u5f53\u60a8\u8fd0\u884c\u6b64\u547d\u4ee4\u65f6\uff0c\u4f1a\u53d1\u751f\u4ee5\u4e0b\u60c5\u51b5\uff08\u5047\u8bbe\u60a8\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u4ed3\u5e93\u914d\u7f6e\uff09\uff1a \u5982\u679c\u60a8\u5728 ubuntu \u672c\u5730\u6ca1\u6709\u8be5\u6620\u50cf\uff0c\u5219 Docker \u4f1a\u5c06\u5176\u4ece\u5df2\u914d\u7f6e\u7684\u4ed3\u5e93\u4e2d\u62c9\u51fa\uff0c\u5c31\u50cf\u60a8\u5df2 docker pull ubuntu \u624b\u52a8\u8fd0\u884c\u4e00\u6837\u3002 Docker \u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bb9\u5668\uff0c\u5c31\u50cf\u60a8\u5df2 docker container create \u624b\u52a8\u8fd0\u884c\u547d\u4ee4\u4e00\u6837\u3002 Docker \u5c06\u4e00\u4e2a\u8bfb\u5199\u6587\u4ef6\u7cfb\u7edf\u5206\u914d\u7ed9\u5bb9\u5668\uff0c\u4f5c\u4e3a\u5176\u6700\u540e\u4e00\u5c42\u3002\u8fd9\u5141\u8bb8\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u5728\u5176\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u4e2d\u521b\u5efa\u6216\u4fee\u6539\u6587\u4ef6\u548c\u76ee\u5f55\u3002 Docker \u521b\u5efa\u4e86\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\u4ee5\u5c06\u5bb9\u5668\u8fde\u63a5\u5230\u9ed8\u8ba4\u7f51\u7edc\uff0c\u56e0\u4e3a\u60a8\u672a\u6307\u5b9a\u4efb\u4f55\u7f51\u7edc\u9009\u9879\u3002\u8fd9\u5305\u62ec\u4e3a\u5bb9\u5668\u5206\u914d IP \u5730\u5740\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528\u4e3b\u673a\u7684\u7f51\u7edc\u8fde\u63a5\u8fde\u63a5\u5230\u5916\u90e8\u7f51\u7edc\u3002 Docker \u542f\u52a8\u5bb9\u5668\u5e76\u6267\u884c /bin/bash \u3002\u56e0\u4e3a\u5bb9\u5668\u662f\u4ea4\u4e92\u5f0f\u8fd0\u884c\u7684\uff0c\u5e76\u4e14\u5df2\u9644\u52a0\u5230\u60a8\u7684\u7ec8\u7aef\uff08\u7531\u4e8e -i \u548c -t \u6807\u5fd7\uff09\uff0c\u6240\u4ee5\u60a8\u53ef\u4ee5\u5728\u8f93\u51fa\u8bb0\u5f55\u5230\u7ec8\u7aef\u65f6\u4f7f\u7528\u952e\u76d8\u63d0\u4f9b\u8f93\u5165\u3002 \u5f53\u60a8\u952e\u5165 exit \u4ee5\u7ec8\u6b62 /bin/bash \u547d\u4ee4\u65f6\uff0c\u5bb9\u5668\u5c06\u505c\u6b62\u4f46\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u60a8\u53ef\u4ee5\u91cd\u65b0\u542f\u52a8\u6216\u5220\u9664\u5b83\u3002 \u4e09\u3001Docker \u67b6\u6784\u4ecb\u7ecd \u00b6 Docker \u4f7f\u7528\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u67b6\u6784\u3002Docker \u5ba2\u6237\u7aef \u4e0e Docker \u5b88\u62a4\u8fdb\u7a0b \u8fdb\u884c\u5bf9\u8bdd\uff0c\u8be5 \u5b88\u62a4\u8fdb\u7a0b \u5b8c\u6210\u4e86\u6784\u5efa\u3001\u8fd0\u884c\u548c\u5206\u53d1 Docker \u5bb9\u5668\u7684\u7e41\u91cd\u5de5\u4f5c\u3002Docker \u5ba2\u6237\u7aef\u548c\u5b88\u62a4\u7a0b\u5e8f\u53ef\u4ee5\u5728\u540c\u4e00\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u6216\u8005\u60a8\u53ef\u4ee5\u5c06 Docker \u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u8fdc\u7a0b Docker \u5b88\u62a4\u7a0b\u5e8f\u3002Docker \u5ba2\u6237\u7aef\u548c\u5b88\u62a4\u7a0b\u5e8f\u5728 UNIX \u5957\u63a5\u5b57\u6216\u7f51\u7edc\u63a5\u53e3\u4e0a\u4f7f\u7528 REST API \u8fdb\u884c\u901a\u4fe1\u3002 Docker \u5b88\u62a4\u8fdb\u7a0b \u00b6 Docker \u5b88\u62a4\u7a0b\u5e8f\uff08 dockerd \uff09\u4fa6\u542c Docker API \u8bf7\u6c42\u5e76\u7ba1\u7406 Docker \u5bf9\u8c61\uff0c\u4f8b\u5982 images\uff08\u955c\u50cf\uff09\uff0ccontainers\uff08\u5bb9\u5668\uff09\uff0cnetworks\uff08\u7f51\u7edc\uff09\u548c volume\uff08\u5377\uff09\u3002\u5b88\u62a4\u7a0b\u5e8f\u8fd8\u53ef\u4ee5\u4e0e\u5176\u4ed6\u5b88\u62a4\u7a0b\u5e8f\u901a\u4fe1\u4ee5\u7ba1\u7406 Docker \u670d\u52a1\u3002 Docker \u5ba2\u6237\u7aef \u00b6 Docker \u5ba2\u6237\u7aef\uff08 docker \uff09\u662f\u8bb8\u591a Docker \u7528\u6237\u4e0e Docker \u4ea4\u4e92\u7684\u4e3b\u8981\u65b9\u5f0f\u3002\u5f53\u60a8\u4f7f\u7528\u8bf8\u5982 docker run \u4e4b\u7c7b\u7684\u547d\u4ee4\u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u5c06\u8fd9\u4e9b\u547d\u4ee4\u53d1\u9001\u5230 dockerd \uff0c\u4ee5\u6267\u884c\u8fd9\u4e9b\u547d\u4ee4\u3002\u8be5 docker \u547d\u4ee4\u4f7f\u7528 Docker API\u3002Docker \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0e\u591a\u4e2a\u5b88\u62a4\u7a0b\u5e8f\u901a\u4fe1\u3002 Docker \u4ed3\u5e93 \u00b6 Docker \u4ed3\u5e93\u5b58\u50a8 Docker \u955c\u50cf\u3002Docker Hub \u662f\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528\u7684\u516c\u5171\u4ed3\u5e93\uff0c\u5e76\u4e14 Docker \u914d\u7f6e\u4e3a\u9ed8\u8ba4\u5728 Docker Hub \u4e0a\u67e5\u627e\u6620\u50cf\u3002\u60a8\u751a\u81f3\u53ef\u4ee5\u8fd0\u884c\u81ea\u5df1\u7684\u79c1\u4eba\u4ed3\u5e93\u3002\u5982\u679c\u4f7f\u7528 Docker \u6570\u636e\u4e2d\u5fc3\uff08DDC\uff09\uff0c\u5219\u5176\u4e2d\u5305\u62ec Docker \u53ef\u4fe1\u4ed3\u5e93\uff08DTR\uff09\u3002 \u4f7f\u7528 docker pull \u6216 docker run \u547d\u4ee4\u65f6\uff0c\u6240\u9700\u7684\u955c\u50cf\u5c06\u4ece\u914d\u7f6e\u7684\u4ed3\u5e93\u4e2d\u63d0\u53d6\u3002\u4f7f\u7528\u8be5 docker push \u547d\u4ee4\u65f6\uff0c\u4f1a\u5c06\u6620\u50cf\u63a8\u9001\u5230\u914d\u7f6e\u7684\u4ed3\u5e93\u3002 Docker \u5bf9\u8c61 \u00b6 \u4f7f\u7528 Docker \u65f6\uff0c\u60a8\u6b63\u5728\u521b\u5efa\u548c\u4f7f\u7528\u955c\u50cf\uff0c\u5bb9\u5668\uff0c\u7f51\u7edc\uff0c\u5377\uff0c\u63d2\u4ef6\u548c\u5176\u4ed6\u5bf9\u8c61\u3002\u672c\u8282\u662f\u5176\u4e2d\u4e00\u4e9b\u5bf9\u8c61\u7684\u7b80\u8981\u6982\u8ff0\u3002 Images\uff08\u955c\u50cf\uff09 \u955c\u50cf\u662f\u4e00\u4e2a\u53ea\u8bfb\u6a21\u677f\uff08\u4e0d\u5305\u542b\u4efb\u4f55\u52a8\u6001\u6570\u636e\uff0c\u5176\u5185\u5bb9\u5728\u6784\u5efa\u4e4b\u540e\u4e5f\u4e0d\u4f1a\u88ab\u6539\u53d8 \uff09\uff0c\u5176\u4e2d\u5305\u542b\u521b\u5efa Docker \u5bb9\u5668\u7684\u8bf4\u660e\u3002\u901a\u5e38\uff0c\u4e00\u4e2a\u955c\u50cf\u57fa\u4e8e\u53e6\u4e00\u4e2a\u955c\u50cf\uff0c\u5e76\u5e26\u6709\u4e00\u4e9b\u989d\u5916\u7684\u5b9a\u5236\u3002 \u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2a\u57fa\u4e8e ubuntu \u955c\u50cf\u7684\u955c\u50cf\uff0c\u5b89\u88c5 ubuntu Apache HTTP Server \u548c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u8fd0\u884c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u914d\u7f6e\u7ec6\u8282\u3002 \u60a8\u53ef\u4ee5\u521b\u5efa\u81ea\u5df1\u7684\u955c\u50cf\uff0c\u4e5f\u53ef\u4ee5\u4ec5\u4f7f\u7528\u5176\u4ed6\u4eba\u521b\u5efa\u5e76\u5728\u4ed3\u5e93\u4e2d\u53d1\u5e03\u7684\u955c\u50cf\u3002\u8981\u6784\u5efa\u81ea\u5df1\u7684\u955c\u50cf\uff0c\u60a8\u53ef\u4ee5 \u4f7f\u7528\u7b80\u5355\u7684\u8bed\u6cd5\u521b\u5efa\u4e00\u4e2a Dockerfile \uff0c\u4ee5\u5b9a\u4e49\u521b\u5efa\u955c\u50cf\u5e76\u8fd0\u884c\u5b83\u6240\u9700\u7684\u6b65\u9aa4\u3002 Dockerfile \u4e2d\u7684\u6bcf\u6761\u6307\u4ee4\u90fd\u4f1a\u5728\u955c\u50cf\u4e2d\u521b\u5efa\u4e00\u4e2a\u5c42\u3002\u66f4\u6539 Dockerfile \u5e76\u91cd\u5efa\u955c\u50cf\u65f6\uff0c\u4ec5\u91cd\u5efa\u90a3\u4e9b\u5df2\u66f4\u6539\u7684\u5c42\u3002\u4e0e\u5176\u4ed6\u865a\u62df\u5316\u6280\u672f\u76f8\u6bd4\uff0c\u8fd9\u662f\u4f7f\u955c\u50cf\u5982\u6b64\u8f7b\u5de7\uff0c\u5c0f\u578b\u548c\u5feb\u901f\u7684\u90e8\u5206\u539f\u56e0\u3002 Containers \uff08\u5bb9\u5668\uff09 \u5bb9\u5668\u662f\u955c\u50cf\u7684\u53ef\u8fd0\u884c\u5b9e\u4f8b\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Docker API \u6216 CLI \u521b\u5efa\uff0c\u542f\u52a8\uff0c\u505c\u6b62\uff0c\u79fb\u52a8\u6216\u5220\u9664\u5bb9\u5668\u3002\u60a8\u53ef\u4ee5\u5c06\u5bb9\u5668\u8fde\u63a5\u5230\u4e00\u4e2a\u6216\u591a\u4e2a\u7f51\u7edc\uff0c\u5c06\u5b58\u50a8\u9644\u52a0\u5230\u8be5\u7f51\u7edc\uff0c\u751a\u81f3\u6839\u636e\u5176\u5f53\u524d\u72b6\u6001\u521b\u5efa\u65b0\u6620\u50cf\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u4e0e\u5176\u4ed6\u5bb9\u5668\u53ca\u5176\u4e3b\u673a\u4e4b\u95f4\u7684\u9694\u79bb\u7a0b\u5ea6\u76f8\u5bf9\u8f83\u9ad8\u3002\u60a8\u53ef\u4ee5\u63a7\u5236\u5bb9\u5668\u7684\u7f51\u7edc\uff0c\u5b58\u50a8\u6216\u5176\u4ed6\u57fa\u7840\u5b50\u7cfb\u7edf\u4e0e\u5176\u4ed6\u5bb9\u5668\u6216\u4e0e\u4e3b\u673a\u7684\u9694\u79bb\u7a0b\u5ea6\u3002 \u5bb9\u5668\u7531\u5176\u6620\u50cf\u4ee5\u53ca\u5728\u521b\u5efa\u6216\u542f\u52a8\u65f6\u4e3a\u5176\u63d0\u4f9b\u7684\u4efb\u4f55\u914d\u7f6e\u9009\u9879\u5b9a\u4e49\u3002\u5220\u9664\u5bb9\u5668\u540e\uff0c\u672a\u5b58\u50a8\u5728\u6301\u4e45\u6027\u5b58\u50a8\u4e2d\u7684\u72b6\u6001\u66f4\u6539\u5c06\u6d88\u5931\u3002 \u6309\u7167 Docker \u6700\u4f73\u5b9e\u8df5\u7684\u8981\u6c42\uff0c\u5bb9\u5668\u4e0d\u5e94\u8be5\u5411\u5176\u5b58\u50a8\u5c42\u5185\u5199\u5165\u4efb\u4f55\u6570\u636e\uff0c\u5bb9\u5668\u5b58\u50a8\u5c42\u8981\u4fdd\u6301\u65e0\u72b6\u6001\u5316\u3002\u6240\u6709\u7684\u6587\u4ef6\u5199\u5165\u64cd\u4f5c\uff0c\u90fd\u5e94\u8be5\u4f7f\u7528 Volume\uff08\u6570\u636e\u5377\uff09\u3001\u6216\u8005\u6302\u8f7d\u5bbf\u4e3b\u76ee\u5f55\uff0c\u5728\u8fd9\u4e9b\u4f4d\u7f6e\u7684\u8bfb\u5199\u4f1a\u8df3\u8fc7\u5bb9\u5668\u5b58\u50a8\u5c42\uff0c\u76f4\u63a5\u5bf9\u5bbf\u4e3b\uff08\u6216\u7f51\u7edc\u5b58\u50a8\uff09\u53d1\u751f\u8bfb\u5199\uff0c\u5176\u6027\u80fd\u548c\u7a33\u5b9a\u6027\u66f4\u9ad8\u3002 Service \uff08\u670d\u52a1\uff09 \u670d\u52a1\u5141\u8bb8\u8de8\u591a\u4e2a Docker \u5b88\u62a4\u8fdb\u7a0b\u8c03\u5ea6\u5bb9\u5668\uff0c\u8fd9\u4e9b\u5b88\u62a4\u8fdb\u7a0b\u4ee5\u591a\u4e2a\u7ba1\u7406\u8005\u548c\u5de5\u4f5c\u8005\u7684\u7fa4\u4f53\u5f62\u5f0f\u534f\u540c\u5de5\u4f5c\u3002\u96c6\u7fa4\u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u662f\u4e00\u4e2a Docker \u5b88\u62a4\u8fdb\u7a0b\uff0c\u5e76\u4e14\u6240\u6709\u5b88\u62a4\u8fdb\u7a0b\u90fd\u4f7f\u7528 Docker API \u8fdb\u884c\u901a\u4fe1\u3002\u670d\u52a1\u5141\u8bb8\u60a8\u5b9a\u4e49\u6240\u9700\u7684\u72b6\u6001\uff0c\u4f8b\u5982\u5728\u4efb\u4f55\u7ed9\u5b9a\u65f6\u95f4\u5fc5\u987b\u53ef\u7528\u7684\u670d\u52a1\u526f\u672c\u6570\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u670d\u52a1\u5728\u6240\u6709\u5de5\u4f5c\u8282\u70b9\u4e4b\u95f4\u5b9e\u73b0\u8d1f\u8f7d\u5e73\u8861\u3002\u5bf9\u4e8e\u4f7f\u7528\u8005\u800c\u8a00\uff0cDocker \u670d\u52a1\u4f3c\u4e4e\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u5e94\u7528\u7a0b\u5e8f\u3002Docker Engine \u5728 Docker 1.12 \u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u652f\u6301\u96c6\u7fa4\u6a21\u5f0f\u3002 Docker \u5e95\u5c42\u6280\u672f \u00b6 Docker\u7528 Go \u7f16\u5199\uff0c\u5e76\u5229\u7528Linux\u5185\u6838\u7684\u591a\u4e2a\u529f\u80fd\u6765\u4ea4\u4ed8\u5176\u529f\u80fd\u3002\u5e95\u5c42\u6838\u5fc3\u6280\u672f\u5305\u62ec\u547d\u540d\u7a7a\u95f4\uff08Namespaces\uff09\u3001\u63a7\u5236\u7ec4\uff08Control groups\uff09\u3001Union \u6587\u4ef6\u7cfb\u7edf\uff08Union file systems\uff09\u548c\u5bb9\u5668\u683c\u5f0f\uff08Container format\uff09\u3002 \u547d\u540d\u7a7a\u95f4\uff08namespaces\uff09 Docker\u4f7f\u7528\u4e00\u79cd\u79f0\u4e3a namespaces \u7684\u6280\u672f\u6765\u63d0\u4f9b\u79f0\u4e4b\u4e3a\u5bb9\u5668\u7684\u9694\u79bb\u5de5\u4f5c\u533a\u3002\u8fd0\u884c\u5bb9\u5668\u65f6\uff0cDocker\u4f1a\u4e3a\u8be5\u5bb9\u5668\u521b\u5efa\u4e00\u7ec4\u547d\u540d\u7a7a\u95f4\u3002\u901a\u8fc7\u547d\u540d\u7a7a\u95f4\u9694\u79bb\u5bb9\u5668\u4e4b\u95f4\u5f7c\u6b64\u4e0d\u53d7\u5f71\u54cd\uff0c\u4e14\u5176\u8bbf\u95ee\u6743\u9650\u4e5f\u4ec5\u9650\u4e8e\u8be5\u547d\u540d\u7a7a\u95f4\u3002 Docker Engine \u5728Linux \u4e0a\u4f7f\u7528\u4ee5\u4e0b\u547d\u540d\u7a7a\u95f4\uff1a pid \u547d\u540d\u7a7a\u95f4\uff1a \u8fdb\u7a0b\u9694\u79bb\uff08PID\uff1aProcess ID\uff09\u3002 net \u547d\u540d\u7a7a\u95f4\uff1a \u7ba1\u7406\u7f51\u7edc\u63a5\u53e3\uff08NET\uff1aNetworking\uff09\u3002 ipc \u547d\u540d\u7a7a\u95f4\uff1a \u7ba1\u7406\u5bf9IPC\u8d44\u6e90\u7684\u8bbf\u95ee\uff08IPC\uff1aInterProcess Communication\uff09\u3002 mnt \u547d\u540d\u7a7a\u95f4\uff1a \u7ba1\u7406\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u70b9\uff08MNT\uff1aMount\uff09\u3002 uts \u547d\u540d\u7a7a\u95f4\uff1a \u9694\u79bb\u5185\u6838\u548c\u7248\u672c\u6807\u8bc6\u7b26\u3002\uff08UTS\uff1aUnix Timesharing System\uff09\u3002 \u63a7\u5236\u7ec4\uff08cgroups\uff09 Linux\u4e0a\u7684 Docker \u5f15\u64ce\u4f9d\u8d56\u4e00\u79cd\u79f0\u4e3a \u63a7\u5236\u7ec4 \uff08 cgroups \uff09\u7684\u6280\u672f\u3002\u63a7\u5236\u7ec4\u4e3a\u5e94\u7528\u7a0b\u5e8f\u9650\u5236\u4e00\u7ec4\u7279\u5b9a\u7684\u8d44\u6e90\u3002\u63a7\u5236\u7ec4\u5141\u8bb8Docker Engine\u5c06\u53ef\u7528\u7684\u786c\u4ef6\u8d44\u6e90\u5171\u4eab\u7ed9\u5bb9\u5668\uff0c\u5e76\u6709\u9009\u62e9\u5730\u5b9e\u65bd\u9650\u5236\u548c\u7ea6\u675f\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u9650\u5236\u7279\u5b9a\u5bb9\u5668\u53ef\u7528\u7684\u5185\u5b58\u3002 CGroups \u5168\u79f0control group\uff0c\u7528\u6765\u9650\u5b9a\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8d44\u6e90\u4f7f\u7528\uff0c\u7531Linux \u5185\u6838\u652f\u6301\uff0c\u53ef\u4ee5\u9650\u5236\u548c\u9694\u79bbLinux\u8fdb\u7a0b\u7ec4 (process groups) \u6240\u4f7f\u7528\u7684\u7269\u7406\u8d44\u6e90 \uff0c\u6bd4\u5982cpu\uff0c\u5185\u5b58\uff0c\u78c1\u76d8\u548c\u7f51\u7edcIO\uff0c\u662fLinux container\u6280\u672f\u7684\u7269\u7406\u57fa\u7840\u3002 \u8054\u5408\u6587\u4ef6\u7cfb\u7edf\uff08UnionFS\uff09 UnionFS\u6587\u4ef6\u7cfb\u7edf\uff0c\u662f\u901a\u8fc7\u521b\u5efa\u5c42\u6765\u64cd\u4f5c\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fd9\u4f7f\u5f97\u5b83\u4eec\u975e\u5e38\u8f7b\u91cf\u7ea7\u548c\u5feb\u901f\u3002 Docker Engine \u4f7f\u7528 UnionFS \u4e3a\u5bb9\u5668\u63d0\u4f9b\u5206\u5c42\u6784\u5efa\u5757\u3002 Docker Engine \u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a UnionFS \u53d8\u4f53\uff0c\u5305\u62ec AUFS \u3001 btrfs \u3001 vfs \u548c DeviceMapper \u3002 Union File System\uff0c\u7b80\u79f0UnionFS\uff0c\u4ed6\u662f\u4e00\u79cd\u4e3aLinux \u3001FreeBSD \u548cNetBSD \u64cd\u4f5c\u7cfb\u7edf\u8bbe\u8ba1\u7684\uff0c\u628a\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u8054\u5408\u5230\u4e00\u4e2a\u8054\u5408\u6302\u8f7d\u70b9\u7684\u6587\u4ef6\u7cfb\u7edf\u670d\u52a1\u3002 \u5bb9\u5668\u683c\u5f0f\uff08Container format\uff09 Docker Engine \u5c06 namespaces \u3001 cgroups \u548c UnionFS \u7ec4\u5408\u6210\u4e00\u4e2a\u79f0\u4e3a\u5bb9\u5668\u683c\u5f0f\u7684\u5305\u88c5\u5668\u3002 \u9ed8\u8ba4\u7684\u5bb9\u5668\u683c\u5f0f\u662f libcontainer \u3002 \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e8c\uff09\uff1a\u57fa\u4e8e Dockerfile \u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf","title":"\u4e00\u3001Docker\u57fa\u7840\u5165\u95e8\u53ca\u67b6\u6784\u4ecb\u7ecd"},{"location":"Docker/1-Overview/#docker","text":"Docker \u662f\u4e00\u4e2a\u7528\u4e8e\u5f00\u53d1\uff0c\u4ea4\u4ed8\u548c\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u653e\u5e73\u53f0\u3002Docker \u4f7f\u60a8\u80fd\u591f\u5c06\u5e94\u7528\u7a0b\u5e8f\u4e0e\u57fa\u7840\u67b6\u6784\u5206\u5f00\uff0c\u4ece\u800c\u53ef\u4ee5\u5feb\u901f\u4ea4\u4ed8\u8f6f\u4ef6\u3002\u501f\u52a9 Docker\uff0c\u60a8\u53ef\u4ee5\u4ee5\u4e0e\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u76f8\u540c\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u57fa\u7840\u67b6\u6784\u3002\u901a\u8fc7\u5229\u7528 Docker \u7684\u5feb\u901f\u4ea4\u4ed8\uff0c\u6d4b\u8bd5\u548c\u90e8\u7f72\u4ee3\u7801\u7684\u65b9\u6cd5\uff0c\u60a8\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u7f16\u5199\u4ee3\u7801\u548c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8fd0\u884c\u4ee3\u7801\u4e4b\u95f4\u7684\u5ef6\u8fdf\u3002 \u5bb9\u5668\u5316\u8d8a\u6765\u8d8a\u53d7\u6b22\u8fce\uff0c\u662f\u56e0\u4e3a\u5bb9\u5668\uff1a \u7075\u6d3b \uff1a\u5373\u4f7f\u6700\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\u4e5f\u53ef\u4ee5\u5bb9\u5668\u5316\u3002 \u8f7b\u91cf\u7ea7 \uff1a\u5bb9\u5668\u5229\u7528\u5e76\u5171\u4eab\u4e3b\u673a\u5185\u6838\uff0c\u5728\u7cfb\u7edf\u8d44\u6e90\u65b9\u9762\u6bd4\u865a\u62df\u673a\u66f4\u52a0\u6709\u6548\u3002 \u53ef\u79fb\u690d\u6027 \uff1a\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u6784\u5efa\uff0c\u90e8\u7f72\u5230\u4e91\u5e76\u5728\u4efb\u4f55\u5730\u65b9\u8fd0\u884c\u3002 \u677e\u6563\u8026\u5408 \uff1a\u5bb9\u5668\u662f\u9ad8\u5ea6\u81ea\u7ed9\u81ea\u8db3\u5e76\u5c01\u88c5\u7684\u5bb9\u5668\uff0c\u4f7f\u60a8\u53ef\u4ee5\u5728\u4e0d\u7834\u574f\u5176\u4ed6\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u66f4\u6362\u6216\u5347\u7ea7\u5b83\u4eec\u3002 \u53ef\u6269\u5c55 \uff1a\u60a8\u53ef\u4ee5\u5728\u6570\u636e\u4e2d\u5fc3\u5185\u589e\u52a0\u5e76\u81ea\u52a8\u5206\u53d1\u5bb9\u5668\u526f\u672c\u3002 \u5b89\u5168 \uff1a\u5bb9\u5668\u5c06\u79ef\u6781\u7684\u7ea6\u675f\u548c\u9694\u79bb\u5e94\u7528\u4e8e\u6d41\u7a0b\uff0c\u800c\u65e0\u9700\u7528\u6237\u65b9\u9762\u7684\u4efb\u4f55\u914d\u7f6e\u3002","title":"\u4e00\u3001Docker \u6982\u8ff0"},{"location":"Docker/1-Overview/#docker_1","text":"Docker \u63d0\u4f9b\u4e86\u5728\u677e\u6563\u9694\u79bb\u7684\u73af\u5883\uff08\u79f0\u4e3a\u5bb9\u5668\uff09\u4e2d\u6253\u5305\u548c\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684\u529f\u80fd\u3002\u9694\u79bb\u548c\u5b89\u5168\u6027\u4f7f\u60a8\u53ef\u4ee5\u5728\u7ed9\u5b9a\u4e3b\u673a\u4e0a\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\u3002\u5bb9\u5668\u662f\u8f7b\u91cf\u7ea7\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u9700\u8981\u7ba1\u7406\u7a0b\u5e8f\u7684\u989d\u5916\u8d1f\u62c5\uff0c\u800c\u662f\u76f4\u63a5\u5728\u4e3b\u673a\u7684\u5185\u6838\u4e2d\u8fd0\u884c\u3002\u8fd9\u610f\u5473\u7740\u4e0e\u4f7f\u7528\u865a\u62df\u673a\u76f8\u6bd4\uff0c\u60a8\u53ef\u4ee5\u5728\u7ed9\u5b9a\u7684\u786c\u4ef6\u7ec4\u5408\u4e0a\u8fd0\u884c\u66f4\u591a\u7684\u5bb9\u5668\u3002\u60a8\u751a\u81f3\u53ef\u4ee5\u5728\u5b9e\u9645\u4e0a\u662f\u865a\u62df\u673a\u7684\u4e3b\u673a\u4e2d\u8fd0\u884c Docker \u5bb9\u5668\uff01 Docker \u63d0\u4f9b\u4e86\u5de5\u5177\u548c\u5e73\u53f0\u6765\u7ba1\u7406\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\uff1a \u4f7f\u7528\u5bb9\u5668\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u652f\u6301\u7ec4\u4ef6\u3002 \u5bb9\u5668\u6210\u4e3a\u5206\u53d1\u548c\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u7684\u5355\u5143\u3002 \u51c6\u5907\u5c31\u7eea\u540e\uff0c\u53ef\u4ee5\u5c06\u5e94\u7528\u7a0b\u5e8f\u4f5c\u4e3a\u5bb9\u5668\u6216\u534f\u8c03\u670d\u52a1\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\u4e2d\u3002\u65e0\u8bba\u60a8\u7684\u751f\u4ea7\u73af\u5883\u662f\u672c\u5730\u6570\u636e\u4e2d\u5fc3\uff0c\u4e91\u63d0\u4f9b\u5546\u8fd8\u662f\u4e24\u8005\u7684\u6df7\u5408\uff0c\u5176\u5de5\u4f5c\u539f\u7406\u90fd\u76f8\u540c\u3002","title":"Docker \u5e73\u53f0"},{"location":"Docker/1-Overview/#docker_2","text":"","title":"\u6211\u53ef\u4ee5\u5c06 Docker \u7528\u4e8e\u4ec0\u4e48"},{"location":"Docker/1-Overview/#vs","text":"\u5bb9\u5668\u76f4\u63a5\u8fd0\u884c\u5728 Linux \u4e3b\u673a\u4e0a\uff0c\u5e76\u4e0e\u5176\u4ed6\u5bb9\u5668\u5171\u4eab\u4e3b\u673a\u7684\u5185\u6838\u3002\u5b83\u8fd0\u884c\u4e00\u4e2a\u79bb\u6563\u8fdb\u7a0b\uff0c\u4e0d\u5360\u7528\u6267\u884c\u7a0b\u5e8f\u4ee5\u5916\u7684\u4efb\u4f55\u5185\u5b58\uff0c\u4ece\u800c\u4f7f\u5176\u8f7b\u5de7\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u865a\u62df\u673a\uff08VM\uff09\u4f1a\u4ea7\u751f\u5927\u91cf\u5f00\u9500\uff0c\u8d85\u51fa\u4e86\u5e94\u7528\u7a0b\u5e8f\u6240\u6d88\u8017\u7684\u5f00\u9500\u3002","title":"\u5bb9\u5668 VS \u865a\u62df\u673a"},{"location":"Docker/1-Overview/#docker_3","text":"","title":"\u4e8c\u3001Docker \u5b89\u88c5\u53ca\u8fd0\u884c"},{"location":"Docker/1-Overview/#1-docker","text":"Docker \u5206\u4e3a CE \u548c EE \u4e24\u5927\u7248\u672c\u3002Docker CE \u5206\u4e3a stable \u3001 test \u548c nightly \u4e09\u4e2a\u66f4\u65b0\u9891\u9053\u3002\u5b98\u65b9\u7f51\u7ad9\u4e0a\u6709\u5404\u79cd\u73af\u5883\u4e0b\u7684 \u5b89\u88c5\u6307\u5357 \uff0c\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u60c5\u51b5\u8fdb\u884c\u5b89\u88c5\u3002","title":"1\u3001\u83b7\u53d6 Docker"},{"location":"Docker/1-Overview/#2","text":"\u4e00\u822c\u56fd\u5185\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u62c9\u53d6 Docker \u955c\u50cf\u5341\u5206\u7f13\u6162\uff0c\u53ef\u4ee5\u914d\u7f6e Docker \u56fd\u5185\u955c\u50cf\u52a0\u901f\u3002\u5404\u4e2a\u514d\u8d39\u955c\u50cf\u7ad9\u6d4b\u8bd5\u7ed3\u679c\u8bf7\u5230 docker-practice/docker-registry-cn-mirror-test \u67e5\u770b\u3002\u63a8\u8350\u4f7f\u7528 \u963f\u91cc\u4e91\u514d\u8d39\u955c\u50cf\u52a0\u901f\u5668 \uff08\u9700\u767b\u5f55\uff09\uff0c\u7a33\u5b9a\u53ef\u9760\u3002 \u5bf9\u4e8e\u4f7f\u7528 macOS \u7684\u7528\u6237\uff0c\u5728\u4efb\u52a1\u680f\u70b9\u51fb Docker Desktop \u5e94\u7528\u56fe\u6807 -> Perferences \uff0c\u5728\u5de6\u4fa7\u5bfc\u822a\u83dc\u5355\u9009\u62e9 Docker Engine \uff0c\u5728\u53f3\u4fa7\u53c2\u8003\u5982\u4e0b\u5185\u5bb9\u7f16\u8f91 json \u6587\u4ef6\uff1a { \"registry-mirrors\" : [ \"https://dockerhub.azk8s.cn\" , \"https://hub-mirror.c.163.com\" ] } \u4fee\u6539\u5b8c\u6210\u4e4b\u540e\uff0c\u70b9\u51fb Apply & Restart \u6309\u94ae\uff0cDocker \u5c31\u4f1a\u91cd\u542f\u5e76\u5e94\u7528\u914d\u7f6e\u7684\u955c\u50cf\u3002\u6267\u884c $ docker info \uff0c\u5982\u679c\u4ece\u7ed3\u679c\u4e2d\u770b\u5230\u4e86\u5982\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u914d\u7f6e\u6210\u529f\u3002 Registry Mirrors: https://dockerhub.azk8s.cn/ https://hub-mirror.c.163.com","title":"2\u3001\u955c\u50cf\u52a0\u901f"},{"location":"Docker/1-Overview/#3","text":"\u4ee5\u4e0b\u547d\u4ee4\u8fd0\u884c\u4e00\u4e2a ubuntu \u5bb9\u5668\uff0c\u4ee5\u4ea4\u4e92\u65b9\u5f0f\u9644\u52a0\u5230\u672c\u5730\u547d\u4ee4\u884c\u4f1a\u8bdd\uff0c\u7136\u540e\u8fd0\u884c /bin/bash \u3002 docker run -i -t ubuntu /bin/bash \u5f53\u60a8\u8fd0\u884c\u6b64\u547d\u4ee4\u65f6\uff0c\u4f1a\u53d1\u751f\u4ee5\u4e0b\u60c5\u51b5\uff08\u5047\u8bbe\u60a8\u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u4ed3\u5e93\u914d\u7f6e\uff09\uff1a \u5982\u679c\u60a8\u5728 ubuntu \u672c\u5730\u6ca1\u6709\u8be5\u6620\u50cf\uff0c\u5219 Docker \u4f1a\u5c06\u5176\u4ece\u5df2\u914d\u7f6e\u7684\u4ed3\u5e93\u4e2d\u62c9\u51fa\uff0c\u5c31\u50cf\u60a8\u5df2 docker pull ubuntu \u624b\u52a8\u8fd0\u884c\u4e00\u6837\u3002 Docker \u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bb9\u5668\uff0c\u5c31\u50cf\u60a8\u5df2 docker container create \u624b\u52a8\u8fd0\u884c\u547d\u4ee4\u4e00\u6837\u3002 Docker \u5c06\u4e00\u4e2a\u8bfb\u5199\u6587\u4ef6\u7cfb\u7edf\u5206\u914d\u7ed9\u5bb9\u5668\uff0c\u4f5c\u4e3a\u5176\u6700\u540e\u4e00\u5c42\u3002\u8fd9\u5141\u8bb8\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u5728\u5176\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u4e2d\u521b\u5efa\u6216\u4fee\u6539\u6587\u4ef6\u548c\u76ee\u5f55\u3002 Docker \u521b\u5efa\u4e86\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\u4ee5\u5c06\u5bb9\u5668\u8fde\u63a5\u5230\u9ed8\u8ba4\u7f51\u7edc\uff0c\u56e0\u4e3a\u60a8\u672a\u6307\u5b9a\u4efb\u4f55\u7f51\u7edc\u9009\u9879\u3002\u8fd9\u5305\u62ec\u4e3a\u5bb9\u5668\u5206\u914d IP \u5730\u5740\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528\u4e3b\u673a\u7684\u7f51\u7edc\u8fde\u63a5\u8fde\u63a5\u5230\u5916\u90e8\u7f51\u7edc\u3002 Docker \u542f\u52a8\u5bb9\u5668\u5e76\u6267\u884c /bin/bash \u3002\u56e0\u4e3a\u5bb9\u5668\u662f\u4ea4\u4e92\u5f0f\u8fd0\u884c\u7684\uff0c\u5e76\u4e14\u5df2\u9644\u52a0\u5230\u60a8\u7684\u7ec8\u7aef\uff08\u7531\u4e8e -i \u548c -t \u6807\u5fd7\uff09\uff0c\u6240\u4ee5\u60a8\u53ef\u4ee5\u5728\u8f93\u51fa\u8bb0\u5f55\u5230\u7ec8\u7aef\u65f6\u4f7f\u7528\u952e\u76d8\u63d0\u4f9b\u8f93\u5165\u3002 \u5f53\u60a8\u952e\u5165 exit \u4ee5\u7ec8\u6b62 /bin/bash \u547d\u4ee4\u65f6\uff0c\u5bb9\u5668\u5c06\u505c\u6b62\u4f46\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u60a8\u53ef\u4ee5\u91cd\u65b0\u542f\u52a8\u6216\u5220\u9664\u5b83\u3002","title":"3\u3001\u5c0f\u8bd5\u725b\u5200"},{"location":"Docker/1-Overview/#docker_4","text":"Docker \u4f7f\u7528\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u67b6\u6784\u3002Docker \u5ba2\u6237\u7aef \u4e0e Docker \u5b88\u62a4\u8fdb\u7a0b \u8fdb\u884c\u5bf9\u8bdd\uff0c\u8be5 \u5b88\u62a4\u8fdb\u7a0b \u5b8c\u6210\u4e86\u6784\u5efa\u3001\u8fd0\u884c\u548c\u5206\u53d1 Docker \u5bb9\u5668\u7684\u7e41\u91cd\u5de5\u4f5c\u3002Docker \u5ba2\u6237\u7aef\u548c\u5b88\u62a4\u7a0b\u5e8f\u53ef\u4ee5\u5728\u540c\u4e00\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u6216\u8005\u60a8\u53ef\u4ee5\u5c06 Docker \u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u8fdc\u7a0b Docker \u5b88\u62a4\u7a0b\u5e8f\u3002Docker \u5ba2\u6237\u7aef\u548c\u5b88\u62a4\u7a0b\u5e8f\u5728 UNIX \u5957\u63a5\u5b57\u6216\u7f51\u7edc\u63a5\u53e3\u4e0a\u4f7f\u7528 REST API \u8fdb\u884c\u901a\u4fe1\u3002","title":"\u4e09\u3001Docker \u67b6\u6784\u4ecb\u7ecd"},{"location":"Docker/1-Overview/#docker_5","text":"Docker \u5b88\u62a4\u7a0b\u5e8f\uff08 dockerd \uff09\u4fa6\u542c Docker API \u8bf7\u6c42\u5e76\u7ba1\u7406 Docker \u5bf9\u8c61\uff0c\u4f8b\u5982 images\uff08\u955c\u50cf\uff09\uff0ccontainers\uff08\u5bb9\u5668\uff09\uff0cnetworks\uff08\u7f51\u7edc\uff09\u548c volume\uff08\u5377\uff09\u3002\u5b88\u62a4\u7a0b\u5e8f\u8fd8\u53ef\u4ee5\u4e0e\u5176\u4ed6\u5b88\u62a4\u7a0b\u5e8f\u901a\u4fe1\u4ee5\u7ba1\u7406 Docker \u670d\u52a1\u3002","title":"Docker \u5b88\u62a4\u8fdb\u7a0b"},{"location":"Docker/1-Overview/#docker_6","text":"Docker \u5ba2\u6237\u7aef\uff08 docker \uff09\u662f\u8bb8\u591a Docker \u7528\u6237\u4e0e Docker \u4ea4\u4e92\u7684\u4e3b\u8981\u65b9\u5f0f\u3002\u5f53\u60a8\u4f7f\u7528\u8bf8\u5982 docker run \u4e4b\u7c7b\u7684\u547d\u4ee4\u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u5c06\u8fd9\u4e9b\u547d\u4ee4\u53d1\u9001\u5230 dockerd \uff0c\u4ee5\u6267\u884c\u8fd9\u4e9b\u547d\u4ee4\u3002\u8be5 docker \u547d\u4ee4\u4f7f\u7528 Docker API\u3002Docker \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0e\u591a\u4e2a\u5b88\u62a4\u7a0b\u5e8f\u901a\u4fe1\u3002","title":"Docker \u5ba2\u6237\u7aef"},{"location":"Docker/1-Overview/#docker_7","text":"Docker \u4ed3\u5e93\u5b58\u50a8 Docker \u955c\u50cf\u3002Docker Hub \u662f\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528\u7684\u516c\u5171\u4ed3\u5e93\uff0c\u5e76\u4e14 Docker \u914d\u7f6e\u4e3a\u9ed8\u8ba4\u5728 Docker Hub \u4e0a\u67e5\u627e\u6620\u50cf\u3002\u60a8\u751a\u81f3\u53ef\u4ee5\u8fd0\u884c\u81ea\u5df1\u7684\u79c1\u4eba\u4ed3\u5e93\u3002\u5982\u679c\u4f7f\u7528 Docker \u6570\u636e\u4e2d\u5fc3\uff08DDC\uff09\uff0c\u5219\u5176\u4e2d\u5305\u62ec Docker \u53ef\u4fe1\u4ed3\u5e93\uff08DTR\uff09\u3002 \u4f7f\u7528 docker pull \u6216 docker run \u547d\u4ee4\u65f6\uff0c\u6240\u9700\u7684\u955c\u50cf\u5c06\u4ece\u914d\u7f6e\u7684\u4ed3\u5e93\u4e2d\u63d0\u53d6\u3002\u4f7f\u7528\u8be5 docker push \u547d\u4ee4\u65f6\uff0c\u4f1a\u5c06\u6620\u50cf\u63a8\u9001\u5230\u914d\u7f6e\u7684\u4ed3\u5e93\u3002","title":"Docker \u4ed3\u5e93"},{"location":"Docker/1-Overview/#docker_8","text":"\u4f7f\u7528 Docker \u65f6\uff0c\u60a8\u6b63\u5728\u521b\u5efa\u548c\u4f7f\u7528\u955c\u50cf\uff0c\u5bb9\u5668\uff0c\u7f51\u7edc\uff0c\u5377\uff0c\u63d2\u4ef6\u548c\u5176\u4ed6\u5bf9\u8c61\u3002\u672c\u8282\u662f\u5176\u4e2d\u4e00\u4e9b\u5bf9\u8c61\u7684\u7b80\u8981\u6982\u8ff0\u3002","title":"Docker \u5bf9\u8c61"},{"location":"Docker/1-Overview/#docker_9","text":"Docker\u7528 Go \u7f16\u5199\uff0c\u5e76\u5229\u7528Linux\u5185\u6838\u7684\u591a\u4e2a\u529f\u80fd\u6765\u4ea4\u4ed8\u5176\u529f\u80fd\u3002\u5e95\u5c42\u6838\u5fc3\u6280\u672f\u5305\u62ec\u547d\u540d\u7a7a\u95f4\uff08Namespaces\uff09\u3001\u63a7\u5236\u7ec4\uff08Control groups\uff09\u3001Union \u6587\u4ef6\u7cfb\u7edf\uff08Union file systems\uff09\u548c\u5bb9\u5668\u683c\u5f0f\uff08Container format\uff09\u3002","title":"Docker \u5e95\u5c42\u6280\u672f"},{"location":"Docker/1-Overview/#_1","text":"\u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e8c\uff09\uff1a\u57fa\u4e8e Dockerfile \u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/2-Image/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e8c\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e00\uff09\uff1aDocker \u57fa\u7840\u5165\u95e8\u53ca\u67b6\u6784\u4ecb\u7ecd \u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf \u00b6 \u8981\u6784\u5efa\u4e00\u4e2a\u5bb9\u5668\uff0c\u9700\u8981\u505a\u5f88\u591a\u7684\u5de5\u4f5c\uff0c\u8bbe\u7f6e\u5f88\u591a\u7684\u914d\u7f6e\uff0c\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u4e00\u5c42\u4fee\u6539\u3001\u5b89\u88c5\u3001\u6784\u5efa\u3001\u64cd\u4f5c\u7684\u547d\u4ee4\u90fd\u5199\u5165\u4e00\u4e2a\u811a\u672c\uff0c\u7528\u8fd9\u4e2a\u811a\u672c\u6765\u6784\u5efa\u3001\u5b9a\u5236\u955c\u50cf\uff0c\u90a3\u4e48\u7ecf\u5e38\u88ab\u63d0\u53ca\u7684\u65e0\u6cd5\u91cd\u590d\u3001\u955c\u50cf\u6784\u5efa\u900f\u660e\u6027\u3001\u4f53\u79ef\u7b49\u95ee\u9898\u5c31\u90fd\u4f1a\u89e3\u51b3\u3002 \u8fd9\u4e2a\u811a\u672c\u5c31\u662f Dockerfile\u3002 \u51c6\u5907 Dockerfile \u6587\u4ef6 \u00b6 \u4e0b\u8f7d\u793a\u4f8b\u9879\u76ee\uff0c\u8bf7\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a curl -LO https://github.com/dockersamples/node-bulletin-board/archive/master.zip unzip master.zip cd node-bulletin-board-master/bulletin-board-app \u8be5 node-bulletin-board \u9879\u76ee\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u516c\u544a\u677f\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f7f\u7528 Node.js \u7f16\u5199\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5047\u8bbe\u60a8\u7f16\u5199\u4e86\u6b64\u5e94\u7528\u7a0b\u5e8f\uff0c\u73b0\u5728\u6b63\u5c1d\u8bd5\u5bf9\u5176\u8fdb\u884c\u5bb9\u5668\u5316\u3002 Dockerfile \u63cf\u8ff0\u5982\u4f55\u4e3a\u5bb9\u5668\u7ec4\u88c5\u4e13\u7528\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u5305\u542b\u4e00\u4e9b\u5143\u6570\u636e\uff0c\u8fd9\u4e9b\u5143\u6570\u636e\u63cf\u8ff0\u4e86\u5982\u4f55\u57fa\u4e8e\u8be5\u955c\u50cf\u8fd0\u884c\u5bb9\u5668\u3002\u516c\u544a\u677f\u5e94\u7528\u7a0b\u5e8f Dockerfile \u5185\u5bb9\u5982\u4e0b\uff1a # Use the official image as a parent image. FROM node:current-slim # Set the working directory. WORKDIR /usr/src/app # Copy the file from your host to your current location. COPY package.json . # Run the command inside your image filesystem. RUN npm install # Inform Docker that the container is listening on the specified port at runtime. EXPOSE 8080 # Run the specified command within the container. CMD [ \"npm\" , \"start\" ] # Copy the rest of your app's source code from your host to your image filesystem. COPY . . \u7f16\u5199 Dockerfile \u662f\u5bb9\u5668\u5316\u5e94\u7528\u7a0b\u5e8f\u7684\u7b2c\u4e00\u6b65\uff0c\u8fd9\u4e9b Dockerfile \u547d\u4ee4\u662f\u6784\u5efa\u955c\u50cf\u7684\u6b65\u9aa4\u3002 \u8fd9\u4e2a\u6b65\u9aa4\u5982\u4e0b: \u4f7f\u7528 FORM \u6307\u5b9a\u57fa\u4e8e\u5df2\u7ecf\u5b58\u5728\u7684 node:current-slim \u57fa\u7840\u955c\u50cf\u6784\u5efa\u3002\u8fd9\u662f\u4e00\u4e2a\u7531 nodejs \u5b98\u65b9\u6784\u5efa\u7684\u955c\u50cf\u3002 \u4f7f\u7528 WORKDIR \u6307\u5b9a\u6240\u6709\u540e\u7eed\u64cd\u4f5c\u5747\u4ece\u955c\u50cf\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684 /usr/src/app \u76ee\u5f55\u4e2d\u6267\u884c\uff08\u800c\u4e0d\u662f\u4e3b\u673a\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff09\u3002 \u5c06\u6587\u4ef6 package.json \u4ece\u4e3b\u673a\u590d\u5236\u5230\u955c\u50cf\u4e2d\u7684\u5f53\u524d\u4f4d\u7f6e\uff08.\uff09\uff08\u590d\u5236\u5230 `/usr/src/app/package.json \uff09 \u5728\u955c\u50cf\u6587\u4ef6\u7cfb\u7edf\u4e2d\u8fd0\u884c\u547d\u4ee4 npm install \uff08\u8bfb\u53d6 package.json \u4ee5\u786e\u5b9a\u5e76\u5b89\u88c5\u5e94\u7528\u7a0b\u5e8f\u4f9d\u8d56\uff09 \u5c06\u5e94\u7528\u7684\u5176\u4f59\u6e90\u4ee3\u7801\u4ece\u4e3b\u673a\u590d\u5236\u5230\u955c\u50cf\u6587\u4ef6\u7cfb\u7edf\u3002 \u8fd9\u4e9b\u6b65\u9aa4\u4e0e\u5728\u4e3b\u673a\u4e0a\u8bbe\u7f6e\u548c\u5b89\u88c5\u5e94\u7528\u7a0b\u5e8f\u6240\u91c7\u53d6\u7684\u6b65\u9aa4\u51e0\u4e4e\u76f8\u540c\u3002\u4f46\u662f\uff0c\u5c06\u5b83\u4eec\u4fdd\u5b58\u4e3a Dockerfile \u53ef\u4ee5\u4f7f\u60a8\u5728\u53ef\u79fb\u690d\u7684\u9694\u79bb Docker \u955c\u50cf\u4e2d\u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u3002 \u4e0a\u9762\u7684\u6b65\u9aa4\u6784\u5efa\u4e86\u6211\u4eec\u955c\u50cf\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f46\u662f Dockerfile \u4e2d\u8fd8\u6709\u5176\u4ed6\u51e0\u884c\u3002 CMD \u6307\u4ee4\u5728\u955c\u50cf\u4e2d\u6307\u5b9a\u4e00\u4e9b\u5143\u6570\u636e\uff0c\u8be5\u5143\u6570\u636e\u63cf\u8ff0\u4e86\u5982\u4f55\u57fa\u4e8e\u8be5\u955c\u50cf\u8fd0\u884c\u5bb9\u5668\u3002\u5728\u672c\u793a\u4f8b\u4e2d\u8be5\u56fe\u50cf\u7684\u5bb9\u5668\u5316\u8fc7\u7a0b\u662f npm start \u3002 EXPOSE 8080 \u901a\u77e5 Docker \u8be5\u5bb9\u5668\u5728\u8fd0\u884c\u65f6\u76d1\u542c 8080 \u7aef\u53e3\u3002 \u4e0a\u9762\u662f\u7ec4\u7ec7\u4e00\u4e2a\u7b80\u5355\u7684 Dockerfile \u7684\u65b9\u6cd5\u3002\u59cb\u7ec8\u4ee5 FROM \u547d\u4ee4\u5f00\u5934\uff0c\u7136\u540e\u6309\u7167\u6b65\u9aa4\u6784\u5efa\u60a8\u7684\u79c1\u6709\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u4ee5\u4efb\u4f55\u5143\u6570\u636e\u89c4\u8303\u4f5c\u4e3a\u7ed3\u675f\u3002 Dockerfile \u6307\u4ee4\u6bd4\u4e0a\u9762\u770b\u5230\u7684\u8981\u591a\u3002\u6709\u5173\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 Dockerfile \u53c2\u8003 \u3002 \u6784\u5efa\u5e76\u6d4b\u8bd5\u955c\u50cf \u00b6 \u73b0\u5728\u60a8\u5df2\u7ecf\u6709\u4e86\u4e00\u4e9b\u6e90\u4ee3\u7801\u548c\u4e00\u4e2a Dockerfile\uff0c\u73b0\u5728\u8be5\u6784\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u6620\u50cf\uff0c\u5e76\u786e\u4fdd\u4ece\u5176\u542f\u52a8\u7684\u5bb9\u5668\u80fd\u591f\u6309\u9884\u671f\u5de5\u4f5c\u3002\u8ba9\u6211\u4eec\u6784\u5efa\u60a8\u7684\u516c\u544a\u677f\u56fe\u50cf\uff1a docker build --tag bulletinboard:1.0 . \u60a8\u5c06\u770b\u5230 Docker \u9010\u6b65\u5b8c\u6210 Dockerfile \u4e2d\u7684\u6bcf\u6761\u6307\u4ee4\uff0c\u5e76\u9010\u6b65\u6784\u5efa\u955c\u50cf\uff1a Sending build context to Docker daemon 45 .57kB Step 1 /7 : FROM node:current-slim current-slim: Pulling from library/node 48839397421a: Pull complete cbb6511d79bf: Pull complete 04ec6202052a: Pull complete 29c5eab4674c: Pull complete 8df5bb5f8d2e: Pull complete Digest: sha256:c92fad90875a6ce7251c72701f9c88e1e3f3efc2eb1d7d1ffb2184204e4f7d98 Status: Downloaded newer image for node:current-slim ---> 6d9a17519d40 Step 2 /7 : WORKDIR /usr/src/app ---> Running in 9dfd5c099558 Removing intermediate container 9dfd5c099558 ---> 6062c6d2e488 Step 3 /7 : COPY package.json . ---> 2ddc37525da9 Step 4 /7 : RUN npm install ---> Running in 6ce3fed8ecd7 > ejs@2.7.4 postinstall /usr/src/app/node_modules/ejs > node ./postinstall.js Thank you for installing EJS: built with the Jake JavaScript build tool ( https://jakejs.com/ ) npm notice created a lockfile as package-lock.json. You should commit this file. npm WARN vue-event-bulletin@1.0.0 No repository field. npm WARN The package morgan is included as both a dev and production dependency. added 91 packages from 168 contributors and audited 221 packages in 16 .854s found 0 vulnerabilities Removing intermediate container 6ce3fed8ecd7 ---> 38a27fea6567 Step 5 /7 : EXPOSE 8080 ---> Running in c7528a178327 Removing intermediate container c7528a178327 ---> 97f454f32f95 Step 6 /7 : CMD [ \"npm\" , \"start\" ] ---> Running in 72a6340e3d58 Removing intermediate container 72a6340e3d58 ---> 0a90efca7ea9 Step 7 /7 : COPY . . ---> 84c4f69e2893 Successfully built 84c4f69e2893 Successfully tagged bulletinboard:1.0 \u5c06\u955c\u50cf\u4f5c\u4e3a\u5bb9\u5668\u8fd0\u884c \u00b6 \u6839\u636e\u60a8\u7684\u65b0\u955c\u50cf\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff1a docker run --publish 8000 :8080 --detach --name board bulletinboard:1.0 \u8fd9\u91cc\u6709\u51e0\u4e2a\u5e38\u89c1\u7684\u6807\u5fd7\uff1a --publish \u8981\u6c42 Docker \u5c06\u4e3b\u673a\u7aef\u53e3 8000 \u4e0a\u4f20\u5165\u7684\u6d41\u91cf\u8f6c\u53d1\u5230\u5bb9\u5668\u7684\u7aef\u53e3 8080\u3002\u5bb9\u5668\u5177\u6709\u81ea\u5df1\u7684\u4e13\u7528\u7aef\u53e3\u96c6\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u8981\u4ece\u7f51\u7edc\u8bbf\u95ee\u67d0\u4e2a\u7aef\u53e3\uff0c\u5219\u5fc5\u987b\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5c06\u6d41\u91cf\u8f6c\u53d1\u5230\u8be5\u7aef\u53e3\u3002\u5426\u5219\uff0c\u4f5c\u4e3a\u9ed8\u8ba4\u7684\u5b89\u5168\u72b6\u6001\uff0c\u9632\u706b\u5899\u89c4\u5219\u5c06\u963b\u6b62\u6240\u6709\u7f51\u7edc\u6d41\u91cf\u5230\u8fbe\u60a8\u7684\u5bb9\u5668\u3002 --detach \u8981\u6c42 Docker \u5728\u540e\u53f0\u8fd0\u884c\u6b64\u5bb9\u5668\u3002 --name \u6307\u5b9a\u4e00\u4e2a\u540d\u79f0\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u540d\u79f0\u5728\u540e\u7eed\u547d\u4ee4\u4e2d\u5f15\u7528\u60a8\u7684\u5bb9\u5668\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e3a board \u3002 \u8fd8\u8981\u6ce8\u610f\uff0c\u60a8\u6ca1\u6709\u6307\u5b9a\u5bb9\u5668\u8981\u8fd0\u884c\u7684\u7a0b\u5e8f\u3002\u60a8\u4e0d\u5fc5\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5728\u6784\u5efa Dockerfile \u65f6\u4f7f\u7528\u4e86 CMD \u6307\u4ee4\u3002Docker \u77e5\u9053\u5728\u5bb9\u5668\u542f\u52a8\u65f6\u4f1a\u81ea\u52a8\u8fd0\u884c npm start \u7a0b\u5e8f\u3002 \u5728\u7684\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f localhost:8000 \uff0c\u60a8\u5e94\u8be5\u770b\u5230\u516c\u544a\u677f\u5e94\u7528\u7a0b\u5e8f\u5df2\u542f\u52a8\u5e76\u6b63\u5728\u8fd0\u884c\u3002 \u5bf9\u516c\u544a\u677f\u5bb9\u5668\u6b63\u5e38\u5de5\u4f5c\u611f\u5230\u6ee1\u610f\u540e\uff0c\u53ef\u4ee5\u5c06\u5176\u5220\u9664\uff1a docker rm --force board \u8be5 --force \u9009\u9879\u5c06\u5220\u9664\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u3002\u5982\u679c\u505c\u6b62\u5bb9\u5668\u8fd0\u884c\uff0c docker stop board \u5219\u65e0\u9700\u4f7f\u7528 --force \u3002 \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e00\uff09\uff1aDocker \u57fa\u7840\u5165\u95e8\u53ca\u67b6\u6784\u4ecb\u7ecd \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e09\uff09\uff1a\u57fa\u4e8e Docker-registry/Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93","title":"\u4e8c\u3001\u57fa\u4e8e Dockerfile \u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf"},{"location":"Docker/2-Image/#_1","text":"\u8981\u6784\u5efa\u4e00\u4e2a\u5bb9\u5668\uff0c\u9700\u8981\u505a\u5f88\u591a\u7684\u5de5\u4f5c\uff0c\u8bbe\u7f6e\u5f88\u591a\u7684\u914d\u7f6e\uff0c\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u4e00\u5c42\u4fee\u6539\u3001\u5b89\u88c5\u3001\u6784\u5efa\u3001\u64cd\u4f5c\u7684\u547d\u4ee4\u90fd\u5199\u5165\u4e00\u4e2a\u811a\u672c\uff0c\u7528\u8fd9\u4e2a\u811a\u672c\u6765\u6784\u5efa\u3001\u5b9a\u5236\u955c\u50cf\uff0c\u90a3\u4e48\u7ecf\u5e38\u88ab\u63d0\u53ca\u7684\u65e0\u6cd5\u91cd\u590d\u3001\u955c\u50cf\u6784\u5efa\u900f\u660e\u6027\u3001\u4f53\u79ef\u7b49\u95ee\u9898\u5c31\u90fd\u4f1a\u89e3\u51b3\u3002 \u8fd9\u4e2a\u811a\u672c\u5c31\u662f Dockerfile\u3002","title":"\u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf"},{"location":"Docker/2-Image/#dockerfile","text":"\u4e0b\u8f7d\u793a\u4f8b\u9879\u76ee\uff0c\u8bf7\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a curl -LO https://github.com/dockersamples/node-bulletin-board/archive/master.zip unzip master.zip cd node-bulletin-board-master/bulletin-board-app \u8be5 node-bulletin-board \u9879\u76ee\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u516c\u544a\u677f\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f7f\u7528 Node.js \u7f16\u5199\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5047\u8bbe\u60a8\u7f16\u5199\u4e86\u6b64\u5e94\u7528\u7a0b\u5e8f\uff0c\u73b0\u5728\u6b63\u5c1d\u8bd5\u5bf9\u5176\u8fdb\u884c\u5bb9\u5668\u5316\u3002 Dockerfile \u63cf\u8ff0\u5982\u4f55\u4e3a\u5bb9\u5668\u7ec4\u88c5\u4e13\u7528\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u5305\u542b\u4e00\u4e9b\u5143\u6570\u636e\uff0c\u8fd9\u4e9b\u5143\u6570\u636e\u63cf\u8ff0\u4e86\u5982\u4f55\u57fa\u4e8e\u8be5\u955c\u50cf\u8fd0\u884c\u5bb9\u5668\u3002\u516c\u544a\u677f\u5e94\u7528\u7a0b\u5e8f Dockerfile \u5185\u5bb9\u5982\u4e0b\uff1a # Use the official image as a parent image. FROM node:current-slim # Set the working directory. WORKDIR /usr/src/app # Copy the file from your host to your current location. COPY package.json . # Run the command inside your image filesystem. RUN npm install # Inform Docker that the container is listening on the specified port at runtime. EXPOSE 8080 # Run the specified command within the container. CMD [ \"npm\" , \"start\" ] # Copy the rest of your app's source code from your host to your image filesystem. COPY . . \u7f16\u5199 Dockerfile \u662f\u5bb9\u5668\u5316\u5e94\u7528\u7a0b\u5e8f\u7684\u7b2c\u4e00\u6b65\uff0c\u8fd9\u4e9b Dockerfile \u547d\u4ee4\u662f\u6784\u5efa\u955c\u50cf\u7684\u6b65\u9aa4\u3002 \u8fd9\u4e2a\u6b65\u9aa4\u5982\u4e0b: \u4f7f\u7528 FORM \u6307\u5b9a\u57fa\u4e8e\u5df2\u7ecf\u5b58\u5728\u7684 node:current-slim \u57fa\u7840\u955c\u50cf\u6784\u5efa\u3002\u8fd9\u662f\u4e00\u4e2a\u7531 nodejs \u5b98\u65b9\u6784\u5efa\u7684\u955c\u50cf\u3002 \u4f7f\u7528 WORKDIR \u6307\u5b9a\u6240\u6709\u540e\u7eed\u64cd\u4f5c\u5747\u4ece\u955c\u50cf\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684 /usr/src/app \u76ee\u5f55\u4e2d\u6267\u884c\uff08\u800c\u4e0d\u662f\u4e3b\u673a\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff09\u3002 \u5c06\u6587\u4ef6 package.json \u4ece\u4e3b\u673a\u590d\u5236\u5230\u955c\u50cf\u4e2d\u7684\u5f53\u524d\u4f4d\u7f6e\uff08.\uff09\uff08\u590d\u5236\u5230 `/usr/src/app/package.json \uff09 \u5728\u955c\u50cf\u6587\u4ef6\u7cfb\u7edf\u4e2d\u8fd0\u884c\u547d\u4ee4 npm install \uff08\u8bfb\u53d6 package.json \u4ee5\u786e\u5b9a\u5e76\u5b89\u88c5\u5e94\u7528\u7a0b\u5e8f\u4f9d\u8d56\uff09 \u5c06\u5e94\u7528\u7684\u5176\u4f59\u6e90\u4ee3\u7801\u4ece\u4e3b\u673a\u590d\u5236\u5230\u955c\u50cf\u6587\u4ef6\u7cfb\u7edf\u3002 \u8fd9\u4e9b\u6b65\u9aa4\u4e0e\u5728\u4e3b\u673a\u4e0a\u8bbe\u7f6e\u548c\u5b89\u88c5\u5e94\u7528\u7a0b\u5e8f\u6240\u91c7\u53d6\u7684\u6b65\u9aa4\u51e0\u4e4e\u76f8\u540c\u3002\u4f46\u662f\uff0c\u5c06\u5b83\u4eec\u4fdd\u5b58\u4e3a Dockerfile \u53ef\u4ee5\u4f7f\u60a8\u5728\u53ef\u79fb\u690d\u7684\u9694\u79bb Docker \u955c\u50cf\u4e2d\u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u3002 \u4e0a\u9762\u7684\u6b65\u9aa4\u6784\u5efa\u4e86\u6211\u4eec\u955c\u50cf\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f46\u662f Dockerfile \u4e2d\u8fd8\u6709\u5176\u4ed6\u51e0\u884c\u3002 CMD \u6307\u4ee4\u5728\u955c\u50cf\u4e2d\u6307\u5b9a\u4e00\u4e9b\u5143\u6570\u636e\uff0c\u8be5\u5143\u6570\u636e\u63cf\u8ff0\u4e86\u5982\u4f55\u57fa\u4e8e\u8be5\u955c\u50cf\u8fd0\u884c\u5bb9\u5668\u3002\u5728\u672c\u793a\u4f8b\u4e2d\u8be5\u56fe\u50cf\u7684\u5bb9\u5668\u5316\u8fc7\u7a0b\u662f npm start \u3002 EXPOSE 8080 \u901a\u77e5 Docker \u8be5\u5bb9\u5668\u5728\u8fd0\u884c\u65f6\u76d1\u542c 8080 \u7aef\u53e3\u3002 \u4e0a\u9762\u662f\u7ec4\u7ec7\u4e00\u4e2a\u7b80\u5355\u7684 Dockerfile \u7684\u65b9\u6cd5\u3002\u59cb\u7ec8\u4ee5 FROM \u547d\u4ee4\u5f00\u5934\uff0c\u7136\u540e\u6309\u7167\u6b65\u9aa4\u6784\u5efa\u60a8\u7684\u79c1\u6709\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u4ee5\u4efb\u4f55\u5143\u6570\u636e\u89c4\u8303\u4f5c\u4e3a\u7ed3\u675f\u3002 Dockerfile \u6307\u4ee4\u6bd4\u4e0a\u9762\u770b\u5230\u7684\u8981\u591a\u3002\u6709\u5173\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605 Dockerfile \u53c2\u8003 \u3002","title":"\u51c6\u5907 Dockerfile \u6587\u4ef6"},{"location":"Docker/2-Image/#_2","text":"\u73b0\u5728\u60a8\u5df2\u7ecf\u6709\u4e86\u4e00\u4e9b\u6e90\u4ee3\u7801\u548c\u4e00\u4e2a Dockerfile\uff0c\u73b0\u5728\u8be5\u6784\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u6620\u50cf\uff0c\u5e76\u786e\u4fdd\u4ece\u5176\u542f\u52a8\u7684\u5bb9\u5668\u80fd\u591f\u6309\u9884\u671f\u5de5\u4f5c\u3002\u8ba9\u6211\u4eec\u6784\u5efa\u60a8\u7684\u516c\u544a\u677f\u56fe\u50cf\uff1a docker build --tag bulletinboard:1.0 . \u60a8\u5c06\u770b\u5230 Docker \u9010\u6b65\u5b8c\u6210 Dockerfile \u4e2d\u7684\u6bcf\u6761\u6307\u4ee4\uff0c\u5e76\u9010\u6b65\u6784\u5efa\u955c\u50cf\uff1a Sending build context to Docker daemon 45 .57kB Step 1 /7 : FROM node:current-slim current-slim: Pulling from library/node 48839397421a: Pull complete cbb6511d79bf: Pull complete 04ec6202052a: Pull complete 29c5eab4674c: Pull complete 8df5bb5f8d2e: Pull complete Digest: sha256:c92fad90875a6ce7251c72701f9c88e1e3f3efc2eb1d7d1ffb2184204e4f7d98 Status: Downloaded newer image for node:current-slim ---> 6d9a17519d40 Step 2 /7 : WORKDIR /usr/src/app ---> Running in 9dfd5c099558 Removing intermediate container 9dfd5c099558 ---> 6062c6d2e488 Step 3 /7 : COPY package.json . ---> 2ddc37525da9 Step 4 /7 : RUN npm install ---> Running in 6ce3fed8ecd7 > ejs@2.7.4 postinstall /usr/src/app/node_modules/ejs > node ./postinstall.js Thank you for installing EJS: built with the Jake JavaScript build tool ( https://jakejs.com/ ) npm notice created a lockfile as package-lock.json. You should commit this file. npm WARN vue-event-bulletin@1.0.0 No repository field. npm WARN The package morgan is included as both a dev and production dependency. added 91 packages from 168 contributors and audited 221 packages in 16 .854s found 0 vulnerabilities Removing intermediate container 6ce3fed8ecd7 ---> 38a27fea6567 Step 5 /7 : EXPOSE 8080 ---> Running in c7528a178327 Removing intermediate container c7528a178327 ---> 97f454f32f95 Step 6 /7 : CMD [ \"npm\" , \"start\" ] ---> Running in 72a6340e3d58 Removing intermediate container 72a6340e3d58 ---> 0a90efca7ea9 Step 7 /7 : COPY . . ---> 84c4f69e2893 Successfully built 84c4f69e2893 Successfully tagged bulletinboard:1.0","title":"\u6784\u5efa\u5e76\u6d4b\u8bd5\u955c\u50cf"},{"location":"Docker/2-Image/#_3","text":"\u6839\u636e\u60a8\u7684\u65b0\u955c\u50cf\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff1a docker run --publish 8000 :8080 --detach --name board bulletinboard:1.0 \u8fd9\u91cc\u6709\u51e0\u4e2a\u5e38\u89c1\u7684\u6807\u5fd7\uff1a --publish \u8981\u6c42 Docker \u5c06\u4e3b\u673a\u7aef\u53e3 8000 \u4e0a\u4f20\u5165\u7684\u6d41\u91cf\u8f6c\u53d1\u5230\u5bb9\u5668\u7684\u7aef\u53e3 8080\u3002\u5bb9\u5668\u5177\u6709\u81ea\u5df1\u7684\u4e13\u7528\u7aef\u53e3\u96c6\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u8981\u4ece\u7f51\u7edc\u8bbf\u95ee\u67d0\u4e2a\u7aef\u53e3\uff0c\u5219\u5fc5\u987b\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5c06\u6d41\u91cf\u8f6c\u53d1\u5230\u8be5\u7aef\u53e3\u3002\u5426\u5219\uff0c\u4f5c\u4e3a\u9ed8\u8ba4\u7684\u5b89\u5168\u72b6\u6001\uff0c\u9632\u706b\u5899\u89c4\u5219\u5c06\u963b\u6b62\u6240\u6709\u7f51\u7edc\u6d41\u91cf\u5230\u8fbe\u60a8\u7684\u5bb9\u5668\u3002 --detach \u8981\u6c42 Docker \u5728\u540e\u53f0\u8fd0\u884c\u6b64\u5bb9\u5668\u3002 --name \u6307\u5b9a\u4e00\u4e2a\u540d\u79f0\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u540d\u79f0\u5728\u540e\u7eed\u547d\u4ee4\u4e2d\u5f15\u7528\u60a8\u7684\u5bb9\u5668\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e3a board \u3002 \u8fd8\u8981\u6ce8\u610f\uff0c\u60a8\u6ca1\u6709\u6307\u5b9a\u5bb9\u5668\u8981\u8fd0\u884c\u7684\u7a0b\u5e8f\u3002\u60a8\u4e0d\u5fc5\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5728\u6784\u5efa Dockerfile \u65f6\u4f7f\u7528\u4e86 CMD \u6307\u4ee4\u3002Docker \u77e5\u9053\u5728\u5bb9\u5668\u542f\u52a8\u65f6\u4f1a\u81ea\u52a8\u8fd0\u884c npm start \u7a0b\u5e8f\u3002 \u5728\u7684\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f localhost:8000 \uff0c\u60a8\u5e94\u8be5\u770b\u5230\u516c\u544a\u677f\u5e94\u7528\u7a0b\u5e8f\u5df2\u542f\u52a8\u5e76\u6b63\u5728\u8fd0\u884c\u3002 \u5bf9\u516c\u544a\u677f\u5bb9\u5668\u6b63\u5e38\u5de5\u4f5c\u611f\u5230\u6ee1\u610f\u540e\uff0c\u53ef\u4ee5\u5c06\u5176\u5220\u9664\uff1a docker rm --force board \u8be5 --force \u9009\u9879\u5c06\u5220\u9664\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u3002\u5982\u679c\u505c\u6b62\u5bb9\u5668\u8fd0\u884c\uff0c docker stop board \u5219\u65e0\u9700\u4f7f\u7528 --force \u3002","title":"\u5c06\u955c\u50cf\u4f5c\u4e3a\u5bb9\u5668\u8fd0\u884c"},{"location":"Docker/2-Image/#_4","text":"\u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e00\uff09\uff1aDocker \u57fa\u7840\u5165\u95e8\u53ca\u67b6\u6784\u4ecb\u7ecd \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e09\uff09\uff1a\u57fa\u4e8e Docker-registry/Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/3-Repository/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e09\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e8c\uff09\uff1a\u57fa\u4e8e Dockerfile \u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf Docker \u955c\u50cf\u4ed3\u5e93 \u00b6 Repository\uff08\u4ed3\u5e93\uff09\u662f\u96c6\u4e2d\u5b58\u653e\u955c\u50cf\u7684\u5730\u65b9\u3002\u4e00\u4e2a Docker Registry \u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a Repository\uff08\u4ed3\u5e93\uff09\uff0c\u6bcf\u4e2a\u4ed3\u5e93\u53ef\u4ee5\u5305\u542b\u591a\u4e2a Tag\uff08\u6807\u7b7e\uff09\uff0c\u6bcf\u4e2a\u6807\u7b7e\u5bf9\u5e94\u4e00\u4e2a Image\uff08\u955c\u50cf\uff09\u3002 \u6700\u5e38\u4f7f\u7528\u7684 Registry \u516c\u5f00\u670d\u52a1\u662f\u5b98\u65b9\u7684 Docker Hub \uff0c\u8fd9\u4e5f\u662f\u9ed8\u8ba4\u7684 Registry\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u521b\u5efa\u672c\u5730\u4ed3\u5e93\u65b9\u4fbf\u5185\u90e8\u4f7f\u7528\u3002 1\u3001\u5b98\u65b9\u516c\u5171\u4ed3\u5e93 Docker Hub \u00b6 \u76ee\u524d Docker \u5b98\u65b9\u7ef4\u62a4\u4e86\u4e00\u4e2a\u516c\u5171\u4ed3\u5e93 Docker Hub \uff0c\u5176\u4e2d\u5df2\u7ecf\u5305\u62ec\u4e86\u6570\u91cf\u8d85\u8fc7 2,650,000 \u7684\u955c\u50cf\u3002\u5927\u90e8\u5206\u9700\u6c42\u90fd\u53ef\u4ee5\u901a\u8fc7\u5728 Docker Hub \u4e2d\u76f4\u63a5\u4e0b\u8f7d\u955c\u50cf\u6765\u5b9e\u73b0\u3002 \u4f60\u53ef\u4ee5\u5728 https://hub.docker.com \u514d\u8d39\u6ce8\u518c\u4e00\u4e2a Docker \u8d26\u53f7\u3002\u901a\u8fc7\u6267\u884c docker login \u547d\u4ee4\u4ea4\u4e92\u5f0f\u7684\u8f93\u5165\u7528\u6237\u540d\u53ca\u5bc6\u7801\u6765\u5b8c\u6210\u5728\u547d\u4ee4\u884c\u754c\u9762\u767b\u5f55 Docker Hub\u3002 \u63a8\u9001\u955c\u50cf \u7528\u6237\u53ef\u4ee5\u5728\u767b\u5f55\u540e\u901a\u8fc7 docker push \u547d\u4ee4\u6765\u5c06\u81ea\u5df1\u7684\u955c\u50cf\u63a8\u9001\u5230 Docker Hub\u3002 \u4ee5\u4e0b\u547d\u4ee4\u4e2d\u7684 lxl823 \u8bf7\u66ff\u6362\u4e3a\u4f60\u7684 Docker \u8d26\u53f7\u7528\u6237\u540d\u3002 docker tag nginx lxl823/nginx:1.17.9 docker image ls REPOSITORY TAG IMAGE ID CREATED SIZE nginx latest 6678c7c2e56c 6 days ago 127MB lxl823/nginx 1 .17.9 6678c7c2e56c 6 days ago 127MB docker push lxl823/nginx:1.17.9 \u767b\u5f55 hub.docker.com \uff0c\u53ef\u4ee5\u770b\u5230\u955c\u50cf\u5df2\u7ecf\u53d1\u5e03\u5230\u4ed3\u5e93\u4e2d\u3002 \u81ea\u52a8\u6784\u5efa Docker Hub \u53ef\u4ee5\u81ea\u52a8\u4ece\u5916\u90e8\u5b58\u50a8\u5e93\u4e2d\u7684\u6e90\u4ee3\u7801\u6784\u5efa\u6620\u50cf\uff0c\u5e76\u5c06\u751f\u6210\u7684\u6620\u50cf\u81ea\u52a8\u63a8\u9001\u5230\u60a8\u7684 Docker \u5b58\u50a8\u5e93\u3002 \u8bbe\u7f6e\u81ea\u52a8\u6784\u5efa\u5141\u8bb8\u7528\u6237\u901a\u8fc7 Docker Hub \u6307\u5b9a\u8ddf\u8e2a\u4e00\u4e2a\u76ee\u6807\u7f51\u7ad9\uff08\u652f\u6301 GitHub \uff09\u4e0a\u7684\u9879\u76ee\uff0c\u4e00\u65e6\u9879\u76ee\u53d1\u751f\u65b0\u7684\u63d0\u4ea4 \uff08commit\uff09\u6216\u8005\u521b\u5efa\u4e86\u65b0\u7684\u6807\u7b7e\uff08tag\uff09\uff0cDocker Hub \u4f1a\u81ea\u52a8\u6784\u5efa\u955c\u50cf\u5e76\u63a8\u9001\u5230 Docker Hub \u4e2d\u3002 \u8981\u914d\u7f6e\u81ea\u52a8\u6784\u5efa\uff0c\u5305\u62ec\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a \u767b\u5f55 Docker Hub\uff1b \u5728 Docker Hub \u70b9\u51fb\u53f3\u4e0a\u89d2\u5934\u50cf\uff0c\u5728\u8d26\u53f7\u8bbe\u7f6e\uff08Account Settings\uff09\u4e2d\u5173\u8054\uff08Linked Accounts\uff09\u76ee\u6807\u7f51\u7ad9\uff1b \u5728 Docker Hub \u4e2d\u65b0\u5efa\u6216\u9009\u62e9\u5df2\u6709\u7684\u4ed3\u5e93\uff0c\u5728 Builds \u9009\u9879\u5361\u4e2d\u9009\u62e9 Configure Automated Builds \uff1b \u9009\u53d6\u4e00\u4e2a\u76ee\u6807\u7f51\u7ad9\u4e2d\u7684\u9879\u76ee\uff08\u9700\u8981\u542b Dockerfile \uff09\u548c\u5206\u652f\uff1b \u6307\u5b9a Dockerfile \u7684\u4f4d\u7f6e\uff0c\u5e76\u4fdd\u5b58\u3002 \u4e4b\u540e\uff0c\u53ef\u4ee5\u5728 Docker Hub \u7684\u4ed3\u5e93\u9875\u9762\u7684 Timeline \u9009\u9879\u5361\u4e2d\u67e5\u770b\u6bcf\u6b21\u6784\u5efa\u7684\u72b6\u6001\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\uff1a Set up automated builds 2\u3001\u57fa\u4e8e docker-registry \u642d\u5efa\u672c\u5730\u4ed3\u5e93 \u00b6 docker-registry \u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4e8e\u6784\u5efa\u79c1\u6709\u7684\u955c\u50cf\u4ed3\u5e93\u3002\u672c\u6587\u5185\u5bb9\u57fa\u4e8e docker-registry v2.x \u7248\u672c\u3002 \u5b89\u88c5\u8fd0\u884c docker-registry \u4f60\u53ef\u4ee5\u901a\u8fc7\u83b7\u53d6\u5b98\u65b9 registry \u955c\u50cf\u6765\u8fd0\u884c\u3002 docker run -d -p 5000 :5000 --restart = always --name registry registry \u8fd9\u5c06\u4f7f\u7528\u5b98\u65b9\u7684 registry \u955c\u50cf\u6765\u542f\u52a8\u79c1\u6709\u4ed3\u5e93\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed3\u5e93\u4f1a\u88ab\u521b\u5efa\u5728\u5bb9\u5668\u7684 /var/lib/registry \u76ee\u5f55\u4e0b\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 -v \u53c2\u6570\u6765\u5c06\u955c\u50cf\u6587\u4ef6\u5b58\u653e\u5728\u672c\u5730\u7684\u6307\u5b9a\u8def\u5f84\u3002 \u521b\u5efa\u597d\u79c1\u6709\u4ed3\u5e93\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 docker tag \u6765\u6807\u8bb0\u4e00\u4e2a\u955c\u50cf\uff0c\u7136\u540e\u4f7f\u7528 docker push \u63a8\u9001\u5b83\u5230\u4ed3\u5e93\u3002 3\u3001\u57fa\u4e8e Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93 \u00b6 \u5728\u4f01\u4e1a\u4e2d\u628a\u5185\u90e8\u7684\u4e00\u4e9b\u5de5\u5177\u5305\u653e\u5165 Nexus \u4e2d\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u505a\u6cd5\u3002 Nexus \u4e0d\u4ec5\u80fd\u591f\u7528\u4e8e\u521b\u5efa Maven \u79c1\u670d\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u521b\u5efa yum\u3001pypi\u3001npm\u3001nuget\u3001rubygems \u7b49\u5404\u79cd\u79c1\u6709\u4ed3\u5e93\u3002\u800c\u4e14\uff0cNexus \u4ece 3.0 \u7248\u672c\u4e5f\u5f00\u59cb\u652f\u6301\u521b\u5efa Docker \u955c\u50cf\u4ed3\u5e93\u4e86\uff01 \u62c9\u53d6\u5e76\u542f\u52a8 nexus \u5bb9\u5668 docker run -d \\ --name nexus \\ -p 8085 :8081 \\ -p 8086 :8086 \\ -v nexus_data:/nexus-data \\ sonatype/nexus3:latest \u7b49\u5f85 3-5 \u5206\u949f\uff0c\u5982\u679c nexus \u5bb9\u5668\u6ca1\u6709\u5f02\u5e38\u9000\u51fa\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u6d4f\u89c8\u5668\u6253\u5f00 http://localhost:8085 \u8bbf\u95ee Nexus \u4e86\u3002 \u521b\u5efa\u672c\u5730\u4ed3\u5e93 \u521b\u5efa\u4e00\u4e2a\u79c1\u6709\u4ed3\u5e93\u7684\u65b9\u6cd5\uff1a Repository -> Repositories \u70b9\u51fb\u53f3\u8fb9\u83dc\u5355 Create repository \u9009\u62e9 docker (hosted) Name\uff1a\u4ed3\u5e93\u7684\u540d\u79f0 HTTP\uff1a\u4ed3\u5e93\u5355\u72ec\u7684\u8bbf\u95ee\u7aef\u53e3\uff0c\u5982 8086 Hosted -> Deployment pollcy\uff1a\u8bf7\u9009\u62e9 Allow redeploy \u5426\u5219\u65e0\u6cd5\u4e0a\u4f20 Docker \u955c\u50cf\u3002 \u8fd8\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a docker (proxy) \u7c7b\u578b\u7684\u4ed3\u5e93\u8fde\u63a5\u5230 DockerHub \u4e0a\u3002\u518d\u521b\u5efa\u4e00\u4e2a docker (group) \u7c7b\u578b\u7684\u4ed3\u5e93\u628a\u521a\u624d\u7684 hosted \u4e0e proxy \u6dfb\u52a0\u5728\u4e00\u8d77\u3002\u4e3b\u673a\u5728\u8bbf\u95ee\u7684\u65f6\u5019\u9ed8\u8ba4\u4e0b\u8f7d\u79c1\u6709\u4ed3\u5e93\u4e2d\u7684\u955c\u50cf\uff0c\u5982\u679c\u6ca1\u6709\u5c06\u8fde\u63a5\u5230 DockerHub \u4e2d\u4e0b\u8f7d\u5e76\u7f13\u5b58\u5230 Nexus \u4e2d\u3002 \u6dfb\u52a0\u8bbf\u95ee\u6743\u9650 \u83dc\u5355 Security -> Realms \u628a Docker Bearer Token Realm \u79fb\u5230\u53f3\u8fb9\u7684\u6846\u4e2d\u4fdd\u5b58\u3002 \u6dfb\u52a0\u7528\u6237\u89c4\u5219\uff1a\u83dc\u5355 Security->Roles -> Create role \u5728 Privlleges \u9009\u9879\u641c\u7d22 docker \u628a\u76f8\u5e94\u7684\u89c4\u5219\u79fb\u52a8\u5230\u53f3\u8fb9\u7684\u6846\u4e2d\u7136\u540e\u4fdd\u5b58\u3002 Nginx \u52a0\u5bc6\u4ee3\u7406 \u90e8\u7f72 Nginx \u65f6\uff0c\u6211\u4eec\u5148\u9700\u8981\u83b7\u5f97 SSL \u8bc1\u4e66\u3002\u76ee\u524d\u63d0\u4f9b\u514d\u8d39\u8bc1\u4e66\u7684\u4e91\u670d\u52a1\u5546\u5f88\u591a\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 openssl \u81ea\u884c\u7b7e\u53d1\u8bc1\u4e66\u3002\u6211\u4eec\u8fd8\u8fd8\u9700\u8981 2 \u4e2a\u57df\u540d\uff0c\u4e00\u4e2a\u7528\u6765\u5c55\u793a nexus \u524d\u53f0\uff0c\u53e6\u4e00\u4e2a\u7528\u505a docker \u4ed3\u5e93\u3002Nginx \u914d\u7f6e\u5982\u4e0b: server { listen 80; server_name nexus3.lixl.cn; # nexus \u524d\u53f0 location / { proxy_pass http : //local.lixl.cn:8085; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Via \"nginx\"; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } } server { listen 443 ssl; server_name nexus.lixl.cn; # docker \u4ed3\u5e93 ssl_certificate /etc/nginx/certs/nexus.lixl.cn.crt; ssl_certificate_key /etc/nginx/certs/nexus.lixl.cn.key; ssl_session_timeout 5m; ssl_ciphers HIGH : !aNULL:!MD5; ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location / { proxy_pass http : //local.lixl.cn:8086; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Via \"nginx\"; client_max_body_size 1024M; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } } server { listen 80; server_name nexus.lixl.cn; # docker \u4ed3\u5e93 return 301 https : //$server_name$request_uri; } \u767b\u5f55\u672c\u5730\u4ed3\u5e93\u5e76\u63a8\u9001\u955c\u50cf \u4f7f\u7528 docker login \u8fdb\u884c\u6d4b\u8bd5\uff0c\u7528\u6237\u540d\u5bc6\u7801\u4e0e Nexus \u8d26\u53f7\u4e00\u81f4\u3002 docker login https://nexus.lixl.cn Username: admin Password: Login Succeeded \u901a\u8fc7 docker push \u547d\u4ee4\u5c06\u81ea\u5df1\u7684\u955c\u50cf\u63a8\u9001\u5230 Nexus\uff1a docker tag nginx nexus.lixl.cn/nginx:20200326 docker image ls REPOSITORY TAG IMAGE ID CREATED SIZE nginx latest 6678c7c2e56c 6 days ago 127MB nexus.lixl.cn/nginx 20200326 6678c7c2e56c 6 days ago 127MB docker push nexus.lixl.cn/nginx:20200326 \u63a8\u9001\u6210\u529f\u3002\u5728\u672c\u5730\u4ed3\u5e93\u5373\u53ef\u770b\u5230\u65b0\u63a8\u9001\u7684\u955c\u50cf\uff1a \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e8c\uff09\uff1a\u57fa\u4e8e Dockerfile \u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u56db\uff09\uff1aDocker \u7f51\u7edc\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5bb9\u5668\u4e92\u8054\u914d\u7f6e","title":"\u4e09\u3001\u57fa\u4e8e Docker-registry/Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93"},{"location":"Docker/3-Repository/#docker","text":"Repository\uff08\u4ed3\u5e93\uff09\u662f\u96c6\u4e2d\u5b58\u653e\u955c\u50cf\u7684\u5730\u65b9\u3002\u4e00\u4e2a Docker Registry \u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a Repository\uff08\u4ed3\u5e93\uff09\uff0c\u6bcf\u4e2a\u4ed3\u5e93\u53ef\u4ee5\u5305\u542b\u591a\u4e2a Tag\uff08\u6807\u7b7e\uff09\uff0c\u6bcf\u4e2a\u6807\u7b7e\u5bf9\u5e94\u4e00\u4e2a Image\uff08\u955c\u50cf\uff09\u3002 \u6700\u5e38\u4f7f\u7528\u7684 Registry \u516c\u5f00\u670d\u52a1\u662f\u5b98\u65b9\u7684 Docker Hub \uff0c\u8fd9\u4e5f\u662f\u9ed8\u8ba4\u7684 Registry\u3002\u7528\u6237\u4e5f\u53ef\u4ee5\u521b\u5efa\u672c\u5730\u4ed3\u5e93\u65b9\u4fbf\u5185\u90e8\u4f7f\u7528\u3002","title":"Docker \u955c\u50cf\u4ed3\u5e93"},{"location":"Docker/3-Repository/#1-docker-hub","text":"\u76ee\u524d Docker \u5b98\u65b9\u7ef4\u62a4\u4e86\u4e00\u4e2a\u516c\u5171\u4ed3\u5e93 Docker Hub \uff0c\u5176\u4e2d\u5df2\u7ecf\u5305\u62ec\u4e86\u6570\u91cf\u8d85\u8fc7 2,650,000 \u7684\u955c\u50cf\u3002\u5927\u90e8\u5206\u9700\u6c42\u90fd\u53ef\u4ee5\u901a\u8fc7\u5728 Docker Hub \u4e2d\u76f4\u63a5\u4e0b\u8f7d\u955c\u50cf\u6765\u5b9e\u73b0\u3002 \u4f60\u53ef\u4ee5\u5728 https://hub.docker.com \u514d\u8d39\u6ce8\u518c\u4e00\u4e2a Docker \u8d26\u53f7\u3002\u901a\u8fc7\u6267\u884c docker login \u547d\u4ee4\u4ea4\u4e92\u5f0f\u7684\u8f93\u5165\u7528\u6237\u540d\u53ca\u5bc6\u7801\u6765\u5b8c\u6210\u5728\u547d\u4ee4\u884c\u754c\u9762\u767b\u5f55 Docker Hub\u3002","title":"1\u3001\u5b98\u65b9\u516c\u5171\u4ed3\u5e93 Docker Hub"},{"location":"Docker/3-Repository/#2-docker-registry","text":"docker-registry \u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4e8e\u6784\u5efa\u79c1\u6709\u7684\u955c\u50cf\u4ed3\u5e93\u3002\u672c\u6587\u5185\u5bb9\u57fa\u4e8e docker-registry v2.x \u7248\u672c\u3002","title":"2\u3001\u57fa\u4e8e docker-registry \u642d\u5efa\u672c\u5730\u4ed3\u5e93"},{"location":"Docker/3-Repository/#3-nexus3","text":"\u5728\u4f01\u4e1a\u4e2d\u628a\u5185\u90e8\u7684\u4e00\u4e9b\u5de5\u5177\u5305\u653e\u5165 Nexus \u4e2d\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u505a\u6cd5\u3002 Nexus \u4e0d\u4ec5\u80fd\u591f\u7528\u4e8e\u521b\u5efa Maven \u79c1\u670d\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u521b\u5efa yum\u3001pypi\u3001npm\u3001nuget\u3001rubygems \u7b49\u5404\u79cd\u79c1\u6709\u4ed3\u5e93\u3002\u800c\u4e14\uff0cNexus \u4ece 3.0 \u7248\u672c\u4e5f\u5f00\u59cb\u652f\u6301\u521b\u5efa Docker \u955c\u50cf\u4ed3\u5e93\u4e86\uff01","title":"3\u3001\u57fa\u4e8e Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93"},{"location":"Docker/3-Repository/#_1","text":"\u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e8c\uff09\uff1a\u57fa\u4e8e Dockerfile \u6784\u5efa\u5e76\u8fd0\u884c\u955c\u50cf \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u56db\uff09\uff1aDocker \u7f51\u7edc\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5bb9\u5668\u4e92\u8054\u914d\u7f6e","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/4-Network/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e8c\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e09\uff09\uff1a\u57fa\u4e8e Docker-registry/Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93 Docker \u7f51\u7edc\u914d\u7f6e \u00b6 Docker \u7f51\u7edc\u57fa\u672c\u539f\u7406 \u00b6 \u8981\u5b9e\u73b0\u7f51\u7edc\u901a\u4fe1\uff0c\u673a\u5668\u9700\u8981\u81f3\u5c11\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\uff08\u7269\u7406\u63a5\u53e3\u6216\u865a\u62df\u63a5\u53e3\uff09\u6765\u6536\u53d1\u6570\u636e\u5305\u3002\u5982\u679c\u4e0d\u540c\u5b50\u7f51\u4e4b\u95f4\u8981\u8fdb\u884c\u901a\u4fe1\uff0c\u9700\u8981\u8def\u7531\u673a\u5236\u3002 Docker \u4e2d\u7684\u7f51\u7edc\u63a5\u53e3\u9ed8\u8ba4\u90fd\u662f\u865a\u62df\u63a5\u53e3\uff0c\u865a\u62df\u63a5\u53e3\u7684\u4f18\u52bf\u4e4b\u4e00\u662f\u8f6c\u53d1\u6548\u7387\u8f83\u9ad8\u3002 Linux \u901a\u8fc7\u5728\u5185\u6838\u4e2d\u8fdb\u884c\u6570\u636e\u590d\u5236\u6765\u5b9e\u73b0\u865a\u62df\u63a5\u53e3\u4e4b\u95f4\u7684\u6570\u636e\u8f6c\u53d1\uff0c\u53d1\u9001\u63a5\u53e3\u7684\u53d1\u9001\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u5305\u88ab\u76f4\u63a5\u590d\u5236\u5230\u63a5\u6536\u63a5\u53e3\u7684\u63a5\u6536\u7f13\u5b58\u4e2d\u3002 \u5f53 Docker \u542f\u52a8\u65f6\uff0c\u4f1a\u81ea\u52a8\u5728\u4e3b\u673a\u4e0a\u521b\u5efa\u4e00\u4e2a docker0 \u865a\u62df\u7f51\u6865\uff08 Linux \u7684\u4e00\u4e2a bridge\uff09\uff0c\u5b83\u4f1a\u5728\u6302\u8f7d\u5230\u5b83\u7684\u7f51\u53e3\u4e4b\u95f4\u8fdb\u884c\u8f6c\u53d1\u3002\u540c\u65f6\uff0cDocker \u968f\u673a\u5206\u914d\u4e00\u4e2a\u672c\u5730\u672a\u5360\u7528\u7684\u79c1\u6709\u7f51\u6bb5\u4e2d\u7684\u4e00\u4e2a\u5730\u5740\u7ed9 docker0 \u63a5\u53e3\uff0c\u6b64\u540e\u542f\u52a8\u7684\u5bb9\u5668\u5185\u7684\u7f51\u53e3\u4e5f\u4f1a\u81ea\u52a8\u5206\u914d\u4e00\u4e2a\u540c\u4e00\u7f51\u6bb5\uff08 172.17.0.0/16 \uff09\u7684\u5730\u5740\u3002 \u5f53\u521b\u5efa\u4e00\u4e2a Docker \u5bb9\u5668\u7684\u65f6\u5019\uff0c\u540c\u65f6\u4f1a\u521b\u5efa\u4e86\u4e00\u5bf9 veth pair \u63a5\u53e3\uff08\u5f53\u6570\u636e\u5305\u53d1\u9001\u5230\u4e00\u4e2a\u63a5\u53e3\u65f6\uff0c\u53e6\u5916\u4e00\u4e2a\u63a5\u53e3\u4e5f\u53ef\u4ee5\u6536\u5230\u76f8\u540c\u7684\u6570\u636e\u5305\uff09\u3002\u8fd9\u5bf9\u63a5\u53e3\u4e00\u7aef\u5728\u5bb9\u5668\u5185\uff0c\u5373 eth0 \uff1b\u53e6\u4e00\u7aef\u5728\u672c\u5730\u5e76\u88ab\u6302\u8f7d\u5230 docker0 \u7f51\u6865\uff0c\u540d\u79f0\u4ee5 veth \u5f00\u5934\uff08\u4f8b\u5982 vethAQI2QT \uff09\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4e3b\u673a\u53ef\u4ee5\u8ddf\u5bb9\u5668\u901a\u4fe1\uff0c\u5bb9\u5668\u4e4b\u95f4\u4e5f\u53ef\u4ee5\u76f8\u4e92\u901a\u4fe1\u3002 \u5173\u4e8e Docker \u7f51\u7edc\u7684\u66f4\u591a\u5185\u5bb9\uff0c\u53ef\u4ee5\u8bbf\u95ee\uff1a https://docs.docker.com/network/ > Docker \u7f51\u7edc\u7c7b\u578b \u00b6 Docker \u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u7684\u65f6\u5019\uff0c\u4f1a\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u521b\u5efa\u4e00\u5bf9\u865a\u62df\u63a5\u53e3\uff0c\u5206\u522b\u653e\u5230\u672c\u5730\u4e3b\u673a\u548c\u65b0\u5bb9\u5668\u4e2d\uff1b \u672c\u5730\u4e3b\u673a\u4e00\u7aef\u6865\u63a5\u5230\u9ed8\u8ba4\u7684 docker0 \u6216\u6307\u5b9a\u7f51\u6865\u4e0a\uff0c\u5e76\u5177\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u540d\u5b57\uff0c\u5982 veth65f9\uff1b \u5bb9\u5668\u4e00\u7aef\u653e\u5230\u65b0\u5bb9\u5668\u4e2d\uff0c\u5e76\u4fee\u6539\u540d\u5b57\u4f5c\u4e3a eth0\uff0c\u8fd9\u4e2a\u63a5\u53e3\u53ea\u5728\u5bb9\u5668\u7684\u547d\u540d\u7a7a\u95f4\u53ef\u89c1\uff1b \u4ece\u7f51\u6865\u53ef\u7528\u5730\u5740\u6bb5\u4e2d\u83b7\u53d6\u4e00\u4e2a\u7a7a\u95f2\u5730\u5740\u5206\u914d\u7ed9\u5bb9\u5668\u7684 eth0\uff0c\u5e76\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\u5230\u6865\u63a5\u7f51\u5361 veth65f9\u3002 \u5b8c\u6210\u8fd9\u4e9b\u4e4b\u540e\uff0c\u5bb9\u5668\u5c31\u53ef\u4ee5\u4f7f\u7528 eth0 \u865a\u62df\u7f51\u5361\u6765\u8fde\u63a5\u5176\u4ed6\u5bb9\u5668\u548c\u5176\u4ed6\u7f51\u7edc\u3002 \u53ef\u4ee5\u5728 docker run \u7684\u65f6\u5019\u901a\u8fc7 --net \u53c2\u6570\u6765\u6307\u5b9a\u5bb9\u5668\u7684\u7f51\u7edc\u914d\u7f6e\uff0c\u6709 4 \u4e2a\u53ef\u9009\u503c\uff1a --net=bridge \u8fd9\u4e2a\u662f\u9ed8\u8ba4\u503c\uff0c\u8fde\u63a5\u5230\u9ed8\u8ba4\u7684\u7f51\u6865\u3002 --net=host \u544a\u8bc9 Docker \u4e0d\u8981\u5c06\u5bb9\u5668\u7f51\u7edc\u653e\u5230\u9694\u79bb\u7684\u547d\u540d\u7a7a\u95f4\u4e2d\uff0c\u5373\u4e0d\u8981\u5bb9\u5668\u5316\u5bb9\u5668\u5185\u7684\u7f51\u7edc\u3002\u6b64\u65f6\u5bb9\u5668\u4f7f\u7528\u672c\u5730\u4e3b\u673a\u7684\u7f51\u7edc\uff0c\u5b83\u62e5\u6709\u5b8c\u5168\u7684\u672c\u5730\u4e3b\u673a\u63a5\u53e3\u8bbf\u95ee\u6743\u9650\u3002\u5bb9\u5668\u8fdb\u7a0b\u53ef\u4ee5\u8ddf\u4e3b\u673a\u5176\u5b83 root \u8fdb\u7a0b\u4e00\u6837\u53ef\u4ee5\u6253\u5f00\u4f4e\u8303\u56f4\u7684\u7aef\u53e3\uff0c\u53ef\u4ee5\u8bbf\u95ee\u672c\u5730\u7f51\u7edc\u670d\u52a1\u6bd4\u5982 D-bus\uff0c\u8fd8\u53ef\u4ee5\u8ba9\u5bb9\u5668\u505a\u4e00\u4e9b\u5f71\u54cd\u6574\u4e2a\u4e3b\u673a\u7cfb\u7edf\u7684\u4e8b\u60c5\uff0c\u6bd4\u5982\u91cd\u542f\u4e3b\u673a\u3002\u56e0\u6b64\u4f7f\u7528\u8fd9\u4e2a\u9009\u9879\u7684\u65f6\u5019\u8981\u975e\u5e38\u5c0f\u5fc3\u3002\u5982\u679c\u8fdb\u4e00\u6b65\u7684\u4f7f\u7528 --privileged=true \uff0c\u5bb9\u5668\u4f1a\u88ab\u5141\u8bb8\u76f4\u63a5\u914d\u7f6e\u4e3b\u673a\u7684\u7f51\u7edc\u5806\u6808\u3002 --net=container:NAME_or_ID \u8ba9 Docker \u5c06\u65b0\u5efa\u5bb9\u5668\u7684\u8fdb\u7a0b\u653e\u5230\u4e00\u4e2a\u5df2\u5b58\u5728\u5bb9\u5668\u7684\u7f51\u7edc\u6808\u4e2d\uff0c\u65b0\u5bb9\u5668\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684\u6587\u4ef6\u7cfb\u7edf\u3001\u8fdb\u7a0b\u5217\u8868\u548c\u8d44\u6e90\u9650\u5236\uff0c\u4f46\u4f1a\u548c\u5df2\u5b58\u5728\u7684\u5bb9\u5668\u5171\u4eab IP \u5730\u5740\u548c\u7aef\u53e3\u7b49\u7f51\u7edc\u8d44\u6e90\uff0c\u4e24\u8005\u8fdb\u7a0b\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 lo \u73af\u56de\u63a5\u53e3\u901a\u4fe1\u3002 --net=none \u8ba9 Docker \u5c06\u65b0\u5bb9\u5668\u653e\u5230\u9694\u79bb\u7684\u7f51\u7edc\u6808\u4e2d\uff0c\u4f46\u662f\u4e0d\u8fdb\u884c\u7f51\u7edc\u914d\u7f6e\u3002\u4e4b\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u81ea\u5df1\u8fdb\u884c\u914d\u7f6e\u3002 \u5916\u90e8\u8bbf\u95ee\u5bb9\u5668 \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u53ef\u4ee5\u4e3b\u52a8\u8bbf\u95ee\u5230\u5916\u90e8\u7f51\u7edc\u7684\u8fde\u63a5\uff0c\u4f46\u662f\u5916\u90e8\u7f51\u7edc\u65e0\u6cd5\u8bbf\u95ee\u5230\u5bb9\u5668\u3002\u60f3\u8981\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\u5bb9\u5668\uff0c\u53ef\u4ee5\u5728 docker run \u65f6\u5019\u901a\u8fc7 -p \u6216 -P \u53c2\u6570\u6765\u542f\u7528\uff08\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528 -p \u6807\u8bb0\u6765\u7ed1\u5b9a\u591a\u4e2a\u7aef\u53e3\uff09\u3002 \u4f7f\u7528 docker ps \u53ef\u4ee5\u770b\u5230\uff0c\u672c\u5730\u4e3b\u673a\u7684 80 \u88ab\u6620\u5c04\u5230\u4e86\u5bb9\u5668\u7684 80 \u7aef\u53e3\u3002\u6b64\u65f6\u8bbf\u95ee\u672c\u673a\u7684 80 \u7aef\u53e3\u5373\u53ef\u8bbf\u95ee\u5bb9\u5668\u5185 nginx \u5e94\u7528\u63d0\u4f9b\u7684\u754c\u9762\u3002 docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES bc533791f3f5 nginx \"nginx -g '\u2026\" 5 days ago Up 4 days 0 .0.0.0:80->80/tcp nginx \u5bb9\u5668\u95f4\u4e92\u8054 \u00b6 \u5148\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Docker \u7f51\u7edc\uff1a docker network create -d bridge lixl-net -d \u53c2\u6570\u6307\u5b9a Docker \u7f51\u7edc\u7c7b\u578b\uff0c\u6709 bridge \uff0c overlay \u3002\u5176\u4e2d overlay \u7f51\u7edc\u7c7b\u578b\u7528\u4e8e Swarm mode\u3002 \u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u5e76\u8fde\u63a5\u5230\u65b0\u5efa\u7684 lixl-net \u7f51\u7edc docker run -it --rm --name busybox1 --network lixl-net busybox sh \u6253\u5f00\u65b0\u7684\u7ec8\u7aef\uff0c\u518d\u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u5e76\u52a0\u5165\u5230 lixl-net \u7f51\u7edc docker run -it --rm --name busybox2 --network lixl-net busybox sh \u518d\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u7ec8\u7aef\u67e5\u770b\u5bb9\u5668\u4fe1\u606f docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES b47060aca56b busybox \"sh\" 1 minutes ago Up 1 minutes busybox2 8720575823ec busybox \"sh\" 1 minutes ago Up 1 minutes busybox1 \u4e0b\u9762\u901a\u8fc7 ping \u6765\u8bc1\u660e busybox1 \u5bb9\u5668\u548c busybox2 \u5bb9\u5668\u5efa\u7acb\u4e86\u4e92\u8054\u5173\u7cfb\u3002 \u5728 busybox1 \u5bb9\u5668\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 / # ping busybox2 PING busybox2 ( 172 .19.0.3 ) : 56 data bytes 64 bytes from 172 .19.0.3: seq = 0 ttl = 64 time = 0 .072 ms 64 bytes from 172 .19.0.3: seq = 1 ttl = 64 time = 0 .118 ms \u7528 ping \u6765\u6d4b\u8bd5\u8fde\u63a5 busybox2 \u5bb9\u5668\uff0c\u5b83\u4f1a\u89e3\u6790\u6210 172.19.0.3 \u3002 \u540c\u7406\u5728 busybox2 \u5bb9\u5668\u6267\u884c ping busybox1 \uff0c\u4e5f\u4f1a\u6210\u529f\u8fde\u63a5\u5230\u3002 / # ping busybox1 PING busybox1 ( 172 .19.0.2 ) : 56 data bytes 64 bytes from 172 .19.0.2: seq = 0 ttl = 64 time = 0 .064 ms 64 bytes from 172 .19.0.2: seq = 1 ttl = 64 time = 0 .143 ms \u8fd9\u6837\uff0c busybox1 \u5bb9\u5668\u548c busybox2 \u5bb9\u5668\u5efa\u7acb\u4e86\u4e92\u8054\u5173\u7cfb\u3002 \u5982\u679c\u6709\u591a\u4e2a\u5bb9\u5668\u4e4b\u95f4\u9700\u8981\u4e92\u76f8\u8fde\u63a5\uff0c\u63a8\u8350\u4f7f\u7528 Docker Compose \u3002 \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e09\uff09\uff1a\u57fa\u4e8e Docker-registry/Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e94\uff09\uff1aDocker \u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18","title":"\u56db\u3001Docker \u7f51\u7edc\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5bb9\u5668\u4e92\u8054\u914d\u7f6e"},{"location":"Docker/4-Network/#docker","text":"","title":"Docker \u7f51\u7edc\u914d\u7f6e"},{"location":"Docker/4-Network/#docker_1","text":"\u8981\u5b9e\u73b0\u7f51\u7edc\u901a\u4fe1\uff0c\u673a\u5668\u9700\u8981\u81f3\u5c11\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\uff08\u7269\u7406\u63a5\u53e3\u6216\u865a\u62df\u63a5\u53e3\uff09\u6765\u6536\u53d1\u6570\u636e\u5305\u3002\u5982\u679c\u4e0d\u540c\u5b50\u7f51\u4e4b\u95f4\u8981\u8fdb\u884c\u901a\u4fe1\uff0c\u9700\u8981\u8def\u7531\u673a\u5236\u3002 Docker \u4e2d\u7684\u7f51\u7edc\u63a5\u53e3\u9ed8\u8ba4\u90fd\u662f\u865a\u62df\u63a5\u53e3\uff0c\u865a\u62df\u63a5\u53e3\u7684\u4f18\u52bf\u4e4b\u4e00\u662f\u8f6c\u53d1\u6548\u7387\u8f83\u9ad8\u3002 Linux \u901a\u8fc7\u5728\u5185\u6838\u4e2d\u8fdb\u884c\u6570\u636e\u590d\u5236\u6765\u5b9e\u73b0\u865a\u62df\u63a5\u53e3\u4e4b\u95f4\u7684\u6570\u636e\u8f6c\u53d1\uff0c\u53d1\u9001\u63a5\u53e3\u7684\u53d1\u9001\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u5305\u88ab\u76f4\u63a5\u590d\u5236\u5230\u63a5\u6536\u63a5\u53e3\u7684\u63a5\u6536\u7f13\u5b58\u4e2d\u3002 \u5f53 Docker \u542f\u52a8\u65f6\uff0c\u4f1a\u81ea\u52a8\u5728\u4e3b\u673a\u4e0a\u521b\u5efa\u4e00\u4e2a docker0 \u865a\u62df\u7f51\u6865\uff08 Linux \u7684\u4e00\u4e2a bridge\uff09\uff0c\u5b83\u4f1a\u5728\u6302\u8f7d\u5230\u5b83\u7684\u7f51\u53e3\u4e4b\u95f4\u8fdb\u884c\u8f6c\u53d1\u3002\u540c\u65f6\uff0cDocker \u968f\u673a\u5206\u914d\u4e00\u4e2a\u672c\u5730\u672a\u5360\u7528\u7684\u79c1\u6709\u7f51\u6bb5\u4e2d\u7684\u4e00\u4e2a\u5730\u5740\u7ed9 docker0 \u63a5\u53e3\uff0c\u6b64\u540e\u542f\u52a8\u7684\u5bb9\u5668\u5185\u7684\u7f51\u53e3\u4e5f\u4f1a\u81ea\u52a8\u5206\u914d\u4e00\u4e2a\u540c\u4e00\u7f51\u6bb5\uff08 172.17.0.0/16 \uff09\u7684\u5730\u5740\u3002 \u5f53\u521b\u5efa\u4e00\u4e2a Docker \u5bb9\u5668\u7684\u65f6\u5019\uff0c\u540c\u65f6\u4f1a\u521b\u5efa\u4e86\u4e00\u5bf9 veth pair \u63a5\u53e3\uff08\u5f53\u6570\u636e\u5305\u53d1\u9001\u5230\u4e00\u4e2a\u63a5\u53e3\u65f6\uff0c\u53e6\u5916\u4e00\u4e2a\u63a5\u53e3\u4e5f\u53ef\u4ee5\u6536\u5230\u76f8\u540c\u7684\u6570\u636e\u5305\uff09\u3002\u8fd9\u5bf9\u63a5\u53e3\u4e00\u7aef\u5728\u5bb9\u5668\u5185\uff0c\u5373 eth0 \uff1b\u53e6\u4e00\u7aef\u5728\u672c\u5730\u5e76\u88ab\u6302\u8f7d\u5230 docker0 \u7f51\u6865\uff0c\u540d\u79f0\u4ee5 veth \u5f00\u5934\uff08\u4f8b\u5982 vethAQI2QT \uff09\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4e3b\u673a\u53ef\u4ee5\u8ddf\u5bb9\u5668\u901a\u4fe1\uff0c\u5bb9\u5668\u4e4b\u95f4\u4e5f\u53ef\u4ee5\u76f8\u4e92\u901a\u4fe1\u3002 \u5173\u4e8e Docker \u7f51\u7edc\u7684\u66f4\u591a\u5185\u5bb9\uff0c\u53ef\u4ee5\u8bbf\u95ee\uff1a https://docs.docker.com/network/ >","title":"Docker \u7f51\u7edc\u57fa\u672c\u539f\u7406"},{"location":"Docker/4-Network/#docker_2","text":"Docker \u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u7684\u65f6\u5019\uff0c\u4f1a\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u521b\u5efa\u4e00\u5bf9\u865a\u62df\u63a5\u53e3\uff0c\u5206\u522b\u653e\u5230\u672c\u5730\u4e3b\u673a\u548c\u65b0\u5bb9\u5668\u4e2d\uff1b \u672c\u5730\u4e3b\u673a\u4e00\u7aef\u6865\u63a5\u5230\u9ed8\u8ba4\u7684 docker0 \u6216\u6307\u5b9a\u7f51\u6865\u4e0a\uff0c\u5e76\u5177\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u540d\u5b57\uff0c\u5982 veth65f9\uff1b \u5bb9\u5668\u4e00\u7aef\u653e\u5230\u65b0\u5bb9\u5668\u4e2d\uff0c\u5e76\u4fee\u6539\u540d\u5b57\u4f5c\u4e3a eth0\uff0c\u8fd9\u4e2a\u63a5\u53e3\u53ea\u5728\u5bb9\u5668\u7684\u547d\u540d\u7a7a\u95f4\u53ef\u89c1\uff1b \u4ece\u7f51\u6865\u53ef\u7528\u5730\u5740\u6bb5\u4e2d\u83b7\u53d6\u4e00\u4e2a\u7a7a\u95f2\u5730\u5740\u5206\u914d\u7ed9\u5bb9\u5668\u7684 eth0\uff0c\u5e76\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\u5230\u6865\u63a5\u7f51\u5361 veth65f9\u3002 \u5b8c\u6210\u8fd9\u4e9b\u4e4b\u540e\uff0c\u5bb9\u5668\u5c31\u53ef\u4ee5\u4f7f\u7528 eth0 \u865a\u62df\u7f51\u5361\u6765\u8fde\u63a5\u5176\u4ed6\u5bb9\u5668\u548c\u5176\u4ed6\u7f51\u7edc\u3002 \u53ef\u4ee5\u5728 docker run \u7684\u65f6\u5019\u901a\u8fc7 --net \u53c2\u6570\u6765\u6307\u5b9a\u5bb9\u5668\u7684\u7f51\u7edc\u914d\u7f6e\uff0c\u6709 4 \u4e2a\u53ef\u9009\u503c\uff1a --net=bridge \u8fd9\u4e2a\u662f\u9ed8\u8ba4\u503c\uff0c\u8fde\u63a5\u5230\u9ed8\u8ba4\u7684\u7f51\u6865\u3002 --net=host \u544a\u8bc9 Docker \u4e0d\u8981\u5c06\u5bb9\u5668\u7f51\u7edc\u653e\u5230\u9694\u79bb\u7684\u547d\u540d\u7a7a\u95f4\u4e2d\uff0c\u5373\u4e0d\u8981\u5bb9\u5668\u5316\u5bb9\u5668\u5185\u7684\u7f51\u7edc\u3002\u6b64\u65f6\u5bb9\u5668\u4f7f\u7528\u672c\u5730\u4e3b\u673a\u7684\u7f51\u7edc\uff0c\u5b83\u62e5\u6709\u5b8c\u5168\u7684\u672c\u5730\u4e3b\u673a\u63a5\u53e3\u8bbf\u95ee\u6743\u9650\u3002\u5bb9\u5668\u8fdb\u7a0b\u53ef\u4ee5\u8ddf\u4e3b\u673a\u5176\u5b83 root \u8fdb\u7a0b\u4e00\u6837\u53ef\u4ee5\u6253\u5f00\u4f4e\u8303\u56f4\u7684\u7aef\u53e3\uff0c\u53ef\u4ee5\u8bbf\u95ee\u672c\u5730\u7f51\u7edc\u670d\u52a1\u6bd4\u5982 D-bus\uff0c\u8fd8\u53ef\u4ee5\u8ba9\u5bb9\u5668\u505a\u4e00\u4e9b\u5f71\u54cd\u6574\u4e2a\u4e3b\u673a\u7cfb\u7edf\u7684\u4e8b\u60c5\uff0c\u6bd4\u5982\u91cd\u542f\u4e3b\u673a\u3002\u56e0\u6b64\u4f7f\u7528\u8fd9\u4e2a\u9009\u9879\u7684\u65f6\u5019\u8981\u975e\u5e38\u5c0f\u5fc3\u3002\u5982\u679c\u8fdb\u4e00\u6b65\u7684\u4f7f\u7528 --privileged=true \uff0c\u5bb9\u5668\u4f1a\u88ab\u5141\u8bb8\u76f4\u63a5\u914d\u7f6e\u4e3b\u673a\u7684\u7f51\u7edc\u5806\u6808\u3002 --net=container:NAME_or_ID \u8ba9 Docker \u5c06\u65b0\u5efa\u5bb9\u5668\u7684\u8fdb\u7a0b\u653e\u5230\u4e00\u4e2a\u5df2\u5b58\u5728\u5bb9\u5668\u7684\u7f51\u7edc\u6808\u4e2d\uff0c\u65b0\u5bb9\u5668\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684\u6587\u4ef6\u7cfb\u7edf\u3001\u8fdb\u7a0b\u5217\u8868\u548c\u8d44\u6e90\u9650\u5236\uff0c\u4f46\u4f1a\u548c\u5df2\u5b58\u5728\u7684\u5bb9\u5668\u5171\u4eab IP \u5730\u5740\u548c\u7aef\u53e3\u7b49\u7f51\u7edc\u8d44\u6e90\uff0c\u4e24\u8005\u8fdb\u7a0b\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 lo \u73af\u56de\u63a5\u53e3\u901a\u4fe1\u3002 --net=none \u8ba9 Docker \u5c06\u65b0\u5bb9\u5668\u653e\u5230\u9694\u79bb\u7684\u7f51\u7edc\u6808\u4e2d\uff0c\u4f46\u662f\u4e0d\u8fdb\u884c\u7f51\u7edc\u914d\u7f6e\u3002\u4e4b\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u81ea\u5df1\u8fdb\u884c\u914d\u7f6e\u3002","title":"Docker \u7f51\u7edc\u7c7b\u578b"},{"location":"Docker/4-Network/#_1","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u53ef\u4ee5\u4e3b\u52a8\u8bbf\u95ee\u5230\u5916\u90e8\u7f51\u7edc\u7684\u8fde\u63a5\uff0c\u4f46\u662f\u5916\u90e8\u7f51\u7edc\u65e0\u6cd5\u8bbf\u95ee\u5230\u5bb9\u5668\u3002\u60f3\u8981\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\u5bb9\u5668\uff0c\u53ef\u4ee5\u5728 docker run \u65f6\u5019\u901a\u8fc7 -p \u6216 -P \u53c2\u6570\u6765\u542f\u7528\uff08\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528 -p \u6807\u8bb0\u6765\u7ed1\u5b9a\u591a\u4e2a\u7aef\u53e3\uff09\u3002 \u4f7f\u7528 docker ps \u53ef\u4ee5\u770b\u5230\uff0c\u672c\u5730\u4e3b\u673a\u7684 80 \u88ab\u6620\u5c04\u5230\u4e86\u5bb9\u5668\u7684 80 \u7aef\u53e3\u3002\u6b64\u65f6\u8bbf\u95ee\u672c\u673a\u7684 80 \u7aef\u53e3\u5373\u53ef\u8bbf\u95ee\u5bb9\u5668\u5185 nginx \u5e94\u7528\u63d0\u4f9b\u7684\u754c\u9762\u3002 docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES bc533791f3f5 nginx \"nginx -g '\u2026\" 5 days ago Up 4 days 0 .0.0.0:80->80/tcp nginx","title":"\u5916\u90e8\u8bbf\u95ee\u5bb9\u5668"},{"location":"Docker/4-Network/#_2","text":"\u5148\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Docker \u7f51\u7edc\uff1a docker network create -d bridge lixl-net -d \u53c2\u6570\u6307\u5b9a Docker \u7f51\u7edc\u7c7b\u578b\uff0c\u6709 bridge \uff0c overlay \u3002\u5176\u4e2d overlay \u7f51\u7edc\u7c7b\u578b\u7528\u4e8e Swarm mode\u3002 \u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u5e76\u8fde\u63a5\u5230\u65b0\u5efa\u7684 lixl-net \u7f51\u7edc docker run -it --rm --name busybox1 --network lixl-net busybox sh \u6253\u5f00\u65b0\u7684\u7ec8\u7aef\uff0c\u518d\u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u5e76\u52a0\u5165\u5230 lixl-net \u7f51\u7edc docker run -it --rm --name busybox2 --network lixl-net busybox sh \u518d\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u7ec8\u7aef\u67e5\u770b\u5bb9\u5668\u4fe1\u606f docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES b47060aca56b busybox \"sh\" 1 minutes ago Up 1 minutes busybox2 8720575823ec busybox \"sh\" 1 minutes ago Up 1 minutes busybox1 \u4e0b\u9762\u901a\u8fc7 ping \u6765\u8bc1\u660e busybox1 \u5bb9\u5668\u548c busybox2 \u5bb9\u5668\u5efa\u7acb\u4e86\u4e92\u8054\u5173\u7cfb\u3002 \u5728 busybox1 \u5bb9\u5668\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 / # ping busybox2 PING busybox2 ( 172 .19.0.3 ) : 56 data bytes 64 bytes from 172 .19.0.3: seq = 0 ttl = 64 time = 0 .072 ms 64 bytes from 172 .19.0.3: seq = 1 ttl = 64 time = 0 .118 ms \u7528 ping \u6765\u6d4b\u8bd5\u8fde\u63a5 busybox2 \u5bb9\u5668\uff0c\u5b83\u4f1a\u89e3\u6790\u6210 172.19.0.3 \u3002 \u540c\u7406\u5728 busybox2 \u5bb9\u5668\u6267\u884c ping busybox1 \uff0c\u4e5f\u4f1a\u6210\u529f\u8fde\u63a5\u5230\u3002 / # ping busybox1 PING busybox1 ( 172 .19.0.2 ) : 56 data bytes 64 bytes from 172 .19.0.2: seq = 0 ttl = 64 time = 0 .064 ms 64 bytes from 172 .19.0.2: seq = 1 ttl = 64 time = 0 .143 ms \u8fd9\u6837\uff0c busybox1 \u5bb9\u5668\u548c busybox2 \u5bb9\u5668\u5efa\u7acb\u4e86\u4e92\u8054\u5173\u7cfb\u3002 \u5982\u679c\u6709\u591a\u4e2a\u5bb9\u5668\u4e4b\u95f4\u9700\u8981\u4e92\u76f8\u8fde\u63a5\uff0c\u63a8\u8350\u4f7f\u7528 Docker Compose \u3002","title":"\u5bb9\u5668\u95f4\u4e92\u8054"},{"location":"Docker/4-Network/#_3","text":"\u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e09\uff09\uff1a\u57fa\u4e8e Docker-registry/Nexus3 \u642d\u5efa\u672c\u5730\u4ed3\u5e93 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e94\uff09\uff1aDocker \u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/5-Data/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e8c\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u56db\uff09\uff1aDocker \u7f51\u7edc\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5bb9\u5668\u4e92\u8054\u914d\u7f6e \u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18 \u00b6 \u6570\u636e\u6301\u4e45\u4fdd\u5b58 \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728\u5bb9\u5668\u5185\u521b\u5efa\u7684\u6240\u6709\u6587\u4ef6\u90fd\u5b58\u50a8\u5728\u53ef\u5199\u5bb9\u5668\u5c42\u4e0a\u3002\u8fd9\u610f\u5473\u7740\u5f53\u8be5\u5bb9\u5668\u4e0d\u518d\u5b58\u5728\u65f6\uff0c\u6570\u636e\u4e5f\u5c06\u4e22\u5931\u3002 \u4e3a\u4e86\u8ba9\u6570\u636e\u8131\u79bb\u5bb9\u5668\u6301\u4e45\u4fdd\u5b58\uff0cDocker \u63d0\u4f9b\u4e86\u4e24\u4e2a\u9009\u9879\u6765\u5c06\u6587\u4ef6\u6301\u4e45\u5b58\u50a8\u5728\u4e3b\u673a\u4e2d\uff1a volume \u548c bind mount \u3002\u5982\u679c\u60a8\u5728 Linux \u4e0a\u8fd0\u884c Docker\uff0c\u5219\u8fd8\u53ef\u4ee5\u4f7f\u7528 tmpfs \u6302\u8f7d \u3002\u5982\u679c\u60a8\u5728 Windows \u4e0a\u8fd0\u884c Docker\uff0c\u5219\u8fd8\u53ef\u4ee5\u4f7f\u7528 \u547d\u540d\u7ba1\u9053 \u3002 volume\uff08\u5377\uff09 \u5b58\u50a8\u5728\u4e3b\u673a\u6587\u4ef6\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\u4e2d\uff0c\u8be5\u6587\u4ef6\u7cfb\u7edf \u7531 Docker \u7ba1\u7406 \uff08 /var/lib/docker/volumes/ \u5728 Linux \u4e0a\uff09\u3002\u975e Docker \u8fdb\u7a0b\u4e0d\u5e94\u4fee\u6539\u6587\u4ef6\u7cfb\u7edf\u7684\u8fd9\u4e00\u90e8\u5206\u3002\u5377\u662f\u5728 Docker \u4e2d\u6301\u4e45\u4fdd\u5b58\u6570\u636e\u7684\u6700\u4f73\u65b9\u6cd5\u3002 bind mount\uff08\u7ed1\u5b9a\u6302\u8f7d\uff09 \u53ef\u4ee5\u5b58\u50a8\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a\u7684 \u4efb\u4f55\u4f4d\u7f6e \u3002\u5b83\u4eec\u751a\u81f3\u53ef\u80fd\u662f\u91cd\u8981\u7684\u7cfb\u7edf\u6587\u4ef6\u6216\u76ee\u5f55\u3002Docker \u4e3b\u673a\u6216 Docker \u5bb9\u5668\u4e0a\u7684\u975e Docker \u8fdb\u7a0b\u53ef\u4ee5\u968f\u65f6\u5bf9\u5176\u8fdb\u884c\u4fee\u6539\u3002 tmpfs \u6302\u8f7d \u4ec5\u5b58\u50a8\u5728\u4e3b\u673a\u7cfb\u7edf\u7684\u5185\u5b58\u4e2d\uff0c\u5e76\u4e14\u6c38\u8fdc\u4e0d\u4f1a\u5199\u5165\u4e3b\u673a\u7cfb\u7edf\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u3002 volume \u548c bind mount \u90fd\u53ef\u4ee5\u4f7f\u7528 -v \u6216 --volume \u6807\u5fd7\u5b89\u88c5\u5230\u5bb9\u5668\u4e2d\uff0c\u4f46\u662f\u4e24\u8005\u7684\u8bed\u6cd5\u7565\u6709\u4e0d\u540c\u3002 \u5173\u4e8e\u6302\u8f7d\u7c7b\u578b\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff1a Manage data in Docker \u6302\u8f7d\u5377\u6027\u80fd\u8c03\u4f18 \u00b6 \u5728 macOS\uff08\u548c\u5176\u4ed6\u975e Linux \u5e73\u53f0\uff09\u4e0a\uff0c\u4fdd\u8bc1\u5bb9\u5668\u5185\u548c\u4e3b\u673a\u6587\u4ef6\u4e00\u81f4\u6027\u7684\u5f00\u9500\u5f88\u5927\u3002\u7136\u800c\uff0c\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u4e0e\u4e3b\u673a\u4e4b\u95f4\u4e0d\u9700\u8981\u5b8c\u7f8e\u7684\u4e00\u81f4\u6027\u3002\u533a\u5206\u4e0d\u540c\u60c5\u51b5\u53ef\u4ee5\u663e\u7740\u63d0\u9ad8\u6027\u80fd\u3002 \u901a\u8fc7\u5728 docker run -v \uff0c --volume \u7684 option \u4e2d\u6307\u5b9a cached \u6216 delegated \uff0c\u53ef\u4ee5\u663e\u7740\u63d0\u9ad8 Docker Desktop for Mac \u4e0a\u5df2\u88c5\u8f7d\u5377\u8bbf\u95ee\u7684\u6027\u80fd\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u8c03\u6574\u6240\u9700\u7684\u4e00\u81f4\u6027\u7ea7\u522b\uff1a consistent \uff1a\u9ed8\u8ba4\u503c\uff0c\u5b8c\u7f8e\u7684\u4e00\u81f4\u6027\uff0c\u5373\u4e3b\u673a\u548c\u5bb9\u5668\u5b9e\u65f6\u4e00\u81f4\u3002 cached \uff1a\u4e3b\u673a\u5177\u6709\u6743\u5a01\u6027\u3002\u5bb9\u5668\u6267\u884c\u7684\u5199\u64cd\u4f5c\u5bf9\u4e3b\u673a\u662f\u7acb\u5373\u53ef\u89c1\u7684\uff0c\u4f46\u662f\u5728\u4e3b\u673a\u4e0a\u6267\u884c\u7684\u5199\u64cd\u4f5c\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u53cd\u5e94\u5728\u5bb9\u5668\u5185\u3002 delegated \uff1a\u5bb9\u5668\u7684\u5185\u5bb9\u5177\u6709\u6743\u5a01\u6027\u3002\u63d0\u4f9b\u6700\u5f31\u4fdd\u8bc1\uff0c\u7531\u5bb9\u5668\u6267\u884c\u7684\u5199\u64cd\u4f5c\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u53cd\u6620\u5728\u4e3b\u673a\u6587\u4ef6\u7cfb\u7edf\u4e0a\uff0c\u63d0\u4f9b\u7684\u6027\u80fd\u8981\u6bd4\u5176\u4ed6\u914d\u7f6e\u597d\u5f97\u591a\u3002 \u4e3a\u6bcf\u4e2a\u6302\u8f7d\u5377\u72ec\u7acb\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u4f8b\u5982\uff1a docker run \\ -v /Users/lixl.cn/project:/project:cached \\ -v /host/another-path:/mount/another-point:consistent \\ alpine command \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u56db\uff09\uff1aDocker \u7f51\u7edc\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5bb9\u5668\u4e92\u8054\u914d\u7f6e \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516d\uff09\uff1a\u57fa\u4e8e\u591a\u9636\u6bb5\u6784\u5efa\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef\u964d\u4f4e\u590d\u6742\u5ea6","title":"\u4e94\u3001Docker \u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18"},{"location":"Docker/5-Data/#_1","text":"","title":"\u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18"},{"location":"Docker/5-Data/#_2","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728\u5bb9\u5668\u5185\u521b\u5efa\u7684\u6240\u6709\u6587\u4ef6\u90fd\u5b58\u50a8\u5728\u53ef\u5199\u5bb9\u5668\u5c42\u4e0a\u3002\u8fd9\u610f\u5473\u7740\u5f53\u8be5\u5bb9\u5668\u4e0d\u518d\u5b58\u5728\u65f6\uff0c\u6570\u636e\u4e5f\u5c06\u4e22\u5931\u3002 \u4e3a\u4e86\u8ba9\u6570\u636e\u8131\u79bb\u5bb9\u5668\u6301\u4e45\u4fdd\u5b58\uff0cDocker \u63d0\u4f9b\u4e86\u4e24\u4e2a\u9009\u9879\u6765\u5c06\u6587\u4ef6\u6301\u4e45\u5b58\u50a8\u5728\u4e3b\u673a\u4e2d\uff1a volume \u548c bind mount \u3002\u5982\u679c\u60a8\u5728 Linux \u4e0a\u8fd0\u884c Docker\uff0c\u5219\u8fd8\u53ef\u4ee5\u4f7f\u7528 tmpfs \u6302\u8f7d \u3002\u5982\u679c\u60a8\u5728 Windows \u4e0a\u8fd0\u884c Docker\uff0c\u5219\u8fd8\u53ef\u4ee5\u4f7f\u7528 \u547d\u540d\u7ba1\u9053 \u3002 volume\uff08\u5377\uff09 \u5b58\u50a8\u5728\u4e3b\u673a\u6587\u4ef6\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\u4e2d\uff0c\u8be5\u6587\u4ef6\u7cfb\u7edf \u7531 Docker \u7ba1\u7406 \uff08 /var/lib/docker/volumes/ \u5728 Linux \u4e0a\uff09\u3002\u975e Docker \u8fdb\u7a0b\u4e0d\u5e94\u4fee\u6539\u6587\u4ef6\u7cfb\u7edf\u7684\u8fd9\u4e00\u90e8\u5206\u3002\u5377\u662f\u5728 Docker \u4e2d\u6301\u4e45\u4fdd\u5b58\u6570\u636e\u7684\u6700\u4f73\u65b9\u6cd5\u3002 bind mount\uff08\u7ed1\u5b9a\u6302\u8f7d\uff09 \u53ef\u4ee5\u5b58\u50a8\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a\u7684 \u4efb\u4f55\u4f4d\u7f6e \u3002\u5b83\u4eec\u751a\u81f3\u53ef\u80fd\u662f\u91cd\u8981\u7684\u7cfb\u7edf\u6587\u4ef6\u6216\u76ee\u5f55\u3002Docker \u4e3b\u673a\u6216 Docker \u5bb9\u5668\u4e0a\u7684\u975e Docker \u8fdb\u7a0b\u53ef\u4ee5\u968f\u65f6\u5bf9\u5176\u8fdb\u884c\u4fee\u6539\u3002 tmpfs \u6302\u8f7d \u4ec5\u5b58\u50a8\u5728\u4e3b\u673a\u7cfb\u7edf\u7684\u5185\u5b58\u4e2d\uff0c\u5e76\u4e14\u6c38\u8fdc\u4e0d\u4f1a\u5199\u5165\u4e3b\u673a\u7cfb\u7edf\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u3002 volume \u548c bind mount \u90fd\u53ef\u4ee5\u4f7f\u7528 -v \u6216 --volume \u6807\u5fd7\u5b89\u88c5\u5230\u5bb9\u5668\u4e2d\uff0c\u4f46\u662f\u4e24\u8005\u7684\u8bed\u6cd5\u7565\u6709\u4e0d\u540c\u3002 \u5173\u4e8e\u6302\u8f7d\u7c7b\u578b\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff1a Manage data in Docker","title":"\u6570\u636e\u6301\u4e45\u4fdd\u5b58"},{"location":"Docker/5-Data/#_3","text":"\u5728 macOS\uff08\u548c\u5176\u4ed6\u975e Linux \u5e73\u53f0\uff09\u4e0a\uff0c\u4fdd\u8bc1\u5bb9\u5668\u5185\u548c\u4e3b\u673a\u6587\u4ef6\u4e00\u81f4\u6027\u7684\u5f00\u9500\u5f88\u5927\u3002\u7136\u800c\uff0c\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u4e0e\u4e3b\u673a\u4e4b\u95f4\u4e0d\u9700\u8981\u5b8c\u7f8e\u7684\u4e00\u81f4\u6027\u3002\u533a\u5206\u4e0d\u540c\u60c5\u51b5\u53ef\u4ee5\u663e\u7740\u63d0\u9ad8\u6027\u80fd\u3002 \u901a\u8fc7\u5728 docker run -v \uff0c --volume \u7684 option \u4e2d\u6307\u5b9a cached \u6216 delegated \uff0c\u53ef\u4ee5\u663e\u7740\u63d0\u9ad8 Docker Desktop for Mac \u4e0a\u5df2\u88c5\u8f7d\u5377\u8bbf\u95ee\u7684\u6027\u80fd\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u8c03\u6574\u6240\u9700\u7684\u4e00\u81f4\u6027\u7ea7\u522b\uff1a consistent \uff1a\u9ed8\u8ba4\u503c\uff0c\u5b8c\u7f8e\u7684\u4e00\u81f4\u6027\uff0c\u5373\u4e3b\u673a\u548c\u5bb9\u5668\u5b9e\u65f6\u4e00\u81f4\u3002 cached \uff1a\u4e3b\u673a\u5177\u6709\u6743\u5a01\u6027\u3002\u5bb9\u5668\u6267\u884c\u7684\u5199\u64cd\u4f5c\u5bf9\u4e3b\u673a\u662f\u7acb\u5373\u53ef\u89c1\u7684\uff0c\u4f46\u662f\u5728\u4e3b\u673a\u4e0a\u6267\u884c\u7684\u5199\u64cd\u4f5c\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u53cd\u5e94\u5728\u5bb9\u5668\u5185\u3002 delegated \uff1a\u5bb9\u5668\u7684\u5185\u5bb9\u5177\u6709\u6743\u5a01\u6027\u3002\u63d0\u4f9b\u6700\u5f31\u4fdd\u8bc1\uff0c\u7531\u5bb9\u5668\u6267\u884c\u7684\u5199\u64cd\u4f5c\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u53cd\u6620\u5728\u4e3b\u673a\u6587\u4ef6\u7cfb\u7edf\u4e0a\uff0c\u63d0\u4f9b\u7684\u6027\u80fd\u8981\u6bd4\u5176\u4ed6\u914d\u7f6e\u597d\u5f97\u591a\u3002 \u4e3a\u6bcf\u4e2a\u6302\u8f7d\u5377\u72ec\u7acb\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u4f8b\u5982\uff1a docker run \\ -v /Users/lixl.cn/project:/project:cached \\ -v /host/another-path:/mount/another-point:consistent \\ alpine command","title":"\u6302\u8f7d\u5377\u6027\u80fd\u8c03\u4f18"},{"location":"Docker/5-Data/#_4","text":"\u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u56db\uff09\uff1aDocker \u7f51\u7edc\u539f\u7406\u3001\u5206\u7c7b\u53ca\u5bb9\u5668\u4e92\u8054\u914d\u7f6e \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516d\uff09\uff1a\u57fa\u4e8e\u591a\u9636\u6bb5\u6784\u5efa\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef\u964d\u4f4e\u590d\u6742\u5ea6","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/6-Multistage-build/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e8c\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e94\uff09\uff1aDocker \u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18 \u4e00\u3001\u5f15\u8a00 \u00b6 \u5982\u4f55\u51cf\u5c0f\u6240\u6784\u5efa\u955c\u50cf\u7684\u4f53\u79ef\u6700\u975e\u5e38\u5177\u6709\u6311\u6218\u6027\u7684\u4e8b\u60c5\u3002Docker 17.05\u7248\u672c\u4ee5\u540e\uff0c\u65b0\u589e\u4e86Dockerfile\u591a\u9636\u6bb5\u6784\u5efa\u3002\u6240\u8c13\u591a\u9636\u6bb5\u6784\u5efa\uff0c\u5b9e\u9645\u4e0a\u662f\u5141\u8bb8\u4e00\u4e2aDockerfile \u4e2d\u51fa\u73b0\u591a\u4e2a FROM \u6307\u4ee4\u3002 \u4e8c\u3001\u5355 Dockerfile \u6784\u5efa\u955c\u50cf \u00b6 \u5982\u679c\u5c06\u6240\u6709\u7684\u6784\u5efa\u8fc7\u7a0b\u90fd\u5305\u542b\u5728\u4e00\u4e2a Dockerfile \u4e2d\uff0c\u5305\u62ec\u9879\u76ee\u53ca\u5176\u4f9d\u8d56\u5e93\u7684\u7f16\u8bd1\u3001\u6d4b\u8bd5\u3001\u6253\u5305\u7b49\u6d41\u7a0b\uff0c\u8fd9\u6837\u4f1a\u5e26\u6765\u7684\u4e00\u4e9b\u95ee\u9898\uff1a \u955c\u50cf\u5c42\u6b21\u591a\uff0c\u955c\u50cf\u4f53\u79ef\u8f83\u5927\uff0c\u90e8\u7f72\u65f6\u95f4\u53d8\u957f \u6e90\u4ee3\u7801\u5b58\u5728\u6cc4\u9732\u7684\u98ce\u9669 \u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u793a\u4f8b\uff1a FROM golang:1.14-alpine RUN apk --no-cache add git ca-certificates WORKDIR /go/src/github.com/go/lixl.cn/helloworld/ COPY app.go . RUN go get -d -v github.com/go-sql-driver/mysql \\ && CGO_ENABLED = 0 GOOS = linux go build -a -installsuffix cgo -o app . \\ && cp /go/src/github.com/go/lixl.cn/helloworld/app /root WORKDIR /root/ CMD [ \"./app\" ] \u6784\u5efa\u955c\u50cf\uff1a docker build -t go/helloworld:1 -f Dockerfile1 . \u4e09\u3001Builder \u6a21\u5f0f\u6784\u5efa \u00b6 \u4e3a\u4e86\u89e3\u51b3\u4e0a\u9762\u63d0\u5230\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u91c7\u7528 Builder \u6a21\u5f0f \uff1a\u521b\u5efa\u4e24\u4e2a Dockerfile\uff0c\u4e00\u4e2a\u7528\u4e8e\u5f00\u53d1\uff08\u5305\u542b\u6784\u5efa\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4e00\u5207\uff09\uff0c\u53e6\u4e00\u4e2a\u7528\u4e8e\u751f\u4ea7\uff08\u4ec5\u5305\u542b\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53ca\u8fd0\u884c\u8be5\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u5185\u5bb9\uff09\uff0c\u7136\u540e\u7528\u7f16\u8bd1\u811a\u672c\u5c06\u5176\u6574\u5408\uff1a Dockerfile.build \u6587\u4ef6: FROM golang:1.14-alpine RUN apk --no-cache add git ca-certificates WORKDIR /go/src/github.com/go/lixl.cn/helloworld/ COPY app.go . RUN go get -d -v github.com/go-sql-driver/mysql \\ && CGO_ENABLED = 0 GOOS = linux go build -a -installsuffix cgo -o app . Dockerfile2 \u6587\u4ef6\uff1a FROM alpine:latest RUN apk --no-cache add ca-certificates WORKDIR /root/ COPY app . CMD [ \"./app\" ] build.sh \u6587\u4ef6: #!/bin/sh echo Building go / helloworld : build docker build -t go / helloworld : build . -f Dockerfile . build docker create - -name extract go / helloworld : build docker cp extract : / go / src / github . com / go / lixl . cn / helloworld / app ./ app docker rm -f extract echo Building go / helloworld : 2 docker build - -no-cache -t go / helloworld : 2 . -f Dockerfile2 rm ./ app \u6784\u5efa\u955c\u50cf\uff1a chmod u+x build.sh && sh ./build.sh \u8fd9\u79cd\u65b9\u5f0f\u751f\u6210\u7684\u955c\u50cf\u4f1a\u5f88\u5c0f\uff0c\u4e0d\u8fc7\u8fc7\u7a0b\u6bd4\u8f83\u590d\u6742\uff0c\u800c\u4e14\u751f\u6210\u7684\u591a\u4e2a\u955c\u50cf\u90fd\u4f1a\u5360\u7528\u7cfb\u7edf\u7a7a\u95f4\u3002 \u56db\u3001\u591a\u9636\u6bb5\u6784\u5efa\u65b9\u5f0f \u00b6 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u81ea Docker v17.05 \u5f00\u59cb\u652f\u6301 \u591a\u9636\u6bb5\u6784\u5efa \u3002\u6bcf\u4e00\u6761 FROM \u6307\u4ee4\u90fd\u662f\u4e00\u4e2a\u6784\u5efa\u9636\u6bb5\uff0c\u591a\u6761 FROM \u5c31\u662f\u591a\u9636\u6bb5\u6784\u5efa\uff0c\u867d\u7136\u6700\u540e\u751f\u6210\u7684\u955c\u50cf\u53ea\u80fd\u662f\u6700\u540e\u4e00\u4e2a\u9636\u6bb5\u7684\u7ed3\u679c\uff0c\u4f46\u662f\uff0c\u80fd\u591f\u5c06\u524d\u7f6e\u9636\u6bb5\u4e2d\u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u540e\u8fb9\u7684\u9636\u6bb5\u4e2d\uff0c\u8fd9\u5c31\u662f\u591a\u9636\u6bb5\u6784\u5efa\u7684\u6700\u5927\u610f\u4e49\u3002\u793a\u4f8b\u5982\u4e0b\uff1a FROM golang:1.14-alpine as builder RUN apk --no-cache add git WORKDIR /go/src/github.com/go/lixl.cn/helloworld/ RUN go get -d -v github.com/go-sql-driver/mysql COPY app.go . RUN CGO_ENABLED = 0 GOOS = linux go build -a -installsuffix cgo -o app . FROM alpine:latest as prod RUN apk --no-cache add ca-certificates WORKDIR /root/ COPY --from = 0 /go/src/github.com/go/lixl.cn/helloworld/app . CMD [ \"./app\" ] \u7b2c\u4e8c FROM \u6761\u6307\u4ee4\u4ee5 alpine:latest \u4e3a\u57fa\u7840\u5f00\u59cb\u65b0\u7684\u6784\u5efa\u9636\u6bb5\u3002 COPY --from=0 \u884c\u4ec5\u5c06\u5148\u524d\u9636\u6bb5\u4e2d\u6784\u5efa\u7684\u5de5\u4ef6\u590d\u5236\u5230\u65b0\u9636\u6bb5\uff08\u7b2c\u4e00\u4e2a FROM \u6761\u6307\u4ee4\u7684\u8d77\u59cb\u7f16\u53f7\u4e3a 0\uff09\uff0cGo SDK \u548c\u4efb\u4f55\u4e2d\u95f4\u5de5\u4ef6\u90fd\u4e0d\u4f1a\u4fdd\u5b58\u5728\u6700\u7ec8\u955c\u50cf\u4e2d\u3002 \u63a5\u4e0b\u6765\uff0c\u4f7f\u7528 docker build -t go/helloworld:3 . \u6784\u5efa\u955c\u50cf\uff0c\u7136\u540e\u5bf9\u6bd4\u4e09\u79cd\u65b9\u5f0f\u751f\u6210\u7684\u955c\u50cf\u5927\u5c0f\u3002 docker images REPOSITORY TAG IMAGE ID CREATED SIZE go/helloworld 3 5fb7cd98ef33 2 minutes ago 8 .22MB go/helloworld 2 7c30b66f73f9 2 minutes ago 8 .22MB go/helloworld 1 28fb4443a052 2 hours ago 401MB \u53ef\u4ee5\u770b\u51fa\uff0c\u5355 Dockerfile \u65b9\u5f0f\u6784\u5efa\u7684\u955c\u50cf\u975e\u5e38\u5927\u3002\u540e\u4e24\u79cd\u65b9\u5f0f\u6784\u5efa\u7684\u6620\u50cf\u5927\u5c0f\u4e00\u81f4\uff0c\u4f46\u591a\u9636\u6bb5\u6784\u5efa\u5927\u5927\u964d\u4f4e\u4e86\u590d\u6742\u6027\u3002 \u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa\uff1a \u53ef\u4ee5\u5728 Dockerfile \u4e2d\u4f7f\u7528\u591a\u4e2a FROM \u8bed\u53e5\uff0c\u6bcf\u4e2a FROM \u6307\u4ee4\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u57fa\u7840\u955c\u50cf\u3002 \u6bcf\u4e2a FORM \u90fd\u4f1a\u5f00\u59cb\u65b0\u7684\u6784\u5efa\u9636\u6bb5\uff0c\u53ef\u4ee5\u6709\u9009\u62e9\u5730\u5c06\u5de5\u4ef6\u4ece\u4e00\u4e2a\u9636\u6bb5\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u9636\u6bb5\u3002 \u901a\u8fc7\u5728 FROM \u6307\u4ee4\u4e2d\u6dfb\u52a0 AS name \u6765\u53ef\u4ee5\u547d\u540d\u9636\u6bb5\uff0c\u7136\u540e\u4f7f\u7528 COPY --from=name \u800c\u975e\u6570\u5b57\u6765\u5f15\u7528\u3002 \u53ef\u4ee5\u6307\u5b9a\u76ee\u6807\u9636\u6bb5\u6765\u6784\u5efa\u6620\u50cf\uff08\u4f7f\u7528 --target name \u6307\u4ee4\uff09\uff0c\u800c\u4e0d\u662f\u5fc5\u987b\u6784\u5efa\u6574\u4e2a Dockerfile\u3002 \u53ef\u4ee5\u76f4\u63a5\u5f15\u7528\u5916\u90e8\u7684\u955c\u50cf\uff0c\u5982\uff1a COPY --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf \u3002 \u53ef\u4ee5\u5728\u4f7f\u7528 FROM \u6307\u4ee4\u65f6\u5f15\u7528\u524d\u4e00\u4e2a\u9636\u6bb5\uff0c\u4ece\u4e0a\u4e00\u4e2a\u9636\u6bb5\u7ed3\u675f\u3002\u4f8b\u5982\uff1a FROM alpine:latest as builder RUN apk --no-cache add build-base FROM builder as build1 COPY source1.cpp source.cpp RUN g++ -o /binary source.cpp FROM builder as build2 COPY source2.cpp source.cpp RUN g++ -o /binary source.cpp \u66f4\u8be6\u7ec6\u7684\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u53c2\u8003\uff1a https://docs.docker.com/develop/develop-images/multistage-build/ \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e94\uff09\uff1aDocker \u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e03\uff09\uff1aDocker Compose \u5165\u95e8\u53ca\u5b9e\u8df5","title":"\u516d\u3001\u57fa\u4e8e\u591a\u9636\u6bb5\u6784\u5efa\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef\u964d\u4f4e\u590d\u6742\u5ea6"},{"location":"Docker/6-Multistage-build/#_1","text":"\u5982\u4f55\u51cf\u5c0f\u6240\u6784\u5efa\u955c\u50cf\u7684\u4f53\u79ef\u6700\u975e\u5e38\u5177\u6709\u6311\u6218\u6027\u7684\u4e8b\u60c5\u3002Docker 17.05\u7248\u672c\u4ee5\u540e\uff0c\u65b0\u589e\u4e86Dockerfile\u591a\u9636\u6bb5\u6784\u5efa\u3002\u6240\u8c13\u591a\u9636\u6bb5\u6784\u5efa\uff0c\u5b9e\u9645\u4e0a\u662f\u5141\u8bb8\u4e00\u4e2aDockerfile \u4e2d\u51fa\u73b0\u591a\u4e2a FROM \u6307\u4ee4\u3002","title":"\u4e00\u3001\u5f15\u8a00"},{"location":"Docker/6-Multistage-build/#dockerfile","text":"\u5982\u679c\u5c06\u6240\u6709\u7684\u6784\u5efa\u8fc7\u7a0b\u90fd\u5305\u542b\u5728\u4e00\u4e2a Dockerfile \u4e2d\uff0c\u5305\u62ec\u9879\u76ee\u53ca\u5176\u4f9d\u8d56\u5e93\u7684\u7f16\u8bd1\u3001\u6d4b\u8bd5\u3001\u6253\u5305\u7b49\u6d41\u7a0b\uff0c\u8fd9\u6837\u4f1a\u5e26\u6765\u7684\u4e00\u4e9b\u95ee\u9898\uff1a \u955c\u50cf\u5c42\u6b21\u591a\uff0c\u955c\u50cf\u4f53\u79ef\u8f83\u5927\uff0c\u90e8\u7f72\u65f6\u95f4\u53d8\u957f \u6e90\u4ee3\u7801\u5b58\u5728\u6cc4\u9732\u7684\u98ce\u9669 \u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u793a\u4f8b\uff1a FROM golang:1.14-alpine RUN apk --no-cache add git ca-certificates WORKDIR /go/src/github.com/go/lixl.cn/helloworld/ COPY app.go . RUN go get -d -v github.com/go-sql-driver/mysql \\ && CGO_ENABLED = 0 GOOS = linux go build -a -installsuffix cgo -o app . \\ && cp /go/src/github.com/go/lixl.cn/helloworld/app /root WORKDIR /root/ CMD [ \"./app\" ] \u6784\u5efa\u955c\u50cf\uff1a docker build -t go/helloworld:1 -f Dockerfile1 .","title":"\u4e8c\u3001\u5355 Dockerfile \u6784\u5efa\u955c\u50cf"},{"location":"Docker/6-Multistage-build/#builder","text":"\u4e3a\u4e86\u89e3\u51b3\u4e0a\u9762\u63d0\u5230\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u91c7\u7528 Builder \u6a21\u5f0f \uff1a\u521b\u5efa\u4e24\u4e2a Dockerfile\uff0c\u4e00\u4e2a\u7528\u4e8e\u5f00\u53d1\uff08\u5305\u542b\u6784\u5efa\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4e00\u5207\uff09\uff0c\u53e6\u4e00\u4e2a\u7528\u4e8e\u751f\u4ea7\uff08\u4ec5\u5305\u542b\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53ca\u8fd0\u884c\u8be5\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u5185\u5bb9\uff09\uff0c\u7136\u540e\u7528\u7f16\u8bd1\u811a\u672c\u5c06\u5176\u6574\u5408\uff1a Dockerfile.build \u6587\u4ef6: FROM golang:1.14-alpine RUN apk --no-cache add git ca-certificates WORKDIR /go/src/github.com/go/lixl.cn/helloworld/ COPY app.go . RUN go get -d -v github.com/go-sql-driver/mysql \\ && CGO_ENABLED = 0 GOOS = linux go build -a -installsuffix cgo -o app . Dockerfile2 \u6587\u4ef6\uff1a FROM alpine:latest RUN apk --no-cache add ca-certificates WORKDIR /root/ COPY app . CMD [ \"./app\" ] build.sh \u6587\u4ef6: #!/bin/sh echo Building go / helloworld : build docker build -t go / helloworld : build . -f Dockerfile . build docker create - -name extract go / helloworld : build docker cp extract : / go / src / github . com / go / lixl . cn / helloworld / app ./ app docker rm -f extract echo Building go / helloworld : 2 docker build - -no-cache -t go / helloworld : 2 . -f Dockerfile2 rm ./ app \u6784\u5efa\u955c\u50cf\uff1a chmod u+x build.sh && sh ./build.sh \u8fd9\u79cd\u65b9\u5f0f\u751f\u6210\u7684\u955c\u50cf\u4f1a\u5f88\u5c0f\uff0c\u4e0d\u8fc7\u8fc7\u7a0b\u6bd4\u8f83\u590d\u6742\uff0c\u800c\u4e14\u751f\u6210\u7684\u591a\u4e2a\u955c\u50cf\u90fd\u4f1a\u5360\u7528\u7cfb\u7edf\u7a7a\u95f4\u3002","title":"\u4e09\u3001Builder \u6a21\u5f0f\u6784\u5efa"},{"location":"Docker/6-Multistage-build/#_2","text":"\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u81ea Docker v17.05 \u5f00\u59cb\u652f\u6301 \u591a\u9636\u6bb5\u6784\u5efa \u3002\u6bcf\u4e00\u6761 FROM \u6307\u4ee4\u90fd\u662f\u4e00\u4e2a\u6784\u5efa\u9636\u6bb5\uff0c\u591a\u6761 FROM \u5c31\u662f\u591a\u9636\u6bb5\u6784\u5efa\uff0c\u867d\u7136\u6700\u540e\u751f\u6210\u7684\u955c\u50cf\u53ea\u80fd\u662f\u6700\u540e\u4e00\u4e2a\u9636\u6bb5\u7684\u7ed3\u679c\uff0c\u4f46\u662f\uff0c\u80fd\u591f\u5c06\u524d\u7f6e\u9636\u6bb5\u4e2d\u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u540e\u8fb9\u7684\u9636\u6bb5\u4e2d\uff0c\u8fd9\u5c31\u662f\u591a\u9636\u6bb5\u6784\u5efa\u7684\u6700\u5927\u610f\u4e49\u3002\u793a\u4f8b\u5982\u4e0b\uff1a FROM golang:1.14-alpine as builder RUN apk --no-cache add git WORKDIR /go/src/github.com/go/lixl.cn/helloworld/ RUN go get -d -v github.com/go-sql-driver/mysql COPY app.go . RUN CGO_ENABLED = 0 GOOS = linux go build -a -installsuffix cgo -o app . FROM alpine:latest as prod RUN apk --no-cache add ca-certificates WORKDIR /root/ COPY --from = 0 /go/src/github.com/go/lixl.cn/helloworld/app . CMD [ \"./app\" ] \u7b2c\u4e8c FROM \u6761\u6307\u4ee4\u4ee5 alpine:latest \u4e3a\u57fa\u7840\u5f00\u59cb\u65b0\u7684\u6784\u5efa\u9636\u6bb5\u3002 COPY --from=0 \u884c\u4ec5\u5c06\u5148\u524d\u9636\u6bb5\u4e2d\u6784\u5efa\u7684\u5de5\u4ef6\u590d\u5236\u5230\u65b0\u9636\u6bb5\uff08\u7b2c\u4e00\u4e2a FROM \u6761\u6307\u4ee4\u7684\u8d77\u59cb\u7f16\u53f7\u4e3a 0\uff09\uff0cGo SDK \u548c\u4efb\u4f55\u4e2d\u95f4\u5de5\u4ef6\u90fd\u4e0d\u4f1a\u4fdd\u5b58\u5728\u6700\u7ec8\u955c\u50cf\u4e2d\u3002 \u63a5\u4e0b\u6765\uff0c\u4f7f\u7528 docker build -t go/helloworld:3 . \u6784\u5efa\u955c\u50cf\uff0c\u7136\u540e\u5bf9\u6bd4\u4e09\u79cd\u65b9\u5f0f\u751f\u6210\u7684\u955c\u50cf\u5927\u5c0f\u3002 docker images REPOSITORY TAG IMAGE ID CREATED SIZE go/helloworld 3 5fb7cd98ef33 2 minutes ago 8 .22MB go/helloworld 2 7c30b66f73f9 2 minutes ago 8 .22MB go/helloworld 1 28fb4443a052 2 hours ago 401MB \u53ef\u4ee5\u770b\u51fa\uff0c\u5355 Dockerfile \u65b9\u5f0f\u6784\u5efa\u7684\u955c\u50cf\u975e\u5e38\u5927\u3002\u540e\u4e24\u79cd\u65b9\u5f0f\u6784\u5efa\u7684\u6620\u50cf\u5927\u5c0f\u4e00\u81f4\uff0c\u4f46\u591a\u9636\u6bb5\u6784\u5efa\u5927\u5927\u964d\u4f4e\u4e86\u590d\u6742\u6027\u3002 \u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa\uff1a \u53ef\u4ee5\u5728 Dockerfile \u4e2d\u4f7f\u7528\u591a\u4e2a FROM \u8bed\u53e5\uff0c\u6bcf\u4e2a FROM \u6307\u4ee4\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u57fa\u7840\u955c\u50cf\u3002 \u6bcf\u4e2a FORM \u90fd\u4f1a\u5f00\u59cb\u65b0\u7684\u6784\u5efa\u9636\u6bb5\uff0c\u53ef\u4ee5\u6709\u9009\u62e9\u5730\u5c06\u5de5\u4ef6\u4ece\u4e00\u4e2a\u9636\u6bb5\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u9636\u6bb5\u3002 \u901a\u8fc7\u5728 FROM \u6307\u4ee4\u4e2d\u6dfb\u52a0 AS name \u6765\u53ef\u4ee5\u547d\u540d\u9636\u6bb5\uff0c\u7136\u540e\u4f7f\u7528 COPY --from=name \u800c\u975e\u6570\u5b57\u6765\u5f15\u7528\u3002 \u53ef\u4ee5\u6307\u5b9a\u76ee\u6807\u9636\u6bb5\u6765\u6784\u5efa\u6620\u50cf\uff08\u4f7f\u7528 --target name \u6307\u4ee4\uff09\uff0c\u800c\u4e0d\u662f\u5fc5\u987b\u6784\u5efa\u6574\u4e2a Dockerfile\u3002 \u53ef\u4ee5\u76f4\u63a5\u5f15\u7528\u5916\u90e8\u7684\u955c\u50cf\uff0c\u5982\uff1a COPY --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf \u3002 \u53ef\u4ee5\u5728\u4f7f\u7528 FROM \u6307\u4ee4\u65f6\u5f15\u7528\u524d\u4e00\u4e2a\u9636\u6bb5\uff0c\u4ece\u4e0a\u4e00\u4e2a\u9636\u6bb5\u7ed3\u675f\u3002\u4f8b\u5982\uff1a FROM alpine:latest as builder RUN apk --no-cache add build-base FROM builder as build1 COPY source1.cpp source.cpp RUN g++ -o /binary source.cpp FROM builder as build2 COPY source2.cpp source.cpp RUN g++ -o /binary source.cpp \u66f4\u8be6\u7ec6\u7684\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u53c2\u8003\uff1a https://docs.docker.com/develop/develop-images/multistage-build/","title":"\u56db\u3001\u591a\u9636\u6bb5\u6784\u5efa\u65b9\u5f0f"},{"location":"Docker/6-Multistage-build/#_3","text":"\u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e94\uff09\uff1aDocker \u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\u4e0e\u6027\u80fd\u8c03\u4f18 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e03\uff09\uff1aDocker Compose \u5165\u95e8\u53ca\u5b9e\u8df5","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/7-Docker-Compose/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e8c\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516d\uff09\uff1a\u57fa\u4e8e\u591a\u9636\u6bb5\u6784\u5efa\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef\u964d\u4f4e\u590d\u6742\u5ea6 \u4e00\u3001Docker Compose \u6982\u8ff0 \u00b6 1\u3001Docker Compose \u662f\u4ec0\u4e48 \u00b6 Compose \u9879\u76ee\u662f Docker \u5b98\u65b9\u7684\u5f00\u6e90\u9879\u76ee\uff0c\u57fa\u4e8e Python \u7f16\u5199\uff0c\u7528\u4e8e\u5b9a\u4e49\u548c\u8fd0\u884c\u591a\u5bb9\u5668Docker\u5e94\u7528\u7a0b\u5e8f\u3002Compose \u4f7f\u7528 YAML \u6587\u4ef6\u6765\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u7684\u670d\u52a1\u3002\u7136\u540e\uff0c\u4f7f\u7528\u4e00\u4e2a\u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u4ece\u914d\u7f6e\u4e2d\u521b\u5efa\u5e76\u542f\u52a8\u6240\u6709\u670d\u52a1\u3002 \u4f7f\u7528 Dockerfile \u6a21\u677f\u6587\u4ef6\uff0c\u53ef\u4ee5\u8ba9\u7528\u6237\u5f88\u65b9\u4fbf\u7684\u5b9a\u4e49\u4e00\u4e2a\u5355\u72ec\u7684\u5e94\u7528\u5bb9\u5668\u3002\u7136\u800c\uff0c\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\uff0c\u7ecf\u5e38\u4f1a\u78b0\u5230\u9700\u8981\u591a\u4e2a\u5bb9\u5668\u76f8\u4e92\u914d\u5408\u6765\u5b8c\u6210\u67d0\u9879\u4efb\u52a1\u7684\u60c5\u51b5\u3002\u4f8b\u5982\u8981\u5b9e\u73b0\u4e00\u4e2a Web \u9879\u76ee\uff0c\u9664\u4e86 Web \u670d\u52a1\u5bb9\u5668\u672c\u8eab\uff0c\u5f80\u5f80\u8fd8\u9700\u8981\u518d\u52a0\u4e0a\u540e\u7aef\u7684\u6570\u636e\u5e93\u670d\u52a1\u5bb9\u5668\uff0c\u751a\u81f3\u8fd8\u5305\u62ec\u8d1f\u8f7d\u5747\u8861\u5bb9\u5668\u7b49\u3002 Compose \u521a\u597d\u53ef\u4ee5\u6ee1\u8db3\u8fd9\u6837\u7684\u9700\u6c42\u3002 Compose \u6709\u7740\u7528\u4e8e\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u6574\u4e2a\u751f\u547d\u5468\u671f\u7684\u5404\u79cd\u547d\u4ee4: \u542f\u52a8\u3001\u505c\u6b62\u548c\u91cd\u5efa\u670d\u52a1 \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u670d\u52a1\u7684\u72b6\u6001 \u5b9e\u65f6\u67e5\u770b\u8fd0\u884c\u670d\u52a1\u7684\u65e5\u5fd7\u8f93\u51fa \u4ec5\u6267\u884c\u4e00\u6b21\u547d\u4ee4\u5373\u53ef\u8fd0\u884c\u6574\u4e2a\u670d\u52a1 2\u3001Compose \u4f7f\u7528\u6b65\u9aa4 \u00b6 \u4f7f\u7528 Compose \u57fa\u672c\u4e0a\u6709\u4e09\u4e2a\u6b65\u9aa4: \u4f7f\u7528 Dockerfile \u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u7684\u73af\u5883\uff0c\u8fd9\u6837\u5b83\u5c31\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u590d\u5236\u3002 \u7528 docker-compose. yml \u5b9a\u4e49\u7ec4\u6210\u5e94\u7528\u7a0b\u5e8f\u7684\u670d\u52a1\uff0c\u4f7f\u5176\u53ef\u4ee5\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u73af\u5883\u4e2d\u4e00\u8d77\u8fd0\u884c\u3002 \u8fd0\u884c docker-Compose up \uff0cCompose \u542f\u52a8\u5e76\u8fd0\u884c\u60a8\u7684\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u3002 3\u3001\u5178\u578b docker-compose \u6587\u4ef6\u793a\u4f8b \u00b6 \u4f7f\u7528 docker-compose \u60a8\u4e3b\u8981\u7684\u4efb\u52a1\u662f\u7f16\u5199 docker-compose.yml \u6587\u4ef6\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a WordPress \u7684 yaml \u6587\u4ef6\u6a21\u677f\uff1a version : '3' # \u5b9a\u4e49\u7248\u672c\uff0c\u4e0d\u6307\u5b9a\u9ed8\u8ba4\u4e3a\u7248\u672c 1 services : # \u5b9a\u4e49\u5bb9\u5668\uff0c\u5c31\u50cf docker run db : # \u5bb9\u5668\u540d\u79f0\uff0c\u4e5f\u662f network \u4e2d DNS \u540d\u79f0 image : mysql:5.7 # \u955c\u50cf\uff0c\u5982\u679c\u81ea\u5b9a\u4e49\u955c\u50cf\u53ef\u4ee5\u4e0d\u6307\u5b9a\u8fd9\u4e2a\u53c2\u6570\uff0c\u800c\u7528 build volumes : # \u5b9a\u4e49\u6570\u636e\u5377\uff0c\u7c7b\u4f3c -v - db_data:/var/lib/mysql - .:/lxl80 # \u6302\u8f7d\u5f53\u524d\u76ee\u5f55\u5230\u5bb9\u5668\u4e2d\u7684 /lxl80 \u76ee\u5f55 restart : always # \u7c7b\u4f3c --restart\u3002'no' \u9ed8\u8ba4\uff0c\u4e0d\u81ea\u52a8\u91cd\u542f\uff1balways \u603b\u662f\u81ea\u52a8\u91cd\u542f\uff1b on-failure \u5f53\u5931\u8d25\u65f6\u81ea\u52a8\u91cd\u542f\uff1bunless-stopped \u9664\u975e\u624b\u52a8\u505c\u6b62\uff0c\u5426\u8005\u4e00\u76f4\u91cd\u542f environment : # \u5b9a\u4e49\u73af\u5883\u53d8\u91cf\uff0c\u7c7b\u4f3c -e MYSQL_ROOT_PASSWORD : somewordpress MYSQL_DATABASE : wordpress MYSQL_USER : wordpress MYSQL_PASSWORD : wordpress wordpress : # \u7b2c\u4e8c\u4e2a\u5bb9\u5668 labels : # \u4e3a\u5bb9\u5668\u6dfb\u52a0 Docker \u5143\u6570\u636e\uff08metadata\uff09\u4fe1\u606f\u3002 cn.lixl.title : \"This label will appear on all containers for the web service\" depends_on : # \u5b9a\u4e49\u5bb9\u5668\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u542f\u52a8 wordpress \u65f6\u4f1a\u5148\u542f\u52a8 db - db image : wordpress:latest ports : # \u7aef\u53e3\uff0c\u7c7b\u4f3c -p - \"8000:80\" restart : always environment : WORDPRESS_DB_HOST : db:3306 WORDPRESS_DB_USER : wordpress WORDPRESS_DB_PASSWORD : wordpress volumes : # \u53ef\u9009\uff0c\u9700\u8981\u521b\u5efa\u7684\u6570\u636e\u5377\uff0c\u7c7b\u4f3c docker volume create db_data : networks : # \u53ef\u9009\uff0c\u9700\u8981\u521b\u5efa\u7684\u7f51\u7edc\uff0c\u7c7b\u4f3c docker network create \u4e8c\u3001Compose\u5b89\u88c5\u53ca\u5378\u8f7d \u00b6 1\u3001\u5b89\u88c5 Compose \u00b6 Docker Desktop for Mac/Windows \u81ea\u5e26 docker-compose \u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b89\u88c5 Docker \u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002 $ docker-compose --version docker-compose version 1 .24.1, build 4667896b \u5728 Linux \u4e0a\u7684\u4e5f\u5b89\u88c5\u5341\u5206\u7b80\u5355\uff0c\u4ece \u5b98\u65b9 GitHub Release \u5904\u76f4\u63a5\u4e0b\u8f7d\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u5373\u53ef\u3002 \u4f8b\u5982\uff0c\u5728 Linux 64 \u4f4d\u7cfb\u7edf\u4e0a\u76f4\u63a5\u4e0b\u8f7d\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u5305\u3002 sudo curl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose- ` uname -s ` - ` uname -m ` > /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose \u4e3a bash \u5b89\u88c5 \u547d\u4ee4\u8865\u5168 \u529f\u80fd\uff1a curl -L https://raw.githubusercontent.com/docker/compose/1.24.1/contrib/completion/bash/docker-compose > /etc/bash_completion.d/docker-compose 2\u3001\u5378\u8f7d Compose \u00b6 \u5982\u679c\u57fa\u4e8e curl \u5b89\u88c5\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5378\u8f7dDocker Compose \uff1a sudo rm /usr/local/bin/docker-compose \u5982\u679c\u57fa\u4e8e pip \u5b89\u88c5\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5378\u8f7dDocker Compose \uff1a pip uninstall docker-compose \u4e09\u3001Docker Compose \u5165\u95e8 \u00b6 \u5173\u952e\u672f\u8bed \u00b6 Compose \u4e2d\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a \u670d\u52a1 ( service )\uff1a\u4e00\u4e2a\u5e94\u7528\u7684\u5bb9\u5668\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5305\u62ec\u82e5\u5e72\u8fd0\u884c\u76f8\u540c\u955c\u50cf\u7684\u5bb9\u5668\u5b9e\u4f8b\u3002 \u9879\u76ee ( project )\uff1a\u7531\u4e00\u7ec4\u5173\u8054\u7684\u5e94\u7528\u5bb9\u5668\u7ec4\u6210\u7684\u4e00\u4e2a\u5b8c\u6574\u4e1a\u52a1\u5355\u5143\uff0c\u5728 docker-compose.yml \u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002 \u53ef\u89c1\uff0c\u4e00\u4e2a\u9879\u76ee\u53ef\u4ee5\u7531\u591a\u4e2a\u670d\u52a1\uff08\u5bb9\u5668\uff09\u5173\u8054\u800c\u6210\uff0c Compose \u9762\u5411\u9879\u76ee\u8fdb\u884c\u7ba1\u7406\u3002 \u793a\u4f8b\u5e94\u7528\u4ecb\u7ecd \u00b6 \u63a5\u4e0b\u6765\uff0c\u5c06\u6784\u5efa\u4e00\u4e2a\u8fd0\u884c\u5728 Docker Compose \u4e0a\u7684\u7b80\u5355 Python web \u5e94\u7528\u7a0b\u5e8f\u3002 \u8be5\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u4e86 Flask \u6846\u67b6\uff0c\u5e76\u5728 Redis \u7ef4\u62a4\u4e86\u4e00\u4e2a\u70b9\u51fb\u8ba1\u6570\u5668\u3002 \u9996\u9009\uff0c\u9700\u8981\u786e\u4fdd\u5df2\u7ecf\u5b89\u88c5\u4e86 Docker \u5f15\u64ce\u548c Docker Compose\u3002 \u4e0d\u9700\u8981\u5b89\u88c5 Python \u6216 Redis\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u7531 Docker \u955c\u50cf\u63d0\u4f9b\u7684\u3002 \u7b2c\u4e00\u6b65\uff1a\u8bbe\u7f6e \u00b6 \u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u7684\u4f9d\u8d56\u5173\u7cfb\uff1a 1\u3001\u4e3a\u9879\u76ee\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55\uff1a mkdir composetest cd composetest 2\u3001\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a app.py \u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a import time import redis from flask import Flask app = Flask ( __name__ ) cache = redis . Redis ( host = 'redis' , port = 6379 ) def get_hit_count (): retries = 5 while True : try : return cache . incr ( 'hits' ) except redis . exceptions . ConnectionError as exc : if retries == 0 : raise exc retries -= 1 time . sleep ( 0.5 ) @app . route ( '/' ) def hello (): count = get_hit_count () return 'Hello World! I have been seen {} times. \\n ' . format ( count ) \u5728\u672c\u4f8b\u4e2d\uff0credis \u662f\u5e94\u7528\u7a0b\u5e8f\u7f51\u7edc\u4e0a redis \u5bb9\u5668\u7684\u4e3b\u673a\u540d\u3002 \u8fd9\u91cc\u4f7f\u7528 Redis \u7684\u9ed8\u8ba4\u7aef\u53e3\uff0c6379\u3002 3\u3001\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u521b\u5efa\u53e6\u4e00\u4e2a\u53eb requirements.txt \u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a flask redis \u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa\u4e00\u4e2aDockerfile \u00b6 \u5728\u8fd9\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u5c06\u7f16\u5199\u4e00\u4e2a Dockerfile \u6765\u6784\u5efa\u4e00\u4e2a Docker \u955c\u50cf\u3002\u955c\u50cf\u5305\u542b Python \u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u6240\u6709\u4f9d\u8d56\u9879\uff0c\u5305\u62ec Python \u672c\u8eab\u3002 \u5728\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a Dockerfile \u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a FROM python:3.7-alpine WORKDIR /code ENV FLASK_APP app.py ENV FLASK_RUN_HOST 0 .0.0.0 RUN apk add --no-cache gcc musl-dev linux-headers COPY requirements.txt requirements.txt RUN pip install -r requirements.txt COPY . . CMD [ \"flask\" , \"run\" ] \u8fd9\u544a\u8bc9 Docker\uff1a \u57fa\u4e8e Python 3.7 \u955c\u50cf\u6784\u5efa \u5c06\u5de5\u4f5c\u76ee\u5f55\u8bbe\u7f6e\u4e3a /code \u8bbe\u7f6e flask \u547d\u4ee4\u4f7f\u7528\u7684\u73af\u5883\u53d8\u91cf \u5b89\u88c5 gcc\uff0c\u4ee5\u4fbf\u8bf8\u5982 MarkupSafe \u548c SQLAlchemy \u4e4b\u7c7b\u7684 Python \u5305\u53ef\u4ee5\u52a0\u901f\u7f16\u8bd1 \u590d\u5236 requirements.txt \u5e76\u5b89\u88c5 Python \u4f9d\u8d56\u9879 \u5c06\u4e3b\u673a\u4e0a\u7684\u9879\u76ee\u76ee\u5f55\uff08\u5f53\u524d\u76ee\u5f55\uff09\u590d\u5236\u5230\u955c\u50cf\u4e2d\u7684 . \u5de5\u4f5c\u76ee\u5f55 \u5c06\u5bb9\u5668\u7684\u9ed8\u8ba4\u547d\u4ee4\u8bbe\u7f6e\u4e3a flask run \u7b2c\u4e09\u6b65\uff1a\u7528 Compose \u6587\u4ef6\u5b9a\u4e49\u670d\u52a1 \u00b6 \u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a docker-compose.yml \u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a version : '3' services : web : build : . # \u76f8\u5f53\u4e8e docker build . ports : - \"5000:5000\" redis : image : \"redis:alpine\" \u6b64 Compose \u6587\u4ef6\u5b9a\u4e49\u4e86\u4e24\u4e2a\u670d\u52a1\uff1a web \u548c redis \u3002 web \u670d\u52a1\u4f7f\u7528\u4ece\u5f53\u524d\u76ee\u5f55\u4e2d\u7684 Dockerfile \u6784\u5efa\u7684\u6620\u50cf\u3002\u7136\u540e\u5c06\u5bb9\u5668\u548c\u4e3b\u673a\u7ed1\u5b9a\u5230\u516c\u5f00\u7aef\u53e3 5000\u3002 \u6b64\u793a\u4f8b\u670d\u52a1\u4f7f\u7528 Flask web \u670d\u52a1\u5668\u7684\u9ed8\u8ba4\u7aef\u53e35000\u3002 Redis \u670d\u52a1\u4f7f\u7528\u4ece dockerhub \u6ce8\u518c\u8868\u4e2d\u63d0\u53d6\u7684\u516c\u5171 Redis \u6620\u50cf\u3002 \u7b2c\u56db\u6b65\uff1a\u7528 Compose \u6784\u5efa\u548c\u8fd0\u884c\u5e94\u7528 \u00b6 1\u3001\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u901a\u8fc7\u8fd0\u884c docker-compose up \u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002 $ docker-compose up Creating network \"composetest_default\" with the default driver Creating composetest_web_1 ... Creating composetest_redis_1 ... Creating composetest_web_1 Creating composetest_redis_1 ... done Attaching to composetest_web_1, composetest_redis_1 web_1 | * Running on http://0.0.0.0:5000/ ( Press CTRL+C to quit ) redis_1 | 1 :C 17 Aug 22 :11:10.480 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo redis_1 | 1 :C 17 Aug 22 :11:10.480 # Redis version=4.0.1, bits=64, commit=00000000, modified=0, pid=1, just started redis_1 | 1 :C 17 Aug 22 :11:10.480 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf web_1 | * Restarting with stat redis_1 | 1 :M 17 Aug 22 :11:10.483 * Running mode = standalone, port = 6379 . redis_1 | 1 :M 17 Aug 22 :11:10.483 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128. web_1 | * Debugger is active! redis_1 | 1 :M 17 Aug 22 :11:10.483 # Server initialized redis_1 | 1 :M 17 Aug 22 :11:10.483 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled. web_1 | * Debugger PIN: 330 -787-903 redis_1 | 1 :M 17 Aug 22 :11:10.483 * Ready to accept connections Compose \u4f1a\u62c9\u53d6\u4e00\u4e2a Redis \u955c\u50cf\uff0c\u4e3a\u60a8\u7684\u4ee3\u7801\u6784\u5efa\u4e00\u4e2a\u955c\u50cf\uff0c\u5e76\u542f\u52a8\u60a8\u5b9a\u4e49\u7684\u670d\u52a1\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4ee3\u7801\u4f1a\u5728\u6784\u5efa\u65f6\u9759\u6001\u590d\u5236\u5230\u955c\u50cf\u4e2d\u3002 2\u3001\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:5000/ \uff0c\u67e5\u770b\u8be5\u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\u60c5\u51b5\u3002 \u60a8\u5e94\u8be5\u5728\u6d4f\u89c8\u5668\u4e2d\u770b\u5230\u4e00\u6761\u6d88\u606f\uff0c\u5185\u5bb9\u4e3a\uff1a Hello World! I have been seen 1 times. 3\u3001\u5237\u65b0\u9875\u9762\uff0c\u6570\u5b57\u5e94\u8be5\u4f1a\u9012\u589e\u3002 Hello World! I have been seen 2 times. 4\u3001\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u7ec8\u7aef\u7a97\u53e3\uff0c\u952e\u5165 docker image ls \u67e5\u770b\u672c\u5730\u955c\u50cf\u3002\u6b64\u65f6\u5217\u51fa\u7684\u955c\u50cf\u5e94\u8fd4\u56de redis \u548c composetest_web \u3002 5\u3001\u8981\u505c\u6b62\u5e94\u7528\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u5728\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4e2d\u8fdb\u5165\u9879\u76ee\u76ee\u5f55\u8fd0\u884c docker-compose stop \uff0c\u6216\u8005\u5728\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u539f\u59cb\u7ec8\u7aef\u4e2d\u6309 ctrl + c \u3002\u5982\u679c\u8981\u505c\u6b62\u5e76\u6e05\u9664\u6570\u636e\uff0c\u4ee5\u4fbf\u518d\u6b21\u542f\u52a8\u540e\u91cd\u65b0\u8ba1\u6570\uff0c\u53ef\u4ee5\u6267\u884c `docker-compose down \u3002 \u7b2c\u4e94\u6b65\uff1a\u7f16\u8f91 Compose \u6587\u4ef6\u6dfb\u52a0\u6302\u8f7d \u00b6 \u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u7f16\u8f91 docker-compose. yml \uff0c\u4e3a web \u670d\u52a1\u6dfb\u52a0\u4e00\u4e2a bind mount \uff1a 1 2 3 4 5 6 7 8 9 10 11 12 version : '3' services : web : build : . ports : - \"5000:5000\" volumes : - .:/code environment : FLASK_ENV : development redis : image : \"redis:alpine\" \u65b0\u589e\u52a0 volumes \u914d\u7f6e\uff0c\u5c06\u4e3b\u673a\u4e0a\u7684\u9879\u76ee\u76ee\u5f55\uff08\u5f53\u524d\u76ee\u5f55\uff09\u5b89\u88c5\u5230\u5bb9\u5668\u5185\u90e8\u7684 /code \u76ee\u5f55\uff0c\u4f7f\u60a8\u53ef\u4ee5\u5373\u65f6\u4fee\u6539\u4ee3\u7801\uff0c\u800c\u4e0d\u5fc5\u91cd\u5efa\u955c\u50cf\u3002\u65b0\u589e environment \u952e\u8bbe\u7f6e\u4e86 FLASK_ENV \u73af\u5883\u53d8\u91cf\uff0c\u6307\u793a flask run \u8981\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\u8fd0\u884c\u5e76\u5728\u66f4\u6539\u65f6\u91cd\u65b0\u52a0\u8f7d\u4ee3\u7801\u3002\u6b64\u6a21\u5f0f\u4ec5\u5e94\u5728\u5f00\u53d1\u4e2d\u4f7f\u7528\u3002 \u7b2c\u516d\u6b65\uff1a\u91cd\u65b0\u6784\u5efa\u5e76\u8fd0\u884c \u00b6 \u4ece\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u5148\u8f93\u5165 docker-compose stop \u505c\u6b62\u8425\u4e1a\uff0c\u7136\u540e\u8f93\u5165 docker-Compose up \u4ee5\u6784\u5efa\u5e26\u6709\u66f4\u65b0\u7684 Compose \u6587\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u8fd0\u884c\u5b83\u3002 $ docker-compose stop Stopping composetest_web_1 ... done Stopping composetest_redis_1 ... done $ docker-compose up Recreating composetest_web_1 ... done Starting composetest_redis_1 ... done Attaching to composetest_redis_1, composetest_web_1 redis_1 | 1 :C 17 Apr 2020 02 :25:49.466 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo ...... web_1 | * Serving Flask app \"app.py\" ( lazy loading ) web_1 | * Environment: development web_1 | * Debug mode: on web_1 | * Running on http://0.0.0.0:5000/ ( Press CTRL+C to quit ) web_1 | * Restarting with stat web_1 | * Debugger is active! web_1 | * Debugger PIN: 143 -909-154 \u518d\u6b21\u68c0\u67e5\u6d4f\u89c8\u5668\u4e2d\u7684 Hello World \u63d0\u793a\u6d88\u606f\uff0c\u5e76\u5237\u65b0\u4ee5\u67e5\u770b\u8ba1\u6570\u589e\u91cf\u3002 \u5982\u679c\u51fa\u73b0\u8fd0\u884c\u65f6\u9519\u8bef\u6307\u793a\u627e\u4e0d\u5230\u5e94\u7528\u7a0b\u5e8f\u6587\u4ef6\uff0c\u62d2\u7edd\u5377\u5b89\u88c5\u6216\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\uff0c\u8bf7\u5c1d\u8bd5\u542f\u7528\u6587\u4ef6\u6216\u9a71\u52a8\u5668\u5171\u4eab\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Docker for Mac \u4e0a\u7684 \u6587\u4ef6\u5171\u4eab \u7ae0\u8282\u3002 \u7b2c\u4e03\u6b65\uff1a\u66f4\u65b0\u5e94\u7528\u7a0b\u5e8f \u00b6 \u56e0\u4e3a\u73b0\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u662f\u4f7f\u7528\u5377\u5b89\u88c5\u5230\u5bb9\u5668\u4e2d\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u5bf9\u4ee3\u7801\u8fdb\u884c\u66f4\u6539\u5e76\u7acb\u5373\u751f\u6548\uff0c\u800c\u65e0\u9700\u91cd\u5efa\u955c\u50cf\u3002 \u66f4\u6539 app.py \u4e2d\u7684\u63d0\u793a\u8bed\u5e76\u4fdd\u5b58\u3002\u4f8b\u5982\uff0c\u5c06 Hello World! \u66f4\u6539\u4e3a Hello from Docker! \uff1a return 'Hello from Docker! I have been seen {} times. \\n ' . format ( count ) \u5728\u6d4f\u89c8\u5668\u4e2d\u5237\u65b0\u5e94\u7528\u3002\u4f1a\u53d1\u73b0\u63d0\u793a\u8bed\u5df2\u66f4\u65b0\uff0c\u5e76\u4e14\u8ba1\u6570\u5668\u4ecd\u5728\u589e\u52a0\u3002 \u7b2c\u516b\u6b65\uff1a\u5c1d\u8bd5\u5176\u5b83\u547d\u4ee4 \u00b6 \u5982\u679c\u8981\u8ba9\u670d\u52a1\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u53ef\u4ee5\u5c06 -d \u53c2\u6570\uff08\u7528\u4e8e\u201c\u5206\u79bb\u201d\u6a21\u5f0f\uff09\u4f20\u9012\u7ed9 docker-compose up \uff0c\u5e76\u7528 docker-compose ps \u67e5\u770b\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u5185\u5bb9\uff1a $ docker-compose up -d Starting composetest_web_1 ... done Starting composetest_redis_1 ... done $ docker-compose ps Name Command State Ports ------------------------------------------------------------------------------------- composetest_redis_1 docker-entrypoint.sh redis ... Up 6379 /tcp composetest_web_1 flask run Up 0 .0.0.0:5000->5000/tcp docker-compose run \u547d\u4ee4\u5141\u8bb8\u4e3a\u670d\u52a1\u8fd0\u884c\u4e00\u6b21\u6027\u547d\u4ee4\u3002 \u4f8b\u5982\uff0c\u67e5\u770b web \u670d\u52a1\u53ef\u7528\u7684\u73af\u5883\u53d8\u91cf\uff1a $ docker-compose run web env PATH = /usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin HOSTNAME = 4b3f1e39dc5d ...... FLASK_APP = app.py FLASK_RUN_HOST = 0 .0.0.0 HOME = /root \u8bf7\u53c2\u9605 docker-compose --help \u4ee5\u67e5\u770b\u5176\u4ed6\u53ef\u7528\u547d\u4ee4\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e3a bash \u548c zsh shell \u5b89\u88c5 \u547d\u4ee4\u8865\u5168 \u529f\u80fd\uff0c\u8fd9\u5c06\u5c06\u81ea\u52a8\u63d0\u793a\u53ef\u7528\u7684\u547d\u4ee4\u3002 \u56db\u3001Compose \u8fdb\u9636 \u00b6 Todo \u53c2\u8003 \u00b6 docs.docker.com \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516d\uff09\uff1a\u57fa\u4e8e\u591a\u9636\u6bb5\u6784\u5efa\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef\u964d\u4f4e\u590d\u6742\u5ea6 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516b\uff09\uff1aDocker \u5e38\u7528\u547d\u4ee4\u53ca\u793a\u4f8b","title":"\u4e03\u3001Docker Compose \u5165\u95e8\u53ca\u5b9e\u8df5"},{"location":"Docker/7-Docker-Compose/#docker-compose","text":"","title":"\u4e00\u3001Docker Compose \u6982\u8ff0"},{"location":"Docker/7-Docker-Compose/#1docker-compose","text":"Compose \u9879\u76ee\u662f Docker \u5b98\u65b9\u7684\u5f00\u6e90\u9879\u76ee\uff0c\u57fa\u4e8e Python \u7f16\u5199\uff0c\u7528\u4e8e\u5b9a\u4e49\u548c\u8fd0\u884c\u591a\u5bb9\u5668Docker\u5e94\u7528\u7a0b\u5e8f\u3002Compose \u4f7f\u7528 YAML \u6587\u4ef6\u6765\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u7684\u670d\u52a1\u3002\u7136\u540e\uff0c\u4f7f\u7528\u4e00\u4e2a\u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u4ece\u914d\u7f6e\u4e2d\u521b\u5efa\u5e76\u542f\u52a8\u6240\u6709\u670d\u52a1\u3002 \u4f7f\u7528 Dockerfile \u6a21\u677f\u6587\u4ef6\uff0c\u53ef\u4ee5\u8ba9\u7528\u6237\u5f88\u65b9\u4fbf\u7684\u5b9a\u4e49\u4e00\u4e2a\u5355\u72ec\u7684\u5e94\u7528\u5bb9\u5668\u3002\u7136\u800c\uff0c\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\uff0c\u7ecf\u5e38\u4f1a\u78b0\u5230\u9700\u8981\u591a\u4e2a\u5bb9\u5668\u76f8\u4e92\u914d\u5408\u6765\u5b8c\u6210\u67d0\u9879\u4efb\u52a1\u7684\u60c5\u51b5\u3002\u4f8b\u5982\u8981\u5b9e\u73b0\u4e00\u4e2a Web \u9879\u76ee\uff0c\u9664\u4e86 Web \u670d\u52a1\u5bb9\u5668\u672c\u8eab\uff0c\u5f80\u5f80\u8fd8\u9700\u8981\u518d\u52a0\u4e0a\u540e\u7aef\u7684\u6570\u636e\u5e93\u670d\u52a1\u5bb9\u5668\uff0c\u751a\u81f3\u8fd8\u5305\u62ec\u8d1f\u8f7d\u5747\u8861\u5bb9\u5668\u7b49\u3002 Compose \u521a\u597d\u53ef\u4ee5\u6ee1\u8db3\u8fd9\u6837\u7684\u9700\u6c42\u3002 Compose \u6709\u7740\u7528\u4e8e\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u6574\u4e2a\u751f\u547d\u5468\u671f\u7684\u5404\u79cd\u547d\u4ee4: \u542f\u52a8\u3001\u505c\u6b62\u548c\u91cd\u5efa\u670d\u52a1 \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u670d\u52a1\u7684\u72b6\u6001 \u5b9e\u65f6\u67e5\u770b\u8fd0\u884c\u670d\u52a1\u7684\u65e5\u5fd7\u8f93\u51fa \u4ec5\u6267\u884c\u4e00\u6b21\u547d\u4ee4\u5373\u53ef\u8fd0\u884c\u6574\u4e2a\u670d\u52a1","title":"1\u3001Docker Compose \u662f\u4ec0\u4e48"},{"location":"Docker/7-Docker-Compose/#2compose","text":"\u4f7f\u7528 Compose \u57fa\u672c\u4e0a\u6709\u4e09\u4e2a\u6b65\u9aa4: \u4f7f\u7528 Dockerfile \u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u7684\u73af\u5883\uff0c\u8fd9\u6837\u5b83\u5c31\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u590d\u5236\u3002 \u7528 docker-compose. yml \u5b9a\u4e49\u7ec4\u6210\u5e94\u7528\u7a0b\u5e8f\u7684\u670d\u52a1\uff0c\u4f7f\u5176\u53ef\u4ee5\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u73af\u5883\u4e2d\u4e00\u8d77\u8fd0\u884c\u3002 \u8fd0\u884c docker-Compose up \uff0cCompose \u542f\u52a8\u5e76\u8fd0\u884c\u60a8\u7684\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u3002","title":"2\u3001Compose \u4f7f\u7528\u6b65\u9aa4"},{"location":"Docker/7-Docker-Compose/#3-docker-compose","text":"\u4f7f\u7528 docker-compose \u60a8\u4e3b\u8981\u7684\u4efb\u52a1\u662f\u7f16\u5199 docker-compose.yml \u6587\u4ef6\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a WordPress \u7684 yaml \u6587\u4ef6\u6a21\u677f\uff1a version : '3' # \u5b9a\u4e49\u7248\u672c\uff0c\u4e0d\u6307\u5b9a\u9ed8\u8ba4\u4e3a\u7248\u672c 1 services : # \u5b9a\u4e49\u5bb9\u5668\uff0c\u5c31\u50cf docker run db : # \u5bb9\u5668\u540d\u79f0\uff0c\u4e5f\u662f network \u4e2d DNS \u540d\u79f0 image : mysql:5.7 # \u955c\u50cf\uff0c\u5982\u679c\u81ea\u5b9a\u4e49\u955c\u50cf\u53ef\u4ee5\u4e0d\u6307\u5b9a\u8fd9\u4e2a\u53c2\u6570\uff0c\u800c\u7528 build volumes : # \u5b9a\u4e49\u6570\u636e\u5377\uff0c\u7c7b\u4f3c -v - db_data:/var/lib/mysql - .:/lxl80 # \u6302\u8f7d\u5f53\u524d\u76ee\u5f55\u5230\u5bb9\u5668\u4e2d\u7684 /lxl80 \u76ee\u5f55 restart : always # \u7c7b\u4f3c --restart\u3002'no' \u9ed8\u8ba4\uff0c\u4e0d\u81ea\u52a8\u91cd\u542f\uff1balways \u603b\u662f\u81ea\u52a8\u91cd\u542f\uff1b on-failure \u5f53\u5931\u8d25\u65f6\u81ea\u52a8\u91cd\u542f\uff1bunless-stopped \u9664\u975e\u624b\u52a8\u505c\u6b62\uff0c\u5426\u8005\u4e00\u76f4\u91cd\u542f environment : # \u5b9a\u4e49\u73af\u5883\u53d8\u91cf\uff0c\u7c7b\u4f3c -e MYSQL_ROOT_PASSWORD : somewordpress MYSQL_DATABASE : wordpress MYSQL_USER : wordpress MYSQL_PASSWORD : wordpress wordpress : # \u7b2c\u4e8c\u4e2a\u5bb9\u5668 labels : # \u4e3a\u5bb9\u5668\u6dfb\u52a0 Docker \u5143\u6570\u636e\uff08metadata\uff09\u4fe1\u606f\u3002 cn.lixl.title : \"This label will appear on all containers for the web service\" depends_on : # \u5b9a\u4e49\u5bb9\u5668\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u542f\u52a8 wordpress \u65f6\u4f1a\u5148\u542f\u52a8 db - db image : wordpress:latest ports : # \u7aef\u53e3\uff0c\u7c7b\u4f3c -p - \"8000:80\" restart : always environment : WORDPRESS_DB_HOST : db:3306 WORDPRESS_DB_USER : wordpress WORDPRESS_DB_PASSWORD : wordpress volumes : # \u53ef\u9009\uff0c\u9700\u8981\u521b\u5efa\u7684\u6570\u636e\u5377\uff0c\u7c7b\u4f3c docker volume create db_data : networks : # \u53ef\u9009\uff0c\u9700\u8981\u521b\u5efa\u7684\u7f51\u7edc\uff0c\u7c7b\u4f3c docker network create","title":"3\u3001\u5178\u578b docker-compose \u6587\u4ef6\u793a\u4f8b"},{"location":"Docker/7-Docker-Compose/#compose","text":"","title":"\u4e8c\u3001Compose\u5b89\u88c5\u53ca\u5378\u8f7d"},{"location":"Docker/7-Docker-Compose/#1-compose","text":"Docker Desktop for Mac/Windows \u81ea\u5e26 docker-compose \u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5b89\u88c5 Docker \u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002 $ docker-compose --version docker-compose version 1 .24.1, build 4667896b \u5728 Linux \u4e0a\u7684\u4e5f\u5b89\u88c5\u5341\u5206\u7b80\u5355\uff0c\u4ece \u5b98\u65b9 GitHub Release \u5904\u76f4\u63a5\u4e0b\u8f7d\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u5373\u53ef\u3002 \u4f8b\u5982\uff0c\u5728 Linux 64 \u4f4d\u7cfb\u7edf\u4e0a\u76f4\u63a5\u4e0b\u8f7d\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u5305\u3002 sudo curl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose- ` uname -s ` - ` uname -m ` > /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose \u4e3a bash \u5b89\u88c5 \u547d\u4ee4\u8865\u5168 \u529f\u80fd\uff1a curl -L https://raw.githubusercontent.com/docker/compose/1.24.1/contrib/completion/bash/docker-compose > /etc/bash_completion.d/docker-compose","title":"1\u3001\u5b89\u88c5 Compose"},{"location":"Docker/7-Docker-Compose/#2-compose","text":"\u5982\u679c\u57fa\u4e8e curl \u5b89\u88c5\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5378\u8f7dDocker Compose \uff1a sudo rm /usr/local/bin/docker-compose \u5982\u679c\u57fa\u4e8e pip \u5b89\u88c5\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5378\u8f7dDocker Compose \uff1a pip uninstall docker-compose","title":"2\u3001\u5378\u8f7d Compose"},{"location":"Docker/7-Docker-Compose/#docker-compose_1","text":"","title":"\u4e09\u3001Docker Compose \u5165\u95e8"},{"location":"Docker/7-Docker-Compose/#_1","text":"Compose \u4e2d\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a \u670d\u52a1 ( service )\uff1a\u4e00\u4e2a\u5e94\u7528\u7684\u5bb9\u5668\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5305\u62ec\u82e5\u5e72\u8fd0\u884c\u76f8\u540c\u955c\u50cf\u7684\u5bb9\u5668\u5b9e\u4f8b\u3002 \u9879\u76ee ( project )\uff1a\u7531\u4e00\u7ec4\u5173\u8054\u7684\u5e94\u7528\u5bb9\u5668\u7ec4\u6210\u7684\u4e00\u4e2a\u5b8c\u6574\u4e1a\u52a1\u5355\u5143\uff0c\u5728 docker-compose.yml \u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002 \u53ef\u89c1\uff0c\u4e00\u4e2a\u9879\u76ee\u53ef\u4ee5\u7531\u591a\u4e2a\u670d\u52a1\uff08\u5bb9\u5668\uff09\u5173\u8054\u800c\u6210\uff0c Compose \u9762\u5411\u9879\u76ee\u8fdb\u884c\u7ba1\u7406\u3002","title":"\u5173\u952e\u672f\u8bed"},{"location":"Docker/7-Docker-Compose/#_2","text":"\u63a5\u4e0b\u6765\uff0c\u5c06\u6784\u5efa\u4e00\u4e2a\u8fd0\u884c\u5728 Docker Compose \u4e0a\u7684\u7b80\u5355 Python web \u5e94\u7528\u7a0b\u5e8f\u3002 \u8be5\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u4e86 Flask \u6846\u67b6\uff0c\u5e76\u5728 Redis \u7ef4\u62a4\u4e86\u4e00\u4e2a\u70b9\u51fb\u8ba1\u6570\u5668\u3002 \u9996\u9009\uff0c\u9700\u8981\u786e\u4fdd\u5df2\u7ecf\u5b89\u88c5\u4e86 Docker \u5f15\u64ce\u548c Docker Compose\u3002 \u4e0d\u9700\u8981\u5b89\u88c5 Python \u6216 Redis\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u7531 Docker \u955c\u50cf\u63d0\u4f9b\u7684\u3002","title":"\u793a\u4f8b\u5e94\u7528\u4ecb\u7ecd"},{"location":"Docker/7-Docker-Compose/#_3","text":"\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u7684\u4f9d\u8d56\u5173\u7cfb\uff1a 1\u3001\u4e3a\u9879\u76ee\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55\uff1a mkdir composetest cd composetest 2\u3001\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a app.py \u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a import time import redis from flask import Flask app = Flask ( __name__ ) cache = redis . Redis ( host = 'redis' , port = 6379 ) def get_hit_count (): retries = 5 while True : try : return cache . incr ( 'hits' ) except redis . exceptions . ConnectionError as exc : if retries == 0 : raise exc retries -= 1 time . sleep ( 0.5 ) @app . route ( '/' ) def hello (): count = get_hit_count () return 'Hello World! I have been seen {} times. \\n ' . format ( count ) \u5728\u672c\u4f8b\u4e2d\uff0credis \u662f\u5e94\u7528\u7a0b\u5e8f\u7f51\u7edc\u4e0a redis \u5bb9\u5668\u7684\u4e3b\u673a\u540d\u3002 \u8fd9\u91cc\u4f7f\u7528 Redis \u7684\u9ed8\u8ba4\u7aef\u53e3\uff0c6379\u3002 3\u3001\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u521b\u5efa\u53e6\u4e00\u4e2a\u53eb requirements.txt \u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a flask redis","title":"\u7b2c\u4e00\u6b65\uff1a\u8bbe\u7f6e"},{"location":"Docker/7-Docker-Compose/#dockerfile","text":"\u5728\u8fd9\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u5c06\u7f16\u5199\u4e00\u4e2a Dockerfile \u6765\u6784\u5efa\u4e00\u4e2a Docker \u955c\u50cf\u3002\u955c\u50cf\u5305\u542b Python \u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u6240\u6709\u4f9d\u8d56\u9879\uff0c\u5305\u62ec Python \u672c\u8eab\u3002 \u5728\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a Dockerfile \u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a FROM python:3.7-alpine WORKDIR /code ENV FLASK_APP app.py ENV FLASK_RUN_HOST 0 .0.0.0 RUN apk add --no-cache gcc musl-dev linux-headers COPY requirements.txt requirements.txt RUN pip install -r requirements.txt COPY . . CMD [ \"flask\" , \"run\" ] \u8fd9\u544a\u8bc9 Docker\uff1a \u57fa\u4e8e Python 3.7 \u955c\u50cf\u6784\u5efa \u5c06\u5de5\u4f5c\u76ee\u5f55\u8bbe\u7f6e\u4e3a /code \u8bbe\u7f6e flask \u547d\u4ee4\u4f7f\u7528\u7684\u73af\u5883\u53d8\u91cf \u5b89\u88c5 gcc\uff0c\u4ee5\u4fbf\u8bf8\u5982 MarkupSafe \u548c SQLAlchemy \u4e4b\u7c7b\u7684 Python \u5305\u53ef\u4ee5\u52a0\u901f\u7f16\u8bd1 \u590d\u5236 requirements.txt \u5e76\u5b89\u88c5 Python \u4f9d\u8d56\u9879 \u5c06\u4e3b\u673a\u4e0a\u7684\u9879\u76ee\u76ee\u5f55\uff08\u5f53\u524d\u76ee\u5f55\uff09\u590d\u5236\u5230\u955c\u50cf\u4e2d\u7684 . \u5de5\u4f5c\u76ee\u5f55 \u5c06\u5bb9\u5668\u7684\u9ed8\u8ba4\u547d\u4ee4\u8bbe\u7f6e\u4e3a flask run","title":"\u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa\u4e00\u4e2aDockerfile"},{"location":"Docker/7-Docker-Compose/#compose_1","text":"\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a docker-compose.yml \u7684\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a version : '3' services : web : build : . # \u76f8\u5f53\u4e8e docker build . ports : - \"5000:5000\" redis : image : \"redis:alpine\" \u6b64 Compose \u6587\u4ef6\u5b9a\u4e49\u4e86\u4e24\u4e2a\u670d\u52a1\uff1a web \u548c redis \u3002 web \u670d\u52a1\u4f7f\u7528\u4ece\u5f53\u524d\u76ee\u5f55\u4e2d\u7684 Dockerfile \u6784\u5efa\u7684\u6620\u50cf\u3002\u7136\u540e\u5c06\u5bb9\u5668\u548c\u4e3b\u673a\u7ed1\u5b9a\u5230\u516c\u5f00\u7aef\u53e3 5000\u3002 \u6b64\u793a\u4f8b\u670d\u52a1\u4f7f\u7528 Flask web \u670d\u52a1\u5668\u7684\u9ed8\u8ba4\u7aef\u53e35000\u3002 Redis \u670d\u52a1\u4f7f\u7528\u4ece dockerhub \u6ce8\u518c\u8868\u4e2d\u63d0\u53d6\u7684\u516c\u5171 Redis \u6620\u50cf\u3002","title":"\u7b2c\u4e09\u6b65\uff1a\u7528 Compose \u6587\u4ef6\u5b9a\u4e49\u670d\u52a1"},{"location":"Docker/7-Docker-Compose/#compose_2","text":"1\u3001\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u901a\u8fc7\u8fd0\u884c docker-compose up \u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\u3002 $ docker-compose up Creating network \"composetest_default\" with the default driver Creating composetest_web_1 ... Creating composetest_redis_1 ... Creating composetest_web_1 Creating composetest_redis_1 ... done Attaching to composetest_web_1, composetest_redis_1 web_1 | * Running on http://0.0.0.0:5000/ ( Press CTRL+C to quit ) redis_1 | 1 :C 17 Aug 22 :11:10.480 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo redis_1 | 1 :C 17 Aug 22 :11:10.480 # Redis version=4.0.1, bits=64, commit=00000000, modified=0, pid=1, just started redis_1 | 1 :C 17 Aug 22 :11:10.480 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf web_1 | * Restarting with stat redis_1 | 1 :M 17 Aug 22 :11:10.483 * Running mode = standalone, port = 6379 . redis_1 | 1 :M 17 Aug 22 :11:10.483 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128. web_1 | * Debugger is active! redis_1 | 1 :M 17 Aug 22 :11:10.483 # Server initialized redis_1 | 1 :M 17 Aug 22 :11:10.483 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled. web_1 | * Debugger PIN: 330 -787-903 redis_1 | 1 :M 17 Aug 22 :11:10.483 * Ready to accept connections Compose \u4f1a\u62c9\u53d6\u4e00\u4e2a Redis \u955c\u50cf\uff0c\u4e3a\u60a8\u7684\u4ee3\u7801\u6784\u5efa\u4e00\u4e2a\u955c\u50cf\uff0c\u5e76\u542f\u52a8\u60a8\u5b9a\u4e49\u7684\u670d\u52a1\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4ee3\u7801\u4f1a\u5728\u6784\u5efa\u65f6\u9759\u6001\u590d\u5236\u5230\u955c\u50cf\u4e2d\u3002 2\u3001\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:5000/ \uff0c\u67e5\u770b\u8be5\u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\u60c5\u51b5\u3002 \u60a8\u5e94\u8be5\u5728\u6d4f\u89c8\u5668\u4e2d\u770b\u5230\u4e00\u6761\u6d88\u606f\uff0c\u5185\u5bb9\u4e3a\uff1a Hello World! I have been seen 1 times. 3\u3001\u5237\u65b0\u9875\u9762\uff0c\u6570\u5b57\u5e94\u8be5\u4f1a\u9012\u589e\u3002 Hello World! I have been seen 2 times. 4\u3001\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u7ec8\u7aef\u7a97\u53e3\uff0c\u952e\u5165 docker image ls \u67e5\u770b\u672c\u5730\u955c\u50cf\u3002\u6b64\u65f6\u5217\u51fa\u7684\u955c\u50cf\u5e94\u8fd4\u56de redis \u548c composetest_web \u3002 5\u3001\u8981\u505c\u6b62\u5e94\u7528\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u5728\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4e2d\u8fdb\u5165\u9879\u76ee\u76ee\u5f55\u8fd0\u884c docker-compose stop \uff0c\u6216\u8005\u5728\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u539f\u59cb\u7ec8\u7aef\u4e2d\u6309 ctrl + c \u3002\u5982\u679c\u8981\u505c\u6b62\u5e76\u6e05\u9664\u6570\u636e\uff0c\u4ee5\u4fbf\u518d\u6b21\u542f\u52a8\u540e\u91cd\u65b0\u8ba1\u6570\uff0c\u53ef\u4ee5\u6267\u884c `docker-compose down \u3002","title":"\u7b2c\u56db\u6b65\uff1a\u7528 Compose \u6784\u5efa\u548c\u8fd0\u884c\u5e94\u7528"},{"location":"Docker/7-Docker-Compose/#compose_3","text":"\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u7f16\u8f91 docker-compose. yml \uff0c\u4e3a web \u670d\u52a1\u6dfb\u52a0\u4e00\u4e2a bind mount \uff1a 1 2 3 4 5 6 7 8 9 10 11 12 version : '3' services : web : build : . ports : - \"5000:5000\" volumes : - .:/code environment : FLASK_ENV : development redis : image : \"redis:alpine\" \u65b0\u589e\u52a0 volumes \u914d\u7f6e\uff0c\u5c06\u4e3b\u673a\u4e0a\u7684\u9879\u76ee\u76ee\u5f55\uff08\u5f53\u524d\u76ee\u5f55\uff09\u5b89\u88c5\u5230\u5bb9\u5668\u5185\u90e8\u7684 /code \u76ee\u5f55\uff0c\u4f7f\u60a8\u53ef\u4ee5\u5373\u65f6\u4fee\u6539\u4ee3\u7801\uff0c\u800c\u4e0d\u5fc5\u91cd\u5efa\u955c\u50cf\u3002\u65b0\u589e environment \u952e\u8bbe\u7f6e\u4e86 FLASK_ENV \u73af\u5883\u53d8\u91cf\uff0c\u6307\u793a flask run \u8981\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\u8fd0\u884c\u5e76\u5728\u66f4\u6539\u65f6\u91cd\u65b0\u52a0\u8f7d\u4ee3\u7801\u3002\u6b64\u6a21\u5f0f\u4ec5\u5e94\u5728\u5f00\u53d1\u4e2d\u4f7f\u7528\u3002","title":"\u7b2c\u4e94\u6b65\uff1a\u7f16\u8f91 Compose \u6587\u4ef6\u6dfb\u52a0\u6302\u8f7d"},{"location":"Docker/7-Docker-Compose/#_4","text":"\u4ece\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u5148\u8f93\u5165 docker-compose stop \u505c\u6b62\u8425\u4e1a\uff0c\u7136\u540e\u8f93\u5165 docker-Compose up \u4ee5\u6784\u5efa\u5e26\u6709\u66f4\u65b0\u7684 Compose \u6587\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u8fd0\u884c\u5b83\u3002 $ docker-compose stop Stopping composetest_web_1 ... done Stopping composetest_redis_1 ... done $ docker-compose up Recreating composetest_web_1 ... done Starting composetest_redis_1 ... done Attaching to composetest_redis_1, composetest_web_1 redis_1 | 1 :C 17 Apr 2020 02 :25:49.466 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo ...... web_1 | * Serving Flask app \"app.py\" ( lazy loading ) web_1 | * Environment: development web_1 | * Debug mode: on web_1 | * Running on http://0.0.0.0:5000/ ( Press CTRL+C to quit ) web_1 | * Restarting with stat web_1 | * Debugger is active! web_1 | * Debugger PIN: 143 -909-154 \u518d\u6b21\u68c0\u67e5\u6d4f\u89c8\u5668\u4e2d\u7684 Hello World \u63d0\u793a\u6d88\u606f\uff0c\u5e76\u5237\u65b0\u4ee5\u67e5\u770b\u8ba1\u6570\u589e\u91cf\u3002 \u5982\u679c\u51fa\u73b0\u8fd0\u884c\u65f6\u9519\u8bef\u6307\u793a\u627e\u4e0d\u5230\u5e94\u7528\u7a0b\u5e8f\u6587\u4ef6\uff0c\u62d2\u7edd\u5377\u5b89\u88c5\u6216\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\uff0c\u8bf7\u5c1d\u8bd5\u542f\u7528\u6587\u4ef6\u6216\u9a71\u52a8\u5668\u5171\u4eab\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 Docker for Mac \u4e0a\u7684 \u6587\u4ef6\u5171\u4eab \u7ae0\u8282\u3002","title":"\u7b2c\u516d\u6b65\uff1a\u91cd\u65b0\u6784\u5efa\u5e76\u8fd0\u884c"},{"location":"Docker/7-Docker-Compose/#_5","text":"\u56e0\u4e3a\u73b0\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u662f\u4f7f\u7528\u5377\u5b89\u88c5\u5230\u5bb9\u5668\u4e2d\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u5bf9\u4ee3\u7801\u8fdb\u884c\u66f4\u6539\u5e76\u7acb\u5373\u751f\u6548\uff0c\u800c\u65e0\u9700\u91cd\u5efa\u955c\u50cf\u3002 \u66f4\u6539 app.py \u4e2d\u7684\u63d0\u793a\u8bed\u5e76\u4fdd\u5b58\u3002\u4f8b\u5982\uff0c\u5c06 Hello World! \u66f4\u6539\u4e3a Hello from Docker! \uff1a return 'Hello from Docker! I have been seen {} times. \\n ' . format ( count ) \u5728\u6d4f\u89c8\u5668\u4e2d\u5237\u65b0\u5e94\u7528\u3002\u4f1a\u53d1\u73b0\u63d0\u793a\u8bed\u5df2\u66f4\u65b0\uff0c\u5e76\u4e14\u8ba1\u6570\u5668\u4ecd\u5728\u589e\u52a0\u3002","title":"\u7b2c\u4e03\u6b65\uff1a\u66f4\u65b0\u5e94\u7528\u7a0b\u5e8f"},{"location":"Docker/7-Docker-Compose/#_6","text":"\u5982\u679c\u8981\u8ba9\u670d\u52a1\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u53ef\u4ee5\u5c06 -d \u53c2\u6570\uff08\u7528\u4e8e\u201c\u5206\u79bb\u201d\u6a21\u5f0f\uff09\u4f20\u9012\u7ed9 docker-compose up \uff0c\u5e76\u7528 docker-compose ps \u67e5\u770b\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u5185\u5bb9\uff1a $ docker-compose up -d Starting composetest_web_1 ... done Starting composetest_redis_1 ... done $ docker-compose ps Name Command State Ports ------------------------------------------------------------------------------------- composetest_redis_1 docker-entrypoint.sh redis ... Up 6379 /tcp composetest_web_1 flask run Up 0 .0.0.0:5000->5000/tcp docker-compose run \u547d\u4ee4\u5141\u8bb8\u4e3a\u670d\u52a1\u8fd0\u884c\u4e00\u6b21\u6027\u547d\u4ee4\u3002 \u4f8b\u5982\uff0c\u67e5\u770b web \u670d\u52a1\u53ef\u7528\u7684\u73af\u5883\u53d8\u91cf\uff1a $ docker-compose run web env PATH = /usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin HOSTNAME = 4b3f1e39dc5d ...... FLASK_APP = app.py FLASK_RUN_HOST = 0 .0.0.0 HOME = /root \u8bf7\u53c2\u9605 docker-compose --help \u4ee5\u67e5\u770b\u5176\u4ed6\u53ef\u7528\u547d\u4ee4\u3002\u60a8\u8fd8\u53ef\u4ee5\u4e3a bash \u548c zsh shell \u5b89\u88c5 \u547d\u4ee4\u8865\u5168 \u529f\u80fd\uff0c\u8fd9\u5c06\u5c06\u81ea\u52a8\u63d0\u793a\u53ef\u7528\u7684\u547d\u4ee4\u3002","title":"\u7b2c\u516b\u6b65\uff1a\u5c1d\u8bd5\u5176\u5b83\u547d\u4ee4"},{"location":"Docker/7-Docker-Compose/#compose_4","text":"Todo","title":"\u56db\u3001Compose \u8fdb\u9636"},{"location":"Docker/7-Docker-Compose/#_7","text":"docs.docker.com","title":"\u53c2\u8003"},{"location":"Docker/7-Docker-Compose/#_8","text":"\u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516d\uff09\uff1a\u57fa\u4e8e\u591a\u9636\u6bb5\u6784\u5efa\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef\u964d\u4f4e\u590d\u6742\u5ea6 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516b\uff09\uff1aDocker \u5e38\u7528\u547d\u4ee4\u53ca\u793a\u4f8b","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/8-Command/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e8c\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e03\uff09\uff1aDocker Compose \u5165\u95e8\u53ca\u5b9e\u8df5 \u5e38\u7528\u547d\u4ee4\u5217\u8868 \u00b6 \u4e00\u5f20\u56fe\u603b\u7ed3 Docker \u5e38\u7528\u547d\u4ee4\u53ca\u72b6\u6001\u53d8\u5316\uff1a \u53ef\u4ee5\u901a\u8fc7 docker COMMAND --help \u6765\u67e5\u770b\u8fd9\u4e9b\u547d\u4ee4\u7684\u5177\u4f53\u7528\u6cd5\u3002 attach \uff1a\u4f9d\u9644\u5230\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u4e2d\uff1b build \uff1a\u4ece\u4e00\u4e2a Dockerfile \u521b\u5efa\u4e00\u4e2a\u955c\u50cf\uff1b commit \uff1a\u4ece\u4e00\u4e2a\u5bb9\u5668\u7684\u4fee\u6539\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\uff1b cp \uff1a\u5728\u5bb9\u5668\u548c\u672c\u5730\u5bbf\u4e3b\u7cfb\u7edf\u4e4b\u95f4\u590d\u5236\u6587\u4ef6\u4e2d\uff1b create \uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bb9\u5668\uff0c\u4f46\u5e76\u4e0d\u8fd0\u884c\u5b83\uff1b diff \uff1a\u68c0\u67e5\u4e00\u4e2a\u5bb9\u5668\u5185\u6587\u4ef6\u7cfb\u7edf\u7684\u4fee\u6539\uff0c\u5305\u62ec\u4fee\u6539\u548c\u589e\u52a0\uff1b events \uff1a\u4ece\u670d\u52a1\u7aef\u83b7\u53d6\u5b9e\u65f6\u7684\u4e8b\u4ef6\uff1b exec \uff1a\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u5185\u6267\u884c\u547d\u4ee4\uff1b export \uff1a\u5bfc\u51fa\u5bb9\u5668\u5185\u5bb9\u4e3a\u4e00\u4e2a tar \u5305\uff1b history \uff1a\u663e\u793a\u4e00\u4e2a\u955c\u50cf\u7684\u5386\u53f2\u4fe1\u606f\uff1b images \uff1a\u5217\u51fa\u5b58\u5728\u7684\u955c\u50cf\uff1b import \uff1a\u5bfc\u5165\u4e00\u4e2a\u6587\u4ef6\uff08\u5178\u578b\u4e3a tar \u5305\uff09\u8def\u5f84\u6216\u76ee\u5f55\u6765\u521b\u5efa\u4e00\u4e2a\u672c\u5730\u955c\u50cf\uff1b info \uff1a\u663e\u793a\u4e00\u4e9b\u76f8\u5173\u7684\u7cfb\u7edf\u4fe1\u606f\uff1b inspect \uff1a\u663e\u793a\u4e00\u4e2a\u5bb9\u5668\u7684\u5177\u4f53\u914d\u7f6e\u4fe1\u606f\uff1b kill \uff1a\u5173\u95ed\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 (\u5305\u62ec\u8fdb\u7a0b\u548c\u6240\u6709\u76f8\u5173\u8d44\u6e90)\uff1b load \uff1a\u4ece\u4e00\u4e2a tar \u5305\u4e2d\u52a0\u8f7d\u4e00\u4e2a\u955c\u50cf\uff1b login \uff1a\u6ce8\u518c\u6216\u767b\u5f55\u5230\u4e00\u4e2a Docker \u7684\u4ed3\u5e93\u670d\u52a1\u5668\uff1b logout \uff1a\u4ece Docker \u7684\u4ed3\u5e93\u670d\u52a1\u5668\u767b\u51fa\uff1b logs \uff1a\u83b7\u53d6\u5bb9\u5668\u7684 log \u4fe1\u606f\uff1b network \uff1a\u7ba1\u7406 Docker \u7684\u7f51\u7edc\uff0c\u5305\u62ec\u67e5\u770b\u3001\u521b\u5efa\u3001\u5220\u9664\u3001\u6302\u8f7d\u3001\u5378\u8f7d\u7b49\uff1b node \uff1a\u7ba1\u7406 swarm \u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\uff0c\u5305\u62ec\u67e5\u770b\u3001\u66f4\u65b0\u3001\u5220\u9664\u3001\u63d0\u5347/\u53d6\u6d88\u7ba1\u7406\u8282\u70b9\u7b49\uff1b pause \uff1a\u6682\u505c\u4e00\u4e2a\u5bb9\u5668\u4e2d\u7684\u6240\u6709\u8fdb\u7a0b\uff1b port \uff1a\u67e5\u627e\u4e00\u4e2a nat \u5230\u4e00\u4e2a\u79c1\u6709\u7f51\u53e3\u7684\u516c\u5171\u53e3\uff1b ps \uff1a\u5217\u51fa\u4e3b\u673a\u4e0a\u7684\u5bb9\u5668\uff1b pull \uff1a\u4ece\u4e00\u4e2a Docker \u7684\u4ed3\u5e93\u670d\u52a1\u5668\u4e0b\u62c9\u4e00\u4e2a\u955c\u50cf\u6216\u4ed3\u5e93\uff1b push \uff1a\u5c06\u4e00\u4e2a\u955c\u50cf\u6216\u8005\u4ed3\u5e93\u63a8\u9001\u5230\u4e00\u4e2a Docker \u7684\u6ce8\u518c\u670d\u52a1\u5668\uff1b rename \uff1a\u91cd\u547d\u540d\u4e00\u4e2a\u5bb9\u5668\uff1b restart \uff1a\u91cd\u542f\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\uff1b rm \uff1a\u5220\u9664\u7ed9\u5b9a\u7684\u82e5\u5e72\u4e2a\u5bb9\u5668\uff1b rmi \uff1a\u5220\u9664\u7ed9\u5b9a\u7684\u82e5\u5e72\u4e2a\u955c\u50cf\uff1b run \uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bb9\u5668\uff0c\u5e76\u5728\u5176\u4e2d\u8fd0\u884c\u7ed9\u5b9a\u547d\u4ee4\uff1b save \uff1a\u4fdd\u5b58\u4e00\u4e2a\u955c\u50cf\u4e3a tar \u5305\u6587\u4ef6\uff1b search \uff1a\u5728 Docker index \u4e2d\u641c\u7d22\u4e00\u4e2a\u955c\u50cf\uff1b service \uff1a\u7ba1\u7406 Docker \u6240\u542f\u52a8\u7684\u5e94\u7528\u670d\u52a1\uff0c\u5305\u62ec\u521b\u5efa\u3001\u66f4\u65b0\u3001\u5220\u9664\u7b49\uff1b start \uff1a\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff1b stats \uff1a\u76d1\u63a7\u5bb9\u5668\u7684 CPU \u5229\u7528\u7387\u3001\u5185\u5b58\u4f7f\u7528\u91cf\u3001\u7f51\u7edc IO \u603b\u91cf\u4ee5\u53ca\u78c1\u76d8 IO \u603b\u91cf\u7b49\u4fe1\u606f\uff1b stop \uff1a\u7ec8\u6b62\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\uff1b swarm \uff1a\u7ba1\u7406 Docker swarm \u96c6\u7fa4\uff0c\u5305\u62ec\u521b\u5efa\u3001\u52a0\u5165\u3001\u9000\u51fa\u3001\u66f4\u65b0\u7b49\uff1b tag \uff1a\u4e3a\u4e00\u4e2a\u955c\u50cf\u6253\u6807\u7b7e\uff1b top \uff1a\u67e5\u770b\u4e00\u4e2a\u5bb9\u5668\u4e2d\u7684\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u4fe1\u606f\uff1b unpause \uff1a\u5c06\u4e00\u4e2a\u5bb9\u5668\u5185\u6240\u6709\u7684\u8fdb\u7a0b\u4ece\u6682\u505c\u72b6\u6001\u4e2d\u6062\u590d\uff1b update \uff1a\u66f4\u65b0\u6307\u5b9a\u7684\u82e5\u5e72\u5bb9\u5668\u7684\u914d\u7f6e\u4fe1\u606f\uff1b version \uff1a\u8f93\u51fa Docker \u7684\u7248\u672c\u4fe1\u606f\uff1b volume \uff1a\u7ba1\u7406 Docker volume\uff0c\u5305\u62ec\u67e5\u770b\u3001\u521b\u5efa\u3001\u5220\u9664\u7b49\uff1b wait \uff1a\u963b\u585e\u76f4\u5230\u4e00\u4e2a\u5bb9\u5668\u7ec8\u6b62\uff0c\u7136\u540e\u8f93\u51fa\u5b83\u7684\u9000\u51fa\u7b26\u3002 \u64cd\u4f5c\u793a\u4f8b \u00b6 \u67e5\u770b Docker \u7248\u672c\u548c\u7cfb\u7edf\u4fe1\u606f \u00b6 \u65e0\u8bba\u662f\u5728\u672c\u5730\u8fd8\u662f\u4e91\u7aef\uff0c\u6211\u4eec\u90fd\u9700\u8981\u68c0\u67e5 Docker \u7248\u672c\u548c\u7cfb\u7edf\u4fe1\u606f\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u627e\u5230 Docker \u7248\u672c\uff1a docker version Client: Version: 18 .03.0-ce API version: 1 .37 Go version: go1.9.4 Git commit: 0520e24 Built: Wed Mar 21 23 :06:22 2018 OS/Arch: darwin/amd64 Experimental: false Orchestrator: swarm Server: Engine: Version: 18 .03.0-ce API version: 1 .37 ( minimum version 1 .12 ) Go version: go1.9.4 Git commit: 0520e24 Built: Wed Mar 21 23 :14:32 2018 OS/Arch: linux/amd64 Experimental: true \u53e6\u4e00\u4e2a\u91cd\u8981\u547d\u4ee4\u662f docker info\uff1a docker info Containers: 0 Running: 0 Paused: 0 Stopped: 0 Images: 0 Server Version: 18 .03.0-ce Storage Driver: overlay2 Backing Filesystem: extfs Supports d_type: true Native Overlay Diff: true Logging Driver: json-file Cgroup Driver: cgroupfs Plugins: Volume: local Network: bridge host ipvlan macvlan null overlay Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog \u2026 \u8be5\u547d\u4ee4\u5c06\u663e\u793a\u90e8\u5206\u8bbe\u5907\u4fe1\u606f\uff0c\u6bd4\u5982\u670d\u52a1\u5668\u7248\u672c\u3001\u5b58\u50a8\u9a71\u52a8\u7a0b\u5e8f\u3001\u5185\u6838\u7248\u672c\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u603b\u5185\u5b58\u7b49\u3002\u5f53\u5c1d\u8bd5\u4e3a\u5f53\u524d Docker \u5b89\u88c5\u542f\u52a8\u65b0\u8d44\u6e90\u6216\u5c1d\u8bd5\u627e\u51fa\u7cfb\u7edf\u7ea7\u8d44\u6e90\u5206\u914d\u95ee\u9898\u65f6\uff0c\u8fd9\u4e9b\u4fe1\u606f\u975e\u5e38\u6709\u7528\uff0c\u8fd9\u4e5f\u662f\u68c0\u67e5\u8fd0\u884c\u3001\u505c\u6b62\u5bb9\u5668\u6570\u91cf\u53ca\u4e0b\u8f7d\u955c\u50cf\u6570\u91cf\u7684\u5feb\u901f\u65b9\u6cd5\u3002 \u641c\u7d22\u4e0b\u8f7d Docker \u955c\u50cf \u00b6 \u53ef\u4ee5\u4f7f\u7528 docker search \u547d\u4ee4\u5728 Docker Hub \u641c\u7d22\u5df2\u6709\u955c\u50cf\uff1a docker search ubuntu NAME DESCRIPTION STARS OFFICIAL AUTOMATED ubuntu Ubuntu is a Debian-based Linux operating sys\u2026 7861 [ OK ] dorowu/ubuntu-desktop-lxde-vnc Ubuntu with openssh-server and NoVNC 190 [ OK ] rastasheep/ubuntu-sshd Dockerized SSH service, built on top of offi\u2026 156 [ OK ] ansible/ubuntu14.04-ansible Ubuntu 14 .04 LTS with ansible 93 [ OK ] ubuntu-upstart Upstart is an event-based replacement for th\u2026 87 [ OK ] neurodebian NeuroDebian provides neuroscience research s\u2026 50 [ OK ] \u2026 \u4ee5\u4e0a\u5bf9 ubuntu \u7684\u641c\u7d22\u663e\u793a\u53ef\u7528\u955c\u50cf\u3001\u63cf\u8ff0\u548c\u5b98\u65b9\u72b6\u6001\u7b49\u4fe1\u606f\u3002\u5982\u679c\u8981\u4e0b\u8f7d ubuntu \u955c\u50cf\uff0c\u53ef\u4ee5\u4f7f\u7528 docker pull \u547d\u4ee4\uff1a docker pull ubuntu Using default tag: latest latest: Pulling from library/ubuntu 6b98dfc16071: Pull complete 4001a1209541: Pull complete 6319fc68c576: Pull complete b24603670dc3: Pull complete 97f170c87c6f: Pull complete Digest: sha256:5f4bdc3467537cbbe563e80db2c3ec95d548a9145d64453b06939c4592d67b6d Status: Downloaded newer image for ubuntu:latest $ Docker \u955c\u50cf \u00b6 \u4f7f\u7528 docker info \u547d\u4ee4\u67e5\u627e\u62e5\u6709\u955c\u50cf\u6570\u91cf\uff1a docker info Containers: 0 Running: 0 Paused: 0 Stopped: 0 Images: 1 \u2026 docker images \u547d\u4ee4\u53ef\u8be6\u7ec6\u5217\u51fa\u62e5\u6709\u955c\u50cf\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu latest 113a43faa138 2 weeks ago 81 .2MB \u5047\u8bbe\u4e0b\u8f7d NGINX \u955c\u50cf\uff0c\u53ef\u4ee5\u8fd0\u884c docker pull \u547d\u4ee4\uff1a docker pull nginx \u5982\u679c\u68c0\u67e5 Docker \u955c\u50cf\uff0c\u4f1a\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u5982\u679c\u5bfb\u627e Ubuntu 16.04 \u7248\u672c\uff0c\u53ef\u4f7f\u7528 16.04 \u6807\u7b7e\u4e0b\u8f7d\u7279\u5b9a\u7248\u672c\uff1a docker pull ubuntu:16.04 \u968f\u540e\uff0c\u5c06\u51fa\u73b0\u4e24\u4e2a Ubuntu \u6620\u50cf\u7248\u672c\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu 16 .04 5e8b97a2a082 2 weeks ago 114MB ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u6ce8\u610f\uff1a\u65e0\u9700\u6ce8\u518c Docker Hub \u5373\u53ef\u63d0\u53d6\u955c\u50cf\u3002\u5982\u679c\u60f3\u5c06\u955c\u50cf\u63a8\u9001\u5230 Docker Hub\uff0c\u9700\u8981\u6ce8\u518c\u7136\u540e\u4f7f\u7528 docker login \u547d\u4ee4\u767b\u5f55\uff1a docker login --username = yourhubusername --email = youremail@company.com \u8fd0\u884c Docker \u5bb9\u5668 \u00b6 \u5047\u8bbe\u60f3\u5728 docker \u4e0a\u8fd0\u884c NGINX \u670d\u52a1\u5668\uff0c\u53ef\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a docker run -p 8080 :80 nginx \u5982\u679c\u5df2\u7528 run \u547d\u4ee4\u4ece Docker Hub \u63d0\u53d6 nginx \u6620\u50cf\u521b\u5efa NGINX \u5bb9\u5668\u3002 -p 8080:80 \u4f1a\u544a\u8bc9 Docker \u5c06 localhost \u7aef\u53e3 8080 \u6620\u5c04\u5230 Docker \u5bb9\u5668\u7aef\u53e3 80\uff0c\u5e94\u8be5\u80fd\u591f\u4ece http://localhost:8080 \u8bbf\u95ee NGINX \u670d\u52a1\u5668\u3002 NGINX \u5bb9\u5668\u5df2\u9644\u52a0\u5230\u547d\u4ee4\u884c\u3002\u5982\u679c\u9000\u51fa\u547d\u4ee4\u884c\uff0c\u5bb9\u5668\u5c06\u4f1a\u505c\u6b62\uff0c\u53ef\u4f7f\u7528 detach\uff08\u2019- d\uff09\u542f\u52a8 NGINX \u5bb9\u5668\uff0c\u8fd9\u6837\u5373\u4f7f\u9000\u51fa\u547d\u4ee4\u884c\u4e5f\u53ef\u7ee7\u7eed\u8fd0\u884c\u3002 docker run -p 8080 :80 -d nginx \u4ee5\u4e0a\u547d\u4ee4\u5c06\u4ee5\u5206\u79bb\u6a21\u5f0f\u542f\u52a8\u5bb9\u5668\u5e76\u8fd4\u56de\u547d\u4ee4\u884c\u3002 docker run \u547d\u4ee4\u683c\u5f0f\uff1a Usage: docker run [ OPTIONS ] IMAGE [ COMMAND ] [ ARG... ] -a, --attach =[] #\u767b\u5f55\u5bb9\u5668\uff08\u4ee5docker run -d\u542f\u52a8\u7684\u5bb9\u5668\uff09 -c, --cpu-shares = 0 #\u8bbe\u7f6e\u5bb9\u5668CPU\u6743\u91cd\uff0c\u5728CPU\u5171\u4eab\u573a\u666f\u4f7f\u7528 --cap-add =[] #\u6dfb\u52a0\u6743\u9650\uff0c\u6743\u9650\u6e05\u5355\u8be6\u89c1\uff1ahttp://linux.die.net/man/7/capabilities --cap-drop =[] #\u5220\u9664\u6743\u9650\uff0c\u6743\u9650\u6e05\u5355\u8be6\u89c1\uff1ahttp://linux.die.net/man/7/capabilities --cidfile = \"\" #\u8fd0\u884c\u5bb9\u5668\u540e\uff0c\u5728\u6307\u5b9a\u6587\u4ef6\u4e2d\u5199\u5165\u5bb9\u5668PID\u503c\uff0c\u4e00\u79cd\u5178\u578b\u7684\u76d1\u63a7\u7cfb\u7edf\u7528\u6cd5 --cpuset = \"\" #\u8bbe\u7f6e\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9bCPU\uff0c\u6b64\u53c2\u6570\u53ef\u4ee5\u7528\u6765\u5bb9\u5668\u72ec\u5360CPU -d, --detach = false #\u6307\u5b9a\u5bb9\u5668\u8fd0\u884c\u4e8e\u524d\u53f0\u8fd8\u662f\u540e\u53f0 --device =[] #\u6dfb\u52a0\u4e3b\u673a\u8bbe\u5907\u7ed9\u5bb9\u5668\uff0c\u76f8\u5f53\u4e8e\u8bbe\u5907\u76f4\u901a --dns =[] #\u6307\u5b9a\u5bb9\u5668\u7684dns\u670d\u52a1\u5668 --dns-search =[] #\u6307\u5b9a\u5bb9\u5668\u7684dns\u641c\u7d22\u57df\u540d\uff0c\u5199\u5165\u5230\u5bb9\u5668\u7684/etc/resolv.conf\u6587\u4ef6 -e, --env =[] #\u6307\u5b9a\u73af\u5883\u53d8\u91cf\uff0c\u5bb9\u5668\u4e2d\u53ef\u4ee5\u4f7f\u7528\u8be5\u73af\u5883\u53d8\u91cf --entrypoint = \"\" #\u8986\u76d6image\u7684\u5165\u53e3\u70b9 --env-file =[] #\u6307\u5b9a\u73af\u5883\u53d8\u91cf\u6587\u4ef6\uff0c\u6587\u4ef6\u683c\u5f0f\u4e3a\u6bcf\u884c\u4e00\u4e2a\u73af\u5883\u53d8\u91cf --expose =[] #\u6307\u5b9a\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3\uff0c\u5373\u4fee\u6539\u955c\u50cf\u7684\u66b4\u9732\u7aef\u53e3 -h, --hostname = \"\" #\u6307\u5b9a\u5bb9\u5668\u7684\u4e3b\u673a\u540d -i, --interactive = false #\u6253\u5f00STDIN\uff0c\u7528\u4e8e\u63a7\u5236\u53f0\u4ea4\u4e92 --link =[] #\u6307\u5b9a\u5bb9\u5668\u95f4\u7684\u5173\u8054\uff0c\u4f7f\u7528\u5176\u4ed6\u5bb9\u5668\u7684IP\u3001env\u7b49\u4fe1\u606f --lxc-conf =[] #\u6307\u5b9a\u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u53ea\u6709\u5728\u6307\u5b9a--exec-driver=lxc\u65f6\u4f7f\u7528 -m, --memory = \"\" #\u6307\u5b9a\u5bb9\u5668\u7684\u5185\u5b58\u4e0a\u9650 --name = \"\" #\u6307\u5b9a\u5bb9\u5668\u540d\u5b57\uff0c\u540e\u7eed\u53ef\u4ee5\u901a\u8fc7\u540d\u5b57\u8fdb\u884c\u5bb9\u5668\u7ba1\u7406\uff0clinks\u7279\u6027\u9700\u8981\u4f7f\u7528\u540d\u5b57 --net = \"bridge\" #\u5bb9\u5668\u7f51\u7edc\u8bbe\u7f6e\uff0c\u5f85\u8be6\u8ff0 -P, --publish-all = false #\u6307\u5b9a\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3\uff0c\u5f85\u8be6\u8ff0 -p, --publish =[] #\u6307\u5b9a\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3\uff0c\u5f85\u8be6\u8ff0 --privileged = false #\u6307\u5b9a\u5bb9\u5668\u662f\u5426\u4e3a\u7279\u6743\u5bb9\u5668\uff0c\u7279\u6743\u5bb9\u5668\u62e5\u6709\u6240\u6709\u7684capabilities --restart = \"\" #\u6307\u5b9a\u5bb9\u5668\u505c\u6b62\u540e\u7684\u91cd\u542f\u7b56\u7565\uff0c\u5f85\u8be6\u8ff0 --rm = false #\u6307\u5b9a\u5bb9\u5668\u505c\u6b62\u540e\u81ea\u52a8\u5220\u9664\u5bb9\u5668(\u4e0d\u652f\u6301\u4ee5docker run -d\u542f\u52a8\u7684\u5bb9\u5668) --sig-proxy = true #\u8bbe\u7f6e\u7531\u4ee3\u7406\u63a5\u53d7\u5e76\u5904\u7406\u4fe1\u53f7\uff0c\u4f46\u662fSIGCHLD\u3001SIGSTOP\u548cSIGKILL\u4e0d\u80fd\u88ab\u4ee3\u7406 -t, --tty = false #\u5206\u914dtty\u8bbe\u5907\uff0c\u8be5\u53ef\u4ee5\u652f\u6301\u7ec8\u7aef\u767b\u5f55 -u, --user = \"\" #\u6307\u5b9a\u5bb9\u5668\u7684\u7528\u6237 -v, --volume =[] #\u7ed9\u5bb9\u5668\u6302\u8f7d\u5b58\u50a8\u5377\uff0c\u6302\u8f7d\u5230\u5bb9\u5668\u7684\u67d0\u4e2a\u76ee\u5f55 --volumes-from =[] #\u7ed9\u5bb9\u5668\u6302\u8f7d\u5176\u4ed6\u5bb9\u5668\u4e0a\u7684\u5377\uff0c\u6302\u8f7d\u5230\u5bb9\u5668\u7684\u67d0\u4e2a\u76ee\u5f55 -w, --workdir = \"\" #\u6307\u5b9a\u5bb9\u5668\u7684\u5de5\u4f5c\u76ee\u5f55 \u5217\u51fa Docker \u5bb9\u5668 \u00b6 docker ps \u547d\u4ee4\u5141\u8bb8\u67e5\u627e\u6b63\u5728\u8fd0\u884c\u7684\u6240\u6709\u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 7 minutes ago Up 7 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u5982\u4e0a\u663e\u793a\u5bb9\u5668\u7684\u5404\u79cd\u5c5e\u6027\uff0c\u53ef\u4ee5\u770b\u5230\u662f\u4ece nginx \u955c\u50cf\u521b\u5efa\u5e76\u663e\u793a\u7aef\u53e3\u8f6c\u53d1\u4fe1\u606f\u3002CONTAINER ID \u548c NAMES \u5c5e\u6027\u9700\u8981\u7279\u522b\u63d0\u53ca\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0a\u8ff0\u4e24\u5927\u5c5e\u6027\u552f\u4e00\u6807\u8bc6\u5bb9\u5668\u3002\u4e8c\u8005\u90fd\u53ef\u81ea\u52a8\u751f\u6210\uff0c\u4f46\u4e5f\u53ef\u5728\u5bb9\u5668\u521b\u5efa\u8fc7\u7a0b\u4e2d\u4e3a\u5bb9\u5668\u547d\u540d\u3002 \u521b\u5efa\u4e00\u4e2a\u540d\u4e3a my_nginx \u7684 NGINX \u5bb9\u5668\uff1a docker run --name my_nginx -p 8888 :80 -d nginx \u518d\u6b21\u5217\u51fa\u6240\u6709 Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e7b19b6ad778 nginx \"nginx -g 'daemon of\u2026\" About a minute ago Up About a minute 0 .0.0.0:8888->80/tcp my_nginx 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 15 minutes ago Up 16 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u8bf7\u6ce8\u610f\uff0c\u65b0\u5bb9\u5668\u7684\u540d\u79f0\u4e3a\u201cmy_nginx\u201d\u3002 \u5904\u7406\u5927\u91cf\u5bb9\u5668\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u540d\u7ea6\u5b9a\uff0c\u8fd9\u53ef\u4ee5\u66f4\u597d\u5f97\u7ec4\u7ec7\u5bb9\u5668\u3002 docker ps \u547d\u4ee4\u4ec5\u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u3002\u5982\u679c\u5bf9\u4e0a\u8ff0\u60c5\u51b5\u4f7f\u7528 docker info \u547d\u4ee4\uff1a docker info Containers: 2 Running: 2 Paused: 0 Stopped: 0 Images: 3 \u53ef\u4ee5\u770b\u5230\u6709\u4e24\u4e2a\u5bb9\u5668\u6b63\u5728\u8fd0\u884c\uff0c\u5982\u679c\u4e00\u4e2a\u6682\u505c\u6216\u5df2\u505c\u6b62\uff0c\u5219\u4e0d\u4f1a\u4ec5\u4f7f\u7528 docker ps \u547d\u4ee4\u67e5\u770b\u8fd9\u4e9b\u5bb9\u5668\uff0c\u5fc5\u987b\u4f7f\u7528 all\uff08 - a\uff09\u9009\u9879\uff1a docker ps -a \u542f\u52a8\uff0c\u505c\u6b62\uff0c\u91cd\u542f\u548c\u6740\u6b7b\u5bb9\u5668 \u00b6 \u5047\u8bbe\u8981\u505c\u6b62\u2019my_nginx\u2019\u5bb9\u5668\uff0c\u53ef\u4f7f\u7528 CONTAINER ID \u6216 NAME\u3002 docker stop my_nginx my_nginx \u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 27 minutes ago Up 27 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e7b19b6ad778 nginx \"nginx -g 'daemon of\u2026\" 12 minutes ago Exited ( 0 ) About a minute ago my_nginx 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 27 minutes ago Up 27 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u5982\u679c\u5728\u6ca1\u6709 -a \u9009\u9879\u7684\u60c5\u51b5\u4e0b\u8fd0\u884c docker ps\uff0c\u53ea\u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u3002\u5728\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u770b\u5230\u2019my_nginx\u2019\u5bb9\u5668\u5904\u4e8e\u9000\u51fa\u72b6\u6001\u3002 \u8ba9\u6211\u4eec docker start \u5bb9\u5668\uff1a docker start my_nginx my_nginx \u68c0\u67e5 Docker \u5bb9\u5668\u5217\u8868\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e7b19b6ad778 nginx \"nginx -g 'daemon of\u2026\" 16 minutes ago Up 29 seconds 0 .0.0.0:8888->80/tcp my_nginx 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 30 minutes ago Up 30 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u53ef\u4ee5\u770b\u5230 STATUS \u663e\u793a\u5bb9\u5668\u2019my_nginx\u2019\u518d\u6b21\u88ab\u542f\u52a8\u3002 \u5982\u679c\u7531\u4e8e\u67d0\u4e9b\u95ee\u9898\u800c\u9700\u91cd\u542f\u5bb9\u5668\uff0c\u5219\u53ef\u4f7f\u7528 restart \u547d\u4ee4\uff0c\u8fd9\u6bd4\u5355\u72ec\u505c\u6b62\u548c\u542f\u52a8\u5bb9\u5668\u901f\u5ea6\u66f4\u5feb\uff1a docker restart my_nginx \u53ef\u4ee5\u50cf\u8fdb\u7a0b\u4e00\u6837\u7ec8\u6b62 docker \u5bb9\u5668\uff0c\u6bd4\u5982\u7ec8\u6b62 my_nginx \u5bb9\u5668\uff1a docker kill my_nginx \u518d\u6b21\u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e7b19b6ad778 nginx \"nginx -g 'daemon of\u2026\" 22 minutes ago Exited ( 137 ) 7 seconds ago my_nginx 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 36 minutes ago Up 36 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u5bb9\u5668 my_nginx \u672a\u8fd0\u884c\u3002\u6b64\u5916\uff0c\u53ef\u5728\u4fe1\u606f\u4e2d\u770b\u5230\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u548c\u4e00\u4e2a\u5df2\u505c\u6b62\u5bb9\u5668\uff1a docker info Containers: 2 Running: 1 Paused: 0 Stopped: 1 Images: 3 \u2026 Docker Exec Bash \u548c Docker SSH \u00b6 \u5982\u679c\u9700\u8981\u4e0e shell \u8fdb\u884c\u4ea4\u4e92\u4ee5\u521b\u5efa\u670d\u52a1\u6216\u89e3\u51b3\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528 docker exec \u547d\u4ee4\u521b\u5efa\u4ea4\u4e92\u5f0f shell\u3002\u6bd4\u5982\uff0c\u7528 bash shell \u4ece ubuntu \u6620\u50cf\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff1a docker run --name my_ubuntu -it ubuntu:latest bash root@a19c770b8621:/# root @haracle\uff03\u8868\u793a\u4f4d\u4e8e Docker \u5bb9\u5668\u7684 bash shell \u4e2d\uff0c\u53ef\u4ee5\u8fd0\u884c shell \u547d\u4ee4\uff1a root@a19c770b8621:/# ls bin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var root@a19c770b8621:/# pwd / \u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES a19c770b8621 ubuntu:latest \"bash\" About a minute ago Up About a minute my_ubuntu 6162daed25da nginx \"nginx -g 'daemon of\u2026\" About an hour ago Up About an hour 0 .0.0.0:8080->80/tcp hardcore_torvalds \u5982\u4e0a\uff0cmy_ubuntu \u6b63\u5728\u8fd0\u884c\u3002\u5047\u8bbe\u60f3\u5c06 Docker ssh \u653e\u5165\u2019my_ubuntu\u2019\u5bb9\u5668\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 docker exec bash\uff1a docker exec -it my_ubuntu bash root@a19c770b8621:/# \u4f7f\u7528 docker exec \u5411\u5bb9\u5668\u53d1\u51fa\u547d\u4ee4\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u547d\u4ee4\u63d0\u793a\u7b26\u5728 my_ubuntu \u5bb9\u5668\u4e0a\u8fd0\u884c ls \u547d\u4ee4\uff1a docker exec -it my_ubuntu ls bin dev home lib64 mnt proc run srv tmp var boot etc lib media opt root sbin sys usr \u4ee5\u5206\u79bb\u6a21\u5f0f\u542f\u52a8\u5bb9\u5668\u5e76 attach \u00b6 \u4ee5\u4e0a\u793a\u4f8b\u7528\u9644\u52a0\u6a21\u5f0f\u542f\u52a8 ubuntu \u5bb9\u5668\uff0c\u6211\u4eec\u4e5f\u53ef\u5728\u5206\u79bb\u6a21\u5f0f\u4e0b\u542f\u52a8\uff1a docker run -it -d --name my_ubuntu_2 ubuntu:latest bash 75b28b7208359137b3e1dc2843387918e28b4c6c4860ef0cdeac79c205f5cbc4 \u9a8c\u8bc1\u5bb9\u5668\u662f\u5426\u6b63\u5728\u8fd0\u884c\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 75b28b720835 ubuntu:latest \"bash\" 3 minutes ago Up 3 minutes my_ubuntu_2 a19c770b8621 ubuntu:latest \"bash\" 15 minutes ago Up 15 minutes my_ubuntu 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 2 hours ago Up 2 hours 0 .0.0.0:8080->80/tcp hardcore_torvalds \u4f7f\u7528 docker attach \u547d\u4ee4\u83b7\u53d6 docker exec bash-like \u6548\u679c\uff1a docker attach my_ubuntu_2 root@75b28b720835:/# \u68c0\u67e5 Docker \u955c\u50cf\u5386\u53f2 \u00b6 Docker \u793e\u533a\u955c\u50cf\u662f\u5206\u5c42\u521b\u5efa\u7684\uff0c\u53ef\u4f7f\u7528 Docker history \u547d\u4ee4\u67e5\u770b\u955c\u50cf\u521b\u5efa\u65b9\u5f0f\u3002\u5148\u770b\u770b\u6709\u54ea\u4e9b\u955c\u50cf\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu 16 .04 5e8b97a2a082 2 weeks ago 114MB ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u67e5\u770b nginx \u955c\u50cf\u5386\u53f2\uff1a docker history nginx IMAGE CREATED CREATED BY SIZE COMMENT cd5239a0906a 2 weeks ago /bin/sh -c #(nop) CMD [\"nginx\" \"-g\" \"daemon\u2026 0B <missing> 2 weeks ago /bin/sh -c #(nop) STOPSIGNAL [SIGTERM] 0B <missing> 2 weeks ago /bin/sh -c #(nop) EXPOSE 80/tcp 0B <missing> 2 weeks ago /bin/sh -c ln -sf /dev/stdout /var/log/nginx\u2026 22B <missing> 2 weeks ago /bin/sh -c set -x && apt-get update && apt\u2026 53 .7MB <missing> 2 weeks ago /bin/sh -c #(nop) ENV NJS_VERSION=1.15.0.0.\u2026 0B <missing> 2 weeks ago /bin/sh -c #(nop) ENV NGINX_VERSION=1.15.0-\u2026 0B <missing> 7 weeks ago /bin/sh -c #(nop) LABEL maintainer=NGINX Do\u2026 0B <missing> 8 weeks ago /bin/sh -c #(nop) CMD [\"bash\"] 0B <missing> 8 weeks ago /bin/sh -c #(nop) ADD file:ec5be7eec56a74975\u2026 55.3MB \u4f7f\u7528\u955c\u50cf\u5386\u53f2\u547d\u4ee4\u67e5\u627e\u6700\u8fd1\u66f4\u6539\uff0c\u5982\u679c\u5728\u65b0\u7248\u672c\u955c\u50cf\u4e2d\u53d1\u73b0\u95ee\u9898\uff0c\u5219\u6b64\u547d\u4ee4\u53ef\u5e2e\u52a9\u627e\u5230\u539f\u56e0\uff0c\u4e5f\u53ef\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a docker image history nginx Docker \u68c0\u67e5\u5bb9\u5668 \u00b6 \u53ef\u4ee5\u4f7f\u7528 docker inspect \u547d\u4ee4\u67e5\u627e\u6709\u5173\u7cfb\u7edf\u7684\u4fe1\u606f\uff0c\u8fd0\u884c docker ps \u547d\u4ee4\u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 2 hours ago Up 2 hours 0 .0.0.0:8080->80/tcp hardcore_torvalds \u4f7f\u7528 CONTAINER ID \u68c0\u67e5\u5bb9\u5668\uff08\u4e5f\u53ef\u4f7f\u7528\u5bb9\u5668\u540d\u79f0\uff09\uff1a docker inspect 6162daed25da [ { \"Id\" : \"6162daed25da50b98afca5f7ed8caca2289bf309b2547d87ae8674b899d604a4\" , \"Created\" : \"2018-06-25T05:46:37.902211302Z\" , \"Path\" : \"nginx\" , \"Args\" : [ \u2026 \u2026 \u2026 \"DriverOpts\" : null } } } } ] \u8be5\u547d\u4ee4\u5c06\u4ee5 JSON \u683c\u5f0f\u63d0\u4f9b\u5927\u91cf\u4fe1\u606f\uff0c\u4ee5\u4e0b\u662f\u67e5\u627e\u5bb9\u5668 IP \u5730\u5740\u7684\u6280\u5de7\uff1a docker inspect 6162daed25da | grep \"IPAddress\" \"SecondaryIPAddresses\" : null, \"IPAddress\" : \"172.17.0.2\" , \"IPAddress\" : \"172.17.0.2\" , \u5bb9\u5668\u4e0e\u4e3b\u673a\u95f4\u6587\u4ef6\u590d\u5236 \u00b6 \u518d\u6b21\u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 3 hours ago Up 3 hours 0 .0.0.0:8080->80/tcp hardcore_torvalds NGINX \u5bb9\u5668\u5728\u7aef\u53e3 8080 \u4e0a\u8fd0\u884c\u3002\u56e0\u6b64\uff0c\u5982\u679c\u8f6c\u5230 http//localhost:8080\uff0c\u5c06\u770b\u5230\u4ee5\u4e0b\u5185\u5bb9\uff1a \"Welcome to nginx!\" \u5982\u679c\u770b\u5230\u6b64\u9875\u9762\uff0c\u5219 nginx Web \u670d\u52a1\u5668\u5df2\u6210\u529f\u5b89\u88c5\u5e76\u6b63\u5e38\u8fd0\u884c\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u9996\u5148\uff0c\u5728\u672c\u5730\u76ee\u5f55\u4e2d\u521b\u5efa index.html\uff1a < html > < header >< title > My Website </ title ></ header > < body > Hello world </ body > </ html > \u4f7f\u7528\u5e26\u6709 ls \u7684 docker exec \u547d\u4ee4\u68c0\u67e5 NGINX \u5bb9\u5668\u4e2d\u5177\u6709 index.html \u7684\u6587\u4ef6\u5939\uff1a docker exec -it hardcore_torvalds ls /usr/share/nginx/html 50x.html index.html \u4f7f\u7528\u521b\u5efa\u7684\u672c\u5730\u6587\u4ef6\u8986\u76d6\u5bb9\u5668 index.html \u6587\u4ef6\uff1a docker cp index.html hardcore_torvalds:usr/share/nginx/html/ \u5982\u679c\u518d\u6b21\u68c0\u67e5 http://localhost: 8080\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u95ee\u5019\u8bed\u201cHello world\u201d\u3002 \u53ef\u4f7f\u7528 docker cp \u547d\u4ee4\u5728\u672c\u5730\u8ba1\u7b97\u673a\u548c\u521b\u5efa\u5bb9\u5668\u95f4\u79fb\u52a8\u6587\u4ef6\uff0c\u6b64\u65b9\u6cd5\u53ef\u7528\u4e8e\u8986\u76d6\u914d\u7f6e\u6587\u4ef6\u3002 \u521b\u5efa Docker \u955c\u50cf \u00b6 \u5982\u679c\u60f3\u590d\u5236\u66f4\u591a\u201cHello World\u201d\u5bb9\u5668\uff0c\u5fc5\u987b\u5c06\u5f53\u524d\u5bb9\u5668\u4fdd\u5b58\u4e3a\u955c\u50cf\u3002 \u9996\u5148\uff0c\u505c\u6b62\u5bb9\u5668\uff1a docker stop hardcore_torvalds \u5217\u51fa\u6240\u6709 Docker \u5bb9\u5668\uff1a docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 75b28b720835 ubuntu:latest \"bash\" About an hour ago Exited ( 0 ) About an hour ago my_ubuntu_2 a19c770b8621 ubuntu:latest \"bash\" 2 hours ago Exited ( 0 ) About an hour ago my_ubuntu 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 3 hours ago Exited ( 0 ) 27 seconds ago hardcore_torvalds \u4ece STATUS \u4e2d\uff0c\u53ef\u4ee5\u770b\u5230 NGINX\u2019corecore_torvalds\u2019\u5bb9\u5668\u5df2\u505c\u6b62\u3002\u4f7f\u7528 docker commit \u547d\u4ee4\u521b\u5efa\u65b0\u955c\u50cf\uff1a docker commit 6162daed25da nginx_hello_world_template sha256:117d060587a316035ed5a776e613d9cfbeee9fbfe202c6edc9203820c7da987b \u5982\u679c\u73b0\u5728\u68c0\u67e5\uff0c\u5c06\u770b\u5230\u65b0\u955c\u50cf\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE nginx_hello_world_template latest 117d060587a3 40 seconds ago 109MB ubuntu 16 .04 5e8b97a2a082 2 weeks ago 114MB ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u53ef\u4ee5\u4f7f\u7528\u6b64\u955c\u50cf\u5e76\u542f\u52a8\u65b0 Docker \u5bb9\u5668\uff0c\u65b0\u521b\u5efa\u5bb9\u5668\u5c06\u5177\u6709\u201cHello world\u201d\u9875\u9762\uff0c\u800c\u4e0d\u662f\u201cWelcome NGINX\u201d\u9875\u9762\u3002\u793a\u4f8b\u5982\u4e0b\uff1a docker run -it -d -p 8886 :80 nginx_hello_world_template 4e042d76c39125471951626ba42cd609a65c73f041943298f74f4fc43dc5596a $ \u5220\u9664 Docker \u5bb9\u5668\u548c\u955c\u50cf \u00b6 Docker \u5bb9\u5668\u548c\u955c\u50cf\u4f1a\u5360\u7528\u786c\u76d8\u7a7a\u95f4\uff0c\u56e0\u6b64\u6700\u597d\u5b9a\u671f\u6e05\u7406\u3002\u9996\u5148\u505c\u6b62\u6240\u6709\u5bb9\u5668\uff0c\u7136\u540e\u5217\u51fa\u6240\u6709\u5bb9\u5668\uff0c\u4f7f\u7528\u4ee5\u4e0b Docker \u547d\u4ee4\u6267\u884c\u64cd\u4f5c\uff1a docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 4e042d76c391 nginx_hello_world_template \"nginx -g 'daemon of\u2026\" 2 minutes ago Exited ( 0 ) 8 seconds ago boring_keldysh 75b28b720835 ubuntu:latest \"bash\" 2 hours ago Exited ( 0 ) About an hour ago my_ubuntu_2 a19c770b8621 ubuntu:latest \"bash\" 2 hours ago Exited ( 0 ) About an hour ago my_ubuntu 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 3 hours ago Exited ( 0 ) 11 minutes ago hardcore_torvalds \u5982\u4e0a\uff0c\u6709 4 \u4e2a\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\uff0c\u53ef\u4f7f\u7528 docker rm \u547d\u4ee4\u5220\u9664\u5bb9\u5668\uff1a docker rm 4e042d76c391 75b28b720835 a19c770b8621 6162daed25da 4e042d76c391 75b28b720835 a19c770b8621 6162daed25da \u53ef\u4f7f\u7528 NAMES \u4ee3\u66ff CONTAINER ID\uff0c\u5bb9\u5668\u5217\u8868\u73b0\u5728\u5e94\u8be5\u662f\u5e72\u51c0\u7684\uff1a docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES \u5217\u51fa Docker \u955c\u50cf\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE nginx_hello_world_template latest 117d060587a3 11 minutes ago 109MB ubuntu 16 .04 5e8b97a2a082 2 weeks ago 114MB ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u53ef\u4f7f\u7528 docker rmi \u547d\u4ee4\u548c IMAGE ID \u5220\u9664 docker \u955c\u50cf\uff1a docker rmi 117d060587a3 5e8b97a2a082 113a43faa138 cd5239a0906a \u6700\u540e\uff0cDocker \u955c\u50cf\u5217\u8868\u5e94\u8be5\u662f\u5e72\u51c0\u7684\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE \u53c2\u8003 \u00b6 Top Docker Commands Any Expert Should Know \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e03\uff09\uff1aDocker Compose \u5165\u95e8\u53ca\u5b9e\u8df5 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e5d\uff09\uff1aDocker \u6700\u4f73\u5b9e\u8df5","title":"\u516b\u3001Docker \u5e38\u7528\u547d\u4ee4\u53ca\u793a\u4f8b"},{"location":"Docker/8-Command/#_1","text":"\u4e00\u5f20\u56fe\u603b\u7ed3 Docker \u5e38\u7528\u547d\u4ee4\u53ca\u72b6\u6001\u53d8\u5316\uff1a \u53ef\u4ee5\u901a\u8fc7 docker COMMAND --help \u6765\u67e5\u770b\u8fd9\u4e9b\u547d\u4ee4\u7684\u5177\u4f53\u7528\u6cd5\u3002 attach \uff1a\u4f9d\u9644\u5230\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u4e2d\uff1b build \uff1a\u4ece\u4e00\u4e2a Dockerfile \u521b\u5efa\u4e00\u4e2a\u955c\u50cf\uff1b commit \uff1a\u4ece\u4e00\u4e2a\u5bb9\u5668\u7684\u4fee\u6539\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\uff1b cp \uff1a\u5728\u5bb9\u5668\u548c\u672c\u5730\u5bbf\u4e3b\u7cfb\u7edf\u4e4b\u95f4\u590d\u5236\u6587\u4ef6\u4e2d\uff1b create \uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bb9\u5668\uff0c\u4f46\u5e76\u4e0d\u8fd0\u884c\u5b83\uff1b diff \uff1a\u68c0\u67e5\u4e00\u4e2a\u5bb9\u5668\u5185\u6587\u4ef6\u7cfb\u7edf\u7684\u4fee\u6539\uff0c\u5305\u62ec\u4fee\u6539\u548c\u589e\u52a0\uff1b events \uff1a\u4ece\u670d\u52a1\u7aef\u83b7\u53d6\u5b9e\u65f6\u7684\u4e8b\u4ef6\uff1b exec \uff1a\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u5185\u6267\u884c\u547d\u4ee4\uff1b export \uff1a\u5bfc\u51fa\u5bb9\u5668\u5185\u5bb9\u4e3a\u4e00\u4e2a tar \u5305\uff1b history \uff1a\u663e\u793a\u4e00\u4e2a\u955c\u50cf\u7684\u5386\u53f2\u4fe1\u606f\uff1b images \uff1a\u5217\u51fa\u5b58\u5728\u7684\u955c\u50cf\uff1b import \uff1a\u5bfc\u5165\u4e00\u4e2a\u6587\u4ef6\uff08\u5178\u578b\u4e3a tar \u5305\uff09\u8def\u5f84\u6216\u76ee\u5f55\u6765\u521b\u5efa\u4e00\u4e2a\u672c\u5730\u955c\u50cf\uff1b info \uff1a\u663e\u793a\u4e00\u4e9b\u76f8\u5173\u7684\u7cfb\u7edf\u4fe1\u606f\uff1b inspect \uff1a\u663e\u793a\u4e00\u4e2a\u5bb9\u5668\u7684\u5177\u4f53\u914d\u7f6e\u4fe1\u606f\uff1b kill \uff1a\u5173\u95ed\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 (\u5305\u62ec\u8fdb\u7a0b\u548c\u6240\u6709\u76f8\u5173\u8d44\u6e90)\uff1b load \uff1a\u4ece\u4e00\u4e2a tar \u5305\u4e2d\u52a0\u8f7d\u4e00\u4e2a\u955c\u50cf\uff1b login \uff1a\u6ce8\u518c\u6216\u767b\u5f55\u5230\u4e00\u4e2a Docker \u7684\u4ed3\u5e93\u670d\u52a1\u5668\uff1b logout \uff1a\u4ece Docker \u7684\u4ed3\u5e93\u670d\u52a1\u5668\u767b\u51fa\uff1b logs \uff1a\u83b7\u53d6\u5bb9\u5668\u7684 log \u4fe1\u606f\uff1b network \uff1a\u7ba1\u7406 Docker \u7684\u7f51\u7edc\uff0c\u5305\u62ec\u67e5\u770b\u3001\u521b\u5efa\u3001\u5220\u9664\u3001\u6302\u8f7d\u3001\u5378\u8f7d\u7b49\uff1b node \uff1a\u7ba1\u7406 swarm \u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\uff0c\u5305\u62ec\u67e5\u770b\u3001\u66f4\u65b0\u3001\u5220\u9664\u3001\u63d0\u5347/\u53d6\u6d88\u7ba1\u7406\u8282\u70b9\u7b49\uff1b pause \uff1a\u6682\u505c\u4e00\u4e2a\u5bb9\u5668\u4e2d\u7684\u6240\u6709\u8fdb\u7a0b\uff1b port \uff1a\u67e5\u627e\u4e00\u4e2a nat \u5230\u4e00\u4e2a\u79c1\u6709\u7f51\u53e3\u7684\u516c\u5171\u53e3\uff1b ps \uff1a\u5217\u51fa\u4e3b\u673a\u4e0a\u7684\u5bb9\u5668\uff1b pull \uff1a\u4ece\u4e00\u4e2a Docker \u7684\u4ed3\u5e93\u670d\u52a1\u5668\u4e0b\u62c9\u4e00\u4e2a\u955c\u50cf\u6216\u4ed3\u5e93\uff1b push \uff1a\u5c06\u4e00\u4e2a\u955c\u50cf\u6216\u8005\u4ed3\u5e93\u63a8\u9001\u5230\u4e00\u4e2a Docker \u7684\u6ce8\u518c\u670d\u52a1\u5668\uff1b rename \uff1a\u91cd\u547d\u540d\u4e00\u4e2a\u5bb9\u5668\uff1b restart \uff1a\u91cd\u542f\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\uff1b rm \uff1a\u5220\u9664\u7ed9\u5b9a\u7684\u82e5\u5e72\u4e2a\u5bb9\u5668\uff1b rmi \uff1a\u5220\u9664\u7ed9\u5b9a\u7684\u82e5\u5e72\u4e2a\u955c\u50cf\uff1b run \uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5bb9\u5668\uff0c\u5e76\u5728\u5176\u4e2d\u8fd0\u884c\u7ed9\u5b9a\u547d\u4ee4\uff1b save \uff1a\u4fdd\u5b58\u4e00\u4e2a\u955c\u50cf\u4e3a tar \u5305\u6587\u4ef6\uff1b search \uff1a\u5728 Docker index \u4e2d\u641c\u7d22\u4e00\u4e2a\u955c\u50cf\uff1b service \uff1a\u7ba1\u7406 Docker \u6240\u542f\u52a8\u7684\u5e94\u7528\u670d\u52a1\uff0c\u5305\u62ec\u521b\u5efa\u3001\u66f4\u65b0\u3001\u5220\u9664\u7b49\uff1b start \uff1a\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff1b stats \uff1a\u76d1\u63a7\u5bb9\u5668\u7684 CPU \u5229\u7528\u7387\u3001\u5185\u5b58\u4f7f\u7528\u91cf\u3001\u7f51\u7edc IO \u603b\u91cf\u4ee5\u53ca\u78c1\u76d8 IO \u603b\u91cf\u7b49\u4fe1\u606f\uff1b stop \uff1a\u7ec8\u6b62\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\uff1b swarm \uff1a\u7ba1\u7406 Docker swarm \u96c6\u7fa4\uff0c\u5305\u62ec\u521b\u5efa\u3001\u52a0\u5165\u3001\u9000\u51fa\u3001\u66f4\u65b0\u7b49\uff1b tag \uff1a\u4e3a\u4e00\u4e2a\u955c\u50cf\u6253\u6807\u7b7e\uff1b top \uff1a\u67e5\u770b\u4e00\u4e2a\u5bb9\u5668\u4e2d\u7684\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u4fe1\u606f\uff1b unpause \uff1a\u5c06\u4e00\u4e2a\u5bb9\u5668\u5185\u6240\u6709\u7684\u8fdb\u7a0b\u4ece\u6682\u505c\u72b6\u6001\u4e2d\u6062\u590d\uff1b update \uff1a\u66f4\u65b0\u6307\u5b9a\u7684\u82e5\u5e72\u5bb9\u5668\u7684\u914d\u7f6e\u4fe1\u606f\uff1b version \uff1a\u8f93\u51fa Docker \u7684\u7248\u672c\u4fe1\u606f\uff1b volume \uff1a\u7ba1\u7406 Docker volume\uff0c\u5305\u62ec\u67e5\u770b\u3001\u521b\u5efa\u3001\u5220\u9664\u7b49\uff1b wait \uff1a\u963b\u585e\u76f4\u5230\u4e00\u4e2a\u5bb9\u5668\u7ec8\u6b62\uff0c\u7136\u540e\u8f93\u51fa\u5b83\u7684\u9000\u51fa\u7b26\u3002","title":"\u5e38\u7528\u547d\u4ee4\u5217\u8868"},{"location":"Docker/8-Command/#_2","text":"","title":"\u64cd\u4f5c\u793a\u4f8b"},{"location":"Docker/8-Command/#docker","text":"\u65e0\u8bba\u662f\u5728\u672c\u5730\u8fd8\u662f\u4e91\u7aef\uff0c\u6211\u4eec\u90fd\u9700\u8981\u68c0\u67e5 Docker \u7248\u672c\u548c\u7cfb\u7edf\u4fe1\u606f\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u627e\u5230 Docker \u7248\u672c\uff1a docker version Client: Version: 18 .03.0-ce API version: 1 .37 Go version: go1.9.4 Git commit: 0520e24 Built: Wed Mar 21 23 :06:22 2018 OS/Arch: darwin/amd64 Experimental: false Orchestrator: swarm Server: Engine: Version: 18 .03.0-ce API version: 1 .37 ( minimum version 1 .12 ) Go version: go1.9.4 Git commit: 0520e24 Built: Wed Mar 21 23 :14:32 2018 OS/Arch: linux/amd64 Experimental: true \u53e6\u4e00\u4e2a\u91cd\u8981\u547d\u4ee4\u662f docker info\uff1a docker info Containers: 0 Running: 0 Paused: 0 Stopped: 0 Images: 0 Server Version: 18 .03.0-ce Storage Driver: overlay2 Backing Filesystem: extfs Supports d_type: true Native Overlay Diff: true Logging Driver: json-file Cgroup Driver: cgroupfs Plugins: Volume: local Network: bridge host ipvlan macvlan null overlay Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog \u2026 \u8be5\u547d\u4ee4\u5c06\u663e\u793a\u90e8\u5206\u8bbe\u5907\u4fe1\u606f\uff0c\u6bd4\u5982\u670d\u52a1\u5668\u7248\u672c\u3001\u5b58\u50a8\u9a71\u52a8\u7a0b\u5e8f\u3001\u5185\u6838\u7248\u672c\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u603b\u5185\u5b58\u7b49\u3002\u5f53\u5c1d\u8bd5\u4e3a\u5f53\u524d Docker \u5b89\u88c5\u542f\u52a8\u65b0\u8d44\u6e90\u6216\u5c1d\u8bd5\u627e\u51fa\u7cfb\u7edf\u7ea7\u8d44\u6e90\u5206\u914d\u95ee\u9898\u65f6\uff0c\u8fd9\u4e9b\u4fe1\u606f\u975e\u5e38\u6709\u7528\uff0c\u8fd9\u4e5f\u662f\u68c0\u67e5\u8fd0\u884c\u3001\u505c\u6b62\u5bb9\u5668\u6570\u91cf\u53ca\u4e0b\u8f7d\u955c\u50cf\u6570\u91cf\u7684\u5feb\u901f\u65b9\u6cd5\u3002","title":"\u67e5\u770b Docker \u7248\u672c\u548c\u7cfb\u7edf\u4fe1\u606f"},{"location":"Docker/8-Command/#docker_1","text":"\u53ef\u4ee5\u4f7f\u7528 docker search \u547d\u4ee4\u5728 Docker Hub \u641c\u7d22\u5df2\u6709\u955c\u50cf\uff1a docker search ubuntu NAME DESCRIPTION STARS OFFICIAL AUTOMATED ubuntu Ubuntu is a Debian-based Linux operating sys\u2026 7861 [ OK ] dorowu/ubuntu-desktop-lxde-vnc Ubuntu with openssh-server and NoVNC 190 [ OK ] rastasheep/ubuntu-sshd Dockerized SSH service, built on top of offi\u2026 156 [ OK ] ansible/ubuntu14.04-ansible Ubuntu 14 .04 LTS with ansible 93 [ OK ] ubuntu-upstart Upstart is an event-based replacement for th\u2026 87 [ OK ] neurodebian NeuroDebian provides neuroscience research s\u2026 50 [ OK ] \u2026 \u4ee5\u4e0a\u5bf9 ubuntu \u7684\u641c\u7d22\u663e\u793a\u53ef\u7528\u955c\u50cf\u3001\u63cf\u8ff0\u548c\u5b98\u65b9\u72b6\u6001\u7b49\u4fe1\u606f\u3002\u5982\u679c\u8981\u4e0b\u8f7d ubuntu \u955c\u50cf\uff0c\u53ef\u4ee5\u4f7f\u7528 docker pull \u547d\u4ee4\uff1a docker pull ubuntu Using default tag: latest latest: Pulling from library/ubuntu 6b98dfc16071: Pull complete 4001a1209541: Pull complete 6319fc68c576: Pull complete b24603670dc3: Pull complete 97f170c87c6f: Pull complete Digest: sha256:5f4bdc3467537cbbe563e80db2c3ec95d548a9145d64453b06939c4592d67b6d Status: Downloaded newer image for ubuntu:latest $","title":"\u641c\u7d22\u4e0b\u8f7d Docker \u955c\u50cf"},{"location":"Docker/8-Command/#docker_2","text":"\u4f7f\u7528 docker info \u547d\u4ee4\u67e5\u627e\u62e5\u6709\u955c\u50cf\u6570\u91cf\uff1a docker info Containers: 0 Running: 0 Paused: 0 Stopped: 0 Images: 1 \u2026 docker images \u547d\u4ee4\u53ef\u8be6\u7ec6\u5217\u51fa\u62e5\u6709\u955c\u50cf\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu latest 113a43faa138 2 weeks ago 81 .2MB \u5047\u8bbe\u4e0b\u8f7d NGINX \u955c\u50cf\uff0c\u53ef\u4ee5\u8fd0\u884c docker pull \u547d\u4ee4\uff1a docker pull nginx \u5982\u679c\u68c0\u67e5 Docker \u955c\u50cf\uff0c\u4f1a\u770b\u5230\u5982\u4e0b\u5185\u5bb9\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u5982\u679c\u5bfb\u627e Ubuntu 16.04 \u7248\u672c\uff0c\u53ef\u4f7f\u7528 16.04 \u6807\u7b7e\u4e0b\u8f7d\u7279\u5b9a\u7248\u672c\uff1a docker pull ubuntu:16.04 \u968f\u540e\uff0c\u5c06\u51fa\u73b0\u4e24\u4e2a Ubuntu \u6620\u50cf\u7248\u672c\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu 16 .04 5e8b97a2a082 2 weeks ago 114MB ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u6ce8\u610f\uff1a\u65e0\u9700\u6ce8\u518c Docker Hub \u5373\u53ef\u63d0\u53d6\u955c\u50cf\u3002\u5982\u679c\u60f3\u5c06\u955c\u50cf\u63a8\u9001\u5230 Docker Hub\uff0c\u9700\u8981\u6ce8\u518c\u7136\u540e\u4f7f\u7528 docker login \u547d\u4ee4\u767b\u5f55\uff1a docker login --username = yourhubusername --email = youremail@company.com","title":"Docker \u955c\u50cf"},{"location":"Docker/8-Command/#docker_3","text":"\u5047\u8bbe\u60f3\u5728 docker \u4e0a\u8fd0\u884c NGINX \u670d\u52a1\u5668\uff0c\u53ef\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a docker run -p 8080 :80 nginx \u5982\u679c\u5df2\u7528 run \u547d\u4ee4\u4ece Docker Hub \u63d0\u53d6 nginx \u6620\u50cf\u521b\u5efa NGINX \u5bb9\u5668\u3002 -p 8080:80 \u4f1a\u544a\u8bc9 Docker \u5c06 localhost \u7aef\u53e3 8080 \u6620\u5c04\u5230 Docker \u5bb9\u5668\u7aef\u53e3 80\uff0c\u5e94\u8be5\u80fd\u591f\u4ece http://localhost:8080 \u8bbf\u95ee NGINX \u670d\u52a1\u5668\u3002 NGINX \u5bb9\u5668\u5df2\u9644\u52a0\u5230\u547d\u4ee4\u884c\u3002\u5982\u679c\u9000\u51fa\u547d\u4ee4\u884c\uff0c\u5bb9\u5668\u5c06\u4f1a\u505c\u6b62\uff0c\u53ef\u4f7f\u7528 detach\uff08\u2019- d\uff09\u542f\u52a8 NGINX \u5bb9\u5668\uff0c\u8fd9\u6837\u5373\u4f7f\u9000\u51fa\u547d\u4ee4\u884c\u4e5f\u53ef\u7ee7\u7eed\u8fd0\u884c\u3002 docker run -p 8080 :80 -d nginx \u4ee5\u4e0a\u547d\u4ee4\u5c06\u4ee5\u5206\u79bb\u6a21\u5f0f\u542f\u52a8\u5bb9\u5668\u5e76\u8fd4\u56de\u547d\u4ee4\u884c\u3002 docker run \u547d\u4ee4\u683c\u5f0f\uff1a Usage: docker run [ OPTIONS ] IMAGE [ COMMAND ] [ ARG... ] -a, --attach =[] #\u767b\u5f55\u5bb9\u5668\uff08\u4ee5docker run -d\u542f\u52a8\u7684\u5bb9\u5668\uff09 -c, --cpu-shares = 0 #\u8bbe\u7f6e\u5bb9\u5668CPU\u6743\u91cd\uff0c\u5728CPU\u5171\u4eab\u573a\u666f\u4f7f\u7528 --cap-add =[] #\u6dfb\u52a0\u6743\u9650\uff0c\u6743\u9650\u6e05\u5355\u8be6\u89c1\uff1ahttp://linux.die.net/man/7/capabilities --cap-drop =[] #\u5220\u9664\u6743\u9650\uff0c\u6743\u9650\u6e05\u5355\u8be6\u89c1\uff1ahttp://linux.die.net/man/7/capabilities --cidfile = \"\" #\u8fd0\u884c\u5bb9\u5668\u540e\uff0c\u5728\u6307\u5b9a\u6587\u4ef6\u4e2d\u5199\u5165\u5bb9\u5668PID\u503c\uff0c\u4e00\u79cd\u5178\u578b\u7684\u76d1\u63a7\u7cfb\u7edf\u7528\u6cd5 --cpuset = \"\" #\u8bbe\u7f6e\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9bCPU\uff0c\u6b64\u53c2\u6570\u53ef\u4ee5\u7528\u6765\u5bb9\u5668\u72ec\u5360CPU -d, --detach = false #\u6307\u5b9a\u5bb9\u5668\u8fd0\u884c\u4e8e\u524d\u53f0\u8fd8\u662f\u540e\u53f0 --device =[] #\u6dfb\u52a0\u4e3b\u673a\u8bbe\u5907\u7ed9\u5bb9\u5668\uff0c\u76f8\u5f53\u4e8e\u8bbe\u5907\u76f4\u901a --dns =[] #\u6307\u5b9a\u5bb9\u5668\u7684dns\u670d\u52a1\u5668 --dns-search =[] #\u6307\u5b9a\u5bb9\u5668\u7684dns\u641c\u7d22\u57df\u540d\uff0c\u5199\u5165\u5230\u5bb9\u5668\u7684/etc/resolv.conf\u6587\u4ef6 -e, --env =[] #\u6307\u5b9a\u73af\u5883\u53d8\u91cf\uff0c\u5bb9\u5668\u4e2d\u53ef\u4ee5\u4f7f\u7528\u8be5\u73af\u5883\u53d8\u91cf --entrypoint = \"\" #\u8986\u76d6image\u7684\u5165\u53e3\u70b9 --env-file =[] #\u6307\u5b9a\u73af\u5883\u53d8\u91cf\u6587\u4ef6\uff0c\u6587\u4ef6\u683c\u5f0f\u4e3a\u6bcf\u884c\u4e00\u4e2a\u73af\u5883\u53d8\u91cf --expose =[] #\u6307\u5b9a\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3\uff0c\u5373\u4fee\u6539\u955c\u50cf\u7684\u66b4\u9732\u7aef\u53e3 -h, --hostname = \"\" #\u6307\u5b9a\u5bb9\u5668\u7684\u4e3b\u673a\u540d -i, --interactive = false #\u6253\u5f00STDIN\uff0c\u7528\u4e8e\u63a7\u5236\u53f0\u4ea4\u4e92 --link =[] #\u6307\u5b9a\u5bb9\u5668\u95f4\u7684\u5173\u8054\uff0c\u4f7f\u7528\u5176\u4ed6\u5bb9\u5668\u7684IP\u3001env\u7b49\u4fe1\u606f --lxc-conf =[] #\u6307\u5b9a\u5bb9\u5668\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u53ea\u6709\u5728\u6307\u5b9a--exec-driver=lxc\u65f6\u4f7f\u7528 -m, --memory = \"\" #\u6307\u5b9a\u5bb9\u5668\u7684\u5185\u5b58\u4e0a\u9650 --name = \"\" #\u6307\u5b9a\u5bb9\u5668\u540d\u5b57\uff0c\u540e\u7eed\u53ef\u4ee5\u901a\u8fc7\u540d\u5b57\u8fdb\u884c\u5bb9\u5668\u7ba1\u7406\uff0clinks\u7279\u6027\u9700\u8981\u4f7f\u7528\u540d\u5b57 --net = \"bridge\" #\u5bb9\u5668\u7f51\u7edc\u8bbe\u7f6e\uff0c\u5f85\u8be6\u8ff0 -P, --publish-all = false #\u6307\u5b9a\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3\uff0c\u5f85\u8be6\u8ff0 -p, --publish =[] #\u6307\u5b9a\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3\uff0c\u5f85\u8be6\u8ff0 --privileged = false #\u6307\u5b9a\u5bb9\u5668\u662f\u5426\u4e3a\u7279\u6743\u5bb9\u5668\uff0c\u7279\u6743\u5bb9\u5668\u62e5\u6709\u6240\u6709\u7684capabilities --restart = \"\" #\u6307\u5b9a\u5bb9\u5668\u505c\u6b62\u540e\u7684\u91cd\u542f\u7b56\u7565\uff0c\u5f85\u8be6\u8ff0 --rm = false #\u6307\u5b9a\u5bb9\u5668\u505c\u6b62\u540e\u81ea\u52a8\u5220\u9664\u5bb9\u5668(\u4e0d\u652f\u6301\u4ee5docker run -d\u542f\u52a8\u7684\u5bb9\u5668) --sig-proxy = true #\u8bbe\u7f6e\u7531\u4ee3\u7406\u63a5\u53d7\u5e76\u5904\u7406\u4fe1\u53f7\uff0c\u4f46\u662fSIGCHLD\u3001SIGSTOP\u548cSIGKILL\u4e0d\u80fd\u88ab\u4ee3\u7406 -t, --tty = false #\u5206\u914dtty\u8bbe\u5907\uff0c\u8be5\u53ef\u4ee5\u652f\u6301\u7ec8\u7aef\u767b\u5f55 -u, --user = \"\" #\u6307\u5b9a\u5bb9\u5668\u7684\u7528\u6237 -v, --volume =[] #\u7ed9\u5bb9\u5668\u6302\u8f7d\u5b58\u50a8\u5377\uff0c\u6302\u8f7d\u5230\u5bb9\u5668\u7684\u67d0\u4e2a\u76ee\u5f55 --volumes-from =[] #\u7ed9\u5bb9\u5668\u6302\u8f7d\u5176\u4ed6\u5bb9\u5668\u4e0a\u7684\u5377\uff0c\u6302\u8f7d\u5230\u5bb9\u5668\u7684\u67d0\u4e2a\u76ee\u5f55 -w, --workdir = \"\" #\u6307\u5b9a\u5bb9\u5668\u7684\u5de5\u4f5c\u76ee\u5f55","title":"\u8fd0\u884c Docker \u5bb9\u5668"},{"location":"Docker/8-Command/#docker_4","text":"docker ps \u547d\u4ee4\u5141\u8bb8\u67e5\u627e\u6b63\u5728\u8fd0\u884c\u7684\u6240\u6709\u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 7 minutes ago Up 7 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u5982\u4e0a\u663e\u793a\u5bb9\u5668\u7684\u5404\u79cd\u5c5e\u6027\uff0c\u53ef\u4ee5\u770b\u5230\u662f\u4ece nginx \u955c\u50cf\u521b\u5efa\u5e76\u663e\u793a\u7aef\u53e3\u8f6c\u53d1\u4fe1\u606f\u3002CONTAINER ID \u548c NAMES \u5c5e\u6027\u9700\u8981\u7279\u522b\u63d0\u53ca\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0a\u8ff0\u4e24\u5927\u5c5e\u6027\u552f\u4e00\u6807\u8bc6\u5bb9\u5668\u3002\u4e8c\u8005\u90fd\u53ef\u81ea\u52a8\u751f\u6210\uff0c\u4f46\u4e5f\u53ef\u5728\u5bb9\u5668\u521b\u5efa\u8fc7\u7a0b\u4e2d\u4e3a\u5bb9\u5668\u547d\u540d\u3002 \u521b\u5efa\u4e00\u4e2a\u540d\u4e3a my_nginx \u7684 NGINX \u5bb9\u5668\uff1a docker run --name my_nginx -p 8888 :80 -d nginx \u518d\u6b21\u5217\u51fa\u6240\u6709 Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e7b19b6ad778 nginx \"nginx -g 'daemon of\u2026\" About a minute ago Up About a minute 0 .0.0.0:8888->80/tcp my_nginx 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 15 minutes ago Up 16 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u8bf7\u6ce8\u610f\uff0c\u65b0\u5bb9\u5668\u7684\u540d\u79f0\u4e3a\u201cmy_nginx\u201d\u3002 \u5904\u7406\u5927\u91cf\u5bb9\u5668\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u540d\u7ea6\u5b9a\uff0c\u8fd9\u53ef\u4ee5\u66f4\u597d\u5f97\u7ec4\u7ec7\u5bb9\u5668\u3002 docker ps \u547d\u4ee4\u4ec5\u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u3002\u5982\u679c\u5bf9\u4e0a\u8ff0\u60c5\u51b5\u4f7f\u7528 docker info \u547d\u4ee4\uff1a docker info Containers: 2 Running: 2 Paused: 0 Stopped: 0 Images: 3 \u53ef\u4ee5\u770b\u5230\u6709\u4e24\u4e2a\u5bb9\u5668\u6b63\u5728\u8fd0\u884c\uff0c\u5982\u679c\u4e00\u4e2a\u6682\u505c\u6216\u5df2\u505c\u6b62\uff0c\u5219\u4e0d\u4f1a\u4ec5\u4f7f\u7528 docker ps \u547d\u4ee4\u67e5\u770b\u8fd9\u4e9b\u5bb9\u5668\uff0c\u5fc5\u987b\u4f7f\u7528 all\uff08 - a\uff09\u9009\u9879\uff1a docker ps -a","title":"\u5217\u51fa Docker \u5bb9\u5668"},{"location":"Docker/8-Command/#_3","text":"\u5047\u8bbe\u8981\u505c\u6b62\u2019my_nginx\u2019\u5bb9\u5668\uff0c\u53ef\u4f7f\u7528 CONTAINER ID \u6216 NAME\u3002 docker stop my_nginx my_nginx \u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 27 minutes ago Up 27 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e7b19b6ad778 nginx \"nginx -g 'daemon of\u2026\" 12 minutes ago Exited ( 0 ) About a minute ago my_nginx 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 27 minutes ago Up 27 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u5982\u679c\u5728\u6ca1\u6709 -a \u9009\u9879\u7684\u60c5\u51b5\u4e0b\u8fd0\u884c docker ps\uff0c\u53ea\u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u3002\u5728\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u770b\u5230\u2019my_nginx\u2019\u5bb9\u5668\u5904\u4e8e\u9000\u51fa\u72b6\u6001\u3002 \u8ba9\u6211\u4eec docker start \u5bb9\u5668\uff1a docker start my_nginx my_nginx \u68c0\u67e5 Docker \u5bb9\u5668\u5217\u8868\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e7b19b6ad778 nginx \"nginx -g 'daemon of\u2026\" 16 minutes ago Up 29 seconds 0 .0.0.0:8888->80/tcp my_nginx 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 30 minutes ago Up 30 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u53ef\u4ee5\u770b\u5230 STATUS \u663e\u793a\u5bb9\u5668\u2019my_nginx\u2019\u518d\u6b21\u88ab\u542f\u52a8\u3002 \u5982\u679c\u7531\u4e8e\u67d0\u4e9b\u95ee\u9898\u800c\u9700\u91cd\u542f\u5bb9\u5668\uff0c\u5219\u53ef\u4f7f\u7528 restart \u547d\u4ee4\uff0c\u8fd9\u6bd4\u5355\u72ec\u505c\u6b62\u548c\u542f\u52a8\u5bb9\u5668\u901f\u5ea6\u66f4\u5feb\uff1a docker restart my_nginx \u53ef\u4ee5\u50cf\u8fdb\u7a0b\u4e00\u6837\u7ec8\u6b62 docker \u5bb9\u5668\uff0c\u6bd4\u5982\u7ec8\u6b62 my_nginx \u5bb9\u5668\uff1a docker kill my_nginx \u518d\u6b21\u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e7b19b6ad778 nginx \"nginx -g 'daemon of\u2026\" 22 minutes ago Exited ( 137 ) 7 seconds ago my_nginx 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 36 minutes ago Up 36 minutes 0 .0.0.0:8080->80/tcp hardcore_torvalds \u5bb9\u5668 my_nginx \u672a\u8fd0\u884c\u3002\u6b64\u5916\uff0c\u53ef\u5728\u4fe1\u606f\u4e2d\u770b\u5230\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u548c\u4e00\u4e2a\u5df2\u505c\u6b62\u5bb9\u5668\uff1a docker info Containers: 2 Running: 1 Paused: 0 Stopped: 1 Images: 3 \u2026","title":"\u542f\u52a8\uff0c\u505c\u6b62\uff0c\u91cd\u542f\u548c\u6740\u6b7b\u5bb9\u5668"},{"location":"Docker/8-Command/#docker-exec-bash-docker-ssh","text":"\u5982\u679c\u9700\u8981\u4e0e shell \u8fdb\u884c\u4ea4\u4e92\u4ee5\u521b\u5efa\u670d\u52a1\u6216\u89e3\u51b3\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528 docker exec \u547d\u4ee4\u521b\u5efa\u4ea4\u4e92\u5f0f shell\u3002\u6bd4\u5982\uff0c\u7528 bash shell \u4ece ubuntu \u6620\u50cf\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff1a docker run --name my_ubuntu -it ubuntu:latest bash root@a19c770b8621:/# root @haracle\uff03\u8868\u793a\u4f4d\u4e8e Docker \u5bb9\u5668\u7684 bash shell \u4e2d\uff0c\u53ef\u4ee5\u8fd0\u884c shell \u547d\u4ee4\uff1a root@a19c770b8621:/# ls bin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var root@a19c770b8621:/# pwd / \u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES a19c770b8621 ubuntu:latest \"bash\" About a minute ago Up About a minute my_ubuntu 6162daed25da nginx \"nginx -g 'daemon of\u2026\" About an hour ago Up About an hour 0 .0.0.0:8080->80/tcp hardcore_torvalds \u5982\u4e0a\uff0cmy_ubuntu \u6b63\u5728\u8fd0\u884c\u3002\u5047\u8bbe\u60f3\u5c06 Docker ssh \u653e\u5165\u2019my_ubuntu\u2019\u5bb9\u5668\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 docker exec bash\uff1a docker exec -it my_ubuntu bash root@a19c770b8621:/# \u4f7f\u7528 docker exec \u5411\u5bb9\u5668\u53d1\u51fa\u547d\u4ee4\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u547d\u4ee4\u63d0\u793a\u7b26\u5728 my_ubuntu \u5bb9\u5668\u4e0a\u8fd0\u884c ls \u547d\u4ee4\uff1a docker exec -it my_ubuntu ls bin dev home lib64 mnt proc run srv tmp var boot etc lib media opt root sbin sys usr","title":"Docker Exec Bash \u548c Docker SSH"},{"location":"Docker/8-Command/#attach","text":"\u4ee5\u4e0a\u793a\u4f8b\u7528\u9644\u52a0\u6a21\u5f0f\u542f\u52a8 ubuntu \u5bb9\u5668\uff0c\u6211\u4eec\u4e5f\u53ef\u5728\u5206\u79bb\u6a21\u5f0f\u4e0b\u542f\u52a8\uff1a docker run -it -d --name my_ubuntu_2 ubuntu:latest bash 75b28b7208359137b3e1dc2843387918e28b4c6c4860ef0cdeac79c205f5cbc4 \u9a8c\u8bc1\u5bb9\u5668\u662f\u5426\u6b63\u5728\u8fd0\u884c\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 75b28b720835 ubuntu:latest \"bash\" 3 minutes ago Up 3 minutes my_ubuntu_2 a19c770b8621 ubuntu:latest \"bash\" 15 minutes ago Up 15 minutes my_ubuntu 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 2 hours ago Up 2 hours 0 .0.0.0:8080->80/tcp hardcore_torvalds \u4f7f\u7528 docker attach \u547d\u4ee4\u83b7\u53d6 docker exec bash-like \u6548\u679c\uff1a docker attach my_ubuntu_2 root@75b28b720835:/#","title":"\u4ee5\u5206\u79bb\u6a21\u5f0f\u542f\u52a8\u5bb9\u5668\u5e76 attach"},{"location":"Docker/8-Command/#docker_5","text":"Docker \u793e\u533a\u955c\u50cf\u662f\u5206\u5c42\u521b\u5efa\u7684\uff0c\u53ef\u4f7f\u7528 Docker history \u547d\u4ee4\u67e5\u770b\u955c\u50cf\u521b\u5efa\u65b9\u5f0f\u3002\u5148\u770b\u770b\u6709\u54ea\u4e9b\u955c\u50cf\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu 16 .04 5e8b97a2a082 2 weeks ago 114MB ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u67e5\u770b nginx \u955c\u50cf\u5386\u53f2\uff1a docker history nginx IMAGE CREATED CREATED BY SIZE COMMENT cd5239a0906a 2 weeks ago /bin/sh -c #(nop) CMD [\"nginx\" \"-g\" \"daemon\u2026 0B <missing> 2 weeks ago /bin/sh -c #(nop) STOPSIGNAL [SIGTERM] 0B <missing> 2 weeks ago /bin/sh -c #(nop) EXPOSE 80/tcp 0B <missing> 2 weeks ago /bin/sh -c ln -sf /dev/stdout /var/log/nginx\u2026 22B <missing> 2 weeks ago /bin/sh -c set -x && apt-get update && apt\u2026 53 .7MB <missing> 2 weeks ago /bin/sh -c #(nop) ENV NJS_VERSION=1.15.0.0.\u2026 0B <missing> 2 weeks ago /bin/sh -c #(nop) ENV NGINX_VERSION=1.15.0-\u2026 0B <missing> 7 weeks ago /bin/sh -c #(nop) LABEL maintainer=NGINX Do\u2026 0B <missing> 8 weeks ago /bin/sh -c #(nop) CMD [\"bash\"] 0B <missing> 8 weeks ago /bin/sh -c #(nop) ADD file:ec5be7eec56a74975\u2026 55.3MB \u4f7f\u7528\u955c\u50cf\u5386\u53f2\u547d\u4ee4\u67e5\u627e\u6700\u8fd1\u66f4\u6539\uff0c\u5982\u679c\u5728\u65b0\u7248\u672c\u955c\u50cf\u4e2d\u53d1\u73b0\u95ee\u9898\uff0c\u5219\u6b64\u547d\u4ee4\u53ef\u5e2e\u52a9\u627e\u5230\u539f\u56e0\uff0c\u4e5f\u53ef\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a docker image history nginx","title":"\u68c0\u67e5 Docker \u955c\u50cf\u5386\u53f2"},{"location":"Docker/8-Command/#docker_6","text":"\u53ef\u4ee5\u4f7f\u7528 docker inspect \u547d\u4ee4\u67e5\u627e\u6709\u5173\u7cfb\u7edf\u7684\u4fe1\u606f\uff0c\u8fd0\u884c docker ps \u547d\u4ee4\u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 2 hours ago Up 2 hours 0 .0.0.0:8080->80/tcp hardcore_torvalds \u4f7f\u7528 CONTAINER ID \u68c0\u67e5\u5bb9\u5668\uff08\u4e5f\u53ef\u4f7f\u7528\u5bb9\u5668\u540d\u79f0\uff09\uff1a docker inspect 6162daed25da [ { \"Id\" : \"6162daed25da50b98afca5f7ed8caca2289bf309b2547d87ae8674b899d604a4\" , \"Created\" : \"2018-06-25T05:46:37.902211302Z\" , \"Path\" : \"nginx\" , \"Args\" : [ \u2026 \u2026 \u2026 \"DriverOpts\" : null } } } } ] \u8be5\u547d\u4ee4\u5c06\u4ee5 JSON \u683c\u5f0f\u63d0\u4f9b\u5927\u91cf\u4fe1\u606f\uff0c\u4ee5\u4e0b\u662f\u67e5\u627e\u5bb9\u5668 IP \u5730\u5740\u7684\u6280\u5de7\uff1a docker inspect 6162daed25da | grep \"IPAddress\" \"SecondaryIPAddresses\" : null, \"IPAddress\" : \"172.17.0.2\" , \"IPAddress\" : \"172.17.0.2\" ,","title":"Docker \u68c0\u67e5\u5bb9\u5668"},{"location":"Docker/8-Command/#_4","text":"\u518d\u6b21\u5217\u51fa Docker \u5bb9\u5668\uff1a docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 3 hours ago Up 3 hours 0 .0.0.0:8080->80/tcp hardcore_torvalds NGINX \u5bb9\u5668\u5728\u7aef\u53e3 8080 \u4e0a\u8fd0\u884c\u3002\u56e0\u6b64\uff0c\u5982\u679c\u8f6c\u5230 http//localhost:8080\uff0c\u5c06\u770b\u5230\u4ee5\u4e0b\u5185\u5bb9\uff1a \"Welcome to nginx!\" \u5982\u679c\u770b\u5230\u6b64\u9875\u9762\uff0c\u5219 nginx Web \u670d\u52a1\u5668\u5df2\u6210\u529f\u5b89\u88c5\u5e76\u6b63\u5e38\u8fd0\u884c\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u914d\u7f6e\u3002 \u9996\u5148\uff0c\u5728\u672c\u5730\u76ee\u5f55\u4e2d\u521b\u5efa index.html\uff1a < html > < header >< title > My Website </ title ></ header > < body > Hello world </ body > </ html > \u4f7f\u7528\u5e26\u6709 ls \u7684 docker exec \u547d\u4ee4\u68c0\u67e5 NGINX \u5bb9\u5668\u4e2d\u5177\u6709 index.html \u7684\u6587\u4ef6\u5939\uff1a docker exec -it hardcore_torvalds ls /usr/share/nginx/html 50x.html index.html \u4f7f\u7528\u521b\u5efa\u7684\u672c\u5730\u6587\u4ef6\u8986\u76d6\u5bb9\u5668 index.html \u6587\u4ef6\uff1a docker cp index.html hardcore_torvalds:usr/share/nginx/html/ \u5982\u679c\u518d\u6b21\u68c0\u67e5 http://localhost: 8080\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u95ee\u5019\u8bed\u201cHello world\u201d\u3002 \u53ef\u4f7f\u7528 docker cp \u547d\u4ee4\u5728\u672c\u5730\u8ba1\u7b97\u673a\u548c\u521b\u5efa\u5bb9\u5668\u95f4\u79fb\u52a8\u6587\u4ef6\uff0c\u6b64\u65b9\u6cd5\u53ef\u7528\u4e8e\u8986\u76d6\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u5bb9\u5668\u4e0e\u4e3b\u673a\u95f4\u6587\u4ef6\u590d\u5236"},{"location":"Docker/8-Command/#docker_7","text":"\u5982\u679c\u60f3\u590d\u5236\u66f4\u591a\u201cHello World\u201d\u5bb9\u5668\uff0c\u5fc5\u987b\u5c06\u5f53\u524d\u5bb9\u5668\u4fdd\u5b58\u4e3a\u955c\u50cf\u3002 \u9996\u5148\uff0c\u505c\u6b62\u5bb9\u5668\uff1a docker stop hardcore_torvalds \u5217\u51fa\u6240\u6709 Docker \u5bb9\u5668\uff1a docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 75b28b720835 ubuntu:latest \"bash\" About an hour ago Exited ( 0 ) About an hour ago my_ubuntu_2 a19c770b8621 ubuntu:latest \"bash\" 2 hours ago Exited ( 0 ) About an hour ago my_ubuntu 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 3 hours ago Exited ( 0 ) 27 seconds ago hardcore_torvalds \u4ece STATUS \u4e2d\uff0c\u53ef\u4ee5\u770b\u5230 NGINX\u2019corecore_torvalds\u2019\u5bb9\u5668\u5df2\u505c\u6b62\u3002\u4f7f\u7528 docker commit \u547d\u4ee4\u521b\u5efa\u65b0\u955c\u50cf\uff1a docker commit 6162daed25da nginx_hello_world_template sha256:117d060587a316035ed5a776e613d9cfbeee9fbfe202c6edc9203820c7da987b \u5982\u679c\u73b0\u5728\u68c0\u67e5\uff0c\u5c06\u770b\u5230\u65b0\u955c\u50cf\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE nginx_hello_world_template latest 117d060587a3 40 seconds ago 109MB ubuntu 16 .04 5e8b97a2a082 2 weeks ago 114MB ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u53ef\u4ee5\u4f7f\u7528\u6b64\u955c\u50cf\u5e76\u542f\u52a8\u65b0 Docker \u5bb9\u5668\uff0c\u65b0\u521b\u5efa\u5bb9\u5668\u5c06\u5177\u6709\u201cHello world\u201d\u9875\u9762\uff0c\u800c\u4e0d\u662f\u201cWelcome NGINX\u201d\u9875\u9762\u3002\u793a\u4f8b\u5982\u4e0b\uff1a docker run -it -d -p 8886 :80 nginx_hello_world_template 4e042d76c39125471951626ba42cd609a65c73f041943298f74f4fc43dc5596a $","title":"\u521b\u5efa Docker \u955c\u50cf"},{"location":"Docker/8-Command/#docker_8","text":"Docker \u5bb9\u5668\u548c\u955c\u50cf\u4f1a\u5360\u7528\u786c\u76d8\u7a7a\u95f4\uff0c\u56e0\u6b64\u6700\u597d\u5b9a\u671f\u6e05\u7406\u3002\u9996\u5148\u505c\u6b62\u6240\u6709\u5bb9\u5668\uff0c\u7136\u540e\u5217\u51fa\u6240\u6709\u5bb9\u5668\uff0c\u4f7f\u7528\u4ee5\u4e0b Docker \u547d\u4ee4\u6267\u884c\u64cd\u4f5c\uff1a docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 4e042d76c391 nginx_hello_world_template \"nginx -g 'daemon of\u2026\" 2 minutes ago Exited ( 0 ) 8 seconds ago boring_keldysh 75b28b720835 ubuntu:latest \"bash\" 2 hours ago Exited ( 0 ) About an hour ago my_ubuntu_2 a19c770b8621 ubuntu:latest \"bash\" 2 hours ago Exited ( 0 ) About an hour ago my_ubuntu 6162daed25da nginx \"nginx -g 'daemon of\u2026\" 3 hours ago Exited ( 0 ) 11 minutes ago hardcore_torvalds \u5982\u4e0a\uff0c\u6709 4 \u4e2a\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\uff0c\u53ef\u4f7f\u7528 docker rm \u547d\u4ee4\u5220\u9664\u5bb9\u5668\uff1a docker rm 4e042d76c391 75b28b720835 a19c770b8621 6162daed25da 4e042d76c391 75b28b720835 a19c770b8621 6162daed25da \u53ef\u4f7f\u7528 NAMES \u4ee3\u66ff CONTAINER ID\uff0c\u5bb9\u5668\u5217\u8868\u73b0\u5728\u5e94\u8be5\u662f\u5e72\u51c0\u7684\uff1a docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES \u5217\u51fa Docker \u955c\u50cf\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE nginx_hello_world_template latest 117d060587a3 11 minutes ago 109MB ubuntu 16 .04 5e8b97a2a082 2 weeks ago 114MB ubuntu latest 113a43faa138 2 weeks ago 81 .2MB nginx latest cd5239a0906a 2 weeks ago 109MB \u53ef\u4f7f\u7528 docker rmi \u547d\u4ee4\u548c IMAGE ID \u5220\u9664 docker \u955c\u50cf\uff1a docker rmi 117d060587a3 5e8b97a2a082 113a43faa138 cd5239a0906a \u6700\u540e\uff0cDocker \u955c\u50cf\u5217\u8868\u5e94\u8be5\u662f\u5e72\u51c0\u7684\uff1a docker images REPOSITORY TAG IMAGE ID CREATED SIZE","title":"\u5220\u9664 Docker \u5bb9\u5668\u548c\u955c\u50cf"},{"location":"Docker/8-Command/#_5","text":"Top Docker Commands Any Expert Should Know","title":"\u53c2\u8003"},{"location":"Docker/8-Command/#_6","text":"\u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e03\uff09\uff1aDocker Compose \u5165\u95e8\u53ca\u5b9e\u8df5 \u4e0b\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u4e5d\uff09\uff1aDocker \u6700\u4f73\u5b9e\u8df5","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/9-Best-Practices/","text":"\u672c\u6587\u662f\u300a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217 \u300b\u7b2c\u4e8c\u7bc7\uff0c\u539f\u6587\u53d1\u5e03\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516b\uff09\uff1aDocker \u57fa\u7840\u5165\u95e8\u53ca\u67b6\u6784\u4ecb\u7ecd \u4e00\u3001Dockerfile \u7b80\u4ecb \u00b6 Dockfile \u662f\u4e00\u79cd\u88ab Docker \u7a0b\u5e8f\u89e3\u91ca\u7684\u811a\u672c\uff0c\u7531\u4e00\u6761\u4e00\u6761\u7684\u6307\u4ee4\u7ec4\u6210\uff0c\u6bcf\u6761\u6307\u4ee4\u5bf9\u5e94 Linux \u4e0b\u9762\u7684\u4e00\u6761\u547d\u4ee4\u3002 Docker \u901a\u8fc7\u4ece Dockerfile \u6587\u672c\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6307\u4ee4\u6765\u81ea\u52a8\u6784\u5efa\u6620\u50cf\uff0c\u8be5\u6587\u672c\u6587\u4ef6\u6309\u987a\u5e8f\u5305\u542b\u6784\u5efa\u955c\u50cf\u6240\u9700\u7684\u6240\u6709\u547d\u4ee4\u3002\u9075\u5faa\u7279\u5b9a\u7684\u683c\u5f0f\u548c\u6307\u4ee4\u96c6\uff0c\u60a8\u53ef\u4ee5\u5728 Dockerfile \u53c2\u8003 \u4e2d\u627e\u5230\u8be6\u7ec6\u4fe1\u606f\u3002 Docker \u955c\u50cf\u7531\u53ea\u8bfb\u5c42\u7ec4\u6210\uff0c\u6bcf\u4e2a\u53ea\u8bfb\u5c42\u4ee3\u8868\u4e00\u4e2a Dockerfile \u6307\u4ee4\u3002\u5404\u4e2a\u5c42\u5806\u53e0\u5728\u4e00\u8d77\uff0c\u6bcf\u4e2a\u5c42\u90fd\u662f\u4e0a\u4e00\u5c42\u53d8\u5316\u7684\u589e\u91cf\u3002\u8fd0\u884c\u955c\u50cf\u5e76\u751f\u6210\u5bb9\u5668\u65f6\uff0c\u53ef\u4ee5\u5728\u57fa\u7840\u5c42\u4e4b\u4e0a\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u53ef\u5199\u5c42\uff08\u201c\u5bb9\u5668\u5c42\u201d\uff09\u3002\u5bf9\u8fd0\u884c\u4e2d\u5bb9\u5668\u6240\u505a\u7684\u6240\u6709\u66f4\u6539\uff08\u4f8b\u5982\u5199\u5165\u65b0\u6587\u4ef6\uff0c\u4fee\u6539\u73b0\u6709\u6587\u4ef6\u548c\u5220\u9664\u6587\u4ef6\uff09\u90fd\u5c06\u5199\u5165\u5230\u6b64\u53ef\u5199\u5bb9\u5668\u5c42\u3002 \u4e8c\u3001Dockerfile \u7f16\u5199\u5efa\u8bae \u00b6 Dockerfile \u7684\u6307\u4ee4\u662f\u5ffd\u7565\u5927\u5c0f\u5199\u7684\uff0c\u5efa\u8bae\u4f7f\u7528\u5927\u5199\uff0c\u4f7f\u7528 # \u4f5c\u4e3a\u6ce8\u91ca\uff0c\u6bcf\u4e00\u884c\u53ea\u652f\u6301\u4e00\u6761\u6307\u4ee4\uff0c\u6bcf\u6761\u6307\u4ee4\u53ef\u4ee5\u643a\u5e26\u591a\u4e2a\u53c2\u6570\u3002Dockerfile \u5e38\u7528\u6307\u4ee4\uff1a \u7c7b\u578b \u547d\u4ee4 \u57fa\u7840\u955c\u50cf\u4fe1\u606f FROM \u7ef4\u62a4\u8005\u4fe1\u606f MAINTAINER \u955c\u50cf\u64cd\u4f5c\u6307\u4ee4 RUN\u3001COPY\u3001ADD\u3001EXPOSE\u3001WORKDIR\u3001ONBUILD\u3001USER\u3001VOLUME \u7b49 \u5bb9\u5668\u542f\u52a8\u65f6\u6267\u884c\u6307\u4ee4 CMD\u3001ENTRYPOINT \u4e0b\u9762\u9488\u5bf9 Dockerfile \u4e2d\u5404\u79cd\u6307\u4ee4\u7684\u6700\u4f73\u7f16\u5199\u65b9\u5f0f\u7ed9\u51fa\u5efa\u8bae\u3002 FROM\uff08\u6307\u5b9a\u57fa\u7840\u955c\u50cf\uff09 \u8be5\u6307\u4ee4\u6709\u4e24\u79cd\u683c\u5f0f\uff1a\u4f7f\u7528 FROM <image> \u6307\u5b9a\u57fa\u7840\u955c\u50cf\u4e3a\u8be5 image \u7684\u6700\u540e\u4fee\u6539\u7248\u672c\u3002\u6216\u8005\u5b9e\u4f7f\u7528 FROM <image>:<tag> \u6307\u5b9a\u57fa\u7840 image \u4e3a\u8be5 image \u7684\u4e00\u4e2a tag \u7248\u672c\u3002 \u5c3d\u53ef\u80fd\u4f7f\u7528\u5b98\u65b9\u4ed3\u5e93\u5f53\u524d\u7248\u672c\u4f5c\u4e3a\u4f60\u7684\u57fa\u7840\u955c\u50cf\u3002\u63a8\u8350\u4f7f\u7528 Alpine \u955c\u50cf\uff0c\u56e0\u4e3a\u5b83\u88ab\u4e25\u683c\u63a7\u5236\u5e76\u4fdd\u6301\u6700\u5c0f\u5c3a\u5bf8\uff08\u76ee\u524d\u5c0f\u4e8e 5 MB\uff09\uff0c\u4f46\u5b83\u4ecd\u7136\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u53d1\u884c\u7248\u3002 LABEL\uff08\u5411\u6620\u50cf\u6dfb\u52a0\u5143\u6570\u636e\uff09 \u4f60\u53ef\u4ee5\u7ed9\u955c\u50cf\u6dfb\u52a0\u6807\u7b7e\u6765\u5e2e\u52a9\u7ec4\u7ec7\u955c\u50cf\u3001\u8bb0\u5f55\u8bb8\u53ef\u4fe1\u606f\u3001\u8f85\u52a9\u81ea\u52a8\u5316\u6784\u5efa\u7b49\u3002\u6bcf\u4e2a\u6807\u7b7e\u4e00\u884c\uff0c\u7531 LABEL \u5f00\u5934\u52a0\u4e0a\u4e00\u4e2a\u6216\u591a\u4e2a\u952e\u503c\u5bf9\u3002\u4e0b\u9762\u7684\u793a\u4f8b\u5c55\u793a\u4e86\u5404\u79cd\u4e0d\u540c\u7684\u53ef\u80fd\u683c\u5f0f\u3002 # \u5f00\u5934\u7684\u884c\u662f\u6ce8\u91ca\u5185\u5bb9\u3002 \u6ce8\u610f\uff1a\u5982\u679c\u4f60\u7684\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u7a7a\u683c\uff0c\u5fc5\u987b\u5c06\u5b57\u7b26\u4e32\u653e\u5165\u5f15\u53f7\u4e2d\u6216\u8005\u5bf9\u7a7a\u683c\u4f7f\u7528\u8f6c\u4e49\u3002\u5982\u679c\u5b57\u7b26\u4e32\u5185\u5bb9\u672c\u8eab\u5c31\u5305\u542b\u5f15\u53f7\uff0c\u5fc5\u987b\u5bf9\u5f15\u53f7\u4f7f\u7528\u8f6c\u4e49\u3002 # Set one or more individual labels LABEL com.example.version = \"0.0.1-beta\" LABEL vendor = \"ACME Incorporated\" LABEL com.example.release-date = \"2015-02-12\" LABEL com.example.version.is-production = \"\" \u4e00\u4e2a\u955c\u50cf\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6807\u7b7e\uff0c\u53ef\u4ee5\u5728\u4e00\u884c\u4e2d\u6307\u5b9a\u591a\u4e2a\u6807\u7b7e\uff0c\u4f46\u5efa\u8bae\u5c06\u591a\u4e2a\u6807\u7b7e\u653e\u5165\u5230\u4e00\u4e2a LABEL \u6307\u4ee4\u4e2d\u3002 # Set multiple labels at once, using line-continuation characters to break long lines LABEL vendor = ACME \\ Incorporated \\ com.example.is-beta = \\ com.example.is-production = \"\" \\ com.example.version = \"0.0.1-beta\" \\ com.example.release-date = \"2015-02-12\" \u5173\u4e8e\u6807\u7b7e\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53ef\u4ee5\u53c2\u8003 Understanding object labels \u3002 RUN\uff08\u4e00\u822c\u7528\u4e8e\u5b89\u88c5\u8f6f\u4ef6\uff09 RUN \u6307\u4ee4\u662f\u5728\u65b0\u955c\u50cf\u5185\u90e8\u6267\u884c\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u8fd0\u884c\u4efb\u4f55\u88ab\u57fa\u7840 image \u652f\u6301\u7684\u547d\u4ee4\uff0c\u5982\uff1a\u6267\u884c\u67d0\u4e9b\u52a8\u4f5c\u3001\u5b89\u88c5\u7cfb\u7edf\u8f6f\u4ef6\u3001\u914d\u7f6e\u7cfb\u7edf\u4fe1\u606f\u4e4b\u7c7b\u3002\u4e3a\u4e86\u4fdd\u6301 Dockerfile \u6587\u4ef6\u7684\u53ef\u8bfb\u6027\uff0c\u53ef\u7406\u89e3\u6027\uff0c\u4ee5\u53ca\u53ef\u7ef4\u62a4\u6027\uff0c\u5efa\u8bae\u5c06\u957f\u7684\u6216\u590d\u6742\u7684 RUN \u6307\u4ee4\u7528\u53cd\u659c\u6760 \\ \u5206\u5272\u6210\u591a\u884c\u3002 apt-get RUN \u6307\u4ee4\u6700\u5e38\u89c1\u7684\u7528\u6cd5\u662f\u5b89\u88c5\u5305\u7528\u7684 apt-get \u3002\u56e0\u4e3a RUN apt-get \u6307\u4ee4\u4f1a\u5b89\u88c5\u5305\uff0c\u6240\u4ee5\u6709\u51e0\u4e2a\u95ee\u9898\u9700\u8981\u6ce8\u610f\u3002 \u4e0d\u8981\u4f7f\u7528 RUN apt-get upgrade \u6216 dist-upgrade \uff0c\u56e0\u4e3a\u8bb8\u591a\u57fa\u7840\u955c\u50cf\u4e2d\u7684\u300c\u5fc5\u987b\u300d\u5305\u4e0d\u4f1a\u5728\u4e00\u4e2a\u975e\u7279\u6743\u5bb9\u5668\u4e2d\u5347\u7ea7\u3002\u5982\u679c\u57fa\u7840\u955c\u50cf\u4e2d\u7684\u67d0\u4e2a\u5305\u8fc7\u65f6\u4e86\uff0c\u4f60\u5e94\u8be5\u8054\u7cfb\u5b83\u7684\u7ef4\u62a4\u8005\u3002\u5982\u679c\u4f60\u786e\u5b9a\u67d0\u4e2a\u7279\u5b9a\u7684\u5305\uff0c\u6bd4\u5982 foo \uff0c\u9700\u8981\u5347\u7ea7\uff0c\u4f7f\u7528 apt-get install -y foo \u5c31\u884c\uff0c\u8be5\u6307\u4ee4\u4f1a\u81ea\u52a8\u5347\u7ea7 foo \u5305\u3002 \u6c38\u8fdc\u5c06 RUN apt-get update \u548c apt-get install \u7ec4\u5408\u6210\u4e00\u6761 RUN \u58f0\u660e\uff0c\u4f8b\u5982\uff1a RUN apt-get update && apt-get install -y \\ package-bar \\ package-baz \\ package-foo \u5c06 apt-get update \u653e\u5728\u4e00\u6761\u5355\u72ec\u7684 RUN \u58f0\u660e\u4e2d\u4f1a\u5bfc\u81f4\u7f13\u5b58\u95ee\u9898\u4ee5\u53ca\u540e\u7eed\u7684 apt-get install \u5931\u8d25\u3002\u6bd4\u5982\uff0c\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a Dockerfile \u6587\u4ef6\uff1a FROM ubuntu:18.04 RUN apt-get update RUN apt-get install -y curl \u6784\u5efa\u955c\u50cf\u540e\uff0c\u6240\u6709\u7684\u5c42\u90fd\u5728 Docker \u7684\u7f13\u5b58\u4e2d\u3002\u5047\u8bbe\u4f60\u540e\u6765\u53c8\u4fee\u6539\u4e86\u5176\u4e2d\u7684 apt-get install \u6dfb\u52a0\u4e86\u4e00\u4e2a\u5305\uff1a FROM ubuntu:18.04 RUN apt-get update RUN apt-get install -y curl nginx Docker \u53d1\u73b0\u4fee\u6539\u540e\u7684 RUN apt-get update \u6307\u4ee4\u548c\u4e4b\u524d\u7684\u5b8c\u5168\u4e00\u6837\u3002\u6240\u4ee5\uff0c apt-get update \u4e0d\u4f1a\u6267\u884c\uff0c\u800c\u662f\u4f7f\u7528\u4e4b\u524d\u7684\u7f13\u5b58\u955c\u50cf\u3002\u56e0\u4e3a apt-get update \u6ca1\u6709\u8fd0\u884c\uff0c\u540e\u9762\u7684 apt-get install \u53ef\u80fd\u5b89\u88c5\u7684\u662f\u8fc7\u65f6\u7684 curl \u548c nginx \u7248\u672c\u3002 \u4f7f\u7528 RUN apt-get update && apt-get install -y \u53ef\u4ee5\u786e\u4fdd\u4f60\u7684 Dockerfiles \u6bcf\u6b21\u5b89\u88c5\u7684\u90fd\u662f\u5305\u7684\u6700\u65b0\u7684\u7248\u672c\uff0c\u800c\u4e14\u8fd9\u4e2a\u8fc7\u7a0b\u4e0d\u9700\u8981\u8fdb\u4e00\u6b65\u7684\u7f16\u7801\u6216\u989d\u5916\u5e72\u9884\u3002\u8fd9\u9879\u6280\u672f\u53eb\u4f5c cache busting \u3002\u4f60\u4e5f\u53ef\u4ee5\u663e\u793a\u6307\u5b9a\u4e00\u4e2a\u5305\u7684\u7248\u672c\u53f7\u6765\u8fbe\u5230 cache-busting \uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u56fa\u5b9a\u7248\u672c\uff0c\u4f8b\u5982\uff1a RUN apt-get update && apt-get install -y \\ package-bar \\ package-baz \\ package-foo = 1 .3.* \u56fa\u5b9a\u7248\u672c\u4f1a\u8feb\u4f7f\u6784\u5efa\u8fc7\u7a0b\u68c0\u7d22\u7279\u5b9a\u7684\u7248\u672c\uff0c\u800c\u4e0d\u7ba1\u7f13\u5b58\u4e2d\u6709\u4ec0\u4e48\u3002\u8fd9\u9879\u6280\u672f\u4e5f\u53ef\u4ee5\u51cf\u5c11\u56e0\u6240\u9700\u5305\u4e2d\u672a\u9884\u6599\u5230\u7684\u53d8\u5316\u800c\u5bfc\u81f4\u7684\u5931\u8d25\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a RUN \u6307\u4ee4\u7684\u793a\u4f8b\u6a21\u677f\uff0c\u5c55\u793a\u4e86\u6240\u6709\u5173\u4e8e apt-get \u7684\u5efa\u8bae\u3002 RUN apt-get update && apt-get install -y \\ aufs-tools \\ automake \\ build-essential \\ curl \\ dpkg-sig \\ libcap-dev \\ libsqlite3-dev \\ mercurial \\ reprepro \\ ruby1.9.1 \\ ruby1.9.1-dev \\ s3cmd = 1 .1.* \\ && rm -rf /var/lib/apt/lists/* \u5176\u4e2d s3cmd \u6307\u4ee4\u6307\u5b9a\u4e86\u4e00\u4e2a\u7248\u672c\u53f7 1.1.* \u3002\u5982\u679c\u4e4b\u524d\u7684\u955c\u50cf\u4f7f\u7528\u7684\u662f\u66f4\u65e7\u7684\u7248\u672c\uff0c\u6307\u5b9a\u65b0\u7684\u7248\u672c\u4f1a\u5bfc\u81f4 apt-get udpate \u7f13\u5b58\u5931\u6548\u5e76\u786e\u4fdd\u5b89\u88c5\u7684\u662f\u65b0\u7248\u672c\u3002 \u53e6\u5916\uff0c\u6e05\u7406\u6389 apt \u7f13\u5b58 var/lib/apt/lists \u53ef\u4ee5\u51cf\u5c0f\u955c\u50cf\u5927\u5c0f\u3002\u56e0\u4e3a RUN \u6307\u4ee4\u7684\u5f00\u5934\u4e3a apt-get udpate \uff0c\u5305\u7f13\u5b58\u603b\u662f\u4f1a\u5728 apt-get install \u4e4b\u524d\u5237\u65b0\u3002 \u6ce8\u610f\uff1a\u5b98\u65b9\u7684 Debian \u548c Ubuntu \u955c\u50cf\u4f1a\u81ea\u52a8\u8fd0\u884c apt-get clean\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u663e\u5f0f\u7684\u8c03\u7528 apt-get clean\u3002 CMD\uff08\u8bbe\u7f6e\u5bb9\u5668\u542f\u52a8\u65f6\u9ed8\u8ba4\u64cd\u4f5c\uff09 CMD \u6307\u4ee4\u7684\u4e3b\u8981\u76ee\u7684\u662f\u4e3a\u6b63\u5728\u6267\u884c\u7684\u5bb9\u5668\u63d0\u4f9b\u7f3a\u7701\u503c\u3002\u6307\u5b9a\u5bb9\u5668\u542f\u52a8\u65f6\u6267\u884c\u7684\u64cd\u4f5c\u3002\u8be5\u64cd\u4f5c\u53ef\u4ee5\u662f\u6267\u884c\u81ea\u5b9a\u4e49\u811a\u672c\uff0c\u4e5f\u53ef\u4ee5\u662f\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u3002\u8be5\u6307\u4ee4\u53ea\u80fd\u5728\u6587\u4ef6\u4e2d\u5b58\u5728\u4e00\u6b21\uff0c\u5982\u679c\u6709\u591a\u4e2a\uff0c\u5219\u53ea\u6267\u884c\u6700\u540e\u4e00\u6761\u3002 CMD \u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u5e94\u8be5\u4ee5 CMD [\"executable\", \"param1\", \"param2\"...] \u7684\u5f62\u5f0f\u4f7f\u7528\u3002\u56e0\u6b64\uff0c\u5982\u679c\u521b\u5efa\u955c\u50cf\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u90e8\u7f72\u67d0\u4e2a\u670d\u52a1(\u6bd4\u5982 Apache )\uff0c\u4f60\u53ef\u80fd\u4f1a\u6267\u884c\u7c7b\u4f3c\u4e8e CMD [\"apache2\", \"-DFOREGROUND\"] \u5f62\u5f0f\u7684\u547d\u4ee4\u3002\u6211\u4eec\u5efa\u8bae\u4efb\u4f55\u670d\u52a1\u955c\u50cf\u90fd\u4f7f\u7528\u8fd9\u79cd\u5f62\u5f0f\u7684\u547d\u4ee4\u3002 \u591a\u6570\u60c5\u51b5\u4e0b\uff0c CMD \u90fd\u9700\u8981\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u7684 shell (bash, Python, perl \u7b49)\uff0c\u4f8b\u5982 CMD [\"perl\", \"-de0\"] \uff0c\u6216\u8005 CMD [\"PHP\", \"-a\"] \u3002\u4f7f\u7528\u8fd9\u79cd\u5f62\u5f0f\u610f\u5473\u7740\uff0c\u5f53\u4f60\u6267\u884c\u7c7b\u4f3c docker run -it python \u65f6\uff0c\u4f60\u4f1a\u8fdb\u5165\u4e00\u4e2a\u51c6\u5907\u597d\u7684 shell \u4e2d\u3002 CMD \u5e94\u8be5\u5728\u6781\u5c11\u7684\u60c5\u51b5\u4e0b\u4ee5 CMD [\"param\", \"param\"] \u7684\u5f62\u5f0f\u4e0e ENTRYPOINT \u534f\u540c\u4f7f\u7528\uff0c\u9664\u975e\u4f60\u548c\u4f60\u7684\u955c\u50cf\u4f7f\u7528\u8005\u90fd\u5bf9 ENTRYPOINT \u7684\u5de5\u4f5c\u65b9\u5f0f\u5341\u5206\u719f\u6089\u3002 \u6ce8\u610f: \u4e0d\u8981\u5c06 RUN \u4e0e CMD \u6df7\u6dc6\u3002 Run \u5b9e\u9645\u4e0a\u662f\u8fd0\u884c\u4e00\u4e2a\u547d\u4ee4\u5e76\u63d0\u4ea4\u7ed3\u679c; CMD \u5728\u6784\u5efa\u65f6\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\uff0c\u4f46\u4f1a\u6307\u5b9a\u955c\u50cf\u7684\u9884\u671f\u547d\u4ee4\u3002 ENTRYPOINT\uff08\u8bbe\u7f6e\u955c\u50cf\u4e3b\u547d\u4ee4\uff09 ENTRYPOINT \u7684\u6700\u4f73\u7528\u5904\u662f\u8bbe\u7f6e\u955c\u50cf\u7684\u4e3b\u547d\u4ee4\uff0c\u4e0e CMD \u975e\u5e38\u76f8\u4f3c\u3002\u5f53 CMD \u548c ENTRYPOINT \u90fd\u5b58\u5728\u65f6\uff0c CMD \u7684\u6307\u4ee4\u53d8\u6210\u4e86 ENTRYPOINT \u6307\u4ee4\u7684\u53c2\u6570\u3002\u5e76\u4e14\u6b64 CMD \u63d0\u4f9b\u7684\u53c2\u6570\u4f1a\u88ab docker run \u540e\u9762\u7684\u547d\u4ee4\u8986\u76d6\u3002 FROM ubuntu CMD [ \"-l\" ] ENTRYPOINT [ \"/usr/bin/ls\" ] \u5982\u679c\u4f60\u4f7f\u7528 CMD \u547d\u4ee4\u4e14 CMD \u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u53ef\u6267\u884c\u7684\u547d\u4ee4\uff0c\u90a3\u4e48 CMD \u6307\u4ee4\u548c ENTRYPOINT \u4f1a\u4e92\u76f8\u8986\u76d6\u53ea\u6709\u6700\u540e\u4e00\u4e2a CMD \u6216\u8005 ENTRYPOINT \u6709\u6548\u3002 # CMD\u6307\u4ee4\u5c06\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u53ea\u6709ENTRYPOINT\u6307\u4ee4\u88ab\u6267\u884c CMD echo \u201cHello, World!\u201d ENTRYPOINT ls -l ENTRYPOINT \u6307\u4ee4\u4e5f\u53ef\u4ee5\u7ed3\u5408\u4e00\u4e2a\u8f85\u52a9\u811a\u672c\u4f7f\u7528\uff0c\u548c\u524d\u9762\u547d\u4ee4\u884c\u98ce\u683c\u7c7b\u4f3c\uff0c\u5373\u4f7f\u542f\u52a8\u5de5\u5177\u9700\u8981\u4e0d\u6b62\u4e00\u4e2a\u6b65\u9aa4\u3002 \u4f8b\u5982\uff0c Postgres \u5b98\u65b9\u955c\u50cf\u4f7f\u7528\u4e0b\u9762\u7684\u811a\u672c\u4f5c\u4e3a ENTRYPOINT \uff1a #!/bin/bash set -e if [ \" $1 \" = 'postgres' ] ; then chown -R postgres \" $PGDATA \" if [ -z \" $( ls -A \" $PGDATA \" ) \" ] ; then gosu postgres initdb fi exec gosu postgres \" $@ \" fi exec \" $@ \" \u6ce8\u610f\uff1a\u8be5\u811a\u672c\u4f7f\u7528\u4e86 Bash \u7684\u5185\u7f6e\u547d\u4ee4 exec\uff0c\u6240\u4ee5\u6700\u540e\u8fd0\u884c\u7684\u8fdb\u7a0b\u5c31\u662f\u5bb9\u5668\u7684 PID \u4e3a 1 \u7684\u8fdb\u7a0b\u3002\u8fd9\u6837\uff0c\u8fdb\u7a0b\u5c31\u53ef\u4ee5\u63a5\u6536\u5230\u4efb\u4f55\u53d1\u9001\u7ed9\u5bb9\u5668\u7684 Unix \u4fe1\u53f7\u4e86\u3002 \u8be5\u8f85\u52a9\u811a\u672c\u88ab\u62f7\u8d1d\u5230\u5bb9\u5668\uff0c\u5e76\u5728\u5bb9\u5668\u542f\u52a8\u65f6\u901a\u8fc7 ENTRYPOINT \u6267\u884c\uff1a COPY ./docker-entrypoint.sh / ENTRYPOINT [ \"/docker-entrypoint.sh\" ] \u8be5\u811a\u672c\u53ef\u4ee5\u8ba9\u7528\u6237\u7528\u51e0\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\u548c Postgres \u4ea4\u4e92\u3002 \u4f60\u53ef\u4ee5\u5f88\u7b80\u5355\u5730\u542f\u52a8 Postgres \uff1a docker run postgres \u4e5f\u53ef\u4ee5\u6267\u884c Postgres \u5e76\u4f20\u9012\u53c2\u6570\uff1a docker run postgres postgres --help \u6700\u540e\uff0c\u4f60\u8fd8\u53ef\u4ee5\u542f\u52a8\u53e6\u5916\u4e00\u4e2a\u5b8c\u5168\u4e0d\u540c\u7684\u5de5\u5177\uff0c\u6bd4\u5982 Bash \uff1a docker run --rm -it postgres bash EXPOSE\uff08\u66b4\u9732\u5bb9\u5668\u7aef\u53e3\uff09 EXPOSE \u6307\u4ee4\u7528\u4e8e\u6307\u5c06\u5bb9\u5668\u4e2d\u7684\u7aef\u53e3\u6620\u5c04\u6210\u5bbf\u4e3b\u673a\u7684\u67d0\u4e2a\u7aef\u53e3\u3002\u5f53\u4f60\u9700\u8981\u8bbf\u95ee\u5bb9\u5668\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4e0d\u4f7f\u7528\u5bb9\u5668\u7684 IP \u5730\u5740\u800c\u662f\u4f7f\u7528\u5bbf\u4e3b\u673a\u5668\u7684 IP \u5730\u5740\u548c\u6620\u5c04\u540e\u7684\u7aef\u53e3\u3002\u56e0\u6b64\uff0c\u4f60\u5e94\u8be5\u4e3a\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5e38\u89c1\u7684\u7aef\u53e3\u3002\u4f8b\u5982\uff0c\u63d0\u4f9b Apache web \u670d\u52a1\u7684\u955c\u50cf\u5e94\u8be5\u4f7f\u7528 EXPOSE 80 \uff0c\u800c\u63d0\u4f9b MongoDB \u670d\u52a1\u7684\u955c\u50cf\u4f7f\u7528 EXPOSE 27017 \u3002 \u5bf9\u4e8e\u5916\u90e8\u8bbf\u95ee\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u6267\u884c docker run \u65f6\u4f7f\u7528 -p \u6807\u5fd7\u6765\u5c06\u5bb9\u5668\u7684\u6307\u5b9a\u7aef\u53e3\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u6240\u9009\u62e9\u7684\u7aef\u53e3\u3002 ENV\uff08\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff09 \u4e3a\u4e86\u65b9\u4fbf\u65b0\u7a0b\u5e8f\u8fd0\u884c\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ENV \u6765\u4e3a\u5bb9\u5668\u4e2d\u5b89\u88c5\u7684\u7a0b\u5e8f\u66f4\u65b0 PATH \u73af\u5883\u53d8\u91cf\u3002 \u4f8b\u5982\u4f7f\u7528 ENV PATH /usr/local/nginx/bin:$PATH \u6765\u786e\u4fdd CMD [\"nginx\"] \u80fd\u6b63\u786e\u8fd0\u884c\u3002 ENV \u6307\u4ee4\u4e5f\u53ef\u7528\u4e8e\u4e3a\u4f60\u60f3\u8981\u5bb9\u5668\u5316\u7684\u670d\u52a1\u63d0\u4f9b\u5fc5\u8981\u7684\u73af\u5883\u53d8\u91cf\uff0c\u6bd4\u5982 Postgres \u9700\u8981\u7684 PGDATA \u3002 \u6700\u540e\uff0c ENV \u4e5f\u80fd\u7528\u4e8e\u8bbe\u7f6e\u5e38\u89c1\u7684\u7248\u672c\u53f7\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u793a\u4f8b\uff1a ENV PG_MAJOR 9 .3 ENV PG_VERSION 9 .3.4 RUN curl -SL http://example.com/postgres- $PG_VERSION .tar.xz | tar -xJC /usr/src/postgress && \u2026 ENV PATH /usr/local/postgres- $PG_MAJOR /bin: $PATH \u7c7b\u4f3c\u4e8e\u7a0b\u5e8f\u4e2d\u7684\u5e38\u91cf\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u4f60\u53ea\u9700\u6539\u53d8 ENV \u6307\u4ee4\u6765\u81ea\u52a8\u7684\u6539\u53d8\u5bb9\u5668\u4e2d\u7684\u8f6f\u4ef6\u7248\u672c\u3002 \u5728\u4f7f\u7528 ENV \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u65f6\uff0c\u6709\u51e0\u70b9\u9700\u8981\u6ce8\u610f\uff1a 1\uff09\u5177\u6709\u4f20\u9012\u6027\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u955c\u50cf\u88ab\u7528\u4f5c\u5176\u5b83\u955c\u50cf\u7684\u57fa\u7840\u955c\u50cf\u65f6\uff0c\u65b0\u955c\u50cf\u4f1a\u62e5\u6709\u5f53\u524d\u8fd9\u4e2a\u57fa\u7840\u955c\u50cf\u6240\u6709\u7684\u73af\u5883\u53d8\u91cf 2\uff09ENV \u5b9a\u4e49\u7684\u73af\u5883\u53d8\u91cf\uff0c\u53ef\u4ee5\u5728 dockerfile \u88ab\u540e\u9762\u7684\u6240\u6709\u6307\u4ee4\uff08CMD \u9664\u5916\uff09\u4e2d\u4f7f\u7528\uff0c\u4f46\u4e0d\u80fd\u88ab docker run \u7684\u547d\u4ee4\u53c2\u6570\u5f15\u7528 ADD \u548c COPY\uff08\u590d\u5236\u6587\u4ef6\u5230\u5bb9\u5668\uff09 \u867d\u7136 ADD \u548c COPY \u529f\u80fd\u7c7b\u4f3c\uff0c\u4f46\u4e00\u822c\u4f18\u5148\u4f7f\u7528 COPY \u3002\u56e0\u4e3a\u5b83\u6bd4 ADD \u66f4\u900f\u660e\u3002 COPY \u53ea\u652f\u6301\u7b80\u5355\u5c06\u672c\u5730\u6587\u4ef6\u62f7\u8d1d\u5230\u5bb9\u5668\u4e2d\uff0c\u800c ADD \u6709\u4e00\u4e9b\u5e76\u4e0d\u660e\u663e\u7684\u529f\u80fd\uff08\u6bd4\u5982\u672c\u5730 tar \u63d0\u53d6\u548c\u8fdc\u7a0b URL \u652f\u6301\uff09\u3002\u56e0\u6b64\uff0c ADD \u7684\u6700\u4f73\u7528\u4f8b\u662f\u5c06\u672c\u5730 tar \u6587\u4ef6\u81ea\u52a8\u63d0\u53d6\u5230\u955c\u50cf\u4e2d\uff0c\u4f8b\u5982 ADD rootfs.tar.xz \u3002 \u5982\u679c\u4f60\u7684 Dockerfile \u6709\u591a\u4e2a\u6b65\u9aa4\u9700\u8981\u4f7f\u7528\u4e0a\u4e0b\u6587\u4e2d\u4e0d\u540c\u7684\u6587\u4ef6\u3002\u5355\u72ec COPY \u6bcf\u4e2a\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u4e00\u6b21\u6027\u7684 COPY \u6240\u6709\u6587\u4ef6\uff0c\u8fd9\u5c06\u4fdd\u8bc1\u6bcf\u4e2a\u6b65\u9aa4\u7684\u6784\u5efa\u7f13\u5b58\u53ea\u5728\u7279\u5b9a\u7684\u6587\u4ef6\u53d8\u5316\u65f6\u5931\u6548\u3002\u4f8b\u5982\uff1a COPY requirements.txt /tmp/ RUN pip install --requirement /tmp/requirements.txt COPY . /tmp/ \u5982\u679c\u5c06 COPY . /tmp/ \u653e\u7f6e\u5728 RUN \u6307\u4ee4\u4e4b\u524d\uff0c\u53ea\u8981 . \u76ee\u5f55\u4e2d\u4efb\u4f55\u4e00\u4e2a\u6587\u4ef6\u53d8\u5316\uff0c\u90fd\u4f1a\u5bfc\u81f4\u540e\u7eed\u6307\u4ee4\u7684\u7f13\u5b58\u5931\u6548\u3002 \u4e3a\u4e86\u8ba9\u955c\u50cf\u5c3d\u91cf\u5c0f\uff0c\u6700\u597d\u4e0d\u8981\u4f7f\u7528 ADD \u6307\u4ee4\u4ece\u8fdc\u7a0b URL \u83b7\u53d6\u5305\uff0c\u800c\u662f\u4f7f\u7528 curl \u548c wget \u3002\u8fd9\u6837\u4f60\u53ef\u4ee5\u5728\u6587\u4ef6\u63d0\u53d6\u5b8c\u4e4b\u540e\u5220\u6389\u4e0d\u518d\u9700\u8981\u7684\u6587\u4ef6\u6765\u907f\u514d\u5728\u955c\u50cf\u4e2d\u989d\u5916\u6dfb\u52a0\u4e00\u5c42\u3002\u6bd4\u5982\u5c3d\u91cf\u907f\u514d\u4e0b\u9762\u7684\u7528\u6cd5\uff1a ADD http://example.com/big.tar.xz /usr/src/things/ RUN tar -xJf /usr/src/things/big.tar.xz -C /usr/src/things RUN make -C /usr/src/things all \u800c\u662f\u5e94\u8be5\u4f7f\u7528\u4e0b\u9762\u8fd9\u79cd\u65b9\u6cd5\uff1a RUN mkdir -p /usr/src/things \\ && curl -SL http://example.com/big.tar.xz \\ | tar -xJC /usr/src/things \\ && make -C /usr/src/things all \u4e0a\u9762\u4f7f\u7528\u7684\u7ba1\u9053\u64cd\u4f5c\uff0c\u6240\u4ee5\u6ca1\u6709\u4e2d\u95f4\u6587\u4ef6\u9700\u8981\u5220\u9664\u3002 \u5bf9\u4e8e\u5176\u4ed6\u4e0d\u9700\u8981 ADD \u7684\u81ea\u52a8\u63d0\u53d6\u529f\u80fd\u7684\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528 COPY \u3002 VOLUME\uff08\u6307\u5b9a\u6302\u8f7d\u70b9\uff09 VOLUME \u6307\u4ee4\u7528\u4e8e\u66b4\u9732\u4efb\u4f55\u6570\u636e\u5e93\u5b58\u50a8\u6587\u4ef6\uff0c\u914d\u7f6e\u6587\u4ef6\uff0c\u6216\u5bb9\u5668\u521b\u5efa\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u3002\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528 VOLUME \u6765\u7ba1\u7406\u955c\u50cf\u4e2d\u7684\u53ef\u53d8\u90e8\u5206\u548c\u7528\u6237\u53ef\u4ee5\u6539\u53d8\u7684\u90e8\u5206\u3002 USER\uff08\u6307\u5b9a\u8fd0\u884c\u955c\u50cf\u65f6\u4f7f\u7528\u7684\u7528\u6237\uff09 \u5982\u679c\u67d0\u4e2a\u670d\u52a1\u4e0d\u9700\u8981\u7279\u6743\u6267\u884c\uff0c\u5efa\u8bae\u4f7f\u7528 USER \u6307\u4ee4\u5207\u6362\u5230\u975e root \u7528\u6237\u3002\u5148\u5728 Dockerfile \u4e2d\u4f7f\u7528\u7c7b\u4f3c RUN groupadd -r postgres && useradd -r -g postgres postgres \u7684\u6307\u4ee4\u521b\u5efa\u7528\u6237\u548c\u7528\u6237\u7ec4\u3002 \u6ce8\u610f\uff1a\u5728\u955c\u50cf\u4e2d\uff0c\u7528\u6237\u548c\u7528\u6237\u7ec4\u6bcf\u6b21\u88ab\u5206\u914d\u7684 UID/GID \u90fd\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u4e0b\u6b21\u91cd\u65b0\u6784\u5efa\u955c\u50cf\u65f6\u88ab\u5206\u914d\u5230\u7684 UID/GID \u53ef\u80fd\u4f1a\u4e0d\u4e00\u6837\u3002\u5982\u679c\u8981\u4f9d\u8d56\u786e\u5b9a\u7684 UID/GID\uff0c\u4f60\u5e94\u8be5\u663e\u793a\u7684\u6307\u5b9a\u4e00\u4e2a UID/GID\u3002 \u4f60\u5e94\u8be5\u907f\u514d\u4f7f\u7528 sudo \uff0c\u56e0\u4e3a\u5b83\u4e0d\u53ef\u9884\u671f\u7684 TTY \u548c\u4fe1\u53f7\u8f6c\u53d1\u884c\u4e3a\u53ef\u80fd\u9020\u6210\u7684\u95ee\u9898\u6bd4\u5b83\u80fd\u89e3\u51b3\u7684\u95ee\u9898\u8fd8\u591a\u3002\u5982\u679c\u4f60\u771f\u7684\u9700\u8981\u548c sudo \u7c7b\u4f3c\u7684\u529f\u80fd\uff08\u4f8b\u5982\uff0c\u4ee5 root \u6743\u9650\u521d\u59cb\u5316\u67d0\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u4ee5\u975e root \u6743\u9650\u6267\u884c\u5b83\uff09\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 gosu \u3002 \u6700\u540e\uff0c\u4e3a\u4e86\u51cf\u5c11\u5c42\u6570\u548c\u590d\u6742\u5ea6\uff0c\u907f\u514d\u9891\u7e41\u5730\u4f7f\u7528 USER \u6765\u56de\u5207\u6362\u7528\u6237\u3002 WORKDIR\uff08\u5207\u6362\u76ee\u5f55\uff09 \u4e3a\u8ddf\u5728\u5b83\u540e\u9762\u7684 RUN \u3001 CMD \u3001 ENTRYPOINT \u3001 COPY \u548c ADD \u6307\u4ee4\u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\u3002\u5176\u6548\u679c\u7c7b\u4f3c\u4e8e Linux \u547d\u540d\u4e2d\u7684 cd \u547d\u4ee4\uff0c\u7528\u4e8e\u76ee\u5f55\u7684\u5207\u6362\uff0c\u4f46\u662f\u548c cd \u4e0d\u4e00\u6837\u7684\u662f\uff1a\u5982\u679c\u5207\u6362\u5230\u7684\u76ee\u5f55\u4e0d\u5b58\u5728\uff0cWORKDIR \u4f1a\u4e3a\u6b64\u521b\u5efa\u76ee\u5f55\u3002 \u4e3a\u4e86\u6e05\u6670\u6027\u548c\u53ef\u9760\u6027\uff0c\u4f60\u5e94\u8be5\u603b\u662f\u5728 WORKDIR \u4e2d\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u3002\u53e6\u5916\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528 WORKDIR \u6765\u66ff\u4ee3\u7c7b\u4f3c\u4e8e RUN cd ... && do-something \u7684\u6307\u4ee4\uff0c\u540e\u8005\u96be\u4ee5\u9605\u8bfb\u3001\u6392\u9519\u548c\u7ef4\u62a4\u3002 ONBUILD\uff08\u5728\u5b50\u955c\u50cf\u4e2d\u6267\u884c\uff09 Onbuild \u6307\u4ee4\u5411\u955c\u50cf\u6dfb\u52a0\u4e00\u4e2a\u89e6\u53d1\u5668\u6307\u4ee4\uff0c\u4ee5\u4fbf\u5728\u4ee5\u540e\u5c06\u8be5\u6620\u50cf\u7528\u4f5c\u53e6\u4e00\u4e2a\u6784\u5efa\u7684\u57fa\u7840\u955c\u50cf\u65f6\u6267\u884c\u3002 \u610f\u601d\u5c31\u662f\uff1a\u8fd9\u4e2a\u955c\u50cf\u521b\u5efa\u65f6\u4e0d\u4f1a\u6267\u884c\uff0c\u4ee5\u540e\uff0c\u5982\u679c\u5176\u5b83\u955c\u50cf\u4ee5\u8fd9\u4e2a\u955c\u50cf\u4e3a\u57fa\u7840\uff0c\u4f1a\u5148\u6267\u884c\u8fd9\u4e2a\u955c\u50cf\u7684 ONBUILD \u547d\u4ee4\u3002 \u4efb\u4f55\u6784\u5efa\u6307\u4ee4\u90fd\u53ef\u4ee5\u6ce8\u518c\u4e3a\u89e6\u53d1\u5668\u3002\u5982\u679c Onbuild \u6307\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u5b50\u955c\u50cf\u7684 FROM \u6307\u4ee4\u5c31\u4f1a\u4e2d\u6b62\u3002\u6267\u884c\u5b8c\u89e6\u53d1\u5668\u540e\uff0c\u5c06\u4ece\u6700\u7ec8\u56fe\u50cf\u4e2d\u6e05\u9664\u89e6\u53d1\u5668\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5b83\u4eec\u4e0d\u4f1a\u4f20\u9012\u5230\u201c\u5b59\u5b50\u4ee3\u201d\u7248\u672c\u955c\u50cf\u4e2d\u3002 ARG\uff08\u8bbe\u7f6e\u6784\u5efa\u955c\u50cf\u65f6\u53d8\u91cf\uff09 ARG \u5b9a\u4e49\u7684\u53d8\u91cf\u53ea\u5728\u5efa\u7acb image \u65f6\u6709\u6548\uff0c\u5efa\u7acb\u5b8c\u6210\u540e\u53d8\u91cf\u5c31\u5931\u6548\u6d88\u5931\u3002\u7528\u6237\u53ef\u4ee5\u5728 docker build \u65f6\u4f7f\u7528\u5e26\u6709 --build-arg = \u6807\u5fd7\u7684\u547d\u4ee4\u5c06\u53d8\u91cf\u4f20\u9012\u7ed9\u6784\u5efa\u5668\u3002 \u540c\u65f6\u4f7f\u7528 ARG \u6216 ENV \u6307\u4ee4\u4e3a RUN \u6307\u4ee4\u8bbe\u7f6e\u53d8\u91cf\u65f6\uff0c ENV \u6307\u4ee4\u5b9a\u4e49\u7684\u73af\u5883\u53d8\u91cf \u4f1a\u59cb\u7ec8\u8986\u76d6 ARG \u540c\u540d\u6307\u4ee4\u3002\u4f8b\u5982: FROM ubuntu ARG CONT_IMG_VER ENV CONT_IMG_VER v1.0.0 RUN echo $CONT_IMG_VER \u7136\u540e\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6784\u5efa\u955c\u50cf\uff1a docker build --build-arg CONT_IMG_VER = v2.0.1 . \u5728\u60c5\u51b5\u4e0b\uff0c RUN \u6307\u4ee4\u5c06\u4f7f\u7528 v1.0.0 \uff0c\u800c\u4e0d\u662f ARG \u7528\u6237\u4f20\u9012\u7684\u503c\uff1a v2.0.1 \u3002 Docker \u6709\u4e00\u7ec4\u9884\u5b9a\u4e49\u7684 ARG \u53d8\u91cf\uff0c\u60a8\u53ef\u4ee5\u5728 Dockerfile \u4e2d\u4e0d\u4f7f\u7528\u76f8\u5e94\u7684 ARG \u6307\u4ee4\u800c\u4f7f\u7528\u5b83\u4eec\uff1a HTTP_PROXY http_proxy HTTPS_PROXY https_proxy FTP_PROXY ftp_proxy NO_PROXY no_proxy \u8981\u4f7f\u7528\u5b83\u4eec\uff0c\u53ea\u9700\u5728\u547d\u4ee4\u884c\u4e0a\u4f7f\u7528 --build-arg <varname>=<value> \u6807\u5fd7\u8d4b\u503c\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u9884\u5b9a\u4e49\u7684\u53d8\u91cf\u88ab\u6392\u9664\u5728 docker \u5386\u53f2\u8bb0\u5f55\u7684\u8f93\u51fa\u4e4b\u5916\u3002 \u8fd9\u53ef\u4ee5\u964d\u4f4e\u610f\u5916\u6cc4\u6f0f httpproxy \u53d8\u91cf\u4e2d\u654f\u611f\u7684\u8eab\u4efd\u9a8c\u8bc1\u4fe1\u606f\u7684\u98ce\u9669\u3002 \u4f8b\u5982\uff0c\u4f7f\u7528 --build-arg HTTP_PROXY=http://user:pass@proxy.lon.example.com \u6784\u5efa\u955c\u50cf\u65f6\uff0chttpproxy \u53d8\u91cf\u7684\u503c\u5728 docker \u5386\u53f2\u8bb0\u5f55\u4e2d\u4e0d\u53ef\u7528\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u7f13\u5b58\u3002 \u4e09\u3001\u4e00\u822c\u51c6\u5219\u548c\u5efa\u8bae \u00b6 \u5bb9\u5668\u5e94\u8be5\u662f\u77ed\u6682\u7684 \u901a\u8fc7 Dockerfile \u6784\u5efa\u7684\u955c\u50cf\u6240\u542f\u52a8\u7684\u5bb9\u5668\u5e94\u8be5\u5c3d\u53ef\u80fd\u77ed\u6682\uff08\u751f\u547d\u5468\u671f\u77ed\uff09\u3002\u300c\u77ed\u6682\u300d\u610f\u5473\u7740\u53ef\u4ee5\u505c\u6b62\u548c\u9500\u6bc1\u5bb9\u5668\uff0c\u5e76\u4e14\u521b\u5efa\u4e00\u4e2a\u65b0\u5bb9\u5668\u5e76\u90e8\u7f72\u597d\u6240\u9700\u7684\u8bbe\u7f6e\u548c\u914d\u7f6e\u7684\u5de5\u4f5c\u91cf\u5e94\u8be5\u662f\u6781\u5c0f\u7684\u3002 \u4f7f\u7528 .dockerignore \u6587\u4ef6 \u4f7f\u7528 Dockerfile \u6784\u5efa\u955c\u50cf\u65f6\u6700\u597d\u5c06 Dockerfile \u653e\u7f6e\u5728\u4e00\u4e2a\u65b0\u5efa\u7684\u7a7a\u76ee\u5f55\u4e0b\u3002\u7136\u540e\u5c06\u6784\u5efa\u955c\u50cf\u6240\u9700\u8981\u7684\u6587\u4ef6\u6dfb\u52a0\u5230\u8be5\u76ee\u5f55\u4e2d\u3002\u4e3a\u4e86\u63d0\u9ad8\u6784\u5efa\u955c\u50cf\u7684\u6548\u7387\uff0c\u4f60\u53ef\u4ee5\u5728\u76ee\u5f55\u4e0b\u65b0\u5efa\u4e00\u4e2a .dockerignore \u6587\u4ef6\u6765\u6307\u5b9a\u8981\u5ffd\u7565\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u3002 .dockerignore \u6587\u4ef6\u7684\u6392\u9664\u6a21\u5f0f\u8bed\u6cd5\u548c Git \u7684 .gitignore \u6587\u4ef6\u76f8\u4f3c\u3002 \u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa \u5728 Docker 17.05 \u4ee5\u4e0a\u7248\u672c\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa\u6765\u51cf\u5c11\u6240\u6784\u5efa\u955c\u50cf\u7684\u5927\u5c0f\u3002 \u907f\u514d\u5b89\u88c5\u4e0d\u5fc5\u8981\u7684\u5305 \u4e3a\u4e86\u964d\u4f4e\u590d\u6742\u6027\u3001\u51cf\u5c11\u4f9d\u8d56\u3001\u51cf\u5c0f\u6587\u4ef6\u5927\u5c0f\u3001\u8282\u7ea6\u6784\u5efa\u65f6\u95f4\uff0c\u4f60\u5e94\u8be5\u907f\u514d\u5b89\u88c5\u4efb\u4f55\u4e0d\u5fc5\u8981\u7684\u5305\u3002\u4f8b\u5982\uff0c\u4e0d\u8981\u5728\u6570\u636e\u5e93\u955c\u50cf\u4e2d\u5305\u542b\u4e00\u4e2a\u6587\u672c\u7f16\u8f91\u5668\u3002 \u4e00\u4e2a\u5bb9\u5668\u53ea\u8fd0\u884c\u4e00\u4e2a\u8fdb\u7a0b \u5e94\u8be5\u4fdd\u8bc1\u5728\u4e00\u4e2a\u5bb9\u5668\u4e2d\u53ea\u8fd0\u884c\u4e00\u4e2a\u8fdb\u7a0b\u3002\u5c06\u591a\u4e2a\u5e94\u7528\u89e3\u8026\u5230\u4e0d\u540c\u5bb9\u5668\u4e2d\uff0c\u4fdd\u8bc1\u4e86\u5bb9\u5668\u7684\u6a2a\u5411\u6269\u5c55\u548c\u590d\u7528\u3002\u4f8b\u5982 web \u5e94\u7528\u5e94\u8be5\u5305\u542b\u4e09\u4e2a\u5bb9\u5668\uff1aweb \u5e94\u7528\u3001\u6570\u636e\u5e93\u3001\u7f13\u5b58\u3002 \u5982\u679c\u5bb9\u5668\u4e92\u76f8\u4f9d\u8d56\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Docker \u81ea\u5b9a\u4e49\u7f51\u7edc \u6765\u628a\u8fd9\u4e9b\u5bb9\u5668\u8fde\u63a5\u8d77\u6765\u3002 \u955c\u50cf\u5c42\u6570\u5c3d\u53ef\u80fd\u5c11 \u6bcf\u6267\u884c\u4e00\u4e2a\u6307\u4ee4\uff0c\u90fd\u4f1a\u6709\u4e00\u6b21\u955c\u50cf\u7684\u63d0\u4ea4\uff0c\u955c\u50cf\u662f\u5206\u5c42\u7684\u7ed3\u6784\uff0c\u9700\u8981\u5728 Dockerfile \u53ef\u8bfb\u6027\uff08\u4e5f\u5305\u62ec\u957f\u671f\u7684\u53ef\u7ef4\u62a4\u6027\uff09\u548c\u51cf\u5c11\u5c42\u6570\u4e4b\u95f4\u505a\u4e00\u4e2a\u5e73\u8861\u3002 \u5c06\u591a\u884c\u53c2\u6570\u6392\u5e8f \u5c06\u591a\u884c\u53c2\u6570\u6309\u5b57\u6bcd\u987a\u5e8f\u6392\u5e8f\uff08\u6bd4\u5982\u8981\u5b89\u88c5\u591a\u4e2a\u5305\u65f6\uff09\u3002\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u4f60\u907f\u514d\u91cd\u590d\u5305\u542b\u540c\u4e00\u4e2a\u5305\uff0c\u66f4\u65b0\u5305\u5217\u8868\u65f6\u4e5f\u66f4\u5bb9\u6613\u3002\u4e5f\u4fbf\u4e8e PRs \u9605\u8bfb\u548c\u5ba1\u67e5\u3002\u5efa\u8bae\u5728\u53cd\u659c\u6760\u7b26\u53f7 \\ \u4e4b\u524d\u6dfb\u52a0\u4e00\u4e2a\u7a7a\u683c\uff0c\u4ee5\u589e\u52a0\u53ef\u8bfb\u6027\u3002 \u4e0b\u9762\u662f\u6765\u81ea buildpack-deps \u955c\u50cf\u7684\u4f8b\u5b50\uff1a RUN apt-get update && apt-get install -y \\ bzr \\ cvs \\ git \\ mercurial \\ subversion \u4f7f\u7528\u6784\u5efa\u7f13\u5b58 \u5728\u955c\u50cf\u7684\u6784\u5efa\u8fc7\u7a0b\u4e2d\uff0cDocker \u4f1a\u904d\u5386 Dockerfile \u6587\u4ef6\u4e2d\u7684\u6307\u4ee4\uff0c\u7136\u540e\u6309\u987a\u5e8f\u6267\u884c\u3002\u5728\u6267\u884c\u6bcf\u6761\u6307\u4ee4\u4e4b\u524d\uff0cDocker \u90fd\u4f1a\u5728\u7f13\u5b58\u4e2d\u67e5\u627e\u662f\u5426\u5df2\u7ecf\u5b58\u5728\u53ef\u91cd\u7528\u7684\u955c\u50cf\uff0c\u5982\u679c\u6709\u5c31\u4f7f\u7528\u73b0\u5b58\u7684\u955c\u50cf\uff0c\u4e0d\u518d\u91cd\u590d\u521b\u5efa\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u5728\u6784\u5efa\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7f13\u5b58\uff0c\u4f60\u53ef\u4ee5\u5728 docker build \u547d\u4ee4\u4e2d\u4f7f\u7528 --no-cache=true \u9009\u9879\u3002 \u4f46\u662f\uff0c\u5982\u679c\u4f60\u60f3\u5728\u6784\u5efa\u7684\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7f13\u5b58\uff0c\u4f60\u5f97\u660e\u767d\u4ec0\u4e48\u65f6\u5019\u4f1a\u6216\u4e0d\u4f1a\u627e\u5230\u5339\u914d\u7684\u955c\u50cf\uff0c\u9075\u5faa\u7684\u57fa\u672c\u89c4\u5219\u5982\u4e0b\uff1a \u4ece\u4e00\u4e2a\u57fa\u7840\u955c\u50cf\u5f00\u59cb\uff08 FROM \u6307\u4ee4\u6307\u5b9a\uff09\uff0c\u4e0b\u4e00\u6761\u6307\u4ee4\u5c06\u548c\u8be5\u57fa\u7840\u955c\u50cf\u7684\u6240\u6709\u5b50\u955c\u50cf\u8fdb\u884c\u5339\u914d\uff0c\u68c0\u67e5\u8fd9\u4e9b\u5b50\u955c\u50cf\u88ab\u521b\u5efa\u65f6\u4f7f\u7528\u7684\u6307\u4ee4\u662f\u5426\u548c\u88ab\u68c0\u67e5\u7684\u6307\u4ee4\u5b8c\u5168\u4e00\u6837\u3002\u5982\u679c\u4e0d\u662f\uff0c\u5219\u7f13\u5b58\u5931\u6548\u3002 \u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u53ea\u9700\u8981\u7b80\u5355\u5730\u5bf9\u6bd4 Dockerfile \u4e2d\u7684\u6307\u4ee4\u548c\u5b50\u955c\u50cf\u3002\u7136\u800c\uff0c\u6709\u4e9b\u6307\u4ee4\u9700\u8981\u66f4\u591a\u7684\u68c0\u67e5\u548c\u89e3\u91ca\u3002 \u5bf9\u4e8e ADD \u548c COPY \u6307\u4ee4\uff0c\u955c\u50cf\u4e2d\u5bf9\u5e94\u6587\u4ef6\u7684\u5185\u5bb9\u4e5f\u4f1a\u88ab\u68c0\u67e5\uff0c\u6bcf\u4e2a\u6587\u4ef6\u90fd\u4f1a\u8ba1\u7b97\u51fa\u4e00\u4e2a\u6821\u9a8c\u548c\u3002\u6587\u4ef6\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\u548c\u6700\u540e\u8bbf\u95ee\u65f6\u95f4\u4e0d\u4f1a\u7eb3\u5165\u6821\u9a8c\u3002\u5728\u7f13\u5b58\u7684\u67e5\u627e\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5c06\u8fd9\u4e9b\u6821\u9a8c\u548c\u548c\u5df2\u5b58\u5728\u955c\u50cf\u4e2d\u7684\u6587\u4ef6\u6821\u9a8c\u548c\u8fdb\u884c\u5bf9\u6bd4\u3002\u5982\u679c\u6587\u4ef6\u6709\u4efb\u4f55\u6539\u53d8\uff0c\u6bd4\u5982\u5185\u5bb9\u548c\u5143\u6570\u636e\uff0c\u5219\u7f13\u5b58\u5931\u6548\u3002 \u9664\u4e86 ADD \u548c COPY \u6307\u4ee4\uff0c\u7f13\u5b58\u5339\u914d\u8fc7\u7a0b\u4e0d\u4f1a\u67e5\u770b\u4e34\u65f6\u5bb9\u5668\u4e2d\u7684\u6587\u4ef6\u6765\u51b3\u5b9a\u7f13\u5b58\u662f\u5426\u5339\u914d\u3002\u4f8b\u5982\uff0c\u5f53\u6267\u884c\u5b8c RUN apt-get -y update \u6307\u4ee4\u540e\uff0c\u5bb9\u5668\u4e2d\u4e00\u4e9b\u6587\u4ef6\u88ab\u66f4\u65b0\uff0c\u4f46 Docker \u4e0d\u4f1a\u68c0\u67e5\u8fd9\u4e9b\u6587\u4ef6\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u6307\u4ee4\u5b57\u7b26\u4e32\u672c\u8eab\u88ab\u7528\u6765\u5339\u914d\u7f13\u5b58\u3002 \u4e00\u65e6\u7f13\u5b58\u5931\u6548\uff0c\u6240\u6709\u540e\u7eed\u7684 Dockerfile \u6307\u4ee4\u90fd\u5c06\u4ea7\u751f\u65b0\u7684\u955c\u50cf\uff0c\u7f13\u5b58\u4e0d\u4f1a\u88ab\u4f7f\u7528\u3002 \u56db\u3001\u5b98\u65b9\u955c\u50cf\u793a\u4f8b \u00b6 \u8fd9\u4e9b\u5b98\u65b9\u955c\u50cf\u7684 Dockerfile \u90fd\u662f\u53c2\u8003\u5178\u8303\uff1a https://github.com/docker-library/docs \u3002 \u6240\u6709 Markdown \u6587\u4ef6\u90fd\u901a\u8fc7 markdownfmt \u8fdb\u884c\u8fd0\u884c\uff08\u4ec5\u6dfb\u52a0\u4e86\u4e00\u4e9b\u8f83\u5c0f\u7684\u5dee\u5f02\u9996\u9009\u9879\u548c\u8f83\u5c0f\u7684DockerHub\u517c\u5bb9\u6027\u66f4\u6539\uff09\uff0c\u5e76\u901a\u8fc7Travis CI \u9a8c\u8bc1\u5176\u683c\u5f0f\u6b63\u786e\u3002 \u76f8\u5173\u6587\u7ae0 \u00b6 \u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516b\uff09\uff1aDocker \u5e38\u7528\u547d\u4ee4\u53ca\u793a\u4f8b \u4e0b\u4e00\u7bc7\uff1a\u6ca1\u6709\u4e86 \u5199\u5728\u6700\u540e \u00b6 \u81f3\u6b64\uff0c\u672c\u7cfb\u5217\u6587\u7ae0\u5df2\u7ecf\u9605\u8bfb\u5b8c\u6210\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4f1a\u7ed3\u5408 Docker \u7684\u53d1\u5c55\u5bf9\u6587\u7ae0\u5185\u5bb9\u4fdd\u6301\u66f4\u65b0\uff0c\u4e0d\u4fdd\u969c\u4f1a\u5b9e\u65f6\u4e0e\u7b2c\u4e09\u65b9\u5e73\u53f0\u4fdd\u6301\u540c\u6b65\u3002 \u83b7\u53d6\u6700\u65b0\u5185\u5bb9\uff0c\u8bf7\u8bbf\u95ee\u6211\u7684\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002","title":"\u4e5d\u3001Docker \u6700\u4f73\u5b9e\u8df5"},{"location":"Docker/9-Best-Practices/#dockerfile","text":"Dockfile \u662f\u4e00\u79cd\u88ab Docker \u7a0b\u5e8f\u89e3\u91ca\u7684\u811a\u672c\uff0c\u7531\u4e00\u6761\u4e00\u6761\u7684\u6307\u4ee4\u7ec4\u6210\uff0c\u6bcf\u6761\u6307\u4ee4\u5bf9\u5e94 Linux \u4e0b\u9762\u7684\u4e00\u6761\u547d\u4ee4\u3002 Docker \u901a\u8fc7\u4ece Dockerfile \u6587\u672c\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6307\u4ee4\u6765\u81ea\u52a8\u6784\u5efa\u6620\u50cf\uff0c\u8be5\u6587\u672c\u6587\u4ef6\u6309\u987a\u5e8f\u5305\u542b\u6784\u5efa\u955c\u50cf\u6240\u9700\u7684\u6240\u6709\u547d\u4ee4\u3002\u9075\u5faa\u7279\u5b9a\u7684\u683c\u5f0f\u548c\u6307\u4ee4\u96c6\uff0c\u60a8\u53ef\u4ee5\u5728 Dockerfile \u53c2\u8003 \u4e2d\u627e\u5230\u8be6\u7ec6\u4fe1\u606f\u3002 Docker \u955c\u50cf\u7531\u53ea\u8bfb\u5c42\u7ec4\u6210\uff0c\u6bcf\u4e2a\u53ea\u8bfb\u5c42\u4ee3\u8868\u4e00\u4e2a Dockerfile \u6307\u4ee4\u3002\u5404\u4e2a\u5c42\u5806\u53e0\u5728\u4e00\u8d77\uff0c\u6bcf\u4e2a\u5c42\u90fd\u662f\u4e0a\u4e00\u5c42\u53d8\u5316\u7684\u589e\u91cf\u3002\u8fd0\u884c\u955c\u50cf\u5e76\u751f\u6210\u5bb9\u5668\u65f6\uff0c\u53ef\u4ee5\u5728\u57fa\u7840\u5c42\u4e4b\u4e0a\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u53ef\u5199\u5c42\uff08\u201c\u5bb9\u5668\u5c42\u201d\uff09\u3002\u5bf9\u8fd0\u884c\u4e2d\u5bb9\u5668\u6240\u505a\u7684\u6240\u6709\u66f4\u6539\uff08\u4f8b\u5982\u5199\u5165\u65b0\u6587\u4ef6\uff0c\u4fee\u6539\u73b0\u6709\u6587\u4ef6\u548c\u5220\u9664\u6587\u4ef6\uff09\u90fd\u5c06\u5199\u5165\u5230\u6b64\u53ef\u5199\u5bb9\u5668\u5c42\u3002","title":"\u4e00\u3001Dockerfile \u7b80\u4ecb"},{"location":"Docker/9-Best-Practices/#dockerfile_1","text":"Dockerfile \u7684\u6307\u4ee4\u662f\u5ffd\u7565\u5927\u5c0f\u5199\u7684\uff0c\u5efa\u8bae\u4f7f\u7528\u5927\u5199\uff0c\u4f7f\u7528 # \u4f5c\u4e3a\u6ce8\u91ca\uff0c\u6bcf\u4e00\u884c\u53ea\u652f\u6301\u4e00\u6761\u6307\u4ee4\uff0c\u6bcf\u6761\u6307\u4ee4\u53ef\u4ee5\u643a\u5e26\u591a\u4e2a\u53c2\u6570\u3002Dockerfile \u5e38\u7528\u6307\u4ee4\uff1a \u7c7b\u578b \u547d\u4ee4 \u57fa\u7840\u955c\u50cf\u4fe1\u606f FROM \u7ef4\u62a4\u8005\u4fe1\u606f MAINTAINER \u955c\u50cf\u64cd\u4f5c\u6307\u4ee4 RUN\u3001COPY\u3001ADD\u3001EXPOSE\u3001WORKDIR\u3001ONBUILD\u3001USER\u3001VOLUME \u7b49 \u5bb9\u5668\u542f\u52a8\u65f6\u6267\u884c\u6307\u4ee4 CMD\u3001ENTRYPOINT \u4e0b\u9762\u9488\u5bf9 Dockerfile \u4e2d\u5404\u79cd\u6307\u4ee4\u7684\u6700\u4f73\u7f16\u5199\u65b9\u5f0f\u7ed9\u51fa\u5efa\u8bae\u3002","title":"\u4e8c\u3001Dockerfile \u7f16\u5199\u5efa\u8bae"},{"location":"Docker/9-Best-Practices/#_1","text":"","title":"\u4e09\u3001\u4e00\u822c\u51c6\u5219\u548c\u5efa\u8bae"},{"location":"Docker/9-Best-Practices/#_2","text":"\u8fd9\u4e9b\u5b98\u65b9\u955c\u50cf\u7684 Dockerfile \u90fd\u662f\u53c2\u8003\u5178\u8303\uff1a https://github.com/docker-library/docs \u3002 \u6240\u6709 Markdown \u6587\u4ef6\u90fd\u901a\u8fc7 markdownfmt \u8fdb\u884c\u8fd0\u884c\uff08\u4ec5\u6dfb\u52a0\u4e86\u4e00\u4e9b\u8f83\u5c0f\u7684\u5dee\u5f02\u9996\u9009\u9879\u548c\u8f83\u5c0f\u7684DockerHub\u517c\u5bb9\u6027\u66f4\u6539\uff09\uff0c\u5e76\u901a\u8fc7Travis CI \u9a8c\u8bc1\u5176\u683c\u5f0f\u6b63\u786e\u3002","title":"\u56db\u3001\u5b98\u65b9\u955c\u50cf\u793a\u4f8b"},{"location":"Docker/9-Best-Practices/#_3","text":"\u4e0a\u4e00\u7bc7\uff1a Docker\u5fc5\u77e5\u5fc5\u4f1a\u7cfb\u5217\uff08\u516b\uff09\uff1aDocker \u5e38\u7528\u547d\u4ee4\u53ca\u793a\u4f8b \u4e0b\u4e00\u7bc7\uff1a\u6ca1\u6709\u4e86","title":"\u76f8\u5173\u6587\u7ae0"},{"location":"Docker/9-Best-Practices/#_4","text":"\u81f3\u6b64\uff0c\u672c\u7cfb\u5217\u6587\u7ae0\u5df2\u7ecf\u9605\u8bfb\u5b8c\u6210\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4f1a\u7ed3\u5408 Docker \u7684\u53d1\u5c55\u5bf9\u6587\u7ae0\u5185\u5bb9\u4fdd\u6301\u66f4\u65b0\uff0c\u4e0d\u4fdd\u969c\u4f1a\u5b9e\u65f6\u4e0e\u7b2c\u4e09\u65b9\u5e73\u53f0\u4fdd\u6301\u540c\u6b65\u3002 \u83b7\u53d6\u6700\u65b0\u5185\u5bb9\uff0c\u8bf7\u8bbf\u95ee\u6211\u7684\u4e2a\u4eba\u535a\u5ba2\uff1a \u609f\u5c18\u7eaa \u3002","title":"\u5199\u5728\u6700\u540e"},{"location":"Fabric-Introduction-and-Practice/1-index/","text":"\u4e00\u4e2a\u5546\u7528\u7684\u533a\u5757\u94fe\u7f51\u7edc\uff0c\u968f\u7740\u4e1a\u52a1\u7684\u53d1\u5c55\u53d8\u5316\uff0c\u7ecf\u5e38\u9700\u8981\u52a8\u6001\u7684\u65b0\u589e/\u79fb\u9664\u7ec4\u7ec7\uff0c\u4ee5\u6ee1\u8db3\u4e1a\u52a1/\u5b89\u5168\u7b49\u7ba1\u7406\u9700\u8981\u3002\u672c\u6587\u5728\u65e2\u6709\u7ec4\u7ec7/\u8282\u70b9\u7684\u57fa\u7840\u4e0a\uff0c\u65b0\u589e\u4e00\u4e2a\u7ec4\u7ec7\u4e24\u4e2a\u8282\u70b9\u3002 Fabric \u662f\u8054\u76df\u94fe\uff0c\u4e00\u4e2a Channel \u5c31\u597d\u6bd4\u4e00\u4e2a\u5b50\u94fe\uff0c\u5982\u679c\u6709\u65b0\u7684\u673a\u6784\u9700\u8981\u52a0\u5165\uff0c\u5219\u5fc5\u987b\u5f97\u5230\u8054\u76df\u5185\u7684\u6210\u5458\u7684\u8ba4\u53ef\u3002\u57fa\u4e8e\u8fd9\u6837\u7684\u573a\u666f\uff0cFabric \u5728\u4e3a channel \u65b0\u589e org \u65f6\uff0c\u4f1a\u6d89\u53ca\u8bf8\u591a\u7684\u6743\u9650\u548c\u8bc1\u4e66\u64cd\u4f5c\u3002 Fabric \u52a8\u6001\u65b0\u589e\u7ec4\u7ec7\u6b65\u9aa4 \u00b6 \u4e3a\u65b0 org \u751f\u6210\u8bc1\u4e66 \u4e3a\u65b0 org \u751f\u6210\u914d\u7f6e\u6587\u4ef6 \u751f\u6210\u548c\u63d0\u4ea4\u65b0 org \u7684\u914d\u7f6e peer channel fetch config \u521b\u5efa\u6dfb\u52a0\u65b0 org \u7684\u914d\u7f6e\u4ea4\u6613\uff0c\u4e3a\u7f51\u7edc\u65b0\u589e org peer channel signconfigtx \u4e3a\u914d\u7f6e\u4ea4\u6613\u7b7e\u540d\uff0c\u9700\u7f51\u7edc\u4e2d MAJORITY \u7684 org \u90fd\u7b7e\u540d peer channel update \u63d0\u4ea4\u7b7e\u540d\u540e\u7684\u914d\u7f6e\u4ea4\u6613\u81f3 orderer \u5c06\u65b0 org \u6dfb\u52a0\u5165 channel \u542f\u52a8\u65b0 org \u96c6\u7fa4\uff0c\u4e00\u822c\u4f1a\u6709\u4e00\u4e2a cli \u548c\u591a\u4e2a peer peer channel fetch \u4e8e cli \u4e2d\u4ece orderer \u4e2d\u83b7\u53d6 channel \u521b\u4e16\u5757 peer channel join \u5c06\u65b0 org \u4e0b\u7684 peer \u52a0\u5165 channel \u5347\u7ea7chaincode\u548c\u80cc\u4e66\u7b56\u7565 peer chaincode install \u4e3a\u65b0 org \u7684 peer \u5b89\u88c5 chaincode\uff0c\u4e8e\u65b0 org \u7684 cli \u4e2d\u5b8c\u6210 peer chaincode install, \u4e3a\u5176\u4ed6 org \u5347\u7ea7 chaincode\uff0c\u4e8e\u539f org \u7684 cli \u4e2d\u5b8c\u6210 peer chaincode upgrade \u5347\u7ea7\u80cc\u4e66\u7b56\u7565\uff0c\u4e8e\u539f org \u7684 cli \u4e2d\u5b8c\u6210 \u6b64\u6587\u901a\u8fc7 fabric-samples \u4e0b\u7684 first-network \u6837\u4f8b\u4e3a\u57fa\u7840\uff0c\u5728\u5176\u533a\u5757\u94fe\u7f51\u7edc\u4e0a\uff0c\u4e3a\u901a\u9053 cfichannel \u65b0\u589e\u4e00\u4e2a\u7ec4\u7ec7Cfec\uff0cCfecOrg \u5305\u542b\u4e2a peer\u3002","title":"\u4e00\u3001\u6587\u7ae0\u6458\u8981"},{"location":"Fabric-Introduction-and-Practice/1-index/#fabric","text":"\u4e3a\u65b0 org \u751f\u6210\u8bc1\u4e66 \u4e3a\u65b0 org \u751f\u6210\u914d\u7f6e\u6587\u4ef6 \u751f\u6210\u548c\u63d0\u4ea4\u65b0 org \u7684\u914d\u7f6e peer channel fetch config \u521b\u5efa\u6dfb\u52a0\u65b0 org \u7684\u914d\u7f6e\u4ea4\u6613\uff0c\u4e3a\u7f51\u7edc\u65b0\u589e org peer channel signconfigtx \u4e3a\u914d\u7f6e\u4ea4\u6613\u7b7e\u540d\uff0c\u9700\u7f51\u7edc\u4e2d MAJORITY \u7684 org \u90fd\u7b7e\u540d peer channel update \u63d0\u4ea4\u7b7e\u540d\u540e\u7684\u914d\u7f6e\u4ea4\u6613\u81f3 orderer \u5c06\u65b0 org \u6dfb\u52a0\u5165 channel \u542f\u52a8\u65b0 org \u96c6\u7fa4\uff0c\u4e00\u822c\u4f1a\u6709\u4e00\u4e2a cli \u548c\u591a\u4e2a peer peer channel fetch \u4e8e cli \u4e2d\u4ece orderer \u4e2d\u83b7\u53d6 channel \u521b\u4e16\u5757 peer channel join \u5c06\u65b0 org \u4e0b\u7684 peer \u52a0\u5165 channel \u5347\u7ea7chaincode\u548c\u80cc\u4e66\u7b56\u7565 peer chaincode install \u4e3a\u65b0 org \u7684 peer \u5b89\u88c5 chaincode\uff0c\u4e8e\u65b0 org \u7684 cli \u4e2d\u5b8c\u6210 peer chaincode install, \u4e3a\u5176\u4ed6 org \u5347\u7ea7 chaincode\uff0c\u4e8e\u539f org \u7684 cli \u4e2d\u5b8c\u6210 peer chaincode upgrade \u5347\u7ea7\u80cc\u4e66\u7b56\u7565\uff0c\u4e8e\u539f org \u7684 cli \u4e2d\u5b8c\u6210 \u6b64\u6587\u901a\u8fc7 fabric-samples \u4e0b\u7684 first-network \u6837\u4f8b\u4e3a\u57fa\u7840\uff0c\u5728\u5176\u533a\u5757\u94fe\u7f51\u7edc\u4e0a\uff0c\u4e3a\u901a\u9053 cfichannel \u65b0\u589e\u4e00\u4e2a\u7ec4\u7ec7Cfec\uff0cCfecOrg \u5305\u542b\u4e2a peer\u3002","title":"Fabric \u52a8\u6001\u65b0\u589e\u7ec4\u7ec7\u6b65\u9aa4"},{"location":"Fabric-Introduction-and-Practice/2-install/","text":"\u4e8c\u3001\u65b0\u7ec4\u7ec7\u57fa\u7840\u73af\u5883\u5b89\u88c5 \u00b6 1\u3001\u5b89\u88c5epel\u6e90 \u00b6 yum install epel-release 2\u3001\u5b89\u88c5\u4f9d\u8d56\u5305 \u00b6 yum install snappy-devel.x86_64 zlib-devel.x86_64 bzip2-devel.x86_64 libtool-ltdl-devel.x86_64 libtool git 3\u3001\u5b89\u88c5docker \u00b6 yum localinstall docker-ce-18.05.0.ce-3.el7.centos.x86_64.rpm ( \u5b89\u88c5\u5305\u89c1\u9644\u4ef6 ) 4\u3001\u5b89\u88c5docker-compose \u00b6 curl -L https://github.com/docker/compose/releases/download/1.21.0/docker-compose- ` uname -s ` - ` uname -m ` > /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose 5\u3001\u914d\u7f6edocker\u6e90\uff08\u5982\u679c\u4e0d\u914d\u7f6e\u62c9\u53d6\u7684\u662f\u56fd\u5916\u7684\u955c\u50cf\u6e90\uff09 \u00b6 [ -d /etc/docker ] && echo \"docker dir Already exist\" || mkdir /etc/docker tee /etc/docker/daemon.json <<-'EOF' { \"registry-mirrors\": [\"https://k03hynjl.mirror.aliyuncs.com\"] } EOF 6\u3001\u62f7\u8d1dfabric\u7f51\u7edc\u76f8\u5173\u7ec4\u4ef6\u5230\u5f53\u524d\u7528\u6237\u76ee\u5f55\uff08\u975eroot\u7528\u6237\uff09\uff0c\u5185\u5bb9\u5982\u4e0b \u00b6 sudo scp -r cfichain@xxx.xxx.xxx.xxx:/home/cfichain/cfi_network . sudo scp -r cfichain@xxx.xxx.xxx.xxx:/home/cfichain/bin . 7\u3001\u6e05\u7406\u6570\u636e \u00b6 rm -fr /data/fabric/bin/channel-artifacts/* rm -fr /data/fabric/bin/crypto-config/* rm -fr /data/fabric/bin/chaindata/*/*/* rm -fr /data/fabric/bin/chainData/*/*/*","title":"\u4e8c\u3001\u65b0\u7ec4\u7ec7\u57fa\u7840\u73af\u5883\u5b89\u88c5"},{"location":"Fabric-Introduction-and-Practice/2-install/#_1","text":"","title":"\u4e8c\u3001\u65b0\u7ec4\u7ec7\u57fa\u7840\u73af\u5883\u5b89\u88c5"},{"location":"Fabric-Introduction-and-Practice/2-install/#1epel","text":"yum install epel-release","title":"1\u3001\u5b89\u88c5epel\u6e90"},{"location":"Fabric-Introduction-and-Practice/2-install/#2","text":"yum install snappy-devel.x86_64 zlib-devel.x86_64 bzip2-devel.x86_64 libtool-ltdl-devel.x86_64 libtool git","title":"2\u3001\u5b89\u88c5\u4f9d\u8d56\u5305"},{"location":"Fabric-Introduction-and-Practice/2-install/#3docker","text":"yum localinstall docker-ce-18.05.0.ce-3.el7.centos.x86_64.rpm ( \u5b89\u88c5\u5305\u89c1\u9644\u4ef6 )","title":"3\u3001\u5b89\u88c5docker"},{"location":"Fabric-Introduction-and-Practice/2-install/#4docker-compose","text":"curl -L https://github.com/docker/compose/releases/download/1.21.0/docker-compose- ` uname -s ` - ` uname -m ` > /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose","title":"4\u3001\u5b89\u88c5docker-compose"},{"location":"Fabric-Introduction-and-Practice/2-install/#5docker","text":"[ -d /etc/docker ] && echo \"docker dir Already exist\" || mkdir /etc/docker tee /etc/docker/daemon.json <<-'EOF' { \"registry-mirrors\": [\"https://k03hynjl.mirror.aliyuncs.com\"] } EOF","title":"5\u3001\u914d\u7f6edocker\u6e90\uff08\u5982\u679c\u4e0d\u914d\u7f6e\u62c9\u53d6\u7684\u662f\u56fd\u5916\u7684\u955c\u50cf\u6e90\uff09"},{"location":"Fabric-Introduction-and-Practice/2-install/#6fabricroot","text":"sudo scp -r cfichain@xxx.xxx.xxx.xxx:/home/cfichain/cfi_network . sudo scp -r cfichain@xxx.xxx.xxx.xxx:/home/cfichain/bin .","title":"6\u3001\u62f7\u8d1dfabric\u7f51\u7edc\u76f8\u5173\u7ec4\u4ef6\u5230\u5f53\u524d\u7528\u6237\u76ee\u5f55\uff08\u975eroot\u7528\u6237\uff09\uff0c\u5185\u5bb9\u5982\u4e0b"},{"location":"Fabric-Introduction-and-Practice/2-install/#7","text":"rm -fr /data/fabric/bin/channel-artifacts/* rm -fr /data/fabric/bin/crypto-config/* rm -fr /data/fabric/bin/chaindata/*/*/* rm -fr /data/fabric/bin/chainData/*/*/*","title":"7\u3001\u6e05\u7406\u6570\u636e"},{"location":"Fabric-Introduction-and-Practice/3-create-channel/","text":"\u4e09\u3001\u65b0\u5efachannel \u00b6 \uff08MBFA\u7ec4\u7ec7\u4efb\u610f\u8282\u70b9\u4e0a\u6267\u884c\uff09 1\u3001\u521b\u5efa\u4ea4\u6613\u6587\u4ef6 \u00b6 export PATH = $PATH :/data/fabric/bin export ORDERER_GENERAL_GENESISPROFILE = MbfaGenesis configtxgen -profile MbfaChannel -outputCreateChannelTx ./channel-artifacts/sycfinchannel.tx -channelID syfinchannel 2\u3001\u4e3a\u65b0\u7ec4\u7ec7\u521b\u5efachannel \u00b6 \u767b\u5f55docker cli docker exec -it cli bash 3\u3001\u53d1\u8d77\u521b\u5efachannel\u4ea4\u6613 \u00b6 export CORE_PEER_ADDRESS = am.mbfa.fabric.mbfa.cn:7051 export CORE_PEER_LOCALMSPID = MbfaMSP export CORE_PEER_TLS_ENABLED = false export CORE_PEER_TLS_CERT_FILE = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/mbfa.fabric.mbfa.cn/peers/am.mbfa.fabric.mbfa.cn/tls/server.crt export CORE_PEER_TLS_KEY_FILE = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/mbfa.fabric.mbfa.cn/peers/am.mbfa.fabric.mbfa.cn/tls/server.key export CORE_PEER_TLS_ROOTCERT_FILE = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/mbfa.fabric.mbfa.cn/peers/am.mbfa.fabric.mbfa.cn/tls/ca.crt export CORE_PEER_MSPCONFIGPATH = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/mbfa.fabric.mbfa.cn/users/Admin@mbfa.fabric.mbfa.cn/msp peer channel create -o orderer0.fabric.mbfa.cn:7050 -c syfinchannel -f ./channel-artifacts/syfinchannel.tx","title":"\u4e09\u3001\u65b0\u5efachannel"},{"location":"Fabric-Introduction-and-Practice/3-create-channel/#channel","text":"\uff08MBFA\u7ec4\u7ec7\u4efb\u610f\u8282\u70b9\u4e0a\u6267\u884c\uff09","title":"\u4e09\u3001\u65b0\u5efachannel"},{"location":"Fabric-Introduction-and-Practice/3-create-channel/#1","text":"export PATH = $PATH :/data/fabric/bin export ORDERER_GENERAL_GENESISPROFILE = MbfaGenesis configtxgen -profile MbfaChannel -outputCreateChannelTx ./channel-artifacts/sycfinchannel.tx -channelID syfinchannel","title":"1\u3001\u521b\u5efa\u4ea4\u6613\u6587\u4ef6"},{"location":"Fabric-Introduction-and-Practice/3-create-channel/#2channel","text":"\u767b\u5f55docker cli docker exec -it cli bash","title":"2\u3001\u4e3a\u65b0\u7ec4\u7ec7\u521b\u5efachannel"},{"location":"Fabric-Introduction-and-Practice/3-create-channel/#3channel","text":"export CORE_PEER_ADDRESS = am.mbfa.fabric.mbfa.cn:7051 export CORE_PEER_LOCALMSPID = MbfaMSP export CORE_PEER_TLS_ENABLED = false export CORE_PEER_TLS_CERT_FILE = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/mbfa.fabric.mbfa.cn/peers/am.mbfa.fabric.mbfa.cn/tls/server.crt export CORE_PEER_TLS_KEY_FILE = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/mbfa.fabric.mbfa.cn/peers/am.mbfa.fabric.mbfa.cn/tls/server.key export CORE_PEER_TLS_ROOTCERT_FILE = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/mbfa.fabric.mbfa.cn/peers/am.mbfa.fabric.mbfa.cn/tls/ca.crt export CORE_PEER_MSPCONFIGPATH = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/mbfa.fabric.mbfa.cn/users/Admin@mbfa.fabric.mbfa.cn/msp peer channel create -o orderer0.fabric.mbfa.cn:7050 -c syfinchannel -f ./channel-artifacts/syfinchannel.tx","title":"3\u3001\u53d1\u8d77\u521b\u5efachannel\u4ea4\u6613"},{"location":"Fabric-Introduction-and-Practice/4-generate-crypto/","text":"\u56db\u3001\u5728\u65b0\u7ec4\u7ec7\u8282\u70b9\uff08ORG\uff09\u751f\u6210\u8bc1\u4e66 \u00b6 1\u3001\u751f\u6210\u8bc1\u4e66\u547d\u4ee4 \u00b6 (\u4f9d\u636e crypto-config.yaml \u751f\u6210\uff0c\u751f\u6210\u540e\u7684\u6587\u4ef6\u4f4d\u4e8e org3-artifacts/crypto-config/ \u4e0b)\uff1a cd org3-artifacts ./cryptogen generate --config = ./crypto-config.yaml --output ./crypto-config 2\u3001crypto-config.yamll \u6587\u4ef6\u5982\u4e0b \u00b6 PeerOrgs : - Name : SyOrg Domain : sy.fabric.mbfa.cn CA : Country : CN Province : Beijing Locality : Beijing Specs : - Hostname : peer Users : Count : 1","title":"\u56db\u3001\u5728\u65b0\u7ec4\u7ec7\u8282\u70b9\u751f\u6210\u8bc1\u4e66"},{"location":"Fabric-Introduction-and-Practice/4-generate-crypto/#org","text":"","title":"\u56db\u3001\u5728\u65b0\u7ec4\u7ec7\u8282\u70b9\uff08ORG\uff09\u751f\u6210\u8bc1\u4e66"},{"location":"Fabric-Introduction-and-Practice/4-generate-crypto/#1","text":"(\u4f9d\u636e crypto-config.yaml \u751f\u6210\uff0c\u751f\u6210\u540e\u7684\u6587\u4ef6\u4f4d\u4e8e org3-artifacts/crypto-config/ \u4e0b)\uff1a cd org3-artifacts ./cryptogen generate --config = ./crypto-config.yaml --output ./crypto-config","title":"1\u3001\u751f\u6210\u8bc1\u4e66\u547d\u4ee4"},{"location":"Fabric-Introduction-and-Practice/4-generate-crypto/#2crypto-configyamll","text":"PeerOrgs : - Name : SyOrg Domain : sy.fabric.mbfa.cn CA : Country : CN Province : Beijing Locality : Beijing Specs : - Hostname : peer Users : Count : 1","title":"2\u3001crypto-config.yamll \u6587\u4ef6\u5982\u4e0b"},{"location":"Fabric-Introduction-and-Practice/5-configtx/","text":"\u4e94\u3001\u5728\u65b0\u7ec4\u7ec7\u8282\u70b9\u4f7f\u7528configtxgen\u751f\u6210SyOrg\u914d\u7f6eJSON\u6587\u4ef6 \u00b6 1\u3001\u751f\u6210\u7ec4\u7ec7\u914d\u7f6e\u6587\u4ef6 \u00b6 configtx\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e2d\u5bfb\u627econfigtx.yaml\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u8bfb\u53d6SyOrg\u76f8\u5173\u914d\u7f6e\u3002 cd org3-artifacts ./configtxgen -printOrg SyOrg -profile ./configtx.yaml > ../channel-artifacts/syorg.json configtx.yaml\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b Organizations : - &SyOrg Name : SyOrg ID : SyMSP MSPDir : crypto-config/peerOrganizations/sy.fabric.mbfa.cn/msp Policies : &SyOrgPolicies Readers : Type : Signature Rule : \"OR('SyMSP.member')\" Writers : Type : Signature Rule : \"OR('SyMSP.member')\" Admins : Type : Signature Rule : \"OR('SyMSP.admin')\" AnchorPeers : - Host : peer.sy.fabric.mbfa.cn Port : 7051 2\u3001\u914d\u7f6e\u65b0\u7ec4\u7ec7\u8282\u70b9 \u00b6 \u4fee\u6539cfi.yaml\u914d\u7f6e\u6587\u4ef6\uff0c\u9700\u8981\u68c0\u67e5\u73af\u5883\u5dee\u5f02\u3002\u9700\u8981\u6ce8\u610fdocker\u914d\u7f6e\u6587\u4ef6\u4e2d\u5bf9\u5e94\u7684fabric\u94fe\u955c\u50cf\u7248\u672c\u53f7\u3002 mv org3-artifacts/crypto-config . cat /etc/resolv.conf //\u6b64\u4e3a\u6b63\u5e38\u914d\u7f6e nameserver 127 .0.0.11 options ndots:0 //\u5982\u679c\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff0c\u9700\u8981\u5728docker compose yaml\u6a21\u677f\u589e\u52a0\u73af\u5883\u53d8\u91cf\uff0cGODEBUG = netdns = go\u4ee5\u5f3a\u5236\u4f7f\u7528pure Go resolver nameserver 127 .0.0.11 options timeout:2 attempts:3 rotate single-request-reopen ndots:0","title":"\u4e94\u3001\u914d\u7f6e\u65b0\u7ec4\u7ec7\u8282\u70b9"},{"location":"Fabric-Introduction-and-Practice/5-configtx/#configtxgensyorgjson","text":"","title":"\u4e94\u3001\u5728\u65b0\u7ec4\u7ec7\u8282\u70b9\u4f7f\u7528configtxgen\u751f\u6210SyOrg\u914d\u7f6eJSON\u6587\u4ef6"},{"location":"Fabric-Introduction-and-Practice/5-configtx/#1","text":"configtx\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e2d\u5bfb\u627econfigtx.yaml\u914d\u7f6e\u6587\u4ef6\u5e76\u4ece\u4e2d\u8bfb\u53d6SyOrg\u76f8\u5173\u914d\u7f6e\u3002 cd org3-artifacts ./configtxgen -printOrg SyOrg -profile ./configtx.yaml > ../channel-artifacts/syorg.json","title":"1\u3001\u751f\u6210\u7ec4\u7ec7\u914d\u7f6e\u6587\u4ef6"},{"location":"Fabric-Introduction-and-Practice/5-configtx/#2","text":"\u4fee\u6539cfi.yaml\u914d\u7f6e\u6587\u4ef6\uff0c\u9700\u8981\u68c0\u67e5\u73af\u5883\u5dee\u5f02\u3002\u9700\u8981\u6ce8\u610fdocker\u914d\u7f6e\u6587\u4ef6\u4e2d\u5bf9\u5e94\u7684fabric\u94fe\u955c\u50cf\u7248\u672c\u53f7\u3002 mv org3-artifacts/crypto-config . cat /etc/resolv.conf //\u6b64\u4e3a\u6b63\u5e38\u914d\u7f6e nameserver 127 .0.0.11 options ndots:0 //\u5982\u679c\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff0c\u9700\u8981\u5728docker compose yaml\u6a21\u677f\u589e\u52a0\u73af\u5883\u53d8\u91cf\uff0cGODEBUG = netdns = go\u4ee5\u5f3a\u5236\u4f7f\u7528pure Go resolver nameserver 127 .0.0.11 options timeout:2 attempts:3 rotate single-request-reopen ndots:0","title":"2\u3001\u914d\u7f6e\u65b0\u7ec4\u7ec7\u8282\u70b9"},{"location":"Fabric-Introduction-and-Practice/6-add-org/","text":"\u516d\u3001\u8054\u76df\u7ec4\u7ec7\u751f\u6210\u548c\u63d0\u4ea4\u65b0 org \u914d\u7f6e \u00b6 \u901a\u8fc7 step 3~4\uff0c\u5df2\u7ecf\u751f\u6210\u4e86 Sy \u7684\u8bc1\u4e66\u548c\u914d\u7f6e\uff0c\u4f46\u8fd9\u4ec5\u4ec5\u662f\u5728\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fd8\u672a\u4e8e\u533a\u5757\u94fe\u7f51\u7edc\u4ea7\u751f\u5173\u8054\u3002\u4e3a channel \u65b0\u52a0 Org\uff0c\u5bf9 Fabric\u800c\u8a00\uff0c\u662f\u4ee5\u4e00\u7b14\u4ea4\u6613\u7684\u5f62\u5f0f\u63d0\u4ea4\u7684\u3002\u56e0\u6b64\u8981\u4f7f\u5f97\u8fd9\u7b14\u4ea4\u6613\u80fd\u987a\u5229\u5b8c\u6210\uff0c\u9700\u8981\u63d0\u4ea4Sy\u7684\u914d\u7f6e\uff0c\u5230channel\u4e2d\uff0c\u83b7\u5f97\u6743\u9650\u8ba4\u8bc1\uff1b\u7136\u540e\u4e8e\u7f51\u7edc\u4e2d\u53d1\u8d77\u66f4\u65b0\u7684\u4ea4\u6613\u3002 1\u3001\u767b\u5f55\u8054\u76df\u7ba1\u7406\u7ec4\u7ec7\u7684cli \u00b6 docker exec -it cli bash 2\u3001\u5b89\u88c5 jq \u5de5\u5177 \u00b6 jq \u662f Linux \u4e0b\u547d\u4ee4\u884c\u5904\u7406 JSON \u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 JSON \u8fdb\u884c\u8fc7\u6ee4\u3001\u683c\u5f0f\u5316\u3001\u4fee\u6539\u7b49\u7b49\u64cd\u4f5c\u3002 apt-get -y update && apt-get -y install jq 3\u3001\u8bbe\u7f6eorderer TLS CA\u73af\u5883\u53d8\u91cf\uff08\u6ce8\u610f\uff1apeer\u5bf9\u5e94\u7684\u8282\u70b9\u4e0a\u9700\u8981\u6709orderer\u8282\u70b9\u7684\u8bc1\u4e66\uff09 \u00b6 export ORDERER_CA = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/fabric.mbfa.cn/orderers/orderer0.fabric.mbfa.cn/msp/tlscacerts/tlsca.fabric.mbfa.cn-cert.pem 4\u3001\u83b7\u53d6\u51c6\u5907\u52a0\u5165channel\u7684\u914d\u7f6e \u00b6 peer channel fetch config vtm_config_block.pb -o orderer0.fabric.mbfa.cn:7050 -c cfitestchannel --cafile $ORDERER_CA 5\u3001\u8054\u76df\u7ba1\u7406\u7ec4\u7ec7\u4fee\u6539\u539fchannel\u914d\u7f6e\u6587\u4ef6, \u589e\u52a0\u65b0\u7ec4\u7ec7 \u00b6 5.1\u3001\u89e3\u7801\u539f\u6709\u7f51\u7edc\u7684\u914d\u7f6e\u6587\u4ef6 \u5c06\u51c6\u5907\u52a0\u5165channel\u7684pb\u683c\u5f0f\u914d\u7f6e\u4fe1\u606f\u8f6c\u6362\u6210json\u683c\u5f0f configtxlator proto_decode --input vtm_config_block.pb --type common.Block | jq .data.data [ 0 ] .payload.data.config > vtm_config.json \u751f\u6210\u6587\u4ef6\u5185\u5bb9\u7c7b\u4f3cset2\u4e2dsyorg.json\u5185\u5bb9 5.2\u3001\u4f7f\u7528jq\u5de5\u5177\uff0c\u5408\u5e76cfiorg.json\u4e0ecfi_config.json, \u5f62\u6210\u589e\u52a0\u65b0\u7ec4\u7ec7\u540e\u7684\u5b8c\u6574json\u683c\u5f0f\u7684\u914d\u7f6e\u66f4\u65b0\u6587\u4ef6 jq -s '.[0] * {\"channel_group\":{\"groups\":{\"Application\":{\"groups\": {\"VtmMSP\":.[1]}}}}}' vtm_config.json ./channel-artifacts/vtmorg.json > vtm_modified_config.json 5.3\u3001\u5c06 config.json \u548c modified_config.json \u8f6c\u4e3a protobuf \u683c\u5f0f configtxlator proto_encode --input vtm_config.json --type common.Config > vtm_config.pb configtxlator proto_encode --input vtm_modified_config.json --type common.Config > vtm_modified_config.pb 5.4\u3001\u6839\u636e config.pb \u548c modified_config.pb \u8ba1\u7b97\u51fa org3_update.pb \uff0c\u8ba1\u7b97\u51fa\u589e\u91cf\u66f4\u65b0\u5185\u5bb9\u3002 (\u7c7b\u4f3c\u4e8e diff \u64cd\u4f5c\uff0c\u4f46\u662f\u9488\u5bf9 protobuf \u683c\u5f0f\uff0c\u56e0\u6b64\u4f1a\u591a\u51fa\u597d\u591a\u64cd\u4f5c\u3002) configtxlator compute_update --channel_id cfitestchannel --original vtm_config.pb --updated vtm_modified_config.pb > vtm_config_update.pb 5.5\u3001\u89e3\u7801 config_update.pb \u4e3a json\uff0c\u7136\u540e\u7528 jq \u4fee\u6539\uff0c\u7136\u540e\u5728\u7f16\u7801\u4e3a protobuf \u683c\u5f0f\uff0c\u6700\u7ec8\u8f93\u51fa syorg_update_in_envelope.pb configtxlator proto_decode --input cfi_config_update.pb --type common.ConfigUpdate > cfi_config_update.json echo '{\"payload\":{\"header\":{\"channel_header\":{\"channel_id\":\"cfitestchannel\", \"type\":2}},\"data\":{\"config_update\":' $( cat cfi_config_update.json ) '}}}' | jq . > cfi_config_update_in_envelope.json configtxlator proto_encode --input cfi_config_update_in_envelope.json --type common.Envelope > cfiorg_update_in_envelope.pb 6\u3001\u4e3a\u65b0\u7ec4\u7ec7\u914d\u7f6e\u7b7e\u540d \u00b6 \u4e3a\u914d\u7f6e\u4ea4\u6613\u7b7e\u540d\uff0c\u9700\u8981 channel \u4e2d\u7684\u5927\u591a\u6570 Org \u5bf9\u5176\u8fdb\u884c\u7b7e\u540d\u3002 \u5bf9\u4e8e mychannel \u800c\u8a00\uff0c\u5df2\u6709\u4e86 org1\uff0corg2\uff0c\u56e0\u6b64\u65b0\u589e org3 \u65f6\u9700\u8981 org1\u3001org2 \u90fd\u7b7e\u540d\u3002 \u7b7e\u540d\u64cd\u4f5c\u4e8e cli \u4e2d\u5b8c\u6210\uff0c\u9700\u91c7\u7528 Anchor Peer\uff0c\u53ef\u901a\u8fc7\u66f4\u6539\u73af\u5883\u53d8\u91cf\uff0c\u6539\u53d8\u7b7e\u540d\u8005\u7684\u8eab\u4efd\u3002 6.1\u3001MBFA\u7ec4\u7ec7\u7b7e\u540d docker exec -it cli bash \u7ec4\u7ec7\u7b7e\u540d peer channel signconfigtx -f cfiorg_update_in_envelope.pb 6.2\u3001\u767b\u5f55MSC\u7ec4\u7ec7CLI\u7ee7\u7eed\u7b7e\u540d \uff08\u4e0b\u8f7dMBFA\u7b7e\u540d\u540e\u7684syorg_update_in_envelope.pb\u4e0a\u4f20\u5230msc\u7ec4\u7ec7CLI\u4e2d\uff0c\u53c2\u7167MBFA\u5c06syorg_update_in_envelope.pb\u8fdb\u884c\u7b7e\u540d\u3002\uff09 7\u3001\u63d0\u4ea4\u7b7e\u540d\u540e\u7684\u914d\u7f6e\u4ea4\u6613\u81f3orderer \u00b6 \u6ce8\u610f\uff1a\u9700\u8981\u5c06syorg_update_in_envelope.pb\u6ce8\u610f\u4e0a\u4f20\u5230\u8001\u7ec4\u7ec7\uff0c\u5e76\u9010\u4e00\u53e0\u52a0\u7b7e\u540d\u3002\u7136\u540e\u7531\u751f\u4ea7\u6b64pb\u6587\u4ef6\u7684\u7ec4\u7ec7\u63d0\u4ea4\u66f4\u65b0\u3002 export ORDERER_CA = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/fabric.mbfa.cn/orderers/orderer0.fabric.mbfa.cn/msp/tlscacerts/tlsca.fabric.mbfa.cn-cert.pem peer channel update -f cfiorg_update_in_envelope.pb -c cfitestchannel -o orderer0.fabric.mbfa.cn:7050 --cafile $ORDERER_CA \u82e5\u6210\u529f\u5165\u94fe\uff0c\u53ef\u4ee5\u770b\u5230\u4ee5\u4e0b\u8f93\u51fa\uff1a 2018 -11-01 13 :45:17.982 UTC [ kvledger ] CommitWithPvtData -> INFO 066 [ mbfastorechannel ] Committed block [ 2 ] with 1 transaction ( s ) in 19ms ( state_validation = 0ms block_commit = 13ms state_commit = 3ms ) \u8f93\u51fa\u663e\u793a\uff0c\u5f53\u524d\u63d0\u4ea4\u7684\u5757\u53f7\u662f 6\u3002\u5757 0 \u662f\u521b\u4e16\u5757\uff1b1~2 \u662f\u4e00\u4e9b\u521d\u59cb\u5316\uff1b3~4 \u662f\u5b9e\u4f8b\u5316\u4e0e\u8c03\u7528 chaincode \uff0c\u66f4\u65b0\u914d\u7f6e\u3002","title":"\u516d\u3001\u65b0\u7ec4\u7ec7\u52a0\u5165\u8054\u76df\u5ba1\u6838"},{"location":"Fabric-Introduction-and-Practice/6-add-org/#org","text":"\u901a\u8fc7 step 3~4\uff0c\u5df2\u7ecf\u751f\u6210\u4e86 Sy \u7684\u8bc1\u4e66\u548c\u914d\u7f6e\uff0c\u4f46\u8fd9\u4ec5\u4ec5\u662f\u5728\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fd8\u672a\u4e8e\u533a\u5757\u94fe\u7f51\u7edc\u4ea7\u751f\u5173\u8054\u3002\u4e3a channel \u65b0\u52a0 Org\uff0c\u5bf9 Fabric\u800c\u8a00\uff0c\u662f\u4ee5\u4e00\u7b14\u4ea4\u6613\u7684\u5f62\u5f0f\u63d0\u4ea4\u7684\u3002\u56e0\u6b64\u8981\u4f7f\u5f97\u8fd9\u7b14\u4ea4\u6613\u80fd\u987a\u5229\u5b8c\u6210\uff0c\u9700\u8981\u63d0\u4ea4Sy\u7684\u914d\u7f6e\uff0c\u5230channel\u4e2d\uff0c\u83b7\u5f97\u6743\u9650\u8ba4\u8bc1\uff1b\u7136\u540e\u4e8e\u7f51\u7edc\u4e2d\u53d1\u8d77\u66f4\u65b0\u7684\u4ea4\u6613\u3002","title":"\u516d\u3001\u8054\u76df\u7ec4\u7ec7\u751f\u6210\u548c\u63d0\u4ea4\u65b0 org \u914d\u7f6e"},{"location":"Fabric-Introduction-and-Practice/6-add-org/#1cli","text":"docker exec -it cli bash","title":"1\u3001\u767b\u5f55\u8054\u76df\u7ba1\u7406\u7ec4\u7ec7\u7684cli"},{"location":"Fabric-Introduction-and-Practice/6-add-org/#2-jq","text":"jq \u662f Linux \u4e0b\u547d\u4ee4\u884c\u5904\u7406 JSON \u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 JSON \u8fdb\u884c\u8fc7\u6ee4\u3001\u683c\u5f0f\u5316\u3001\u4fee\u6539\u7b49\u7b49\u64cd\u4f5c\u3002 apt-get -y update && apt-get -y install jq","title":"2\u3001\u5b89\u88c5 jq \u5de5\u5177"},{"location":"Fabric-Introduction-and-Practice/6-add-org/#3orderer-tls-capeerorderer","text":"export ORDERER_CA = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/fabric.mbfa.cn/orderers/orderer0.fabric.mbfa.cn/msp/tlscacerts/tlsca.fabric.mbfa.cn-cert.pem","title":"3\u3001\u8bbe\u7f6eorderer TLS CA\u73af\u5883\u53d8\u91cf\uff08\u6ce8\u610f\uff1apeer\u5bf9\u5e94\u7684\u8282\u70b9\u4e0a\u9700\u8981\u6709orderer\u8282\u70b9\u7684\u8bc1\u4e66\uff09"},{"location":"Fabric-Introduction-and-Practice/6-add-org/#4channel","text":"peer channel fetch config vtm_config_block.pb -o orderer0.fabric.mbfa.cn:7050 -c cfitestchannel --cafile $ORDERER_CA","title":"4\u3001\u83b7\u53d6\u51c6\u5907\u52a0\u5165channel\u7684\u914d\u7f6e"},{"location":"Fabric-Introduction-and-Practice/6-add-org/#5channel","text":"","title":"5\u3001\u8054\u76df\u7ba1\u7406\u7ec4\u7ec7\u4fee\u6539\u539fchannel\u914d\u7f6e\u6587\u4ef6, \u589e\u52a0\u65b0\u7ec4\u7ec7"},{"location":"Fabric-Introduction-and-Practice/6-add-org/#6","text":"\u4e3a\u914d\u7f6e\u4ea4\u6613\u7b7e\u540d\uff0c\u9700\u8981 channel \u4e2d\u7684\u5927\u591a\u6570 Org \u5bf9\u5176\u8fdb\u884c\u7b7e\u540d\u3002 \u5bf9\u4e8e mychannel \u800c\u8a00\uff0c\u5df2\u6709\u4e86 org1\uff0corg2\uff0c\u56e0\u6b64\u65b0\u589e org3 \u65f6\u9700\u8981 org1\u3001org2 \u90fd\u7b7e\u540d\u3002 \u7b7e\u540d\u64cd\u4f5c\u4e8e cli \u4e2d\u5b8c\u6210\uff0c\u9700\u91c7\u7528 Anchor Peer\uff0c\u53ef\u901a\u8fc7\u66f4\u6539\u73af\u5883\u53d8\u91cf\uff0c\u6539\u53d8\u7b7e\u540d\u8005\u7684\u8eab\u4efd\u3002","title":"6\u3001\u4e3a\u65b0\u7ec4\u7ec7\u914d\u7f6e\u7b7e\u540d"},{"location":"Fabric-Introduction-and-Practice/6-add-org/#7orderer","text":"\u6ce8\u610f\uff1a\u9700\u8981\u5c06syorg_update_in_envelope.pb\u6ce8\u610f\u4e0a\u4f20\u5230\u8001\u7ec4\u7ec7\uff0c\u5e76\u9010\u4e00\u53e0\u52a0\u7b7e\u540d\u3002\u7136\u540e\u7531\u751f\u4ea7\u6b64pb\u6587\u4ef6\u7684\u7ec4\u7ec7\u63d0\u4ea4\u66f4\u65b0\u3002 export ORDERER_CA = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/fabric.mbfa.cn/orderers/orderer0.fabric.mbfa.cn/msp/tlscacerts/tlsca.fabric.mbfa.cn-cert.pem peer channel update -f cfiorg_update_in_envelope.pb -c cfitestchannel -o orderer0.fabric.mbfa.cn:7050 --cafile $ORDERER_CA \u82e5\u6210\u529f\u5165\u94fe\uff0c\u53ef\u4ee5\u770b\u5230\u4ee5\u4e0b\u8f93\u51fa\uff1a 2018 -11-01 13 :45:17.982 UTC [ kvledger ] CommitWithPvtData -> INFO 066 [ mbfastorechannel ] Committed block [ 2 ] with 1 transaction ( s ) in 19ms ( state_validation = 0ms block_commit = 13ms state_commit = 3ms ) \u8f93\u51fa\u663e\u793a\uff0c\u5f53\u524d\u63d0\u4ea4\u7684\u5757\u53f7\u662f 6\u3002\u5757 0 \u662f\u521b\u4e16\u5757\uff1b1~2 \u662f\u4e00\u4e9b\u521d\u59cb\u5316\uff1b3~4 \u662f\u5b9e\u4f8b\u5316\u4e0e\u8c03\u7528 chaincode \uff0c\u66f4\u65b0\u914d\u7f6e\u3002","title":"7\u3001\u63d0\u4ea4\u7b7e\u540d\u540e\u7684\u914d\u7f6e\u4ea4\u6613\u81f3orderer"},{"location":"Fabric-Introduction-and-Practice/7-join-channel/","text":"\u4e03\u3001\u65b0\u7ec4\u7ec7\u7533\u8bf7\u6dfb\u52a0\u5230channel\u4e2d \u00b6 \u542f\u52a8\u65b0\u7ec4\u7ec7\u8282\u70b9\uff0c\u767b\u5f55cli\uff0c\u52a0\u5165\u5230\u65b0channel\uff1a docker-compose -f cfi.yaml up docker exec -it cli bash export ORDERER_CA = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/fabric.mbfa.cn/orderers/orderer0.fabric.mbfa.cn/msp/tlscacerts/tlsca.fabric.mbfa.cn-cert.pem export CHANNEL_NAME = cfitestchannel //\u4ece orderer \u4e2d\u83b7\u53d6 channel \u521b\u4e16\u5757\u914d\u7f6e peer channel fetch 0 cfitestchannel.block -o orderer0.fabric.mbfa.cn:7050 -c $CHANNEL_NAME --cafile $ORDERER_CA peer channel join -b cfitestchannel.block","title":"\u4e03\u3001\u65b0\u7ec4\u7ec7\u52a0\u5165channel"},{"location":"Fabric-Introduction-and-Practice/7-join-channel/#channel","text":"\u542f\u52a8\u65b0\u7ec4\u7ec7\u8282\u70b9\uff0c\u767b\u5f55cli\uff0c\u52a0\u5165\u5230\u65b0channel\uff1a docker-compose -f cfi.yaml up docker exec -it cli bash export ORDERER_CA = /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/fabric.mbfa.cn/orderers/orderer0.fabric.mbfa.cn/msp/tlscacerts/tlsca.fabric.mbfa.cn-cert.pem export CHANNEL_NAME = cfitestchannel //\u4ece orderer \u4e2d\u83b7\u53d6 channel \u521b\u4e16\u5757\u914d\u7f6e peer channel fetch 0 cfitestchannel.block -o orderer0.fabric.mbfa.cn:7050 -c $CHANNEL_NAME --cafile $ORDERER_CA peer channel join -b cfitestchannel.block","title":"\u4e03\u3001\u65b0\u7ec4\u7ec7\u7533\u8bf7\u6dfb\u52a0\u5230channel\u4e2d"},{"location":"Fabric-Introduction-and-Practice/8-upgrade-chaincode/","text":"\u516b\u3001\u5347\u7ea7chaincode\u548c\u80cc\u4e66\u7b56\u7565 \u00b6 1\u3001\u4e3a\u65b0\u7ec4\u7ec7\u5b89\u88c5 2.0 \u7248\u672c\u7684 chaincode \u00b6 \u5176\u4ed6\u7ec4\u7ec7\u7684 chaincode \u7248\u672c\u53f7\u662f 1\uff0c\u65b0\u7ec4\u7ec7\u9700\u8981\u66f4\u65b0\u6b64\u7248\u672c\u7684 chaincode\uff0c\u56e0\u6b64\u4e3a\u65b0\u7ec4\u7ec7\u76f4\u63a5\u5b89\u88c5\u7248\u672c\u4e3a 2 \u7684 chaincode\uff0c\u7701\u5f97\u5148\u5b89\u88c5\u518d\u5347\u7ea7\u3002 peer chaincode install -n cfistore -v 2 -p github.com/hyperledger/fabric/chaincode/go/cfistore 2\u3001\u4e3a\u5176\u4ed6\u7ec4\u7ec7\u5b89\u88c5 2.0 \u7248\u672c chaincode \u00b6 \u767b\u5f55\u6bcf\u4e2a\u8054\u76df\u539f\u6709\u7ec4\u7ec7 cli\uff0c\u9010\u4e00\u8fdb\u884c\u66f4\u65b0\u3002 docker exec -it cli bash peer chaincode install -n cfistore -v 2 -p github.com/hyperledger/fabric/chaincode/go/cfistore peer chaincode upgrade -n cfistore -v 7 -c '{\"Args\":[\"init\"]}' -o orderer0.fabric.mbfa.cn:7050 -C cfichannel -P \"OR ('MbfaMSP.member','MscMSP.member','CfecMSP.member','VteamMSP.member')\" // \u67e5\u770bchannel\u4e2d\u5df2\u7ecf\u5b9e\u4f8b\u5316\u7684\u94fe\u7801 peer chaincode list --instantiated -C cfichannel 3\u3001\u5347\u7ea7\u80cc\u4e66\u7b56\u7565 \u00b6 \u5347\u7ea7\u80cc\u4e66\u7b56\u7565\uff0c-v 2 \u6307\u660e\u7248\u672c\u53f7\uff0c-P \"AND ('MbfaMSP.peer','CfecMSP.peer')\"\u6307\u660e\u65b0\u7684\u80cc\u4e66\u7b56\u7565\uff08\u6dfb\u52a0\u4e86 CfecOrg\uff09\u3002 peer chaincode upgrade -n cfistore -v 2 -c '{\"Args\":[\"init\"]}' -o orderer0.fabric.mbfa.cn:7050 -C cfichannel -P \"AND ('MbfaMSP.peer','CfecMSP.peer')\" peer chaincode upgrade \u547d\u4ee4\u5c06\u4e3a\u533a\u5757\u94fe\u65b0\u589e\u4e00\u4e2a\u5757\uff0c\u53ef\u4ee5\u5728\u5176\u4ed6\u7684 peer \u7684\u8f93\u51fa\u4e2d\u67e5\u770b\u3002 \u67e5\u8be2\u94fe\u7801 peer chaincode query -C cfichannel -n cfistore -c '{\"Args\":[\"query\",\"a\"]}'","title":"\u516b\u3001\u5347\u7ea7chaincode\u548c\u80cc\u4e66\u7b56\u7565"},{"location":"Fabric-Introduction-and-Practice/8-upgrade-chaincode/#chaincode","text":"","title":"\u516b\u3001\u5347\u7ea7chaincode\u548c\u80cc\u4e66\u7b56\u7565"},{"location":"Fabric-Introduction-and-Practice/8-upgrade-chaincode/#1-20-chaincode","text":"\u5176\u4ed6\u7ec4\u7ec7\u7684 chaincode \u7248\u672c\u53f7\u662f 1\uff0c\u65b0\u7ec4\u7ec7\u9700\u8981\u66f4\u65b0\u6b64\u7248\u672c\u7684 chaincode\uff0c\u56e0\u6b64\u4e3a\u65b0\u7ec4\u7ec7\u76f4\u63a5\u5b89\u88c5\u7248\u672c\u4e3a 2 \u7684 chaincode\uff0c\u7701\u5f97\u5148\u5b89\u88c5\u518d\u5347\u7ea7\u3002 peer chaincode install -n cfistore -v 2 -p github.com/hyperledger/fabric/chaincode/go/cfistore","title":"1\u3001\u4e3a\u65b0\u7ec4\u7ec7\u5b89\u88c5 2.0 \u7248\u672c\u7684 chaincode"},{"location":"Fabric-Introduction-and-Practice/8-upgrade-chaincode/#2-20-chaincode","text":"\u767b\u5f55\u6bcf\u4e2a\u8054\u76df\u539f\u6709\u7ec4\u7ec7 cli\uff0c\u9010\u4e00\u8fdb\u884c\u66f4\u65b0\u3002 docker exec -it cli bash peer chaincode install -n cfistore -v 2 -p github.com/hyperledger/fabric/chaincode/go/cfistore peer chaincode upgrade -n cfistore -v 7 -c '{\"Args\":[\"init\"]}' -o orderer0.fabric.mbfa.cn:7050 -C cfichannel -P \"OR ('MbfaMSP.member','MscMSP.member','CfecMSP.member','VteamMSP.member')\" // \u67e5\u770bchannel\u4e2d\u5df2\u7ecf\u5b9e\u4f8b\u5316\u7684\u94fe\u7801 peer chaincode list --instantiated -C cfichannel","title":"2\u3001\u4e3a\u5176\u4ed6\u7ec4\u7ec7\u5b89\u88c5 2.0 \u7248\u672c chaincode"},{"location":"Fabric-Introduction-and-Practice/8-upgrade-chaincode/#3","text":"\u5347\u7ea7\u80cc\u4e66\u7b56\u7565\uff0c-v 2 \u6307\u660e\u7248\u672c\u53f7\uff0c-P \"AND ('MbfaMSP.peer','CfecMSP.peer')\"\u6307\u660e\u65b0\u7684\u80cc\u4e66\u7b56\u7565\uff08\u6dfb\u52a0\u4e86 CfecOrg\uff09\u3002 peer chaincode upgrade -n cfistore -v 2 -c '{\"Args\":[\"init\"]}' -o orderer0.fabric.mbfa.cn:7050 -C cfichannel -P \"AND ('MbfaMSP.peer','CfecMSP.peer')\" peer chaincode upgrade \u547d\u4ee4\u5c06\u4e3a\u533a\u5757\u94fe\u65b0\u589e\u4e00\u4e2a\u5757\uff0c\u53ef\u4ee5\u5728\u5176\u4ed6\u7684 peer \u7684\u8f93\u51fa\u4e2d\u67e5\u770b\u3002 \u67e5\u8be2\u94fe\u7801 peer chaincode query -C cfichannel -n cfistore -c '{\"Args\":[\"query\",\"a\"]}'","title":"3\u3001\u5347\u7ea7\u80cc\u4e66\u7b56\u7565"},{"location":"NodeJS/Electron/","text":"\u4e00\u3001Electron \u7b80\u4ecb \u00b6 Electron \u662f\u7531Github\u5f00\u53d1\uff0c\u7528HTML\uff0cCSS\u548cJavaScript\u6765\u6784\u5efa\u8de8\u5e73\u53f0\u684c\u9762\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u4e2a\u5f00\u6e90\u5e93\u3002 Electron\u901a\u8fc7\u5c06 Chromium \u548c Node.js \u5408\u5e76\u5230\u540c\u4e00\u4e2a\u8fd0\u884c\u65f6\u73af\u5883\u4e2d\uff0c\u5e76\u5c06\u5176\u6253\u5305\u4e3aMac\uff0cWindows\u548cLinux\u7cfb\u7edf\u4e0b\u7684\u5e94\u7528\u6765\u5b9e\u73b0\u8fd9\u4e00\u76ee\u7684\u3002 \u6700\u521d\u4e3a GitHub \u5f00\u53d1 Atom \u7f16\u8f91\u5668, \u76ee\u524d\u5df2\u6210\u4e3a\u5f00\u6e90\u5f00\u53d1\u8005\u3001\u521d\u521b\u4f01\u4e1a\u548c\u8001\u724c\u516c\u53f8\u5e38\u7528\u7684\u5f00\u53d1\u5de5\u5177\u3002 \u770b\u770b\u8c01\u5728\u4f7f\u7528Electron \u3002 Electron \u53d1\u5c55\u5386\u7a0b \u00b6 2013\u5e744\u6708 Atom Shell \u9879\u76ee\u542f\u52a8 \u3002 2014\u5e745\u6708 Atom Shell \u88ab\u5f00\u6e90 \u3002 2015\u5e744\u6708 Atom Shell \u88ab\u91cd\u547d\u540d\u4e3a Electron \u3002 2016\u5e745\u6708 Electron \u53d1\u5e03\u4e86 v1.0.0 \u7248\u672c \u3002 2016\u5e745\u6708 Electron \u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4e0a\u67b6 Mac App Store \u3002 2016\u5e748\u6708 Windows Store \u652f\u6301 Electron \u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f \u3002 \u4e8c\u3001\u73af\u5883\u642d\u5efa \u00b6 1. \u5b89\u88c5 electron npm install -g electron 2. \u514b\u9686\u4e00\u4e2a\u4ed3\u5e93\u3001\u5feb\u901f\u542f\u52a8\u4e00\u4e2a\u9879\u76ee # \u514b\u9686\u793a\u4f8b\u9879\u76ee\u7684\u4ed3\u5e93 git clone https://github.com/electron/electron-quick-start # \u8fdb\u5165\u8fd9\u4e2a\u4ed3\u5e93 cd electron-quick-start # \u5b89\u88c5\u4f9d\u8d56\u5e76\u8fd0\u884c npm install && npm start 3. \u624b\u52a8\u642d\u5efa\u4e00\u4e2a electron \u9879\u76ee \u65b0\u5efa\u4e00\u4e2a\u9879\u76ee\u76ee\u5f55 \u4f8b\u5982: electrondemo01 \u5728 electrondemo01 \u76ee\u5f55\u4e0b\u9762\u65b0\u5efa\u4e09\u4e2a\u6587\u4ef6: index.html \u3001 main.js \u3001 package.json index.html \u91cc\u9762\u7528 css \u8fdb\u884c\u5e03\u5c40\uff08\u4ee5\u524d\u600e\u4e48\u5199\u73b0\u5728\u8fd8\u662f\u600e\u4e48\u5199\uff09 \u5728 main.js \u4e2d\u5199\u5982\u4e0b\u4ee3\u7801\uff1a var electron = require ( 'electron' ); //electron \u5bf9\u8c61\u7684\u5f15\u7528 const app = electron . app ; //BrowserWindow \u7c7b\u7684\u5f15\u7528 const BrowserWindow = electron . BrowserWindow ; let mainWindow = null ; //\u76d1\u542c\u5e94\u7528\u51c6\u5907\u5b8c\u6210\u7684\u4e8b\u4ef6 app.on('ready',function(){ //\u76d1\u542c\u5e94\u7528\u51c6\u5907\u5b8c\u6210\u7684\u4e8b\u4ef6 app . on ( 'ready' , function (){ //\u521b\u5efa\u7a97\u53e3 mainWindow = new BrowserWindow ({ width : 800 , height : 600 }); mainWindow . loadFile ( 'index.html' ); mainWindow . on ( 'closed' , function () { mainWindow = null ; }) }) }) //\u76d1\u542c\u6240\u6709\u7a97\u53e3\u5173\u95ed\u7684\u4e8b\u4ef6$ app . on ( 'window-all-closed' , function () { // On OS X it is common for applications and their menu bar // to stay active until the user quits explicitly with Cmd + Q$ if ( process . platform !== 'darwin' ) { app . quit (); $ } }) \u8fd0\u884c electron . #\u6ce8\u610f:\u547d\u4ee4\u540e\u9762\u6709\u4e2a\u70b9 4. electron-forge \u642d\u5efa\u4e00\u4e2a electron \u9879\u76ee electron-forge \u76f8\u5f53\u4e8e electron \u7684\u4e00\u4e2a\u811a\u624b\u67b6\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u66f4\u65b9\u4fbf\u7684\u521b\u5efa\u3001\u8fd0\u884c\u3001\u6253\u5305 electron \u9879\u76ee npm install -g electron-forge$ electron-forge init my-new-app$ cd my-new-app npm start \u4e09\u3001Electron \u8fd0\u884c\u6d41\u7a0b \u00b6 1 Electron \u8fd0\u884c\u7684\u6d41\u7a0b \u00b6 2 Electron \u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b \u00b6 Electron \u8fd0\u884c package.json \u7684 main \u811a\u672c\u7684\u8fdb\u7a0b\u88ab\u79f0\u4e3a\u4e3b\u8fdb\u7a0b\u3002 \u5728\u4e3b\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u7684\u811a\u672c\u901a\u8fc7\u521b\u5efa web \u9875\u9762\u6765\u5c55\u793a\u7528\u6237\u754c\u9762\u3002 \u4e00\u4e2a Electron \u5e94\u7528\u603b\u662f\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\u3002 \u7531\u4e8e Electron \u4f7f\u7528\u4e86 Chromium (\u8c37\u6b4c\u6d4f\u89c8\u5668)\u6765\u5c55\u793a web \u9875\u9762\uff0c\u6240\u4ee5 Chromium \u7684 \u591a\u8fdb\u7a0b\u67b6\u6784\u4e5f\u88ab\u4f7f\u7528\u5230\u3002 \u6bcf\u4e2a Electron \u4e2d\u7684 web \u9875\u9762\u8fd0\u884c\u5728\u5b83\u81ea\u5df1\u7684\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u3002 \u4e3b\u8fdb\u7a0b\u4f7f\u7528 BrowserWindow \u5b9e\u4f8b\u521b\u5efa\u9875\u9762\u3002\u6bcf\u4e2a BrowserWindow \u5b9e\u4f8b\u90fd\u5728\u81ea\u5df1\u7684\u6e32 \u67d3\u8fdb\u7a0b\u91cc\u8fd0\u884c\u9875\u9762\u3002 \u5f53\u4e00\u4e2a BrowserWindow \u5b9e\u4f8b\u88ab\u9500\u6bc1\u540e\uff0c\u76f8\u5e94\u7684\u6e32\u67d3\u8fdb\u7a0b\u4e5f\u4f1a\u88ab\u7ec8\u6b62\u3002 3 Electron \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7 Nodejs \u8bfb\u53d6\u672c\u5730\u6587\u4ef6 \u00b6 \u5728\u666e\u901a\u7684\u6d4f\u89c8\u5668\u4e2d\uff0c web \u9875\u9762\u901a\u5e38\u5728\u4e00\u4e2a\u6c99\u76d2\u73af\u5883\u4e2d\u8fd0\u884c\uff0c\u4e0d\u88ab\u5141\u8bb8\u53bb\u63a5\u89e6\u539f\u751f\u7684\u8d44\u6e90\u3002 \u7136\u800c Electron \u7684\u7528\u6237\u5728 Node.js \u7684 API \u652f\u6301\u4e0b\u53ef\u4ee5\u5728\u9875\u9762\u4e2d\u548c\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u4e00\u4e9b\u5e95\u5c42\u4ea4\u4e92\u3002 Nodejs \u5728\u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002\u6e32\u67d3\u8fdb\u7a0b\u56e0\u4e3a\u5b89\u5168\u9650\u5236\uff0c\u4e0d\u80fd\u76f4\u63a5\u64cd\u4f5c\u751f GUI \u3002\u867d\u7136\u5982\u6b64\uff0c\u56e0\u4e3a\u96c6\u6210\u4e86 Nodejs\uff0c\u6e32\u67d3\u8fdb\u7a0b\u4e5f\u6709\u4e86\u64cd\u4f5c\u7cfb\u7edf\u5e95\u5c42 API \u7684\u80fd\u529b\uff0c Nodejs \u4e2d\u5e38\u7528\u7684 Path \u3001 fs \u3001 Crypto \u7b49\u6a21\u5757\u5728 Electron \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u65b9\u4fbf\u6211\u4eec\u5904\u7406\u94fe\u63a5\u3001\u8def\u5f84\u3001 \u6587\u4ef6 MD5 \u7b49\uff0c\u540c\u65f6 npm \u8fd8\u6709\u6210\u5343\u4e0a\u4e07\u7684\u6a21\u5757\u4f9b\u6211\u4eec\u9009\u62e9\u3002 var fs = require ( 'fs' ); var content = document . getElementById ( 'content' ); var button = document . getElementById ( 'button' ); button . addEventListener ( 'click' , function ( e ){ fs . readFile ( 'package.json' , 'utf8' , function ( err , data ){ content . textContent = data ; console . log ( data ); }); }); 4 Electron \u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f \u00b6 mainWindow . webContents . openDevTools (); \u56db\u3001Electron \u6a21\u5757\u4ecb\u7ecd \u00b6 Electron \u6a21\u5757\u4ecb\u7ecd\u3001 remote \u6a21\u5757\u3001\u901a \u8fc7 BrowserWindow \u6253\u5f00\u65b0\u7a97\u53e3 1 Electron \u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u7684\u6a21\u5757 \u00b6 2 Electron remote \u6a21\u5757 \u00b6 remote \u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u6e32\u67d3\u8fdb\u7a0b(\u7f51\u9875)\u548c\u4e3b\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u8fdb\u7a0b\u95f4\u901a\u8baf( IPC )\u7684\u7b80\u4fbf\u9014\u5f84\u3002\u5728 Electron \u4e2d, \u4e0e GUI \u76f8\u5173\u7684\u6a21\u5757(\u5982 dialog , menu \u7b49)\u53ea\u5b58\u5728\u4e8e\u4e3b\u8fdb\u7a0b\uff0c\u800c\u4e0d\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d \u3002\u4e3a\u4e86\u80fd\u4ece\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u5b83\u4eec\uff0c\u9700\u8981\u7528 ipc \u6a21\u5757\u6765\u7ed9\u4e3b\u8fdb\u7a0b\u53d1\u9001\u8fdb\u7a0b\u95f4\u6d88\u606f\u3002\u4f7f\u7528 remote \u6a21\u5757\uff0c\u53ef\u4ee5\u8c03\u7528\u4e3b\u8fdb\u7a0b\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u800c\u65e0\u9700\u663e\u5f0f\u5730\u53d1\u9001\u8fdb\u7a0b\u95f4\u6d88\u606f\uff0c\u8fd9\u7c7b\u4f3c\u4e8e Java \u7684 RMI \u3002 3 \u901a\u8fc7BrowserWindow \u6253\u5f00\u65b0\u7a97\u53e3 \u00b6 Electron \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7 remote \u6a21\u5757\u8c03\u7528\u4e3b\u8fdb\u7a0b\u4e2d\u7684 BrowserWindow \u6253\u5f00\u65b0\u7a97\u53e3\uff0c\u8be6\u60c5\u53ef\u53c2\u8003\uff1a https://electronjs.org/docs/api/browser-window // \u4e3b\u8fdb\u7a0b\u4ee3\u7801 const electron = require ( 'electron' ); // \u63a7\u5236\u5e94\u7528\u751f\u547d\u5468\u671f\u7684\u6a21\u5757 const { app } = electron ; // \u521b\u5efa\u672c\u5730\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u6a21\u5757 const { BrowserWindow } = electron ; // \u6307\u5411\u7a97\u53e3\u5bf9\u8c61\u7684\u4e00\u4e2a\u5168\u5c40\u5f15\u7528\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u5f15\u7528\uff0c\u90a3\u4e48\u5f53\u8be5 javascript \u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536 \u7684 // \u65f6\u5019\u8be5\u7a97\u53e3\u5c06\u4f1a\u81ea\u52a8\u5173\u95ed let win ; function createWindow () { // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6d4f\u89c8\u5668\u7a97\u53e3 win = new BrowserWindow ({ width : 1104 , height : 620 }); //570+50 $ // \u5e76\u4e14\u88c5\u8f7d\u5e94\u7528\u7684 index.html \u9875\u9762 win . loadURL ( `file:// ${ __dirname } /html/index.html` ); $ // \u6253\u5f00\u5f00\u53d1\u5de5\u5177\u9875\u9762 win . webContents . openDevTools (); $ //\u5f53\u7a97\u53e3\u5173\u95ed\u65f6\u8c03\u7528\u7684\u65b9\u6cd5 win . on ( 'closed' , () => { // \u89e3\u9664\u7a97\u53e3\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u901a\u5e38\u800c\u8a00\u5982\u679c\u5e94\u7528\u652f\u6301\u591a\u4e2a\u7a97\u53e3\u7684\u8bdd\uff0c\u4f60\u4f1a\u5728\u4e00\u4e2a\u6570\u7ec4\u91cc // \u5b58\u653e\u7a97\u53e3\u5bf9\u8c61\uff0c\u5728\u7a97\u53e3\u5173\u95ed\u7684\u65f6\u5019\u5e94\u5f53\u5220\u9664\u76f8\u5e94\u7684\u5143\u7d20\u3002 win = null ; }); } // \u5f53 Electron \u5b8c\u6210\u521d\u59cb\u5316\u5e76\u4e14\u5df2\u7ecf\u521b\u5efa\u4e86\u6d4f\u89c8\u5668\u7a97\u53e3\uff0c\u5219\u8be5\u65b9\u6cd5\u5c06\u4f1a\u88ab\u8c03\u7528\u3002 // \u6709\u4e9b API \u53ea\u80fd\u5728\u8be5\u4e8b\u4ef6\u53d1\u751f\u540e\u624d\u80fd\u88ab\u4f7f\u7528 app . on ( 'ready' , createWindow ); // \u5f53\u6240\u6709\u7684\u7a97\u53e3\u88ab\u5173\u95ed\u540e\u9000\u51fa\u5e94\u7528 app . on ( 'window-all-closed' , () => { // \u5bf9\u4e8e OS X \u7cfb\u7edf\uff0c\u5e94\u7528\u548c\u76f8\u5e94\u7684\u83dc\u5355\u680f\u4f1a\u4e00\u76f4\u6fc0\u6d3b\u76f4\u5230\u7528\u6237\u901a\u8fc7 Cmd + Q \u663e\u5f0f\u9000\u51fa$ if ( process . platform !== 'darwin' ) { app . quit (); } }); app . on ( 'activate' , () => { // \u5bf9\u4e8e OS X \u7cfb\u7edf\uff0c\u5f53 dock \u56fe\u6807\u88ab\u70b9\u51fb\u540e\u4f1a\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a app \u7a97\u53e3\uff0c\u5e76\u4e14\u4e0d\u4f1a\u6709\u5176\u4ed6 // \u7a97\u53e3\u6253\u5f00 if ( win === null ) { createWindow (); $ } }); // \u5728\u8fd9\u4e2a\u6587\u4ef6\u540e\u9762\u4f60\u53ef\u4ee5\u76f4\u63a5\u5305\u542b\u4f60\u5e94\u7528\u7279\u5b9a\u7684\u7531\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u7684\u4ee3\u7801\u3002$ // \u4e5f\u53ef\u4ee5\u628a\u8fd9\u4e9b\u4ee3\u7801\u653e\u5728\u53e6\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7136\u540e\u5728\u8fd9\u91cc\u5bfc\u5165 // \u6e32\u67d3\u8fdb\u7a0b\u4ee3\u7801 /src/render/index.js // \u6253\u5f00\u65b0\u7a97\u53e3\u5c5e\u6027\u7528\u6cd5\u6709\u70b9\u7c7b\u4f3cvscode\u6253\u5f00\u65b0\u7684\u7a97\u53e3 const btn = document . querySelector ( '#btn' ); const path = require ( 'path' ); const BrowerWindow = require ( 'electron' ). remote . BrowserWindow ; btn . onclick = () => { win = new BrowerWindow ({ $ width : 300 , height : 200 , $ frame : false , // false\u9690\u85cf\u5173\u95ed\u6309\u94ae\u3001\u83dc\u5355\u9009\u9879 true\u663e\u793a fullscreen : true , // \u5168\u5c4f\u5c55\u793a transparent : true $ }) $ win . loadURL ( path . join ( 'file:' , __dirname , 'news.html' )); win . on ( 'close' ,()=>{ win = null }); } \u4e94\u3001\u81ea\u5b9a\u4e49\u9876\u90e8\u83dc\u5355/\u53f3\u952e\u83dc\u5355 \u00b6 1 \u4e3b\u8fdb\u7a0b\u4e2d\u8c03\u7528Menu\u6a21\u5757-\u81ea\u5b9a\u4e49\u8f6f\u4ef6\u9876\u90e8\u83dc\u5355 \u00b6 https://electronjs.org/docs/api/menu-item Electron \u4e2d Menu \u6a21\u5757\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u539f\u751f\u83dc\u5355\uff0c\u5b83\u53ef\u7528\u4f5c\u5e94\u7528\u83dc\u5355\u548c context \u83dc\u5355 \u8fd9\u4e2a\u6a21\u5757\u662f\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\u7684\u6a21\u5757\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7 remote \u6a21\u5757\u7ed9\u6e32\u67d3\u8fdb\u7a0b\u8c03\u7528 // main/menu.js const { Menu } = require ( 'electron' ) // \u6587\u6863 https://electronjs.org/docs/api/menu-item // \u83dc\u5355\u9879\u76ee let menus = [ { label : '\u6587\u4ef6' , submenu : [ { label : '\u65b0\u5efa\u6587\u4ef6' , accelerator : 'ctrl+n' , // \u7ed1\u5b9a\u5feb\u6377\u952e click : function () { // \u7ed1\u5b9a\u4e8b\u4ef6 console . log ( '\u65b0\u5efa\u6587\u4ef6' ) } }, { label : '\u65b0\u5efa\u7a97\u53e3' , click : function () { console . log ( '\u65b0\u5efa\u7a97\u53e3' ) } } ] }, { label : '\u7f16\u8f91' , submenu : [ { label : '\u590d\u5236' , role : 'copy' // \u8c03\u7528\u5185\u7f6e\u89d2\u8272\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd }, { label : '\u526a\u5207' , role : 'cut' // \u8c03\u7528\u5185\u7f6e\u89d2\u8272\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd } ] }, { label : '\u89c6\u56fe' , submenu : [ { label : '\u6d4f\u89c8' }, { label : '\u641c\u7d22' } ] } ] let m = Menu . buildFromTemplate ( menus ) Menu . setApplicationMenu ( m ) // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/menu.js' ) }; \u6211\u4eec\u7ed9\u83dc\u5355\u7ed1\u5b9a\u4e8b\u4ef6\uff0c\u5728\u547d\u4ee4\u884c\u63a7\u5236\u53f0\u53ef\u4ee5\u770b\u5230 2 \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u8c03\u7528Menu\u6a21\u5757 \u00b6 \u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5efa\u8bae\u5728\u4e3b\u8fdb\u7a0b\u4e2d\u4f7f\u7528 1. remote \u901a\u8fc7 remote \u8c03\u7528\u4e3b\u8fdb\u7a0b\u7684\u65b9\u6cd5 // \u83dc\u5355\u5f15\u5165\u7684\u65b9\u5f0f\u53d1\u751f\u53d8\u5316 const { Menu } = require ( 'electron' ). remote // \u5176\u4ed6\u4ee3\u7801\u548c\u4e0a\u9762\u83dc\u5355\u4e00\u6837 // ... 2. \u52a0\u5165index.html < script src = \"render/menu.js\" >< /script> 3 \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u81ea\u5b9a\u4e49\u53f3\u952e\u83dc\u5355 \u00b6 1. \u5b9a\u4e49\u83dc\u5355 // render/menu.js // \u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7remote\u6a21\u5757\u8c03\u7528\u4e3b\u8fdb\u7a0b\u4e2d\u7684\u6a21\u5757 const { Menu } = require ( 'electron' ). remote const { remote } = require ( 'electron' ) // \u6587\u6863 https://electronjs.org/docs/api/menu-item // \u83dc\u5355\u9879\u76ee let menus = [ { label : '\u6587\u4ef6' , submenu : [ { label : '\u65b0\u5efa\u6587\u4ef6' , accelerator : 'ctrl+n' , // \u7ed1\u5b9a\u5feb\u6377\u952e click : function () { // \u7ed1\u5b9a\u4e8b\u4ef6 console . log ( '\u65b0\u5efa\u6587\u4ef6' ) } }, { label : '\u65b0\u5efa\u7a97\u53e3' , click : function () { console . log ( '\u65b0\u5efa\u7a97\u53e3' ) } } ] }, { label : '\u7f16\u8f91' , submenu : [ { label : '\u590d\u5236' , role : 'copy' // \u8c03\u7528\u5185\u7f6e\u89d2\u8272\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd }, { label : '\u526a\u5207' , role : 'cut' // \u8c03\u7528\u5185\u7f6e\u89d2\u8272\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd } ] }, { label : '\u89c6\u56fe' , submenu : [ { label : '\u6d4f\u89c8' }, { label : '\u641c\u7d22' } ] } ] let m = Menu . buildFromTemplate ( menus ) // Menu.setApplicationMenu(m) // \u7ed1\u5b9a\u53f3\u952e\u83dc\u5355 window . addEventListener ( 'contextmenu' , ( e )=>{ e . preventDefault () m . popup ({ window : remote . getCurrentWindow () }) }, false ) 2. \u5f15\u5165 <!-- index . html --> < script src = \"render/menu.js\" >< /script> \u516d\u3001\u8fdb\u7a0b\u901a\u4fe1 \u00b6 \u6e32\u67d3\u8fdb\u7a0b https://electronjs.org/docs/api/ipc-renderer \u4e3b\u8fdb\u7a0b https://electronjs.org/docs/api/ipc-main 1 \u4e3b\u8fdb\u7a0b\u4e0e\u6e32\u67d3\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1 \u00b6 \u6709\u65f6\u5019\u6211\u4eec\u60f3\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7\u4e00\u4e2a\u4e8b\u4ef6\u53bb\u6267\u884c\u4e3b\u8fdb\u7a0b\u91cc\u9762\u7684\u65b9\u6cd5\u3002\u6216\u8005\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u77e5 \u4e3b\u8fdb\u7a0b\u5904\u7406\u4e8b\u4ef6\uff0c\u4e3b\u8fdb\u7a0b\u5904\u7406\u5b8c\u6210\u540e\u5e7f\u64ad\u4e00\u4e2a\u4e8b\u4ef6\u8ba9\u6e32\u67d3\u8fdb\u7a0b\u53bb\u5904\u7406\u4e00\u4e9b\u4e8b\u60c5\u3002\u8fd9\u4e2a\u65f6\u5019\u5c31 \u7528\u5230\u4e86\u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u4e4b\u95f4\u7684\u76f8\u4e92\u901a\u4fe1 Electron \u4e3b\u8fdb\u7a0b\uff0c\u548c\u6e32\u67d3\u8fdb\u7a0b\u7684\u901a\u4fe1\u4e3b\u8981\u7528\u5230\u4e24\u4e2a\u6a21\u5757: ipcMain \u548c ipcRenderer ipcMain :\u5f53\u5728\u4e3b\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u65f6\uff0c\u5b83\u5904\u7406\u4ece\u6e32\u67d3\u5668\u8fdb\u7a0b(\u7f51\u9875)\u53d1\u9001\u51fa\u6765\u7684\u5f02\u6b65\u548c\u540c\u6b65\u4fe1\u606f,\u5f53\u7136\u4e5f\u6709\u53ef\u80fd\u4ece\u4e3b\u8fdb\u7a0b\u5411\u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f\u3002 ipcRenderer : \u4f7f\u7528\u5b83\u63d0\u4f9b\u7684\u4e00\u4e9b\u65b9\u6cd5\u4ece\u6e32\u67d3\u8fdb\u7a0b ( web \u9875\u9762) \u53d1\u9001\u540c\u6b65\u6216\u5f02\u6b65\u7684\u6d88\u606f\u5230\u4e3b\u8fdb\u7a0b\u3002 \u4e5f\u53ef\u4ee5\u63a5\u6536\u4e3b\u8fdb\u7a0b\u56de\u590d\u7684\u6d88\u606f 1.1 \u6e32\u67d3\u8fdb\u7a0b\u7ed9\u4e3b\u8fdb\u7a0b\u53d1\u9001\u5f02\u6b65\u6d88\u606f \u95f4\u63a5\u5b9e\u73b0\u6e32\u67d3\u8fdb\u7a0b\u6267\u884c\u4e3b\u8fdb\u7a0b\u91cc\u9762\u7684\u65b9\u6cd5 1. \u5f15\u5165ipcRender <!-- src / index . html --> < button id = \"send\" > \u5728 \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u6267\u884c\u4e3b\u8fdb\u7a0b\u91cc\u7684\u65b9\u6cd5 \uff08 \u5f02\u6b65 \uff09 < /button> < script src = \"render/ipcRender.js\" >< /script> 2. \u5f15\u5165ipcMain // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/ipcMain.js' ) }; 3. \u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f // src/render/ipcRender.js //\u6e32\u67d3\u8fdb\u7a0b let send = document . querySelector ( '#send' ); const { ipcRenderer } = require ( 'electron' ); send . onclick = function () { // \u4f20\u9012\u6d88\u606f\u7ed9\u4e3b\u8fdb\u7a0b // \u5f02\u6b65 ipcRenderer . send ( 'sendMsg' , { name : 'poetries' , age : 23 }) } 2. \u4e3b\u8fdb\u7a0b\u63a5\u6536\u6d88\u606f // src/main/ipcMain.js //\u4e3b\u8fdb\u7a0b const { ipcMain } = require ( 'electron' ) // \u4e3b\u8fdb\u7a0b\u5904\u7406\u6e32\u67d3\u8fdb\u7a0b\u5e7f\u64ad\u6570\u636e ipcMain . on ( 'sendMsg' , ( event , data )=> { console . log ( 'data\\n ' , data ) console . log ( 'event\\n ' , event ) }) 1.2 \u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f\uff0c\u4e3b\u8fdb\u7a0b\u63a5\u6536\u6d88\u606f\u5e76\u53cd\u9988 \u6e32\u67d3\u8fdb\u7a0b\u7ed9\u4e3b\u8fdb\u7a0b\u53d1\u9001\u5f02\u6b65\u6d88\u606f\uff0c\u4e3b\u8fdb\u7a0b\u63a5\u6536\u5230\u5f02\u6b65\u6d88\u606f\u4ee5\u540e\u901a\u77e5\u6e32\u67d3\u8fdb\u7a0b 1. \u5f15\u5165ipcRender <!-- src / index . html --> < button id = \"sendFeedback\" > \u5728 \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u6267\u884c\u4e3b\u8fdb\u7a0b\u91cc\u7684\u65b9\u6cd5 \uff0c \u5e76\u53cd\u9988\u7ed9\u4e3b\u8fdb\u7a0b \uff08 \u5f02\u6b65 \uff09 < /button> < script src = \"render/ipcRender.js\" >< /script> 2. \u5f15\u5165ipcMain // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/ipcMain.js' ) }; 3. \u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f // src/render/ipcRender.js //\u6e32\u67d3\u8fdb\u7a0b let sendFeedback = document . querySelector ( '#sendFeedback' ); const { ipcRenderer } = require ( 'electron' ); // \u5411\u4e3b\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f sendFeedback . onclick = function () { // \u89e6\u53d1\u4e3b\u8fdb\u7a0b\u91cc\u9762\u7684\u65b9\u6cd5 ipcRenderer . send ( 'sendFeedback' , { name : 'poetries' , age : 23 }) } 4. \u4e3b\u8fdb\u7a0b\u6536\u5230\u6d88\u606f\u5904\u7406\u5e76\u5e7f\u64ad\u53cd\u9988\u901a\u77e5\u6e32\u67d3\u8fdb\u7a0b // src/main/ipcMain.js //\u4e3b\u8fdb\u7a0b const { ipcMain } = require ( 'electron' ) // \u4e3b\u8fdb\u7a0b\u5904\u7406\u6e32\u67d3\u8fdb\u7a0b\u5e7f\u64ad\u6570\u636e\uff0c\u5e76\u53cd\u9988\u7ed9\u6e32\u67d3\u8fdb\u7a0b ipcMain . on ( 'sendFeedback' , ( event , data )=> { // console.log('data\\n ', data) // console.log('event\\n ', event) $ // \u4e3b\u8fdb\u7a0b\u7ed9\u6e32\u67d3\u8fdb\u7a0b\u5e7f\u64ad\u6570\u636e event . sender . send ( 'sendFeedbackToRender' , '\u6765\u81ea\u4e3b\u8fdb\u7a0b\u7684\u53cd\u9988' ) }) 5. \u6e32\u67d3\u8fdb\u7a0b\u5904\u7406\u4e3b\u8fdb\u7a0b\u5e7f\u64ad\u7684\u6570\u636e // src/render/ipcRender.js // \u5411\u4e3b\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f\u540e\uff0c\u63a5\u6536\u4e3b\u8fdb\u7a0b\u5e7f\u64ad\u7684\u4e8b\u4ef6 ipcRenderer . on ( 'sendFeedbackToRender' , ( e , data )=>{ console . log ( 'event\\n ' , e ) console . log ( 'data\\n ' , data ) }) 1.3 \u6e32\u67d3\u8fdb\u7a0b\u7ed9\u4e3b\u8fdb\u7a0b\u53d1\u9001\u540c\u6b65\u6d88\u606f 1. \u5f15\u5165ipcRender <!-- src / index . html --> < button id = \"sendSync\" > \u6e32\u67d3\u8fdb\u7a0b\u548c\u4e3b\u8fdb\u7a0b\u540c\u6b65\u901a\u4fe1 < /button> < script src = \"render/ipcRender.js\" >< /script> 2. \u5f15\u5165ipcMain // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/ipcMain.js' ) }; 3. \u6e32\u67d3\u8fdb\u7a0b\u7ed9\u4e3b\u8fdb\u7a0b\u540c\u6b65\u901a\u4fe1 // src/render/ipcMain.js let sendSync = document . querySelector ( '#sendSync' ); // \u6e32\u67d3\u8fdb\u7a0b\u548c\u4e3b\u8fdb\u7a0b\u540c\u6b65\u901a\u4fe1 sendSync . onclick = function () { // \u540c\u6b65\u5e7f\u64ad\u6570\u636e let msg = ipcRenderer . sendSync ( 'sendsync' , { name : 'poetries' , age : 23 }) $ // \u540c\u6b65\u8fd4\u56de\u4e3b\u8fdb\u7a0b\u53cd\u9988\u7684\u6570\u636e console . log ( 'msg\\n ' , msg ) } 4. \u4e3b\u8fdb\u7a0b\u63a5\u6536\u6570\u636e\u5904\u7406 // src/main/ipcMain.js // \u6e32\u67d3\u8fdb\u7a0b\u548c\u4e3b\u8fdb\u7a0b\u540c\u6b65\u901a\u4fe1 \u63a5\u6536\u540c\u6b65\u5e7f\u64ad ipcMain . on ( 'sendsync' , ( event , data )=> { // console.log('data\\n ', data) // console.log('event\\n ', event) // \u4e3b\u8fdb\u7a0b\u7ed9\u6e32\u67d3\u8fdb\u7a0b\u5e7f\u64ad\u6570\u636e event . returnValue = '\u6e32\u67d3\u8fdb\u7a0b\u548c\u4e3b\u8fdb\u7a0b\u540c\u6b65\u901a\u4fe1 \u63a5\u6536\u540c\u6b65\u5e7f\u64ad\uff0c\u6765\u81ea\u4e3b\u8fdb\u7a0b\u7684\u53cd\u9988.' ; }) 1.4 \u6e32\u67d3\u8fdb\u7a0b\u5e7f\u64ad\u901a\u77e5\u4e3b\u8fdb\u7a0b\u6253\u5f00\u7a97\u53e3 \u4e00\u822c\u90fd\u662f\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u6267\u884c\u5e7f\u64ad\u64cd\u4f5c\uff0c\u53bb\u901a\u77e5\u4e3b\u8fdb\u7a0b\u5b8c\u6210\u4efb\u52a1 1. \u5f15\u5165openWindow <!-- src / index . html --> < button id = \"sendSync\" > \u6e32\u67d3\u8fdb\u7a0b\u548c\u4e3b\u8fdb\u7a0b\u540c\u6b65\u901a\u4fe1 < /button> < script src = \"render/openWindow.js\" >< /script> 2. \u5f15\u5165ipcMain2 // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/ipcMain2.js' ) }; 3. \u6e32\u67d3\u8fdb\u7a0b\u901a\u77e5\u4e3b\u8fdb\u7a0b\u6253\u5f00\u7a97\u53e3 // src/render/openWindow.js /* eslint-disable */ let openWindow = document . querySelector ( '#openWindow' ); var { ipcRenderer } = require ( 'electron' ); // \u6e32\u67d3\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u76f4\u63a5\u7684\u901a\u4fe1======== openWindow . onclick = function () { // \u901a\u8fc7\u5e7f\u64ad\u7684\u5f62\u5f0f \u901a\u77e5\u4e3b\u8fdb\u7a0b\u6267\u884c\u64cd\u4f5c ipcRenderer . send ( 'openwindow' , { name : 'poetries' , age : 23 }) } 4. \u4e3b\u8fdb\u7a0b\u6536\u5230\u901a\u77e5\u6267\u884c\u64cd\u4f5c // src/main/ipcMain2.js /* eslint-disable */ let { ipcMain , BrowserWindow } = require ( 'electron' ) const path = require ( 'path' ) let win ; // \u63a5\u6536\u5230\u5e7f\u64ad ipcMain . on ( 'openwindow' , ( e , data )=> { // \u8c03\u7528window\u6253\u5f00\u65b0\u7a97\u53e3 win = new BrowserWindow ({ width : 400 , height : 300 , }); win . loadURL ( path . join ( 'file:' , __dirname , '../news.html' )); win . webContents . openDevTools () win . on ( 'closed' , () => { win = null ; }); }) 2 \u6e32\u67d3\u8fdb\u7a0b\u4e0e\u6e32\u67d3\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1 \u00b6 \u4e5f\u5c31\u662f\u4e24\u4e2a\u7a97\u53e3\u76f4\u63a5\u7684\u901a\u4fe1 2.1 localstorage\u4f20\u503c Electron \u6e32\u67d3\u8fdb\u7a0b\u901a\u8fc7 localstorage \u7ed9\u53e6\u4e00\u4e2a\u6e32\u67d3\u8fdb\u7a0b\u4f20\u503c 1. \u5f15\u5165openWindow <!-- src / index . html --> < button id = \"sendSync\" > \u6e32\u67d3\u8fdb\u7a0b\u548c\u4e3b\u8fdb\u7a0b\u540c\u6b65\u901a\u4fe1 < /button> < script src = \"render/openWindow.js\" >< /script> 2. \u5f15\u5165ipcMain2 // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/ipcMain2.js' ) }; 3. \u6e32\u67d3\u8fdb\u7a0b\u901a\u77e5\u4e3b\u8fdb\u7a0b\u6253\u5f00\u7a97\u53e3 // src/render/openWindow.js /* eslint-disable */ let openWindow = document . querySelector ( '#openWindow' ); var { ipcRenderer } = require ( 'electron' ); // \u6e32\u67d3\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u76f4\u63a5\u7684\u901a\u4fe1======== openWindow . onclick = function () { // \u901a\u8fc7\u5e7f\u64ad\u7684\u5f62\u5f0f \u901a\u77e5\u4e3b\u8fdb\u7a0b\u6267\u884c\u64cd\u4f5c ipcRenderer . send ( 'openwindow' , { name : 'poetries' , age : 23 }) $ // ======= localstorage\u4f20\u503c ===== localStorage . setItem ( 'username' , 'poetries' ) } 4. \u65b0\u5efanews\u9875\u9762 <!-- src / news . html --> <! DOCTYPE html > < html > < head > < meta charset = \"utf-8\" > < title >< /title> < /head> < body > news page < /body> < script src = \"render/news.js\" >< /script> < /html> // src/render/news.js let username = localStorage . getItem ( 'username' ) console . log ( username ) 5. \u4e3b\u8fdb\u7a0b\u6536\u5230\u901a\u77e5\u6267\u884c\u64cd\u4f5c // src/main/ipcMain2.js /* eslint-disable */ let { ipcMain , BrowserWindow } = require ( 'electron' ) const path = require ( 'path' ) let win ; // \u63a5\u6536\u5230\u5e7f\u64ad ipcMain . on ( 'openwindow' , ( e , data )=> { // \u8c03\u7528window\u6253\u5f00\u65b0\u7a97\u53e3 win = new BrowserWindow ({ width : 400 , height : 300 , }); win . loadURL ( path . join ( 'file:' , __dirname , '../news.html' )); win . webContents . openDevTools () win . on ( 'closed' , () => { win = null ; }); }) 2.2 BrowserWindow\u548cwebContents\u65b9\u5f0f\u5b9e\u73b0 \u901a\u8fc7 BrowserWindow \u548c webContents \u6a21\u5757\u5b9e\u73b0\u6e32\u67d3\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u7684\u901a\u4fe1 webContents \u662f\u4e00\u4e2a\u4e8b\u4ef6\u53d1\u51fa\u8005.\u5b83\u8d1f\u8d23\u6e32\u67d3\u5e76\u63a7\u5236\u7f51\u9875\uff0c\u4e5f\u662f BrowserWindow \u5bf9\u8c61\u7684\u5c5e\u6027 \u9700\u8981\u4e86\u89e3\u7684\u51e0\u4e2a\u77e5\u8bc6\u70b9 \u83b7\u53d6\u5f53\u524d\u7a97\u53e3\u7684 id const winId = BrowserWindow . getFocusedWindow (). id ; \u76d1\u542c\u5f53\u524d\u7a97\u53e3\u52a0\u8f7d\u5b8c\u6210\u7684\u4e8b\u4ef6 win . webContents . on ( 'did-finish-load' ,( event ) => { $ }) \u540c\u4e00\u7a97\u53e3\u4e4b\u95f4\u5e7f\u64ad\u6570\u636e win . webContents . on ( 'did-finish-load' ,( event ) => { win . webContents . send ( 'msg' , winId , '\u6211\u662f index.html \u7684\u6570\u636e' ); }) \u901a\u8fc7 id \u67e5\u627e\u7a97\u53e3 let win = BrowserWindow . fromId ( winId ); \u4e0b\u9762\u662f\u5177\u4f53\u6f14\u793a 1. \u5f15\u5165openWindow <!-- src / index . html --> < button id = \"sendSync\" > \u6e32\u67d3\u8fdb\u7a0b\u548c\u4e3b\u8fdb\u7a0b\u540c\u6b65\u901a\u4fe1 < /button> < script src = \"render/openWindow.js\" >< /script> 2. \u5f15\u5165ipcMain2 // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/ipcMain2.js' ) }; 3. \u6e32\u67d3\u8fdb\u7a0b\u901a\u77e5\u4e3b\u8fdb\u7a0b\u6253\u5f00\u7a97\u53e3 // src/render/openWindow.js /* eslint-disable */ let openWindow = document . querySelector ( '#openWindow' ); var { ipcRenderer } = require ( 'electron' ); // \u6e32\u67d3\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u76f4\u63a5\u7684\u901a\u4fe1======== openWindow . onclick = function () { // \u901a\u8fc7\u5e7f\u64ad\u7684\u5f62\u5f0f \u901a\u77e5\u4e3b\u8fdb\u7a0b\u6267\u884c\u64cd\u4f5c ipcRenderer . send ( 'openwindow' , { name : 'poetries' , age : 23 }) } 4. \u4e3b\u8fdb\u7a0b\u6536\u5230\u901a\u77e5\u6267\u884c\u64cd\u4f5c // src/main/ipcMain2.js let { ipcMain , BrowserWindow } = require ( 'electron' ) const path = require ( 'path' ) let win ; // \u63a5\u6536\u5230\u5e7f\u64ad ipcMain . on ( 'openwindow' , ( e , userInfo )=> { // \u8c03\u7528window\u6253\u5f00\u65b0\u7a97\u53e3 win = new BrowserWindow ({ width : 400 , height : 300 , }); win . loadURL ( path . join ( 'file:' , __dirname , '../news.html' )); // \u65b0\u5f00\u7a97\u53e3\u8c03\u8bd5\u6a21\u5f0f win . webContents . openDevTools () // \u628a\u6e32\u67d3\u8fdb\u7a0b\u4f20\u9012\u8fc7\u6765\u7684\u6570\u636e\u518d\u6b21\u4f20\u9012\u7ed9\u6e32\u67d3\u8fdb\u7a0bnews // \u7b49\u5f85\u7a97\u53e3\u52a0\u8f7d\u5b8c win . webContents . on ( 'did-finish-load' , ()=>[ win . webContents . send ( 'toNews' , userInfo ) ]) $ win . on ( 'closed' , () => { win = null ; }); }) 5. news\u63a5\u6536\u4e3b\u8fdb\u7a0b\u4f20\u9012\u7684\u6570\u636e \u6570\u636e\u7ecf\u8fc7\u6e32\u67d3\u8fdb\u7a0b->\u4e3b\u8fdb\u7a0b-> news \u6e32\u67d3\u8fdb\u7a0b <!-- news\u9875\u9762 --> <! DOCTYPE html > < html > < head > < meta charset = \"utf-8\" > < title >< /title> < /head> < body > news page < /body> < script src = \"render/news.js\" >< /script> < /html> // src/render/news.js var { ipcRenderer } = require ( 'electron' ); // let username = localStorage.getItem('username') // console.log(username) // \u76d1\u542c\u4e3b\u8fdb\u7a0b\u4f20\u9012\u8fc7\u6765\u7684\u6570\u636e$ ipcRenderer . on ( 'toNews' ,( e , userInfo )=>{ console . log ( userInfo ) }) \u90a3\u4e48\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u95ee\u9898\uff0c news \u8fdb\u7a0b\u63a5\u6536\u5230\u4e86\u5e7f\u64ad\u540e\u5982\u4f55\u7ed9\u51fa\u53cd\u9988\u5462\uff1f 1. \u5728\u4e3b\u8fdb\u7a0b\u4e2d\u83b7\u53d6\u7a97\u53e3ID\u4f20\u9012 // src/main/ipcMain2.js let { ipcMain , BrowserWindow } = require ( 'electron' ) const path = require ( 'path' ) let win ; // \u63a5\u6536\u5230\u5e7f\u64ad ipcMain . on ( 'openwindow' , ( e , userInfo )=> { // \u83b7\u53d6\u5f53\u524d\u7a97\u53e3ID \u653e\u5728\u7b2c\u4e00\u884c\u4fdd\u9669 \u56e0\u4e3a\u540e\u9762\u4e5f\u6253\u5f00\u4e86\u65b0\u7a97\u53e3\u4f7f\u5f97\u83b7\u53d6\u7684ID\u6709\u95ee\u9898 let winId = BrowserWindow . getFocusedWindow (). id // \u8c03\u7528window\u6253\u5f00\u65b0\u7a97\u53e3 win = new BrowserWindow ({ width : 400 , height : 300 , }); win . loadURL ( path . join ( 'file:' , __dirname , '../news.html' )); // \u65b0\u5f00\u7a97\u53e3\u8c03\u8bd5\u6a21\u5f0f win . webContents . openDevTools () $ // \u628a\u6e32\u67d3\u8fdb\u7a0b\u4f20\u9012\u8fc7\u6765\u7684\u6570\u636e\u518d\u6b21\u4f20\u9012\u7ed9\u6e32\u67d3\u8fdb\u7a0bnews // \u7b49\u5f85\u7a97\u53e3\u52a0\u8f7d\u5b8c win . webContents . on ( 'did-finish-load' , ()=>[ win . webContents . send ( 'toNews' , userInfo , winId ) ]) $ win . on ( 'closed' , () => { win = null ; }); }) 2. \u5728news\u8fdb\u7a0b\u4e2d\u5e7f\u64ad\u6570\u636e // src/render/news.js var { ipcRenderer } = require ( 'electron' ); // \u6ce8\u610f\u8fd9\u91cc \u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u9700\u8981\u4eceremote\u4e2d\u83b7\u53d6BrowserWindow const BrowerWindow = require ( 'electron' ). remote . BrowserWindow ; // let username = localStorage.getItem('username') // console.log(username) // \u76d1\u542c\u4e3b\u8fdb\u7a0b\u4f20\u9012\u8fc7\u6765\u7684\u6570\u636e$ ipcRenderer . on ( 'toNews' ,( e , userInfo , winId )=>{ // windID \u7b2c\u4e00\u4e2a\u7a97\u53e3ID // \u83b7\u53d6\u5bf9\u5e94ID\u7684\u7a97\u53e3 let firstWin = BrowerWindow . fromId ( winId ) firstWin . webContents . send ( 'toIndex' , '\u6765\u81eanews\u8fdb\u7a0b\u53cd\u9988\u7684\u4fe1\u606f' ) console . log ( userInfo ) }) 3. \u5728\u53e6\u4e00\u4e2a\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u5904\u7406\u5e7f\u64ad /* eslint-disable */ let openWindow = document . querySelector ( '#openWindow' ); var { ipcRenderer } = require ( 'electron' ); // \u6e32\u67d3\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u76f4\u63a5\u7684\u901a\u4fe1======== openWindow . onclick = function () { // \u4f20\u9012\u6d88\u606f\u7ed9\u4e3b\u8fdb\u7a0b ipcRenderer . send ( 'openwindow' , { name : 'poetries' , age : 23 }) // \u4f20\u9012\u7ed9\u6253\u5f00\u7684\u7a97\u53e3 \u6e32\u67d3\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u76f4\u63a5\u7684\u901a\u4fe1 localStorage . setItem ( 'username' , 'poetries' ) $ } // \u63a5\u6536news\u6e32\u67d3\u8fdb\u7a0b\u4f20\u9012\u56de\u6765\u7684\u6d88\u606f ipcRenderer . on ( 'toIndex' , ( e , data )=>{ console . log ( '===' , data ) }) \u4e03\u3001Electron Shell \u6a21\u5757 \u00b6 1 Shell \u6a21\u5757\u4f7f\u7528 \u00b6 \u6587\u6863 https://electronjs.org/docs/api/shell Electron Shell \u6a21\u5757\u5728\u7528\u6237\u9ed8\u8ba4\u6d4f\u89c8\u5668 \u4e2d\u6253\u5f00 URL \u4ee5\u53ca Electron DOM webview \u6807\u7b7e\u3002 Shell \u65e2\u5c5e\u4e8e\u4e3b\u8fdb\u7a0b\u6a21\u5757\u53c8\u662f\u6e32\u67d3\u8fdb\u7a0b\u6a21\u5757 shell \u6a21\u5757\u63d0\u4f9b\u4e86\u96c6\u6210\u5176\u4ed6\u684c\u9762\u5ba2\u6237\u7aef\u7684\u5173\u8054\u529f\u80fd 1. \u5f15\u5165 <!-- index . html --> < button id = \"shellDom\" > \u901a\u8fc7shell\u6253\u5f00\u5916\u90e8\u94fe\u63a5 < /button> < script src = \"render/shell.js\" >< /script> 2. shell.js // src/render/shell.js const { shell } = require ( 'electron' ) let shellDom = document . querySelector ( '#shellDom' ); shellDom . onclick = function ( e ) { shell . openExternal ( 'https://github.com/poetries' ) } 2 Electron DOM `` \u6807\u7b7e \u00b6 Webview \u4e0e iframe \u6709\u70b9\u76f8\u4f3c\uff0c\u4f46\u662f\u4e0e iframe \u4e0d\u540c, webview \u548c\u4f60\u7684\u5e94\u7528\u8fd0\u884c\u7684\u662f\u4e0d\u540c\u7684\u8fdb\u7a0b\u3002\u5b83\u4e0d\u62e5\u6709\u6e32\u67d3\u8fdb\u7a0b\u7684\u6743\u9650\uff0c\u5e76\u4e14\u5e94\u7528\u548c\u5d4c\u5165\u5185\u5bb9\u4e4b\u95f4\u7684\u4ea4\u4e92\u5168\u90e8\u90fd\u662f\u5f02\u6b65\u7684\u3002\u56e0\u4e3a\u8fd9\u80fd \u4fdd\u8bc1\u5e94\u7528\u7684\u5b89\u5168\u6027\u4e0d\u53d7\u5d4c\u5165\u5185\u5bb9\u7684\u5f71\u54cd\u3002 <!-- src / index . html\u4e2d\u5f15\u5165 --> < webview id = \"webview\" src = \"http://blog.poetries.top\" style = \"position:fixed; width:100%; height:100%\" > < /webview> 3 shell \u6a21\u5757 `\u7ed3\u5408 Menu`\u6a21\u5757\u4f7f\u7528\u6848\u4f8b \u00b6 1. \u65b0\u5efasrc/render/webview.js /* eslint-disable */ var { ipcRenderer } = require ( 'electron' ); let myWebview = document . querySelector ( '#myWebview' ) ipcRenderer . on ( 'openwebview' , ( e , url )=>{ myWebview . src = url }) 2. \u5f15\u5165src/index.html < webview id = \"myWebview\" src = \"http://blog.poetries.top\" style = \"position:fixed; width:100%; height:100%\" > < /webview> $ < script src = \"render/webview.js\" >< /script> 3. \u65b0\u5efasrc/main/menu.js /* eslint-disable */ const { shell , Menu , BrowserWindow } = require ( 'electron' ); // \u5f53\u524d\u7a97\u53e3\u6e32\u67d3\u7f51\u9875 function openWebView ( url ) { // \u83b7\u53d6\u5f53\u524d\u7a97\u53e3Id let win = BrowserWindow . getFocusedWindow () // \u5e7f\u64ad\u901a\u77e5\u6e32\u67d3\u8fdb\u7a0b\u6253\u5f00webview win . webContents . send ( 'openwebview' , url ) } // \u5728\u7a97\u53e3\u5916\u6253\u5f00\u7f51\u9875 function openWeb ( url ) { shell . openExternal ( url ) } let template = [ { label : '\u5e2e\u52a9' , submenu : [ { label : '\u5173\u4e8e\u6211\u4eec' , click : function () { openWeb ( 'http://blog.poetries.top' ) } }, { type : 'separator' }, { label : '\u8054\u7cfb\u6211\u4eec' , click : function () { openWeb ( 'https://github.com/poetries' ) } } ] }, { label : '\u52a0\u8f7d\u7f51\u9875' , submenu : [ { label : '\u535a\u5ba2' , click : function () { openWebView ( 'http://blog.poetries.top' ) } }, { type : 'separator' // \u5206\u9694\u7b26 }, { label : 'GitHub' , click : function () { openWebView ( 'https://github.com/poetries' ) } }, { type : 'separator' // \u5206\u9694\u7b26 }, { label : '\u7b80\u4e66' , click : function () { openWebView ( 'https://www.jianshu.com/users/94077fcddfc0/timeline' ) } } ] }, { label : '\u89c6\u9891\u7f51\u7ad9' , submenu : [ { label : '\u4f18\u9177' , click : function () { openWebView ( 'https://www.youku.com' ) } }, { type : 'separator' // \u5206\u9694\u7b26 }, { label : '\u7231\u5947\u827a' , click : function () { openWebView ( 'https://www.iqiyi.com/' ) } }, { type : 'separator' // \u5206\u9694\u7b26 }, { label : '\u817e\u8baf\u89c6\u9891' , click : function () { openWebView ( 'https://v.qq.com/' ) } } ] } ] let m = Menu . buildFromTemplate ( template ) Menu . setApplicationMenu ( m ) 4. \u5f15\u5165menu // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/menu.js' ) }; \u516b\u3001Electron dialog \u5f39\u51fa\u6846 \u00b6 \u6587\u6863 https://electronjs.org/docs/api/dialog dialog \u5c5e\u4e8e\u4e3b\u8fdb\u7a0b\u4e2d\u7684\u6a21\u5757 dialog \u6a21\u5757\u63d0\u4f9b\u4e86 api \u6765\u5c55\u793a\u539f\u751f\u7684\u7cfb\u7edf\u5bf9\u8bdd\u6846\uff0c\u4f8b\u5982\u6253\u5f00\u6587\u4ef6\u6846\uff0c alert \u6846\uff0c \u6240\u4ee5 web \u5e94\u7528\u53ef\u4ee5\u7ed9\u7528\u6237\u5e26\u6765\u8ddf\u7cfb\u7edf\u5e94\u7528\u76f8\u540c\u7684\u4f53\u9a8c 1. \u5728src/index.html\u4e2d\u5f15\u5165 < button id = \"showError\" > showError < /button><br / > < button id = \"showMsg\" > showMsg < /button><br / > < button id = \"showOpenDialog\" > showOpenDialog < /button><br / > < button id = \"saveDialog\" > saveDialog < /button><br / > < script src = \"render/dialog.js\" >< /script> 2. \u65b0\u5efarender/dialog.js // render/dialog.js let showError = document . querySelector ( '#showError' ); let showMsg = document . querySelector ( '#showMsg' ); let showOpenDialog = document . querySelector ( '#showOpenDialog' ); let saveDialog = document . querySelector ( '#saveDialog' ); var { remote } = require ( 'electron' ) showError . onclick = function () { remote . dialog . showErrorBox ( '\u8b66\u544a' , '\u64cd\u4f5c\u6709\u8bef' ) } showMsg . onclick = function () { remote . dialog . showMessageBox ({ type : 'info' , title : '\u63d0\u793a\u4fe1\u606f' , message : '\u5185\u5bb9' , buttons : [ '\u786e\u5b9a' , '\u53d6\u6d88' ] }, function ( index ){ console . log ( index ) }) } showOpenDialog . onclick = function () { remote . dialog . showOpenDialog ({ // \u6253\u5f00\u6587\u4ef6\u5939 properties : [ 'openDirectory' , 'openFile' ] // \u6253\u5f00\u6587\u4ef6 // properties: ['openFile'] }, function ( data ) { console . log ( data ) }) } saveDialog . onclick = function () { remote . dialog . showSaveDialog ({ title : 'Save File' , defaultPath : '/Users/poetry/Downloads/' , // filters \u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u7c7b\u578b\u6570\u7ec4\uff0c\u7528\u4e8e\u89c4\u5b9a\u7528\u6237\u53ef\u89c1\u6216\u53ef\u9009\u7684\u7279\u5b9a\u7c7b\u578b\u8303\u56f4 filters : [ { name : 'Images' , extensions : [ 'jpg' , 'png' , 'gif' ] }, { name : 'Movies' , extensions : [ 'mkv' , 'avi' , 'mp4' ] }, { name : 'Custom File Type' , extensions : [ 'as' ] }, { name : 'All Files' , extensions : [ '*' ] } ] }, function ( path ) { // \u4e0d\u662f\u771f\u7684\u4fdd\u5b58 \uff0c\u5177\u4f53\u8fd8\u9700nodejs\u5904\u7406 console . log ( path ) }) } showError remote . dialog . showErrorBox ( '\u8b66\u544a' , '\u64cd\u4f5c\u6709\u8bef' ) showMessageBox remote . dialog . showMessageBox ({ type : 'info' , title : '\u63d0\u793a\u4fe1\u606f' , message : '\u5185\u5bb9' , buttons : [ '\u786e\u5b9a' , '\u53d6\u6d88' ] }, function ( index ){ console . log ( index ) }) showOpenDialog remote . dialog . showOpenDialog ({ // \u6253\u5f00\u6587\u4ef6\u5939 properties : [ 'openDirectory' , 'openFile' ] // \u6253\u5f00\u6587\u4ef6 // properties: ['openFile'] }, function ( data ) { console . log ( data ) }) showSaveDialog remote . dialog . showSaveDialog ({ title : 'Save File' , defaultPath : '/Users/poetry/Downloads/' , // filters \u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u7c7b\u578b\u6570\u7ec4\uff0c\u7528\u4e8e\u89c4\u5b9a\u7528\u6237\u53ef\u89c1\u6216\u53ef\u9009\u7684\u7279\u5b9a\u7c7b\u578b\u8303\u56f4 filters : [ { name : 'Images' , extensions : [ 'jpg' , 'png' , 'gif' ] }, { name : 'Movies' , extensions : [ 'mkv' , 'avi' , 'mp4' ] }, { name : 'Custom File Type' , extensions : [ 'as' ] }, { name : 'All Files' , extensions : [ '*' ] } ] }, function ( path ) { // \u4e0d\u662f\u771f\u7684\u4fdd\u5b58 \uff0c\u5177\u4f53\u8fd8\u9700nodejs\u5904\u7406 console . log ( path ) }) \u4e5d\u3001\u5b9e\u73b0\u4e00\u4e2a\u7b80\u6613\u8bb0\u4e8b\u672c\u4ee3\u7801\u7f16\u8f91\u5668 \u00b6 \u4ee3\u7801 https://github.com/poetries/electron-demo/tree/master/notepad \u5341\u3001\u7cfb\u7edf\u6258\u76d8\u3001\u6258\u76d8\u53f3\u952e\u83dc\u5355\u3001\u6258\u76d8\u56fe\u6807\u95ea\u70c1 \u00b6 \u6587\u6863 https://electronjs.org/docs/api/tray \u7cfb\u7edf\u6258\u76d8\uff0c\u6258\u76d8\u53f3\u952e\u83dc\u5355\u3001\u6258\u76d8\u56fe\u6807\u95ea\u70c1 \u70b9\u51fb\u53f3\u4e0a\u89d2\u5173\u95ed\u6309\u94ae\u9690\u85cf\u5230\u6258\u76d8(\u4eff\u6740\u6bd2\u8f6f\u4ef6) 1. \u5f15\u5165\u6587\u4ef6 // src/index.js const createWindow = () => { require ( './main/tray.js' ) }; 2. Electron \u521b\u5efa\u4efb\u52a1\u680f\u56fe\u6807\u4ee5\u53ca\u4efb\u52a1\u680f\u56fe\u6807\u53f3\u952e\u83dc\u5355 // src/main/tray.js var { Menu , Tray , app , BrowserWindow } = require ( 'electron' ); const path = require ( 'path' ); var appIcon = new Tray ( path . join ( __dirname , '../static/lover.png' )); const menu = Menu . buildFromTemplate ([ { label : '\u8bbe\u7f6e' , click : function () {} //\u6253\u5f00\u76f8\u5e94\u9875\u9762$ }, { label : '\u5e2e\u52a9' , click : function () {} }, { label : '\u5173\u4e8e' , click : function () {} }, { label : '\u9000\u51fa' , click : function () { $ // BrowserWindow.getFocusedWindow().webContents().send('close-main-window'); app . quit (); } }]) // \u9f20\u6807\u653e\u4e0a\u53bb\u63d0\u793a\u4fe1\u606f appIcon . setToolTip ( 'hello poetries' ); appIcon . setContextMenu ( menu ); 3. \u76d1\u542c\u4efb\u52a1\u680f\u56fe\u6807\u7684\u5355\u51fb\u3001\u53cc\u51fb\u4e8b\u4ef6 // \u5b9e\u73b0\u70b9\u51fb\u5173\u95ed\u6309\u94ae\uff0c\u8ba9\u5e94\u7528\u4fdd\u5b58\u5728\u6258\u76d8\u91cc\u9762\uff0c\u53cc\u51fb\u6258\u76d8\u6253\u5f00 let win = BrowserWindow . getFocusedWindow () win . on ( 'close' , ( e )=>{ e . preventDefault () win . hide () }) iconTray . on ( 'double-click' , ( e )=>{ win . show () }) 4. Electron \u70b9\u51fb\u53f3\u4e0a\u89d2\u5173\u95ed\u6309\u94ae\u9690\u85cf\u4efb\u52a1\u680f\u56fe\u6807 const win = BrowserWindow . getFocusedWindow (); win . on ( 'close' , ( e ) =>{ console . log ( win . isFocused ()); $ if ( ! win . isFocused ()) { win = null ; } else { e . preventDefault (); /*\u963b\u6b62\u5e94\u7528\u9000\u51fa*/ win . hide (); /*\u9690\u85cf\u5f53\u524d\u7a97\u53e3*/ } }) 5. Electron \u5b9e\u73b0\u4efb\u52a1\u680f\u95ea\u70c1\u56fe\u6807 var appIcon = new Tray ( path . join ( __dirname , '../static/lover.png' )); timer = setInterval ( function () { count ++ ; if ( count % 2 == 0 ) { appIcon . setImage ( path . join ( __dirname , '../static/empty.ico' )) } else { appIcon . setImage ( path . join ( __dirname , '../static/lover.png' )) } }, 500 ); \u5341\u4e00\u3001\u6d88\u606f\u901a\u77e5\u3001\u76d1\u542c\u7f51\u7edc\u53d8\u5316 \u00b6 1 \u6d88\u606f\u901a\u77e5 \u00b6 1. Electron \u5b9e\u73b0\u6d88\u606f\u901a\u77e5 Electron \u91cc\u9762\u7684\u6d88\u606f\u901a\u77e5\u662f\u57fa\u4e8e h5 \u7684\u901a\u77e5 api \u5b9e\u73b0\u7684 \u6587\u6863 https://developer.mozilla.org/zh-CN/docs/Web/API/notification 1. \u65b0\u5efanotification.js // h5api\u5b9e\u73b0\u901a\u77e5 const path = require ( 'path' ) let options = { title : 'electron \u901a\u77e5API' , body : 'hello poetries' , icon : path . join ( '../static/img/favicon2.ico' ) // \u901a\u77e5\u56fe\u6807 } document . querySelector ( '#showNotification' ). onclick = function () { let myNotification = new window . Notification ( options . title , options ) $ // \u6d88\u606f\u53ef\u70b9\u51fb myNotification . onclick = function () { console . log ( 'click notification' ) } } 2. \u5f15\u5165 <!-- src / index . html --> < button id = \"showNotification\" > \u5f39\u51fa\u6d88\u606f\u901a\u77e5 < /button> < script src = \"render/notification.js\" >< /script> mac \u4e0a\u7684\u6d88\u606f\u901a\u77e5 2 \u76d1\u542c\u7f51\u7edc\u53d8\u5316 \u00b6 1. \u57fa\u672c\u4f7f\u7528 // \u76d1\u542c\u7f51\u7edc\u53d8\u5316 // \u7aef\u5f00\u7f51\u7edc \u518d\u6b21\u8fde\u63a5\u6d4b\u8bd5 window . addEventListener ( 'online' , function (){ console . log ( 'online' ) }); $ $ window . addEventListener ( 'offline' , function (){ console . log ( 'offline' ) }); 2. \u76d1\u542c\u7f51\u7edc\u53d8\u5316\u5b9e\u73b0\u6d88\u606f\u901a\u77e5 // \u7aef\u5f00\u7f51\u7edc \u518d\u6b21\u8fde\u63a5\u6d4b\u8bd5 // \u76d1\u542c\u7f51\u7edc\u53d8\u5316\u5b9e\u73b0\u6d88\u606f\u901a\u77e5 window . addEventListener ( 'online' , function (){ console . log ( 'online' ) }); $ window . addEventListener ( 'offline' , function (){ // \u65ad\u5f00\u7f51\u7edc\u89e6\u53d1\u4e8b\u4ef6 var options = { title : 'QQ\u90ae\u7bb1' , body : '\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u68c0\u67e5\u4f60\u7684\u7f51\u7edc' , icon : path . join ( '../static/img/favicon2.ico' ) // \u901a\u77e5\u56fe\u6807 } var myNotification = new window . Notification ( options . title , options ) myNotification . onclick = function () { console . log ( 'click notification' ) } }); \u5341\u4e8c\u3001\u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e/\u526a\u5207\u677f\u4e8b\u4ef6/nativeImage \u6a21\u5757 \u00b6 Electron \u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e ( globalShortcut ) \u4ee5\u53ca clipboard \u526a \u5207\u677f\u4e8b\u4ef6\u4ee5\u53ca nativeImage \u6a21\u5757(\u5b9e\u73b0\u7c7b\u4f3c\u64ad\u653e\u5668\u70b9\u51fb\u673a\u5668\u7801\u81ea\u52a8\u590d\u5236\u529f \u80fd) 1 \u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e \u00b6 keyboard-shortcuts\u6587\u6863 app\u6a21\u5757\u53c2\u8003\u6587\u6863 1. \u65b0\u5efasrc/main/shortCut.js const { globalShortcut , app } = require ( 'electron' ) app . on ( 'ready' , ()=>{ // \u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e globalShortcut . register ( 'command+e' , ()=>{ console . log ( 1 ) }) // \u68c0\u6d4b\u5feb\u6377\u952e\u662f\u5426\u6ce8\u518c\u6210\u529f true\u662f\u6ce8\u518c\u6210\u529f let isRegister = globalShortcut . isRegistered ( 'command+e' ) console . log ( isRegister ) }) // \u9000\u51fa\u7684\u65f6\u5019\u53d6\u6d88\u5168\u5c40\u5feb\u6377\u952e app . on ( 'will-quit' , ()=>{ globalShortcut . unregister ( 'command+e' ) }) 2. \u5f15\u5165src/index.js // \u6ce8\u610f\u5728\u5916\u90e8\u5f15\u5165\u5373\u53ef \u4e0d\u7528\u653e\u5230app\u4e2d require ( './main/shortCut.js' ) 2 \u526a\u5207\u677fclipboard\u3001nativeImage \u6a21\u5757 \u00b6 \u526a\u5207\u677fclipboard\u6587\u6863 nativeImage\u6a21\u5757 1. html <!-- src / index . html --> < div > < h2 > \u53cc\u51fb\u4e0b\u9762\u4fe1\u606f\u590d\u5236 < /h2> < p id = 'msg' > 123456789 < /p> < button id = \"plat\" > \u7c98\u8d34 < /button><br / > < input id = \"text\" type = \"text\" /> < /div>. < div > < h2 > \u590d\u5236\u56fe\u7247\u5230\u754c\u9762 < /h2> < button id = \"copyImg\" > \u590d\u5236\u56fe\u7247 < /button><br / > < /div> < script src = \"render/clipboard.js\" >< /script> 2. \u65b0\u5efasrc/render/clipboard.js // clipboard\u53ef\u4ee5\u5728\u4e3b\u8fdb\u7a0b\u6216\u6e32\u67d3\u8fdb\u7a0b\u4f7f\u7528 const { clipboard , nativeImage } = require ( 'electron' ) //\u590d\u5236 // \u8fd0\u884cctrl+v\u53ef\u770b\u5230\u590d\u5236\u7684\u5185\u5bb9 // clipboard.writeText('poetries') // clipboard.readText() //\u83b7\u53d6\u590d\u5236\u7684\u5185\u5bb9 \u7c98\u8d34 // \u53cc\u51fb\u590d\u5236\u6d88\u606f let msg = document . querySelector ( '#msg' ) let plat = document . querySelector ( '#plat' ) let text = document . querySelector ( '#text' ) msg . ondblclick = function () { clipboard . writeText ( msg . innerHTML ) alert ( msg . innerHTML ) } plat . onclick = function () { text . value = clipboard . readText () } // \u590d\u5236\u56fe\u7247\u663e\u793a\u5230\u754c\u9762 let copyImg = document . querySelector ( '#copyImg' ) copyImg . onclick = function () { // \u7ed3\u5408nativeImage\u6a21\u5757 let image = nativeImage . createFromPath ( '../static/img/lover.png' ) $ // \u590d\u5236\u56fe\u7247 clipboard . writeImage ( image ) // \u7c98\u8d34\u56fe\u7247 let imgSrc = clipboard . readImage (). toDataURL () // base64\u56fe\u7247 // \u663e\u793a\u5230\u9875\u9762\u4e0a let imgDom = new Image () imgDom . src = imgSrc$ document . body . appendChild ( imgDom ) } \u5341\u4e09\u3001\u7ed3\u5408electron-vue \u00b6 1 electron-vue \u7684\u4f7f\u7528 \u00b6 1. electron-vue \u7684\u4e00\u4e9b\u8d44\u6e90 https://github.com/SimulatedGREG/electron-vue Electron-vue \u6587\u6863 https://simulatedgreg.gitbooks.io/electron-vue/content/cn 2. electron-vue \u73af\u5883\u642d\u5efa\u3001\u521b\u5efa\u9879\u76ee npm install - g vue - cli vue init simulatedgreg / electron - vue my - project cd my - project yarn # or npm install yarn run dev # or npm run dev 3. electron-vue \u76ee\u5f55\u7ed3\u6784\u5206\u6790 2 electron-vue \u4e2d\u4f7f\u7528 sass/ElementUi \u00b6 1. electron-vue UI \u6846\u67b6 ElementUi \u7684\u4f7f\u7528 http://element-cn.eleme.io/#/zh-CN 2. electron-vue \u4e2d\u4f7f\u7528 sass electron-vue \u4e2d\u4f7f\u7528 sass # \u5b89\u88c5 sass - loader : npm install -- save - dev sass - loader node - sass <!-- vue \u6587\u4ef6\u4e2d\u4fee\u6539 style \u4e3a\u5982\u4e0b\u4ee3\u7801 :--> < style lang = \"scss\" > $ body { /* SCSS */ $ } < /style> 3 electron-vue \u4e2d\u9690\u85cf\u9876\u90e8\u83dc\u5355\u9690\u85cf \u00b6 electron-vue \u4e2d\u9690\u85cf\u9876\u90e8\u83dc\u5355\u9690\u85cf\u9876\u90e8\u6700\u5927\u5316\u3001\u6700\u5c0f\u5316\u3001\u5173\u95ed\u6309\u94ae \u81ea\u5b9a\u6700\u5927\u5316\u3001\u6700\u5c0f\u5316 \u3001\u5173\u95ed\u6309\u94ae 1. electron-vue \u4e2d\u9690\u85cf\u9876\u90e8\u83dc\u5355 // src/main/index.js mainWindow . setMenu ( null ) 2. electron-vue \u4e2d\u9690\u85cf\u5173\u95ed \u6700\u5927\u5316 \u6700\u5c0f\u5316\u6309\u94ae // src/main/index.js mainWindow = new BrowserWindow ({ height : 620 , useContentSize : true , width : 1280 , frame : false /*\u53bb\u6389\u9876\u90e8\u5bfc\u822a \u53bb\u6389\u5173\u95ed\u6309\u94ae \u6700\u5927\u5316\u6700\u5c0f\u5316\u6309\u94ae*/ }) 3 .electron-vue \u81ea\u5b9a\u4e49\u5173\u95ed/\u6700\u5927\u5316\u6700\u5c0f\u5316\u6309\u94ae // \u6ce8\u610f\u5728mac\u4e0b\u4e0d\u9700\u8981\u76d1\u542c\u7a97\u53e3\u6700\u5927\u6700\u5c0f\u5316\u3001\u4ee5\u4e3a\u7cfb\u7edf\u9ed8\u8ba4\u652f\u6301\uff0c\u8fd9\u4e2a\u53ea\u662f\u9488\u5bf9windows\u5e73\u53f0 ipc . on ( 'window-min' , function () { mainWindow . minimize (); }) //\u767b\u5f55\u7a97\u53e3\u6700\u5927\u5316$ ipc . on ( 'window-max' , function (){ if ( mainWindow . isMaximized ()) { mainWindow . restore (); } else { mainWindow . maximize (); } }) $ ipc . on ( 'window-close' , function () { mainWindow . close (); }) 4. electron-vue \u81ea\u5b9a\u4e49\u5bfc\u822a\u53ef\u62d6\u62fd \u53ef\u62d6\u62fd\u7684 css : -webkit-app-region: drag; \u4e0d\u53ef\u62d6\u62fd\u7684 css : -webkit-app-region: no-drag; 4 \u4f7f\u7528electron-vue\u5f00\u53d1\u8206\u60c5\u76d1\u63a7\u7cfb\u7edf \u00b6 4.1 \u914d\u7f6e\u5f00\u53d1\u73af\u5883 1. \u9879\u76ee\u642d\u5efa npm install -g vue-cli vue init simulatedgreg/electron-vue my-project cd my-project yarn # or npm install yarn run dev # or npm run dev 2. \u5b89\u88c5\u4e00\u4e9b\u4f9d\u8d56 # \u5b89\u88c5 sass-loader: npm install --save-dev sass-loader node-sass # \u5b89\u88c5elementUI\u3001js-md5 npm i element-ui js-md5 -S \u5728 .electron-vue/webpack.renderer.config.js \u4e2d\u914d\u7f6e sass-loader \u5c31\u53ef\u4ee5\u7f16\u5199 `sass \u4e86 <! --vue \u6587\u4ef6\u4e2d\u4fee\u6539 style \u4e3a\u5982\u4e0b\u4ee3\u7801 : -- > < style lang = \"scss\" >$ body { /* SCSS */ $ } </ style > 4.2 \u4e3b\u8fdb\u7a0b\u914d\u7f6e 1. src/main/index.js function createWindow () { // \u53bb\u6389\u9876\u90e8\u83dc\u5355 mainWindow . setMenu ( null ) $ // \u83dc\u5355\u9879 require ( './model/menu.js' ); $ // \u7cfb\u7edf\u6258\u76d8\u76f8\u5173 require ( './model/tray.js' ); 2. src/main/menu.js \u83dc\u5355\u914d\u7f6e const { Menu , ipcMain , BrowserWindow } = require ( 'electron' ); //\u53f3\u952e\u83dc\u5355 const contextMenuTemplate = [ { label : '\u590d\u5236' , role : 'copy' }, { label : '\u9ecf\u8d34' , role : 'paste' }, $ { type : 'separator' }, //\u5206\u9694\u7ebf { label : '\u5176\u4ed6\u529f\u80fd' , $ click : () => { console . log ( 'click' ) } } ]; const contextMenu = Menu . buildFromTemplate ( contextMenuTemplate ); ipcMain . on ( 'contextmenu' , function (){ contextMenu . popup ( BrowserWindow . getFocusedWindow ()); }) 3. src/main/tray.js \u7cfb\u7edf\u6258\u76d8\u914d\u7f6e \u6258\u76d8\u70b9\u51fb\u76d1\u542c\u4e8b\u4ef6\u53ea\u6709\u5728 windows \u4e0b\u624d\u751f\u6548\uff0c mac \u7cfb\u7edf\u9ed8\u8ba4\u652f\u6301 ( function () { const path = require ( 'path' ); const { app , Menu , BrowserWindow , Tray , shell } = require ( 'electron' ); //\u521b\u5efa\u7cfb\u7edf\u6258\u76d8 const tray = new Tray ( path . resolve ( __static , 'favicon.png' )) //\u7ed9\u6258\u76d8\u589e\u52a0\u53f3\u952e\u83dc\u5355 const template = [ { label : '\u8bbe\u7f6e' , click : function () { shell . openExternal ( 'http://blog.poetries.top' ) } }, { label : '\u5e2e\u52a9' , click : function () { shell . openExternal ( 'http://blog.poetries.top/2019/01/06/electron-summary' ) } }, { label : '\u5173\u4e8e' , click : function () { shell . openExternal ( 'https://github.com/poetries/yuqing-monitor-electron' ) } }, { label : '\u9000\u51fa' , click : function () { // BrowserWindow.getFocusedWindow().webContents().send('close-main-window'); app . quit (); $ } } ]; const menu = Menu . buildFromTemplate ( template ); tray . setContextMenu ( menu ); tray . setToolTip ( '\u8206\u60c5\u76d1\u63a7\u7cfb\u7edf' ); //\u76d1\u542c\u5173\u95ed\u4e8b\u4ef6\u9690\u85cf\u5230\u7cfb\u7edf\u6258\u76d8 // \u8fd9\u91cc\u9700\u8981\u6ce8\u610f\uff1a\u5728window\u4e2d\u624d\u751f\u6548\uff0cmac\u4e0b\u7cfb\u7edf\u9ed8\u8ba4\u652f\u6301 // var win = BrowserWindow.getFocusedWindow(); // win.on('close',(e)=>{ // if(!win.isFocused()){ // win=null; // }else{ // e.preventDefault(); /*\u963b\u6b62\u5e94\u7528\u9000\u51fa*/ // win.hide(); /*\u9690\u85cf\u5f53\u524d\u7a97\u53e3*/ // } $ // }) // //\u76d1\u542c\u6258\u76d8\u7684\u53cc\u51fb\u4e8b\u4ef6 // tray.on('double-click',()=>{ $ // win.show(); // }) })() 4. src/main/shortCut.js \u5feb\u6377\u952e\u914d\u7f6e \u5728 src/main/index.js \u4e2d\u5f15\u5165\uff08 require('src/main/shortCut.js') \uff09\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u653e\u5230 app \u76d1\u63a7\u4e2d var { globalShortcut , app } = require ( 'electron' ) app . on ( 'ready' , ()=>{ // \u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e globalShortcut . register ( 'command+e' , ()=>{ console . log ( 1 ) }) // \u68c0\u6d4b\u5feb\u6377\u952e\u662f\u5426\u6ce8\u518c\u6210\u529f true\u662f\u6ce8\u518c\u6210\u529f let isRegister = globalShortcut . isRegistered ( 'command+e' ) console . log ( isRegister ) }) // \u9000\u51fa\u7684\u65f6\u5019\u53d6\u6d88\u5168\u5c40\u5feb\u6377\u952e app . on ( 'will-quit' , ()=>{ globalShortcut . unregister ( 'command+e' ) }) 4.3 \u6e32\u67d3\u8fdb\u7a0b\u914d\u7f6e 1. src/render/main.js\u914d\u7f6e import Vue from 'vue' import axios from 'axios' import App from './App' import router from './router' import store from './store' import ElementUI from 'element-ui' ; import 'element-ui/lib/theme-chalk/index.css' ; import VueHighcharts from 'vue-highcharts' ; import VueSocketIO from 'vue-socket.io' Vue . use ( ElementUI ); Vue . use ( VueHighcharts ); //\u5f15\u5165socket.io\u914d\u7f6e\u8fde\u63a5 Vue . use ( new VueSocketIO ({ debug : true , connection : 'http://118.123.14.36:3000' , vuex : { store , actionPrefix : 'SOCKET_' , mutationPrefix : 'SOCKET_' } })) if ( ! process . env . IS_WEB ) Vue . use ( require ( 'vue-electron' )) Vue . http = Vue . prototype . $http = axios Vue . config . productionTip = false /* eslint-disable no-new */ new Vue ({ components : { App }, router , store , template : '<App/>' }). $mount ( '#app' ) 2. \u8def\u7531\u914d\u7f6esrc/renderer/router/index.js import Vue from 'vue' import Router from 'vue-router' Vue . use ( Router ) export default new Router ({ routes : [ { path : '/home' , name : 'home' , component : require ( '@/components/Home' ). default }, { path : '/report' , name : 'report' , component : require ( '@/components/Report' ). default }, { path : '/negativereport' , name : 'negativereport' , component : require ( '@/components/NegativeReport' ). default }, { path : '/positivereport' , name : 'positivereport' , component : require ( '@/components/PositiveReport' ). default }, { path : '/keyword' , name : 'keyword' , component : require ( '@/components/KeyWord' ). default }, { path : '/alarm' , name : 'alarm' , component : require ( '@/components/Alarm' ). default }, { path : '/msg' , name : 'msg' , component : require ( '@/components/Msg' ). default }, { path : '*' , redirect : '/home' } ] }) \u5176\u4ed6\u9875\u9762\u66f4\u591a\u8be6\u60c5Github 3. \u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u4e3b\u8fdb\u7a0b\u65b9\u5f0f // electron\u6302\u8f7d\u5230\u4e86vue\u5b9e\u4f8b\u4e0a $electron this . $electron . shell 4.4 \u591a\u5e73\u53f0\u6253\u5305 \u9700\u8981\u6ce8\u610f\u7684\u662f\u6253\u5305 mac \u7248\u672c\u5728 mac \u7cfb\u7edf\u4e0a\u6253\u5305\uff0c\u6253\u5305 window \u5219\u5728 windows \u4e0a\u6253\u5305\uff0c\u53ef\u4ee5\u907f\u514d\u5f88\u591a\u95ee\u9898 # \u5728\u4e0d\u540c\u5e73\u53f0\u4e0a\u6267\u884c\u5373\u53ef\u6253\u5305\u5e94\u7528 npm run build 4.4.1 \u6253\u5305\u4ecb\u7ecd electron-vue\u6253\u5305\u6587\u6863 1. electron \u4e2d\u6784\u5efa\u5e94\u7528\u6700\u5e38\u7528\u7684\u6a21\u5757 electron-packager electron-builder electron-packager \u548c electron-builder \u5728\u81ea\u5df1\u5355\u72ec\u521b\u5efa\u7684\u5e94\u7528\u7528\u4e5f\u53ef\u4ee5\u5b8c\u6210\u6253\u5305\u529f \u80fd\u3002\u4f46\u662f\u7531\u4e8e\u914d\u7f6e\u592a\u590d\u6742\u6240\u4ee5\u6211\u4eec\u4e0d\u5efa\u8bae\u5355\u72ec\u914d\u7f6e 2. electron-forge https://github.com/electron-userland/electron-forge electron-forge package$ electron-forge make 3. electron-vue\u4e2d\u7684\u6253\u5305\u65b9\u5f0f # https://simulatedgreg.gitbooks.io/electron-vue/content/cn/using-electron-packager. html # \u4e4b\u9700\u8981\u6267\u884c\u4e00\u6761\u547d\u4ee4 npm run build 4.4.2 \u4fee\u6539\u5e94\u7528\u4fe1\u606f 1. \u4fee\u6539package.json 2. \u4fee\u6539src/index.ejs\u6807\u9898\u4fe1\u606f 3. \u4fee\u6539build/icons\u56fe\u6807 4.4.3 \u6253\u5305\u9047\u5230\u7684\u95ee\u9898 1. \u521b\u5efa\u5e94\u7528\u6258\u76d8\u7684\u65f6\u5019\u53ef\u80fd\u4f1a\u9047\u5230\u9519\u8bef \u628a\u6258\u76d8\u56fe\u7247\u653e\u5728\u6839\u76ee\u5f55 static \u91cc\u9762\uff0c\u7136\u540e\u6ce8\u610f\u4e0b\u9762\u5199\u6cd5\u3002 var tray = new Tray ( path . join ( __static , 'favicon.ico' )) \u5982\u679c\u6258\u76d8\u8def\u5f84\u6ca1\u6709\u95ee\u9898\uff0c\u8fd8\u662f\u5305\u6258\u76d8\u76f8\u5173\u9519\u8bef\u7684\u8bdd\uff0c\u628a\u6258\u76d8\u5bf9\u5e94\u7684\u56fe\u7247\u6362\u6210 .png \u683c\u5f0f\u91cd\u8bd5 2. \u6a21\u5757\u95ee\u9898\u53ef\u80fd\u4f1a\u9047\u5230\u7684\u9519\u8bef \u89e3\u51b3\u529e\u6cd5 \u5220\u6389 node_modules \u7136\u540e\u91cd\u65b0\u7528 npm install \u5b89\u88c5\u4f9d\u8d56 \u7528 yarn \u6765\u5b89\u88c5\u6a21\u5757 \u7528\u624b\u673a\u521b\u5efa\u4e00\u4e2a\u70ed\u70b9\u7535\u8111\u8fde\u4e0a\u70ed\u70b9\u91cd\u8bd5 \u6700\u540e\u6267\u884c yarn run build \u5373\u53ef \u9879\u76ee\u6e90\u7801 https://github.com/poetries/yuqing-monitor-electron \u5341\u56db\u3001\u66f4\u591a\u53c2\u8003 \u00b6 electron\u5b98\u65b9\u6587\u6863 Electron\u6784\u5efa\u8de8\u5e73\u53f0\u5e94\u7528mac/windows/linux electron\u5b66\u4e60\u8d44\u6599\u6574\u7406","title":"Electron \u6784\u5efa\u8de8\u5e73\u53f0\u5e94\u7528"},{"location":"NodeJS/Electron/#electron","text":"Electron \u662f\u7531Github\u5f00\u53d1\uff0c\u7528HTML\uff0cCSS\u548cJavaScript\u6765\u6784\u5efa\u8de8\u5e73\u53f0\u684c\u9762\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u4e2a\u5f00\u6e90\u5e93\u3002 Electron\u901a\u8fc7\u5c06 Chromium \u548c Node.js \u5408\u5e76\u5230\u540c\u4e00\u4e2a\u8fd0\u884c\u65f6\u73af\u5883\u4e2d\uff0c\u5e76\u5c06\u5176\u6253\u5305\u4e3aMac\uff0cWindows\u548cLinux\u7cfb\u7edf\u4e0b\u7684\u5e94\u7528\u6765\u5b9e\u73b0\u8fd9\u4e00\u76ee\u7684\u3002 \u6700\u521d\u4e3a GitHub \u5f00\u53d1 Atom \u7f16\u8f91\u5668, \u76ee\u524d\u5df2\u6210\u4e3a\u5f00\u6e90\u5f00\u53d1\u8005\u3001\u521d\u521b\u4f01\u4e1a\u548c\u8001\u724c\u516c\u53f8\u5e38\u7528\u7684\u5f00\u53d1\u5de5\u5177\u3002 \u770b\u770b\u8c01\u5728\u4f7f\u7528Electron \u3002","title":"\u4e00\u3001Electron \u7b80\u4ecb"},{"location":"NodeJS/Electron/#electron_1","text":"2013\u5e744\u6708 Atom Shell \u9879\u76ee\u542f\u52a8 \u3002 2014\u5e745\u6708 Atom Shell \u88ab\u5f00\u6e90 \u3002 2015\u5e744\u6708 Atom Shell \u88ab\u91cd\u547d\u540d\u4e3a Electron \u3002 2016\u5e745\u6708 Electron \u53d1\u5e03\u4e86 v1.0.0 \u7248\u672c \u3002 2016\u5e745\u6708 Electron \u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4e0a\u67b6 Mac App Store \u3002 2016\u5e748\u6708 Windows Store \u652f\u6301 Electron \u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f \u3002","title":"Electron \u53d1\u5c55\u5386\u7a0b"},{"location":"NodeJS/Electron/#_1","text":"1. \u5b89\u88c5 electron npm install -g electron 2. \u514b\u9686\u4e00\u4e2a\u4ed3\u5e93\u3001\u5feb\u901f\u542f\u52a8\u4e00\u4e2a\u9879\u76ee # \u514b\u9686\u793a\u4f8b\u9879\u76ee\u7684\u4ed3\u5e93 git clone https://github.com/electron/electron-quick-start # \u8fdb\u5165\u8fd9\u4e2a\u4ed3\u5e93 cd electron-quick-start # \u5b89\u88c5\u4f9d\u8d56\u5e76\u8fd0\u884c npm install && npm start 3. \u624b\u52a8\u642d\u5efa\u4e00\u4e2a electron \u9879\u76ee \u65b0\u5efa\u4e00\u4e2a\u9879\u76ee\u76ee\u5f55 \u4f8b\u5982: electrondemo01 \u5728 electrondemo01 \u76ee\u5f55\u4e0b\u9762\u65b0\u5efa\u4e09\u4e2a\u6587\u4ef6: index.html \u3001 main.js \u3001 package.json index.html \u91cc\u9762\u7528 css \u8fdb\u884c\u5e03\u5c40\uff08\u4ee5\u524d\u600e\u4e48\u5199\u73b0\u5728\u8fd8\u662f\u600e\u4e48\u5199\uff09 \u5728 main.js \u4e2d\u5199\u5982\u4e0b\u4ee3\u7801\uff1a var electron = require ( 'electron' ); //electron \u5bf9\u8c61\u7684\u5f15\u7528 const app = electron . app ; //BrowserWindow \u7c7b\u7684\u5f15\u7528 const BrowserWindow = electron . BrowserWindow ; let mainWindow = null ; //\u76d1\u542c\u5e94\u7528\u51c6\u5907\u5b8c\u6210\u7684\u4e8b\u4ef6 app.on('ready',function(){ //\u76d1\u542c\u5e94\u7528\u51c6\u5907\u5b8c\u6210\u7684\u4e8b\u4ef6 app . on ( 'ready' , function (){ //\u521b\u5efa\u7a97\u53e3 mainWindow = new BrowserWindow ({ width : 800 , height : 600 }); mainWindow . loadFile ( 'index.html' ); mainWindow . on ( 'closed' , function () { mainWindow = null ; }) }) }) //\u76d1\u542c\u6240\u6709\u7a97\u53e3\u5173\u95ed\u7684\u4e8b\u4ef6$ app . on ( 'window-all-closed' , function () { // On OS X it is common for applications and their menu bar // to stay active until the user quits explicitly with Cmd + Q$ if ( process . platform !== 'darwin' ) { app . quit (); $ } }) \u8fd0\u884c electron . #\u6ce8\u610f:\u547d\u4ee4\u540e\u9762\u6709\u4e2a\u70b9 4. electron-forge \u642d\u5efa\u4e00\u4e2a electron \u9879\u76ee electron-forge \u76f8\u5f53\u4e8e electron \u7684\u4e00\u4e2a\u811a\u624b\u67b6\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u66f4\u65b9\u4fbf\u7684\u521b\u5efa\u3001\u8fd0\u884c\u3001\u6253\u5305 electron \u9879\u76ee npm install -g electron-forge$ electron-forge init my-new-app$ cd my-new-app npm start","title":"\u4e8c\u3001\u73af\u5883\u642d\u5efa"},{"location":"NodeJS/Electron/#electron_2","text":"","title":"\u4e09\u3001Electron \u8fd0\u884c\u6d41\u7a0b"},{"location":"NodeJS/Electron/#1-electron","text":"","title":"1 Electron \u8fd0\u884c\u7684\u6d41\u7a0b"},{"location":"NodeJS/Electron/#2-electron","text":"Electron \u8fd0\u884c package.json \u7684 main \u811a\u672c\u7684\u8fdb\u7a0b\u88ab\u79f0\u4e3a\u4e3b\u8fdb\u7a0b\u3002 \u5728\u4e3b\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u7684\u811a\u672c\u901a\u8fc7\u521b\u5efa web \u9875\u9762\u6765\u5c55\u793a\u7528\u6237\u754c\u9762\u3002 \u4e00\u4e2a Electron \u5e94\u7528\u603b\u662f\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\u3002 \u7531\u4e8e Electron \u4f7f\u7528\u4e86 Chromium (\u8c37\u6b4c\u6d4f\u89c8\u5668)\u6765\u5c55\u793a web \u9875\u9762\uff0c\u6240\u4ee5 Chromium \u7684 \u591a\u8fdb\u7a0b\u67b6\u6784\u4e5f\u88ab\u4f7f\u7528\u5230\u3002 \u6bcf\u4e2a Electron \u4e2d\u7684 web \u9875\u9762\u8fd0\u884c\u5728\u5b83\u81ea\u5df1\u7684\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u3002 \u4e3b\u8fdb\u7a0b\u4f7f\u7528 BrowserWindow \u5b9e\u4f8b\u521b\u5efa\u9875\u9762\u3002\u6bcf\u4e2a BrowserWindow \u5b9e\u4f8b\u90fd\u5728\u81ea\u5df1\u7684\u6e32 \u67d3\u8fdb\u7a0b\u91cc\u8fd0\u884c\u9875\u9762\u3002 \u5f53\u4e00\u4e2a BrowserWindow \u5b9e\u4f8b\u88ab\u9500\u6bc1\u540e\uff0c\u76f8\u5e94\u7684\u6e32\u67d3\u8fdb\u7a0b\u4e5f\u4f1a\u88ab\u7ec8\u6b62\u3002","title":"2 Electron \u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b"},{"location":"NodeJS/Electron/#3-electron-nodejs","text":"\u5728\u666e\u901a\u7684\u6d4f\u89c8\u5668\u4e2d\uff0c web \u9875\u9762\u901a\u5e38\u5728\u4e00\u4e2a\u6c99\u76d2\u73af\u5883\u4e2d\u8fd0\u884c\uff0c\u4e0d\u88ab\u5141\u8bb8\u53bb\u63a5\u89e6\u539f\u751f\u7684\u8d44\u6e90\u3002 \u7136\u800c Electron \u7684\u7528\u6237\u5728 Node.js \u7684 API \u652f\u6301\u4e0b\u53ef\u4ee5\u5728\u9875\u9762\u4e2d\u548c\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u4e00\u4e9b\u5e95\u5c42\u4ea4\u4e92\u3002 Nodejs \u5728\u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002\u6e32\u67d3\u8fdb\u7a0b\u56e0\u4e3a\u5b89\u5168\u9650\u5236\uff0c\u4e0d\u80fd\u76f4\u63a5\u64cd\u4f5c\u751f GUI \u3002\u867d\u7136\u5982\u6b64\uff0c\u56e0\u4e3a\u96c6\u6210\u4e86 Nodejs\uff0c\u6e32\u67d3\u8fdb\u7a0b\u4e5f\u6709\u4e86\u64cd\u4f5c\u7cfb\u7edf\u5e95\u5c42 API \u7684\u80fd\u529b\uff0c Nodejs \u4e2d\u5e38\u7528\u7684 Path \u3001 fs \u3001 Crypto \u7b49\u6a21\u5757\u5728 Electron \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u65b9\u4fbf\u6211\u4eec\u5904\u7406\u94fe\u63a5\u3001\u8def\u5f84\u3001 \u6587\u4ef6 MD5 \u7b49\uff0c\u540c\u65f6 npm \u8fd8\u6709\u6210\u5343\u4e0a\u4e07\u7684\u6a21\u5757\u4f9b\u6211\u4eec\u9009\u62e9\u3002 var fs = require ( 'fs' ); var content = document . getElementById ( 'content' ); var button = document . getElementById ( 'button' ); button . addEventListener ( 'click' , function ( e ){ fs . readFile ( 'package.json' , 'utf8' , function ( err , data ){ content . textContent = data ; console . log ( data ); }); });","title":"3 Electron \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7 Nodejs \u8bfb\u53d6\u672c\u5730\u6587\u4ef6"},{"location":"NodeJS/Electron/#4-electron","text":"mainWindow . webContents . openDevTools ();","title":"4 Electron \u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f"},{"location":"NodeJS/Electron/#electron_3","text":"Electron \u6a21\u5757\u4ecb\u7ecd\u3001 remote \u6a21\u5757\u3001\u901a \u8fc7 BrowserWindow \u6253\u5f00\u65b0\u7a97\u53e3","title":"\u56db\u3001Electron \u6a21\u5757\u4ecb\u7ecd"},{"location":"NodeJS/Electron/#1-electron_1","text":"","title":"1 Electron \u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u7684\u6a21\u5757"},{"location":"NodeJS/Electron/#2-electron-remote","text":"remote \u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u6e32\u67d3\u8fdb\u7a0b(\u7f51\u9875)\u548c\u4e3b\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u8fdb\u7a0b\u95f4\u901a\u8baf( IPC )\u7684\u7b80\u4fbf\u9014\u5f84\u3002\u5728 Electron \u4e2d, \u4e0e GUI \u76f8\u5173\u7684\u6a21\u5757(\u5982 dialog , menu \u7b49)\u53ea\u5b58\u5728\u4e8e\u4e3b\u8fdb\u7a0b\uff0c\u800c\u4e0d\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d \u3002\u4e3a\u4e86\u80fd\u4ece\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u5b83\u4eec\uff0c\u9700\u8981\u7528 ipc \u6a21\u5757\u6765\u7ed9\u4e3b\u8fdb\u7a0b\u53d1\u9001\u8fdb\u7a0b\u95f4\u6d88\u606f\u3002\u4f7f\u7528 remote \u6a21\u5757\uff0c\u53ef\u4ee5\u8c03\u7528\u4e3b\u8fdb\u7a0b\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u800c\u65e0\u9700\u663e\u5f0f\u5730\u53d1\u9001\u8fdb\u7a0b\u95f4\u6d88\u606f\uff0c\u8fd9\u7c7b\u4f3c\u4e8e Java \u7684 RMI \u3002","title":"2 Electron remote \u6a21\u5757"},{"location":"NodeJS/Electron/#3-browserwindow","text":"Electron \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7 remote \u6a21\u5757\u8c03\u7528\u4e3b\u8fdb\u7a0b\u4e2d\u7684 BrowserWindow \u6253\u5f00\u65b0\u7a97\u53e3\uff0c\u8be6\u60c5\u53ef\u53c2\u8003\uff1a https://electronjs.org/docs/api/browser-window // \u4e3b\u8fdb\u7a0b\u4ee3\u7801 const electron = require ( 'electron' ); // \u63a7\u5236\u5e94\u7528\u751f\u547d\u5468\u671f\u7684\u6a21\u5757 const { app } = electron ; // \u521b\u5efa\u672c\u5730\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u6a21\u5757 const { BrowserWindow } = electron ; // \u6307\u5411\u7a97\u53e3\u5bf9\u8c61\u7684\u4e00\u4e2a\u5168\u5c40\u5f15\u7528\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u5f15\u7528\uff0c\u90a3\u4e48\u5f53\u8be5 javascript \u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536 \u7684 // \u65f6\u5019\u8be5\u7a97\u53e3\u5c06\u4f1a\u81ea\u52a8\u5173\u95ed let win ; function createWindow () { // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6d4f\u89c8\u5668\u7a97\u53e3 win = new BrowserWindow ({ width : 1104 , height : 620 }); //570+50 $ // \u5e76\u4e14\u88c5\u8f7d\u5e94\u7528\u7684 index.html \u9875\u9762 win . loadURL ( `file:// ${ __dirname } /html/index.html` ); $ // \u6253\u5f00\u5f00\u53d1\u5de5\u5177\u9875\u9762 win . webContents . openDevTools (); $ //\u5f53\u7a97\u53e3\u5173\u95ed\u65f6\u8c03\u7528\u7684\u65b9\u6cd5 win . on ( 'closed' , () => { // \u89e3\u9664\u7a97\u53e3\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u901a\u5e38\u800c\u8a00\u5982\u679c\u5e94\u7528\u652f\u6301\u591a\u4e2a\u7a97\u53e3\u7684\u8bdd\uff0c\u4f60\u4f1a\u5728\u4e00\u4e2a\u6570\u7ec4\u91cc // \u5b58\u653e\u7a97\u53e3\u5bf9\u8c61\uff0c\u5728\u7a97\u53e3\u5173\u95ed\u7684\u65f6\u5019\u5e94\u5f53\u5220\u9664\u76f8\u5e94\u7684\u5143\u7d20\u3002 win = null ; }); } // \u5f53 Electron \u5b8c\u6210\u521d\u59cb\u5316\u5e76\u4e14\u5df2\u7ecf\u521b\u5efa\u4e86\u6d4f\u89c8\u5668\u7a97\u53e3\uff0c\u5219\u8be5\u65b9\u6cd5\u5c06\u4f1a\u88ab\u8c03\u7528\u3002 // \u6709\u4e9b API \u53ea\u80fd\u5728\u8be5\u4e8b\u4ef6\u53d1\u751f\u540e\u624d\u80fd\u88ab\u4f7f\u7528 app . on ( 'ready' , createWindow ); // \u5f53\u6240\u6709\u7684\u7a97\u53e3\u88ab\u5173\u95ed\u540e\u9000\u51fa\u5e94\u7528 app . on ( 'window-all-closed' , () => { // \u5bf9\u4e8e OS X \u7cfb\u7edf\uff0c\u5e94\u7528\u548c\u76f8\u5e94\u7684\u83dc\u5355\u680f\u4f1a\u4e00\u76f4\u6fc0\u6d3b\u76f4\u5230\u7528\u6237\u901a\u8fc7 Cmd + Q \u663e\u5f0f\u9000\u51fa$ if ( process . platform !== 'darwin' ) { app . quit (); } }); app . on ( 'activate' , () => { // \u5bf9\u4e8e OS X \u7cfb\u7edf\uff0c\u5f53 dock \u56fe\u6807\u88ab\u70b9\u51fb\u540e\u4f1a\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a app \u7a97\u53e3\uff0c\u5e76\u4e14\u4e0d\u4f1a\u6709\u5176\u4ed6 // \u7a97\u53e3\u6253\u5f00 if ( win === null ) { createWindow (); $ } }); // \u5728\u8fd9\u4e2a\u6587\u4ef6\u540e\u9762\u4f60\u53ef\u4ee5\u76f4\u63a5\u5305\u542b\u4f60\u5e94\u7528\u7279\u5b9a\u7684\u7531\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u7684\u4ee3\u7801\u3002$ // \u4e5f\u53ef\u4ee5\u628a\u8fd9\u4e9b\u4ee3\u7801\u653e\u5728\u53e6\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7136\u540e\u5728\u8fd9\u91cc\u5bfc\u5165 // \u6e32\u67d3\u8fdb\u7a0b\u4ee3\u7801 /src/render/index.js // \u6253\u5f00\u65b0\u7a97\u53e3\u5c5e\u6027\u7528\u6cd5\u6709\u70b9\u7c7b\u4f3cvscode\u6253\u5f00\u65b0\u7684\u7a97\u53e3 const btn = document . querySelector ( '#btn' ); const path = require ( 'path' ); const BrowerWindow = require ( 'electron' ). remote . BrowserWindow ; btn . onclick = () => { win = new BrowerWindow ({ $ width : 300 , height : 200 , $ frame : false , // false\u9690\u85cf\u5173\u95ed\u6309\u94ae\u3001\u83dc\u5355\u9009\u9879 true\u663e\u793a fullscreen : true , // \u5168\u5c4f\u5c55\u793a transparent : true $ }) $ win . loadURL ( path . join ( 'file:' , __dirname , 'news.html' )); win . on ( 'close' ,()=>{ win = null }); }","title":"3 \u901a\u8fc7BrowserWindow \u6253\u5f00\u65b0\u7a97\u53e3"},{"location":"NodeJS/Electron/#_2","text":"","title":"\u4e94\u3001\u81ea\u5b9a\u4e49\u9876\u90e8\u83dc\u5355/\u53f3\u952e\u83dc\u5355"},{"location":"NodeJS/Electron/#1-menu-","text":"https://electronjs.org/docs/api/menu-item Electron \u4e2d Menu \u6a21\u5757\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u539f\u751f\u83dc\u5355\uff0c\u5b83\u53ef\u7528\u4f5c\u5e94\u7528\u83dc\u5355\u548c context \u83dc\u5355 \u8fd9\u4e2a\u6a21\u5757\u662f\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\u7684\u6a21\u5757\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7 remote \u6a21\u5757\u7ed9\u6e32\u67d3\u8fdb\u7a0b\u8c03\u7528 // main/menu.js const { Menu } = require ( 'electron' ) // \u6587\u6863 https://electronjs.org/docs/api/menu-item // \u83dc\u5355\u9879\u76ee let menus = [ { label : '\u6587\u4ef6' , submenu : [ { label : '\u65b0\u5efa\u6587\u4ef6' , accelerator : 'ctrl+n' , // \u7ed1\u5b9a\u5feb\u6377\u952e click : function () { // \u7ed1\u5b9a\u4e8b\u4ef6 console . log ( '\u65b0\u5efa\u6587\u4ef6' ) } }, { label : '\u65b0\u5efa\u7a97\u53e3' , click : function () { console . log ( '\u65b0\u5efa\u7a97\u53e3' ) } } ] }, { label : '\u7f16\u8f91' , submenu : [ { label : '\u590d\u5236' , role : 'copy' // \u8c03\u7528\u5185\u7f6e\u89d2\u8272\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd }, { label : '\u526a\u5207' , role : 'cut' // \u8c03\u7528\u5185\u7f6e\u89d2\u8272\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd } ] }, { label : '\u89c6\u56fe' , submenu : [ { label : '\u6d4f\u89c8' }, { label : '\u641c\u7d22' } ] } ] let m = Menu . buildFromTemplate ( menus ) Menu . setApplicationMenu ( m ) // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/menu.js' ) }; \u6211\u4eec\u7ed9\u83dc\u5355\u7ed1\u5b9a\u4e8b\u4ef6\uff0c\u5728\u547d\u4ee4\u884c\u63a7\u5236\u53f0\u53ef\u4ee5\u770b\u5230","title":"1 \u4e3b\u8fdb\u7a0b\u4e2d\u8c03\u7528Menu\u6a21\u5757-\u81ea\u5b9a\u4e49\u8f6f\u4ef6\u9876\u90e8\u83dc\u5355"},{"location":"NodeJS/Electron/#2-menu","text":"\u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5efa\u8bae\u5728\u4e3b\u8fdb\u7a0b\u4e2d\u4f7f\u7528 1. remote \u901a\u8fc7 remote \u8c03\u7528\u4e3b\u8fdb\u7a0b\u7684\u65b9\u6cd5 // \u83dc\u5355\u5f15\u5165\u7684\u65b9\u5f0f\u53d1\u751f\u53d8\u5316 const { Menu } = require ( 'electron' ). remote // \u5176\u4ed6\u4ee3\u7801\u548c\u4e0a\u9762\u83dc\u5355\u4e00\u6837 // ... 2. \u52a0\u5165index.html < script src = \"render/menu.js\" >< /script>","title":"2 \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u8c03\u7528Menu\u6a21\u5757"},{"location":"NodeJS/Electron/#3","text":"1. \u5b9a\u4e49\u83dc\u5355 // render/menu.js // \u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7remote\u6a21\u5757\u8c03\u7528\u4e3b\u8fdb\u7a0b\u4e2d\u7684\u6a21\u5757 const { Menu } = require ( 'electron' ). remote const { remote } = require ( 'electron' ) // \u6587\u6863 https://electronjs.org/docs/api/menu-item // \u83dc\u5355\u9879\u76ee let menus = [ { label : '\u6587\u4ef6' , submenu : [ { label : '\u65b0\u5efa\u6587\u4ef6' , accelerator : 'ctrl+n' , // \u7ed1\u5b9a\u5feb\u6377\u952e click : function () { // \u7ed1\u5b9a\u4e8b\u4ef6 console . log ( '\u65b0\u5efa\u6587\u4ef6' ) } }, { label : '\u65b0\u5efa\u7a97\u53e3' , click : function () { console . log ( '\u65b0\u5efa\u7a97\u53e3' ) } } ] }, { label : '\u7f16\u8f91' , submenu : [ { label : '\u590d\u5236' , role : 'copy' // \u8c03\u7528\u5185\u7f6e\u89d2\u8272\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd }, { label : '\u526a\u5207' , role : 'cut' // \u8c03\u7528\u5185\u7f6e\u89d2\u8272\u5b9e\u73b0\u5bf9\u5e94\u529f\u80fd } ] }, { label : '\u89c6\u56fe' , submenu : [ { label : '\u6d4f\u89c8' }, { label : '\u641c\u7d22' } ] } ] let m = Menu . buildFromTemplate ( menus ) // Menu.setApplicationMenu(m) // \u7ed1\u5b9a\u53f3\u952e\u83dc\u5355 window . addEventListener ( 'contextmenu' , ( e )=>{ e . preventDefault () m . popup ({ window : remote . getCurrentWindow () }) }, false ) 2. \u5f15\u5165 <!-- index . html --> < script src = \"render/menu.js\" >< /script>","title":"3 \u6e32\u67d3\u8fdb\u7a0b\u4e2d\u81ea\u5b9a\u4e49\u53f3\u952e\u83dc\u5355"},{"location":"NodeJS/Electron/#_3","text":"\u6e32\u67d3\u8fdb\u7a0b https://electronjs.org/docs/api/ipc-renderer \u4e3b\u8fdb\u7a0b https://electronjs.org/docs/api/ipc-main","title":"\u516d\u3001\u8fdb\u7a0b\u901a\u4fe1"},{"location":"NodeJS/Electron/#1","text":"\u6709\u65f6\u5019\u6211\u4eec\u60f3\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7\u4e00\u4e2a\u4e8b\u4ef6\u53bb\u6267\u884c\u4e3b\u8fdb\u7a0b\u91cc\u9762\u7684\u65b9\u6cd5\u3002\u6216\u8005\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u77e5 \u4e3b\u8fdb\u7a0b\u5904\u7406\u4e8b\u4ef6\uff0c\u4e3b\u8fdb\u7a0b\u5904\u7406\u5b8c\u6210\u540e\u5e7f\u64ad\u4e00\u4e2a\u4e8b\u4ef6\u8ba9\u6e32\u67d3\u8fdb\u7a0b\u53bb\u5904\u7406\u4e00\u4e9b\u4e8b\u60c5\u3002\u8fd9\u4e2a\u65f6\u5019\u5c31 \u7528\u5230\u4e86\u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u4e4b\u95f4\u7684\u76f8\u4e92\u901a\u4fe1 Electron \u4e3b\u8fdb\u7a0b\uff0c\u548c\u6e32\u67d3\u8fdb\u7a0b\u7684\u901a\u4fe1\u4e3b\u8981\u7528\u5230\u4e24\u4e2a\u6a21\u5757: ipcMain \u548c ipcRenderer ipcMain :\u5f53\u5728\u4e3b\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u65f6\uff0c\u5b83\u5904\u7406\u4ece\u6e32\u67d3\u5668\u8fdb\u7a0b(\u7f51\u9875)\u53d1\u9001\u51fa\u6765\u7684\u5f02\u6b65\u548c\u540c\u6b65\u4fe1\u606f,\u5f53\u7136\u4e5f\u6709\u53ef\u80fd\u4ece\u4e3b\u8fdb\u7a0b\u5411\u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f\u3002 ipcRenderer : \u4f7f\u7528\u5b83\u63d0\u4f9b\u7684\u4e00\u4e9b\u65b9\u6cd5\u4ece\u6e32\u67d3\u8fdb\u7a0b ( web \u9875\u9762) \u53d1\u9001\u540c\u6b65\u6216\u5f02\u6b65\u7684\u6d88\u606f\u5230\u4e3b\u8fdb\u7a0b\u3002 \u4e5f\u53ef\u4ee5\u63a5\u6536\u4e3b\u8fdb\u7a0b\u56de\u590d\u7684\u6d88\u606f","title":"1 \u4e3b\u8fdb\u7a0b\u4e0e\u6e32\u67d3\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1"},{"location":"NodeJS/Electron/#2","text":"\u4e5f\u5c31\u662f\u4e24\u4e2a\u7a97\u53e3\u76f4\u63a5\u7684\u901a\u4fe1","title":"2 \u6e32\u67d3\u8fdb\u7a0b\u4e0e\u6e32\u67d3\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1"},{"location":"NodeJS/Electron/#electron-shell","text":"","title":"\u4e03\u3001Electron Shell \u6a21\u5757"},{"location":"NodeJS/Electron/#1-shell","text":"\u6587\u6863 https://electronjs.org/docs/api/shell Electron Shell \u6a21\u5757\u5728\u7528\u6237\u9ed8\u8ba4\u6d4f\u89c8\u5668 \u4e2d\u6253\u5f00 URL \u4ee5\u53ca Electron DOM webview \u6807\u7b7e\u3002 Shell \u65e2\u5c5e\u4e8e\u4e3b\u8fdb\u7a0b\u6a21\u5757\u53c8\u662f\u6e32\u67d3\u8fdb\u7a0b\u6a21\u5757 shell \u6a21\u5757\u63d0\u4f9b\u4e86\u96c6\u6210\u5176\u4ed6\u684c\u9762\u5ba2\u6237\u7aef\u7684\u5173\u8054\u529f\u80fd 1. \u5f15\u5165 <!-- index . html --> < button id = \"shellDom\" > \u901a\u8fc7shell\u6253\u5f00\u5916\u90e8\u94fe\u63a5 < /button> < script src = \"render/shell.js\" >< /script> 2. shell.js // src/render/shell.js const { shell } = require ( 'electron' ) let shellDom = document . querySelector ( '#shellDom' ); shellDom . onclick = function ( e ) { shell . openExternal ( 'https://github.com/poetries' ) }","title":"1 Shell \u6a21\u5757\u4f7f\u7528"},{"location":"NodeJS/Electron/#2-electron-dom","text":"Webview \u4e0e iframe \u6709\u70b9\u76f8\u4f3c\uff0c\u4f46\u662f\u4e0e iframe \u4e0d\u540c, webview \u548c\u4f60\u7684\u5e94\u7528\u8fd0\u884c\u7684\u662f\u4e0d\u540c\u7684\u8fdb\u7a0b\u3002\u5b83\u4e0d\u62e5\u6709\u6e32\u67d3\u8fdb\u7a0b\u7684\u6743\u9650\uff0c\u5e76\u4e14\u5e94\u7528\u548c\u5d4c\u5165\u5185\u5bb9\u4e4b\u95f4\u7684\u4ea4\u4e92\u5168\u90e8\u90fd\u662f\u5f02\u6b65\u7684\u3002\u56e0\u4e3a\u8fd9\u80fd \u4fdd\u8bc1\u5e94\u7528\u7684\u5b89\u5168\u6027\u4e0d\u53d7\u5d4c\u5165\u5185\u5bb9\u7684\u5f71\u54cd\u3002 <!-- src / index . html\u4e2d\u5f15\u5165 --> < webview id = \"webview\" src = \"http://blog.poetries.top\" style = \"position:fixed; width:100%; height:100%\" > < /webview>","title":"2 Electron DOM `` \u6807\u7b7e"},{"location":"NodeJS/Electron/#3-shellmenu","text":"1. \u65b0\u5efasrc/render/webview.js /* eslint-disable */ var { ipcRenderer } = require ( 'electron' ); let myWebview = document . querySelector ( '#myWebview' ) ipcRenderer . on ( 'openwebview' , ( e , url )=>{ myWebview . src = url }) 2. \u5f15\u5165src/index.html < webview id = \"myWebview\" src = \"http://blog.poetries.top\" style = \"position:fixed; width:100%; height:100%\" > < /webview> $ < script src = \"render/webview.js\" >< /script> 3. \u65b0\u5efasrc/main/menu.js /* eslint-disable */ const { shell , Menu , BrowserWindow } = require ( 'electron' ); // \u5f53\u524d\u7a97\u53e3\u6e32\u67d3\u7f51\u9875 function openWebView ( url ) { // \u83b7\u53d6\u5f53\u524d\u7a97\u53e3Id let win = BrowserWindow . getFocusedWindow () // \u5e7f\u64ad\u901a\u77e5\u6e32\u67d3\u8fdb\u7a0b\u6253\u5f00webview win . webContents . send ( 'openwebview' , url ) } // \u5728\u7a97\u53e3\u5916\u6253\u5f00\u7f51\u9875 function openWeb ( url ) { shell . openExternal ( url ) } let template = [ { label : '\u5e2e\u52a9' , submenu : [ { label : '\u5173\u4e8e\u6211\u4eec' , click : function () { openWeb ( 'http://blog.poetries.top' ) } }, { type : 'separator' }, { label : '\u8054\u7cfb\u6211\u4eec' , click : function () { openWeb ( 'https://github.com/poetries' ) } } ] }, { label : '\u52a0\u8f7d\u7f51\u9875' , submenu : [ { label : '\u535a\u5ba2' , click : function () { openWebView ( 'http://blog.poetries.top' ) } }, { type : 'separator' // \u5206\u9694\u7b26 }, { label : 'GitHub' , click : function () { openWebView ( 'https://github.com/poetries' ) } }, { type : 'separator' // \u5206\u9694\u7b26 }, { label : '\u7b80\u4e66' , click : function () { openWebView ( 'https://www.jianshu.com/users/94077fcddfc0/timeline' ) } } ] }, { label : '\u89c6\u9891\u7f51\u7ad9' , submenu : [ { label : '\u4f18\u9177' , click : function () { openWebView ( 'https://www.youku.com' ) } }, { type : 'separator' // \u5206\u9694\u7b26 }, { label : '\u7231\u5947\u827a' , click : function () { openWebView ( 'https://www.iqiyi.com/' ) } }, { type : 'separator' // \u5206\u9694\u7b26 }, { label : '\u817e\u8baf\u89c6\u9891' , click : function () { openWebView ( 'https://v.qq.com/' ) } } ] } ] let m = Menu . buildFromTemplate ( template ) Menu . setApplicationMenu ( m ) 4. \u5f15\u5165menu // \u5728\u4e3b\u8fdb\u7a0bsrc/index.js\u4e2d\u5f15\u5165 const createWindow = () => { // \u521b\u5efa\u83dc\u5355 $ // \u5f15\u5165\u83dc\u5355\u6a21\u5757 require ( './main/menu.js' ) };","title":"3 shell\u6a21\u5757`\u7ed3\u5408Menu`\u6a21\u5757\u4f7f\u7528\u6848\u4f8b"},{"location":"NodeJS/Electron/#electron-dialog","text":"\u6587\u6863 https://electronjs.org/docs/api/dialog dialog \u5c5e\u4e8e\u4e3b\u8fdb\u7a0b\u4e2d\u7684\u6a21\u5757 dialog \u6a21\u5757\u63d0\u4f9b\u4e86 api \u6765\u5c55\u793a\u539f\u751f\u7684\u7cfb\u7edf\u5bf9\u8bdd\u6846\uff0c\u4f8b\u5982\u6253\u5f00\u6587\u4ef6\u6846\uff0c alert \u6846\uff0c \u6240\u4ee5 web \u5e94\u7528\u53ef\u4ee5\u7ed9\u7528\u6237\u5e26\u6765\u8ddf\u7cfb\u7edf\u5e94\u7528\u76f8\u540c\u7684\u4f53\u9a8c 1. \u5728src/index.html\u4e2d\u5f15\u5165 < button id = \"showError\" > showError < /button><br / > < button id = \"showMsg\" > showMsg < /button><br / > < button id = \"showOpenDialog\" > showOpenDialog < /button><br / > < button id = \"saveDialog\" > saveDialog < /button><br / > < script src = \"render/dialog.js\" >< /script> 2. \u65b0\u5efarender/dialog.js // render/dialog.js let showError = document . querySelector ( '#showError' ); let showMsg = document . querySelector ( '#showMsg' ); let showOpenDialog = document . querySelector ( '#showOpenDialog' ); let saveDialog = document . querySelector ( '#saveDialog' ); var { remote } = require ( 'electron' ) showError . onclick = function () { remote . dialog . showErrorBox ( '\u8b66\u544a' , '\u64cd\u4f5c\u6709\u8bef' ) } showMsg . onclick = function () { remote . dialog . showMessageBox ({ type : 'info' , title : '\u63d0\u793a\u4fe1\u606f' , message : '\u5185\u5bb9' , buttons : [ '\u786e\u5b9a' , '\u53d6\u6d88' ] }, function ( index ){ console . log ( index ) }) } showOpenDialog . onclick = function () { remote . dialog . showOpenDialog ({ // \u6253\u5f00\u6587\u4ef6\u5939 properties : [ 'openDirectory' , 'openFile' ] // \u6253\u5f00\u6587\u4ef6 // properties: ['openFile'] }, function ( data ) { console . log ( data ) }) } saveDialog . onclick = function () { remote . dialog . showSaveDialog ({ title : 'Save File' , defaultPath : '/Users/poetry/Downloads/' , // filters \u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u7c7b\u578b\u6570\u7ec4\uff0c\u7528\u4e8e\u89c4\u5b9a\u7528\u6237\u53ef\u89c1\u6216\u53ef\u9009\u7684\u7279\u5b9a\u7c7b\u578b\u8303\u56f4 filters : [ { name : 'Images' , extensions : [ 'jpg' , 'png' , 'gif' ] }, { name : 'Movies' , extensions : [ 'mkv' , 'avi' , 'mp4' ] }, { name : 'Custom File Type' , extensions : [ 'as' ] }, { name : 'All Files' , extensions : [ '*' ] } ] }, function ( path ) { // \u4e0d\u662f\u771f\u7684\u4fdd\u5b58 \uff0c\u5177\u4f53\u8fd8\u9700nodejs\u5904\u7406 console . log ( path ) }) } showError remote . dialog . showErrorBox ( '\u8b66\u544a' , '\u64cd\u4f5c\u6709\u8bef' ) showMessageBox remote . dialog . showMessageBox ({ type : 'info' , title : '\u63d0\u793a\u4fe1\u606f' , message : '\u5185\u5bb9' , buttons : [ '\u786e\u5b9a' , '\u53d6\u6d88' ] }, function ( index ){ console . log ( index ) }) showOpenDialog remote . dialog . showOpenDialog ({ // \u6253\u5f00\u6587\u4ef6\u5939 properties : [ 'openDirectory' , 'openFile' ] // \u6253\u5f00\u6587\u4ef6 // properties: ['openFile'] }, function ( data ) { console . log ( data ) }) showSaveDialog remote . dialog . showSaveDialog ({ title : 'Save File' , defaultPath : '/Users/poetry/Downloads/' , // filters \u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u7c7b\u578b\u6570\u7ec4\uff0c\u7528\u4e8e\u89c4\u5b9a\u7528\u6237\u53ef\u89c1\u6216\u53ef\u9009\u7684\u7279\u5b9a\u7c7b\u578b\u8303\u56f4 filters : [ { name : 'Images' , extensions : [ 'jpg' , 'png' , 'gif' ] }, { name : 'Movies' , extensions : [ 'mkv' , 'avi' , 'mp4' ] }, { name : 'Custom File Type' , extensions : [ 'as' ] }, { name : 'All Files' , extensions : [ '*' ] } ] }, function ( path ) { // \u4e0d\u662f\u771f\u7684\u4fdd\u5b58 \uff0c\u5177\u4f53\u8fd8\u9700nodejs\u5904\u7406 console . log ( path ) })","title":"\u516b\u3001Electron dialog \u5f39\u51fa\u6846"},{"location":"NodeJS/Electron/#_4","text":"\u4ee3\u7801 https://github.com/poetries/electron-demo/tree/master/notepad","title":"\u4e5d\u3001\u5b9e\u73b0\u4e00\u4e2a\u7b80\u6613\u8bb0\u4e8b\u672c\u4ee3\u7801\u7f16\u8f91\u5668"},{"location":"NodeJS/Electron/#_5","text":"\u6587\u6863 https://electronjs.org/docs/api/tray \u7cfb\u7edf\u6258\u76d8\uff0c\u6258\u76d8\u53f3\u952e\u83dc\u5355\u3001\u6258\u76d8\u56fe\u6807\u95ea\u70c1 \u70b9\u51fb\u53f3\u4e0a\u89d2\u5173\u95ed\u6309\u94ae\u9690\u85cf\u5230\u6258\u76d8(\u4eff\u6740\u6bd2\u8f6f\u4ef6) 1. \u5f15\u5165\u6587\u4ef6 // src/index.js const createWindow = () => { require ( './main/tray.js' ) }; 2. Electron \u521b\u5efa\u4efb\u52a1\u680f\u56fe\u6807\u4ee5\u53ca\u4efb\u52a1\u680f\u56fe\u6807\u53f3\u952e\u83dc\u5355 // src/main/tray.js var { Menu , Tray , app , BrowserWindow } = require ( 'electron' ); const path = require ( 'path' ); var appIcon = new Tray ( path . join ( __dirname , '../static/lover.png' )); const menu = Menu . buildFromTemplate ([ { label : '\u8bbe\u7f6e' , click : function () {} //\u6253\u5f00\u76f8\u5e94\u9875\u9762$ }, { label : '\u5e2e\u52a9' , click : function () {} }, { label : '\u5173\u4e8e' , click : function () {} }, { label : '\u9000\u51fa' , click : function () { $ // BrowserWindow.getFocusedWindow().webContents().send('close-main-window'); app . quit (); } }]) // \u9f20\u6807\u653e\u4e0a\u53bb\u63d0\u793a\u4fe1\u606f appIcon . setToolTip ( 'hello poetries' ); appIcon . setContextMenu ( menu ); 3. \u76d1\u542c\u4efb\u52a1\u680f\u56fe\u6807\u7684\u5355\u51fb\u3001\u53cc\u51fb\u4e8b\u4ef6 // \u5b9e\u73b0\u70b9\u51fb\u5173\u95ed\u6309\u94ae\uff0c\u8ba9\u5e94\u7528\u4fdd\u5b58\u5728\u6258\u76d8\u91cc\u9762\uff0c\u53cc\u51fb\u6258\u76d8\u6253\u5f00 let win = BrowserWindow . getFocusedWindow () win . on ( 'close' , ( e )=>{ e . preventDefault () win . hide () }) iconTray . on ( 'double-click' , ( e )=>{ win . show () }) 4. Electron \u70b9\u51fb\u53f3\u4e0a\u89d2\u5173\u95ed\u6309\u94ae\u9690\u85cf\u4efb\u52a1\u680f\u56fe\u6807 const win = BrowserWindow . getFocusedWindow (); win . on ( 'close' , ( e ) =>{ console . log ( win . isFocused ()); $ if ( ! win . isFocused ()) { win = null ; } else { e . preventDefault (); /*\u963b\u6b62\u5e94\u7528\u9000\u51fa*/ win . hide (); /*\u9690\u85cf\u5f53\u524d\u7a97\u53e3*/ } }) 5. Electron \u5b9e\u73b0\u4efb\u52a1\u680f\u95ea\u70c1\u56fe\u6807 var appIcon = new Tray ( path . join ( __dirname , '../static/lover.png' )); timer = setInterval ( function () { count ++ ; if ( count % 2 == 0 ) { appIcon . setImage ( path . join ( __dirname , '../static/empty.ico' )) } else { appIcon . setImage ( path . join ( __dirname , '../static/lover.png' )) } }, 500 );","title":"\u5341\u3001\u7cfb\u7edf\u6258\u76d8\u3001\u6258\u76d8\u53f3\u952e\u83dc\u5355\u3001\u6258\u76d8\u56fe\u6807\u95ea\u70c1"},{"location":"NodeJS/Electron/#_6","text":"","title":"\u5341\u4e00\u3001\u6d88\u606f\u901a\u77e5\u3001\u76d1\u542c\u7f51\u7edc\u53d8\u5316"},{"location":"NodeJS/Electron/#1_1","text":"1. Electron \u5b9e\u73b0\u6d88\u606f\u901a\u77e5 Electron \u91cc\u9762\u7684\u6d88\u606f\u901a\u77e5\u662f\u57fa\u4e8e h5 \u7684\u901a\u77e5 api \u5b9e\u73b0\u7684 \u6587\u6863 https://developer.mozilla.org/zh-CN/docs/Web/API/notification 1. \u65b0\u5efanotification.js // h5api\u5b9e\u73b0\u901a\u77e5 const path = require ( 'path' ) let options = { title : 'electron \u901a\u77e5API' , body : 'hello poetries' , icon : path . join ( '../static/img/favicon2.ico' ) // \u901a\u77e5\u56fe\u6807 } document . querySelector ( '#showNotification' ). onclick = function () { let myNotification = new window . Notification ( options . title , options ) $ // \u6d88\u606f\u53ef\u70b9\u51fb myNotification . onclick = function () { console . log ( 'click notification' ) } } 2. \u5f15\u5165 <!-- src / index . html --> < button id = \"showNotification\" > \u5f39\u51fa\u6d88\u606f\u901a\u77e5 < /button> < script src = \"render/notification.js\" >< /script> mac \u4e0a\u7684\u6d88\u606f\u901a\u77e5","title":"1 \u6d88\u606f\u901a\u77e5"},{"location":"NodeJS/Electron/#2_1","text":"1. \u57fa\u672c\u4f7f\u7528 // \u76d1\u542c\u7f51\u7edc\u53d8\u5316 // \u7aef\u5f00\u7f51\u7edc \u518d\u6b21\u8fde\u63a5\u6d4b\u8bd5 window . addEventListener ( 'online' , function (){ console . log ( 'online' ) }); $ $ window . addEventListener ( 'offline' , function (){ console . log ( 'offline' ) }); 2. \u76d1\u542c\u7f51\u7edc\u53d8\u5316\u5b9e\u73b0\u6d88\u606f\u901a\u77e5 // \u7aef\u5f00\u7f51\u7edc \u518d\u6b21\u8fde\u63a5\u6d4b\u8bd5 // \u76d1\u542c\u7f51\u7edc\u53d8\u5316\u5b9e\u73b0\u6d88\u606f\u901a\u77e5 window . addEventListener ( 'online' , function (){ console . log ( 'online' ) }); $ window . addEventListener ( 'offline' , function (){ // \u65ad\u5f00\u7f51\u7edc\u89e6\u53d1\u4e8b\u4ef6 var options = { title : 'QQ\u90ae\u7bb1' , body : '\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u68c0\u67e5\u4f60\u7684\u7f51\u7edc' , icon : path . join ( '../static/img/favicon2.ico' ) // \u901a\u77e5\u56fe\u6807 } var myNotification = new window . Notification ( options . title , options ) myNotification . onclick = function () { console . log ( 'click notification' ) } });","title":"2 \u76d1\u542c\u7f51\u7edc\u53d8\u5316"},{"location":"NodeJS/Electron/#nativeimage","text":"Electron \u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e ( globalShortcut ) \u4ee5\u53ca clipboard \u526a \u5207\u677f\u4e8b\u4ef6\u4ee5\u53ca nativeImage \u6a21\u5757(\u5b9e\u73b0\u7c7b\u4f3c\u64ad\u653e\u5668\u70b9\u51fb\u673a\u5668\u7801\u81ea\u52a8\u590d\u5236\u529f \u80fd)","title":"\u5341\u4e8c\u3001\u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e/\u526a\u5207\u677f\u4e8b\u4ef6/nativeImage \u6a21\u5757"},{"location":"NodeJS/Electron/#1_2","text":"keyboard-shortcuts\u6587\u6863 app\u6a21\u5757\u53c2\u8003\u6587\u6863 1. \u65b0\u5efasrc/main/shortCut.js const { globalShortcut , app } = require ( 'electron' ) app . on ( 'ready' , ()=>{ // \u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e globalShortcut . register ( 'command+e' , ()=>{ console . log ( 1 ) }) // \u68c0\u6d4b\u5feb\u6377\u952e\u662f\u5426\u6ce8\u518c\u6210\u529f true\u662f\u6ce8\u518c\u6210\u529f let isRegister = globalShortcut . isRegistered ( 'command+e' ) console . log ( isRegister ) }) // \u9000\u51fa\u7684\u65f6\u5019\u53d6\u6d88\u5168\u5c40\u5feb\u6377\u952e app . on ( 'will-quit' , ()=>{ globalShortcut . unregister ( 'command+e' ) }) 2. \u5f15\u5165src/index.js // \u6ce8\u610f\u5728\u5916\u90e8\u5f15\u5165\u5373\u53ef \u4e0d\u7528\u653e\u5230app\u4e2d require ( './main/shortCut.js' )","title":"1 \u6ce8\u518c\u5168\u5c40\u5feb\u6377\u952e"},{"location":"NodeJS/Electron/#2-clipboardnativeimage","text":"\u526a\u5207\u677fclipboard\u6587\u6863 nativeImage\u6a21\u5757 1. html <!-- src / index . html --> < div > < h2 > \u53cc\u51fb\u4e0b\u9762\u4fe1\u606f\u590d\u5236 < /h2> < p id = 'msg' > 123456789 < /p> < button id = \"plat\" > \u7c98\u8d34 < /button><br / > < input id = \"text\" type = \"text\" /> < /div>. < div > < h2 > \u590d\u5236\u56fe\u7247\u5230\u754c\u9762 < /h2> < button id = \"copyImg\" > \u590d\u5236\u56fe\u7247 < /button><br / > < /div> < script src = \"render/clipboard.js\" >< /script> 2. \u65b0\u5efasrc/render/clipboard.js // clipboard\u53ef\u4ee5\u5728\u4e3b\u8fdb\u7a0b\u6216\u6e32\u67d3\u8fdb\u7a0b\u4f7f\u7528 const { clipboard , nativeImage } = require ( 'electron' ) //\u590d\u5236 // \u8fd0\u884cctrl+v\u53ef\u770b\u5230\u590d\u5236\u7684\u5185\u5bb9 // clipboard.writeText('poetries') // clipboard.readText() //\u83b7\u53d6\u590d\u5236\u7684\u5185\u5bb9 \u7c98\u8d34 // \u53cc\u51fb\u590d\u5236\u6d88\u606f let msg = document . querySelector ( '#msg' ) let plat = document . querySelector ( '#plat' ) let text = document . querySelector ( '#text' ) msg . ondblclick = function () { clipboard . writeText ( msg . innerHTML ) alert ( msg . innerHTML ) } plat . onclick = function () { text . value = clipboard . readText () } // \u590d\u5236\u56fe\u7247\u663e\u793a\u5230\u754c\u9762 let copyImg = document . querySelector ( '#copyImg' ) copyImg . onclick = function () { // \u7ed3\u5408nativeImage\u6a21\u5757 let image = nativeImage . createFromPath ( '../static/img/lover.png' ) $ // \u590d\u5236\u56fe\u7247 clipboard . writeImage ( image ) // \u7c98\u8d34\u56fe\u7247 let imgSrc = clipboard . readImage (). toDataURL () // base64\u56fe\u7247 // \u663e\u793a\u5230\u9875\u9762\u4e0a let imgDom = new Image () imgDom . src = imgSrc$ document . body . appendChild ( imgDom ) }","title":"2 \u526a\u5207\u677fclipboard\u3001nativeImage \u6a21\u5757"},{"location":"NodeJS/Electron/#electron-vue","text":"","title":"\u5341\u4e09\u3001\u7ed3\u5408electron-vue"},{"location":"NodeJS/Electron/#1-electron-vue","text":"1. electron-vue \u7684\u4e00\u4e9b\u8d44\u6e90 https://github.com/SimulatedGREG/electron-vue Electron-vue \u6587\u6863 https://simulatedgreg.gitbooks.io/electron-vue/content/cn 2. electron-vue \u73af\u5883\u642d\u5efa\u3001\u521b\u5efa\u9879\u76ee npm install - g vue - cli vue init simulatedgreg / electron - vue my - project cd my - project yarn # or npm install yarn run dev # or npm run dev 3. electron-vue \u76ee\u5f55\u7ed3\u6784\u5206\u6790","title":"1 electron-vue \u7684\u4f7f\u7528"},{"location":"NodeJS/Electron/#2-electron-vue-sasselementui","text":"1. electron-vue UI \u6846\u67b6 ElementUi \u7684\u4f7f\u7528 http://element-cn.eleme.io/#/zh-CN 2. electron-vue \u4e2d\u4f7f\u7528 sass electron-vue \u4e2d\u4f7f\u7528 sass # \u5b89\u88c5 sass - loader : npm install -- save - dev sass - loader node - sass <!-- vue \u6587\u4ef6\u4e2d\u4fee\u6539 style \u4e3a\u5982\u4e0b\u4ee3\u7801 :--> < style lang = \"scss\" > $ body { /* SCSS */ $ } < /style>","title":"2 electron-vue \u4e2d\u4f7f\u7528 sass/ElementUi"},{"location":"NodeJS/Electron/#3-electron-vue","text":"electron-vue \u4e2d\u9690\u85cf\u9876\u90e8\u83dc\u5355\u9690\u85cf\u9876\u90e8\u6700\u5927\u5316\u3001\u6700\u5c0f\u5316\u3001\u5173\u95ed\u6309\u94ae \u81ea\u5b9a\u6700\u5927\u5316\u3001\u6700\u5c0f\u5316 \u3001\u5173\u95ed\u6309\u94ae 1. electron-vue \u4e2d\u9690\u85cf\u9876\u90e8\u83dc\u5355 // src/main/index.js mainWindow . setMenu ( null ) 2. electron-vue \u4e2d\u9690\u85cf\u5173\u95ed \u6700\u5927\u5316 \u6700\u5c0f\u5316\u6309\u94ae // src/main/index.js mainWindow = new BrowserWindow ({ height : 620 , useContentSize : true , width : 1280 , frame : false /*\u53bb\u6389\u9876\u90e8\u5bfc\u822a \u53bb\u6389\u5173\u95ed\u6309\u94ae \u6700\u5927\u5316\u6700\u5c0f\u5316\u6309\u94ae*/ }) 3 .electron-vue \u81ea\u5b9a\u4e49\u5173\u95ed/\u6700\u5927\u5316\u6700\u5c0f\u5316\u6309\u94ae // \u6ce8\u610f\u5728mac\u4e0b\u4e0d\u9700\u8981\u76d1\u542c\u7a97\u53e3\u6700\u5927\u6700\u5c0f\u5316\u3001\u4ee5\u4e3a\u7cfb\u7edf\u9ed8\u8ba4\u652f\u6301\uff0c\u8fd9\u4e2a\u53ea\u662f\u9488\u5bf9windows\u5e73\u53f0 ipc . on ( 'window-min' , function () { mainWindow . minimize (); }) //\u767b\u5f55\u7a97\u53e3\u6700\u5927\u5316$ ipc . on ( 'window-max' , function (){ if ( mainWindow . isMaximized ()) { mainWindow . restore (); } else { mainWindow . maximize (); } }) $ ipc . on ( 'window-close' , function () { mainWindow . close (); }) 4. electron-vue \u81ea\u5b9a\u4e49\u5bfc\u822a\u53ef\u62d6\u62fd \u53ef\u62d6\u62fd\u7684 css : -webkit-app-region: drag; \u4e0d\u53ef\u62d6\u62fd\u7684 css : -webkit-app-region: no-drag;","title":"3 electron-vue \u4e2d\u9690\u85cf\u9876\u90e8\u83dc\u5355\u9690\u85cf"},{"location":"NodeJS/Electron/#4-electron-vue","text":"","title":"4 \u4f7f\u7528electron-vue\u5f00\u53d1\u8206\u60c5\u76d1\u63a7\u7cfb\u7edf"},{"location":"NodeJS/Electron/#_7","text":"electron\u5b98\u65b9\u6587\u6863 Electron\u6784\u5efa\u8de8\u5e73\u53f0\u5e94\u7528mac/windows/linux electron\u5b66\u4e60\u8d44\u6599\u6574\u7406","title":"\u5341\u56db\u3001\u66f4\u591a\u53c2\u8003"},{"location":"NodeJS/Node.js/","text":"\u4e00\u3001Node.js\u7b80\u4ecb \u00b6 Node.js \u662f\u4e00\u4e2a\u57fa\u4e8e Chrome V8 \u5f15\u64ce\u7684 JavaScript \u8fd0\u884c\u73af\u5883\u3002\u4f7f\u7528\u4e86\u4e00\u4e2a\u4e8b\u4ef6\u9a71\u52a8\u3001\u975e\u963b\u585e\u5f0f I/O \u7684\u6a21\u578b\uff0c\u4f7f\u5176\u8f7b\u91cf\u53c8\u9ad8\u6548\u3002\u4e8e2009\u5e74\u7531Google Brain\u56e2\u961f\u7684\u8f6f\u4ef6\u5de5\u7a0b\u5e08Ryan Dahl\u53d1\u8d77\u521b\u5efa\uff0c2015\u5e74\u540e\u6b63\u5f0f\u88ab NodeJS\u57fa\u91d1\u4f1a \u63a5\u7ba1\u3002 NodeJS \u67b6\u6784 \u00b6 Node\u4f7f\u7528\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\uff0c\u5f53web server\u63a5\u6536\u5230\u8bf7\u6c42\uff0c\u5c31\u628a\u5b83\u5173\u95ed\u7136\u540e\u8fdb\u884c\u5904\u7406\uff0c\u7136\u540e\u53bb\u670d\u52a1\u4e0b\u4e00\u4e2aweb\u8bf7\u6c42\u3002 \u5f53\u8fd9\u4e2a\u8bf7\u6c42\u5b8c\u6210\uff0c\u5b83\u88ab\u653e\u56de\u5904\u7406\u961f\u5217\uff0c\u5f53\u5230\u8fbe\u961f\u5217\u5f00\u5934\uff0c\u8fd9\u4e2a\u7ed3\u679c\u88ab\u8fd4\u56de\u7ed9\u7528\u6237\u3002 \u8fd9\u4e2a\u6a21\u578b\u975e\u5e38\u9ad8\u6548\u53ef\u6269\u5c55\u6027\u975e\u5e38\u5f3a\uff0c\u56e0\u4e3a webserver \u4e00\u76f4\u63a5\u53d7\u8bf7\u6c42\u800c\u4e0d\u7b49\u5f85\u4efb\u4f55\u8bfb\u5199\u64cd\u4f5c\u3002\uff08\u8fd9\u4e5f\u79f0\u4e4b\u4e3a\u975e\u963b\u585e\u5f0fIO\u6216\u8005\u4e8b\u4ef6\u9a71\u52a8IO\uff09\u3002\u5728\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\u4e2d\uff0c\u4f1a\u751f\u6210\u4e00\u4e2a\u4e3b\u5faa\u73af\u6765\u76d1\u542c\u4e8b\u4ef6\uff0c\u5f53\u68c0\u6d4b\u5230\u4e8b\u4ef6\u65f6\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u3002 \u76f8\u5173\u8d44\u6e90 \u00b6 Node.js\u5b98\u7f51\uff1a https://nodejs.org/zh-cn/ \u7248\u672c\u7ba1\u7406\u5de5\u5177nvm\uff1a https://github.com/nvm-sh/nvm \u5305\u7ba1\u7406\u5de5\u5177npm\uff1a https://www.npmjs.com/ npm\u4e2d\u6587\u6587\u6863\uff1a https://www.npmjs.cn/ \u56fd\u5185\u7684 npm \u955c\u50cf\u6e90\uff1a http://cnpmjs.org/ \u4e2d\u6587\u793e\u533a\uff1a https://cnodejs.org/ \u4e8c\u3001\u5b89\u88c5\u914d\u7f6e \u00b6 \u5efa\u8bae\u4f7f\u7528nvm\u6765\u8fdb\u884cnode\u7248\u672c\u7ba1\u7406\uff0c\u5b83\u4f1a\u5b89\u88c5\u76f8\u5e94\u7248\u672c\u7684npm\u3002 \u5b89\u88c5nvm\u53caNode.js \u00b6 nvm\u5168\u540dnode.js version management\uff0c\u987e\u540d\u601d\u4e49\u662f\u4e00\u4e2anodejs\u7684\u7248\u672c\u7ba1\u7406\u5de5\u5177\u3002\u901a\u8fc7\u5b83\u53ef\u4ee5\u5b89\u88c5\u548c\u5207\u6362\u4e0d\u540c\u7248\u672c\u7684nodejs\u3002 # \u5b89\u88c5nvm\uff08 \u5347\u7ea7nvm\u91cd\u65b0\u6267\u884c\u6b64\u547d\u4ee4\uff09: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash # \u5217\u51fa\u6240\u6709\u53ef\u4ee5\u5b89\u88c5\u7684node\u7248\u672c\u53f7 nvm ls-remote # \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u53f7\u7684node nvm install v12.4.1 # \u8bbe\u7f6e nodejs \u9ed8\u8ba4\u7248\u672c nvm alias default 12 .4.1 # \u5207\u6362node\u7684\u7248\u672c nvm use v10.15.3 # \u5f53\u524dnode\u7248\u672c nvm current node -v # \u5217\u51fa\u6240\u6709\u5df2\u7ecf\u5b89\u88c5\u7684node\u7248\u672c nvm ls # \u5378\u8f7d\u5df2\u5b89\u88c5\u7684node\u7248\u672c nvm uninstall v6.9.5 npm \u00b6 npm \u662f\u4e16\u754c\u4e0a\u6700\u5927\u7684\u8f6f\u4ef6\u6ce8\u518c\u4e2d\u5fc3\uff0c\u968f\u540cNodeJS\u4e00\u8d77\u5b89\u88c5\uff0c\u6765\u81ea\u5168\u7403\u5404\u5730\u7684\u5f00\u6e90\u5f00\u53d1\u4eba\u5458\u4f7f\u7528 npm \u6765\u5171\u4eab\u548c\u590d\u7528\u8f6f\u4ef6\u5305\u3002npm \u7531\u4e09\u4e2a\u72ec\u7acb\u7684\u90e8\u5206\u7ec4\u6210\uff1a \u7f51\u7ad9\uff1a https://npmjs.com \u662f\u5f00\u53d1\u8005\u67e5\u627e\u5305\uff08package\uff09\u3001\u8bbe\u7f6e\u53c2\u6570\u4ee5\u53ca\u7ba1\u7406 npm \u4f7f\u7528\u4f53\u9a8c\u7684\u4e3b\u8981\u9014\u5f84\u3002 \u6ce8\u518c\u8868\uff08registry\uff09\uff1a\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6570\u636e\u5e93\uff0c\u4fdd\u5b58\u4e86\u6bcf\u4e2a\u5305\uff08package\uff09\u7684\u4fe1\u606f\u3002 \u547d\u4ee4\u884c\u5de5\u5177 (CLI)\uff1a\u901a\u8fc7\u547d\u4ee4\u884c\u6216\u7ec8\u7aef\u8fd0\u884c\u3002\u5f00\u53d1\u8005\u901a\u8fc7 CLI \u4e0e npm \u6253\u4ea4\u9053\u3002 # \u67e5\u770b npm \u7248\u672c npm -v # \u66f4\u65b0npm\u7248\u672c npm install npm@latest -g # \u641c\u7d22\u6a21\u5757 npm search hexo # \u5b89\u88c5\u4f9d\u8d56\u5305 npm install <Module Name> npm install hexo # \u672c\u5730\u5b89\u88c5 hexo npm install hexo -g # \u5168\u5c40\u5b89\u88c5 hexo # \u67e5\u770b\u6240\u6709\u5168\u5c40\u5b89\u88c5\u7684\u6a21\u5757 npm list -g # \u67e5\u770b\u67d0\u4e2a\u6a21\u5757 npm list hexo # \u5378\u8f7d\u6a21\u5757 npm uninstall hexo # \u5378\u8f7d\u540e\uff0c\u67e5\u770b\u5305\u662f\u5426\u8fd8\u5b58\u5728 npm ls # \u66f4\u65b0\u67d0\u4e2a\u6a21\u5757 npm update hexo # \u521b\u5efa\u6a21\u5757 npm init \u6bcf\u4e2a\u7248\u672c\u7684 Node \u90fd\u81ea\u5e26\u4e00\u4e2a\u4e0d\u540c\u7248\u672c\u7684 npm\uff0c\u53ef\u4ee5\u7528 npm -v \u6765\u67e5\u770b npm \u7684\u7248\u672c\u3002\u5168\u5c40\u5b89\u88c5\u7684 npm \u5305\u5e76\u4e0d\u4f1a\u5728\u4e0d\u540c\u7684 Node \u73af\u5883\u4e2d\u5171\u4eab\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u5f15\u8d77\u517c\u5bb9\u95ee\u9898\u3002\u5b83\u4eec\u88ab\u653e\u5728\u4e86\u4e0d\u540c\u7248\u672c\u7684\u76ee\u5f55\u4e0b\uff0c\u4f8b\u5982 ~/.nvm/versions/node/${version}/lib/node_modules \u8fd9\u6837\u7684\u76ee\u5f55\u3002 \u8fd0\u884c\u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\uff0c\u53ef\u4ee5\u4ece\u7279\u5b9a\u7248\u672c\u5bfc\u5165\u4e4b\u524d\u5b89\u88c5\u8fc7\u7684 npm \u5305\u5230\u6211\u4eec\u5c06\u8981\u5b89\u88c5\u7684\u65b0\u7248\u672c Node \u4e2d\uff1a nvm install v12.16.1 --reinstall-packages-from = v10.15.3 \u4e09\u3001Node\u7279\u70b9 \u00b6 \u5f02\u6b65I/O \u00b6 \u5728Node\u4e2d\uff0c\u7edd\u5927\u591a\u6570\u7684\u64cd\u4f5c\u90fd\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u8fdb\u884c\u8c03\u7528\u3002\u5728\u5e95\u5c42\u6784\u5efa\u4e86\u5f88\u591a\u5f02\u6b65I/O\u7684API\uff0c\u4ece\u6587\u4ef6\u8bfb\u53d6\u5230\u7f51\u7edc\u8bf7\u6c42\u7b49\uff0c\u5747\u662f\u5982\u6b64\u3002\u8fd9\u6837\u7684\u610f\u4e49\u5728\u4e8e\uff0c\u5728Node\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u8bed\u8a00\u5c42\u9762\u5f88\u81ea\u7136\u5730\u8fdb\u884c\u5e76\u884cI/O\u64cd\u4f5c\u3002\u6bcf\u4e2a\u8c03\u7528\u4e4b\u95f4\u65e0\u987b\u7b49\u5f85\u4e4b\u524d\u7684I/O\u8c03\u7528\u7ed3\u675f\u3002\u5728\u7f16\u7a0b\u6a21\u578b\u4e0a\u53ef\u4ee5\u6781\u5927\u63d0\u5347\u6548\u7387\u3002 \u4e0b\u9762\u7684\u4e24\u4e2a\u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1\u7684\u8017\u65f6\u53d6\u51b3\u4e8e\u6700\u6162\u7684\u90a3\u4e2a\u6587\u4ef6\u8bfb\u53d6\u7684\u8017\u65f6\uff1a fs . readFile ( '/path1' , function ( err , file ) { console . log ( '\u8bfb\u53d6\u6587\u4ef61\u5b8c\u6210' ); }); fs . readFile ( '/path2' , function ( err , file ) { console . log ( '\u8bfb\u53d6\u6587\u4ef62\u5b8c\u6210' ); }); \u800c\u5bf9\u4e8e\u540c\u6b65I/O\u800c\u8a00\uff0c\u5b83\u4eec\u7684\u8017\u65f6\u662f\u4e24\u4e2a\u4efb\u52a1\u7684\u8017\u65f6\u4e4b\u548c\u3002\u8fd9\u91cc\u5f02\u6b65\u5e26\u6765\u7684\u4f18\u52bf\u662f\u663e\u800c\u6613\u89c1\u7684\u3002 \u4e8b\u4ef6\u4e0e\u56de\u8c03\u51fd\u6570 \u00b6 \u5728JavaScript\u4e2d\uff0c\u51fd\u6570\u88ab\u4f5c\u4e3a\u7b2c\u4e00\u7b49\u516c\u6c11\u6765\u5bf9\u5f85\uff0c\u53ef\u4ee5\u5c06\u51fd\u6570\u4f5c\u4e3a\u5bf9\u8c61\u4f20\u9012\u7ed9\u65b9\u6cd5\u4f5c\u4e3a\u5b9e\u53c2\u8fdb\u884c\u8c03\u7528\u3002Node\u5c06\u524d\u7aef\u6d4f\u89c8\u5668\u4e2d\u5e94\u7528\u5e7f\u6cdb\u4e14\u6210\u719f\u7684\u4e8b\u4ef6\u5f15\u5165\u540e\u7aef\uff0c\u914d\u5408\u5f02\u6b65I/O\uff0c\u5c06\u4e8b\u4ef6\u70b9\u66b4\u9732\u7ed9\u4e1a\u52a1\u903b\u8f91\u3002 \u4e0b\u9762\u7684\u4f8b\u5b50\u5c55\u793a\u7684\u662fAjax\u5f02\u6b65\u63d0\u4ea4\u7684\u670d\u52a1\u5668\u7aef\u5904\u7406\u8fc7\u7a0b\u3002Node\u521b\u5efa\u4e00\u4e2aWeb\u670d\u52a1\u5668\uff0c\u5e76\u4fa6\u542c8080\u7aef\u53e3\u3002\u5bf9\u4e8e\u670d\u52a1\u5668\uff0c\u6211\u4eec\u4e3a\u5176\u7ed1\u5b9a\u4e86request\u4e8b\u4ef6\uff0c\u5bf9\u4e8e\u8bf7\u6c42\u5bf9\u8c61\uff0c\u6211\u4eec\u4e3a\u5176\u7ed1\u5b9a\u4e86data\u4e8b\u4ef6\u548cend\u4e8b\u4ef6\uff1a var http = require ( 'http' ); var quertstring = require ( 'querystring' ); http . createServer ( function ( req , res ){ var postData = '' ; req . setEncoding ( 'utf8' ); // \u76d1\u542c\u8bf7\u6c42\u7684data\u4e8b\u4ef6 req . on ( 'data' , function ( chunk ){ postData += chunk ; }); // \u76d1\u542c\u8bf7\u6c42\u7684end\u4e8b\u4ef6 req . on ( 'end' , function (){ res . end ( postData ); }); }). listen ( 8080 ); console . log ( '\u670d\u52a1\u5668\u542f\u52a8\u5b8c\u6210\uff0c\u76d1\u542c\u7aef\u53e3\uff1a8080' ) \u76f8\u5e94\u5730\uff0c\u6211\u4eec\u5728\u524d\u7aef\u4e3aAjax\u8bf7\u6c42\u7ed1\u5b9a\u4e86success\u4e8b\u4ef6\uff0c\u5728\u53d1\u51fa\u8bf7\u6c42\u540e\uff0c\u53ea\u9700\u5173\u5fc3\u8bf7\u6c42\u6210\u529f\u65f6\u6267\u884c\u76f8\u5e94\u7684\u4e1a\u52a1\u903b\u8f91\u5373\u53ef\uff0c\u76f8\u5173\u4ee3\u7801\u5982\u4e0b\uff1a $ . ajax ({ 'url' : '/url' , 'method' : 'POST' , 'data' : {}, 'success' : function ( data ) { // success\u4e8b\u4ef6 } }); \u4e0e\u5176\u4ed6\u7684Web\u540e\u7aef\u7f16\u7a0b\u8bed\u8a00\u76f8\u6bd4\uff0cNode\u9664\u4e86\u5f02\u6b65\u548c\u4e8b\u4ef6\u5916\uff0c\u56de\u8c03\u51fd\u6570\u662f\u4e00\u5927\u7279\u8272\u3002\u7eb5\u89c2\u4e0b\u6765\uff0c\u56de\u8c03\u51fd\u6570\u4e5f\u662f\u6700\u597d\u7684\u63a5\u53d7\u5f02\u6b65\u8c03\u7528\u8fd4\u56de\u6570\u636e\u7684\u65b9\u5f0f\u3002\u4f46\u662f\u8fd9\u79cd\u7f16\u7a0b\u65b9\u5f0f\u5bf9\u4e8e\u5f88\u591a\u4e60\u60ef\u540c\u6b65\u601d\u8def\u7f16\u7a0b\u7684\u4eba\u6765\u8bf4\uff0c\u4e5f\u8bb8\u662f\u5341\u5206\u4e0d\u4e60\u60ef\u7684\u3002\u4ee3\u7801\u7684\u7f16\u5199\u987a\u5e8f\u4e0e\u6267\u884c\u987a\u5e8f\u5e76\u65e0\u5173\u7cfb\uff0c\u8fd9\u5bf9\u4ed6\u4eec\u53ef\u80fd\u9020\u6210\u9605\u8bfb\u4e0a\u7684\u969c\u788d\u3002 \u5355\u7ebf\u7a0b \u00b6 Node\u4fdd\u6301\u4e86JavaScript\u5728\u6d4f\u89c8\u5668\u4e2d\u5355\u7ebf\u7a0b\u7684\u7279\u70b9\u3002\u800c\u4e14\u5728Node\u4e2d\uff0cJavaScript\u4e0e\u5176\u4f59\u7ebf\u7a0b\u662f\u65e0\u6cd5\u5171\u4eab\u4efb\u4f55\u72b6\u6001\u7684\u3002\u5355\u7ebf\u7a0b\u7684\u6700\u5927\u597d\u5904\u662f\u4e0d\u7528\u50cf\u591a\u7ebf\u7a0b\u7f16\u7a0b\u90a3\u6837\u5904\u5904\u5728\u610f\u72b6\u6001\u7684\u540c\u6b65\u95ee\u9898\uff0c\u8fd9\u91cc\u6ca1\u6709\u6b7b\u9501\u7684\u5b58\u5728\uff0c\u4e5f\u6ca1\u6709\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u4ea4\u6362\u6240\u5e26\u6765\u7684\u6027\u80fd\u4e0a\u7684\u5f00\u9500\u3002 \u540c\u6837\uff0c\u5355\u7ebf\u7a0b\u4e5f\u6709\u5b83\u81ea\u8eab\u7684\u5f31\u70b9\u3002Node\u91c7\u7528\u4e86\u4e0eWeb Workers\u76f8\u540c\u7684\u601d\u8def\u6765\u89e3\u51b3\u5355\u7ebf\u7a0b\u4e2d\u5927\u8ba1\u7b97\u91cf\u7684\u95ee\u9898\uff1a child_process \u3002\u5b50\u8fdb\u7a0b\u7684\u51fa\u73b0\uff0c\u610f\u5473\u7740Node\u53ef\u4ee5\u4ece\u5bb9\u5730\u5e94\u5bf9\u5355\u7ebf\u7a0b\u5728\u5065\u58ee\u6027\u548c\u65e0\u6cd5\u5229\u7528\u591a\u6838CPU\u65b9\u9762\u7684\u95ee\u9898\u3002 \u64c5\u957fI/O\u5bc6\u96c6\u578b\u7684\u5e94\u7528 \u00b6 \u901a\u5e38\uff0c\u8bf4Node\u64c5\u957fI/O\u5bc6\u96c6\u578b\u7684\u5e94\u7528\u573a\u666f\u57fa\u672c\u4e0a\u662f\u6ca1\u4eba\u53cd\u5bf9\u7684\u3002Node\u9762\u5411\u7f51\u7edc\u4e14\u64c5\u957f\u5e76\u884cI/O\uff0c\u80fd\u591f\u6709\u6548\u5730\u7ec4\u7ec7\u8d77\u66f4\u591a\u7684\u786c\u4ef6\u8d44\u6e90\uff0c\u4ece\u800c\u63d0\u4f9b\u66f4\u591a\u597d\u7684\u670d\u52a1\u3002I/O\u5bc6\u96c6\u7684\u4f18\u52bf\u4e3b\u8981\u5728\u4e8eNode\u5229\u7528\u4e8b\u4ef6\u5faa\u73af\u7684\u5904\u7406\u80fd\u529b\uff0c\u800c\u4e0d\u662f\u542f\u52a8\u6bcf\u4e00\u4e2a\u7ebf\u7a0b\u4e3a\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u670d\u52a1\uff0c\u8d44\u6e90\u5360\u7528\u6781\u5c11\u3002 \u6027\u80fd\u4e0d\u4fd7 \u00b6 CPU\u5bc6\u96c6\u578b\u5e94\u7528\u7ed9Node\u5e26\u6765\u7684\u6311\u6218\u4e3b\u8981\u662f\uff1a\u7531\u4e8eJavaScript\u5355\u7ebf\u7a0b\u7684\u539f\u56e0\uff0c\u5982\u679c\u6709\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u8ba1\u7b97\uff08\u6bd4\u5982\u5927\u5faa\u73af\uff09\uff0c\u5c06\u4f1a\u5bfc\u81f4CPU\u65f6\u95f4\u7247\u4e0d\u80fd\u91ca\u653e\uff0c\u4f7f\u5f97\u540e\u7eedI/O\u65e0\u6cd5\u53d1\u8d77\u3002\u4f46\u662f\u9002\u5f53\u8c03\u6574\u548c\u5206\u89e3\u5927\u578b\u8fd0\u7b97\u4efb\u52a1\u4e3a\u591a\u4e2a\u5c0f\u4efb\u52a1\uff0c\u4f7f\u5f97\u8fd0\u7b97\u80fd\u591f\u9002\u65f6\u91ca\u653e\uff0c\u4e0d\u963b\u585eI/O\u8c03\u7528\u7684\u53d1\u8d77\uff0c\u8fd9\u6837\u65e2\u53ef\u540c\u65f6\u4eab\u53d7\u5230\u5e76\u884c\u5f02\u6b65I/O\u7684\u597d\u5904\uff0c\u53c8\u80fd\u5145\u5206\u5229\u7528CPU\uff0cI/O\u963b\u585e\u9020\u6210\u7684\u6027\u80fd\u6d6a\u8d39\u8fdc\u6bd4CPU\u7684\u5f71\u54cd\u5c0f\u3002 \u56db\u3001Node.js\u5e38\u7528\u6a21\u5757 \u00b6 \u66f4\u591a\u6a21\u5757\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u53ef\u67e5\u9605\u5b98\u65b9\u6587\u6863: https://nodejs.org/api/ Global\u6a21\u5757 \u00b6 \u6d4f\u89c8\u5668JavaScript\u5f53\u4e2dwindow\u662f\u5168\u5c40\u5bf9\u8c61\uff0cNodeJS\u4e2d\u5168\u5c40\u5bf9\u8c61\u662fglobal\uff0cglobal\u6700\u6839\u672c\u7684\u4f5c\u7528\u662f\u4f5c\u4e3a\u5168\u5c40\u53d8\u91cf\u7684\u5bbf\u4e3b\uff08\u5373\u6240\u6709\u7684\u5168\u5c40\u53d8\u91cf\u90fd\u662fglobal\u5bf9\u8c61\u7684\u5c5e\u6027\uff09\uff0c\u56e0\u6b64\u5728\u6240\u6709\u6a21\u5757\u4e2d\u90fd\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u800c\u65e0\u9700\u5305\u542b\u3002 Process\u6a21\u5757 \u00b6 process\u662f\u5168\u5c40\u53d8\u91cf(\u5373global\u5bf9\u8c61\u7684\u5c5e\u6027)\uff0c\u7528\u4e8e\u63cf\u8ff0\u5f53\u524dNodeJS\u8fdb\u7a0b\u72b6\u6001\u3002 Console\u6a21\u5757 \u00b6 console\u7528\u4e8e\u63d0\u4f9b\u63a7\u5236\u53f0\u6807\u51c6\u8f93\u51fa\u3002 console.log() \uff1a\u5411\u6807\u51c6\u8f93\u51fa\u6d41\u6253\u5370\u5b57\u7b26\u5e76\u4ee5\u6362\u884c\u7b26\u7ed3\u675f( \u5982\u679c\u53ea\u67091\u4e2a\u53c2\u6570\uff0c\u5219\u8f93\u51fa\u8be5\u53c2\u6570\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f\uff1b\u5982\u679c\u67092\u4e2a\u53c2\u6570\uff0c\u5219\u4ee5\u7c7b\u4f3c\u4e8eC\u8bed\u8a00 printf() \u7684\u683c\u5f0f\u5316\u8f93\u51fa )\u3002 console.error() \uff1a\u4e0e console.log() \u7684\u7528\u6cd5\u76f8\u540c\uff0c\u53ea\u662f\u5411\u6807\u51c6\u9519\u8bef\u6d41\u8fdb\u884c\u8f93\u51fa\u3002 console.trace() \uff1a\u5411\u6807\u51c6\u9519\u8bef\u6d41\u8f93\u51fa\u5f53\u524d\u7684\u8c03\u7528\u6808: $ node app.js Trace at Object.<anonymous> ( /workspace/app.js:1:71 ) at Module._compile ( module.js:643:30 ) at Object.Module._extensions..js ( module.js:654:10 ) at Module.load ( module.js:556:32 ) at tryModuleLoad ( module.js:499:12 ) at Function.Module._load ( module.js:491:3 ) at Function.Module.runMain ( module.js:684:10 ) at startup ( bootstrap_node.js:187:16 ) at bootstrap_node.js:608:3 Util\u6a21\u5757 \u00b6 util\u63d0\u4f9b\u5e38\u7528\u51fd\u6570\u96c6\u5408\uff0c\u7528\u4e8e\u5f25\u8865\u6838\u5fc3JavaScript\u529f\u80fd\u65b9\u9762\u7684\u4e0d\u8db3\u3002 Events\u6a21\u5757 \u00b6 events \u662fNodeJS\u6700\u91cd\u8981\u7684\u6a21\u5757\uff0c\u56e0\u4e3aNodeJS\u672c\u8eab\u5c31\u662f\u57fa\u4e8e\u4e8b\u4ef6\u5f0f\u7684\u67b6\u6784\uff0c\u8be5\u6a21\u5757\u63d0\u4f9b\u4e86\u552f\u4e00\u63a5\u53e3\uff0c\u6240\u4ee5\u582a\u79f0NodeJS\u4e8b\u4ef6\u7f16\u7a0b\u7684\u57fa\u77f3\u3002 events \u6a21\u5757\u4e0d\u4ec5\u7528\u4e8e\u4e0e\u4e0b\u5c42\u7684\u4e8b\u4ef6\u5faa\u73af\u4ea4\u4e92\uff0c\u8fd8\u51e0\u4e4e\u88ab\u6240\u6709\u7684\u6a21\u5757\u6240\u4f9d\u8d56\u3002 events \u6a21\u5757\u53ea\u63d0\u4f9b1\u4e2a events.EventEmitter \u5bf9\u8c61\uff0c EventEmitter \u5bf9\u8c61\u5c01\u88c5\u4e86\u4e8b\u4ef6\u53d1\u5c04\u548c\u4e8b\u4ef6\u76d1\u542c\u5668\u3002\u6bcf\u4e2a EventEmitter \u4e8b\u4ef6\u75311\u4e2a\u4e8b\u4ef6\u540d\u548c\u82e5\u5e72\u53c2\u6570\u7ec4\u6210\uff0c\u4e8b\u4ef6\u540d\u662f1\u4e2a\u5b57\u7b26\u4e32\u3002 EventEmitter \u5bf9\u6bcf\u4e2a\u4e8b\u4ef6\u652f\u6301\u82e5\u5e72\u76d1\u542c\u5668\uff0c\u4e8b\u4ef6\u53d1\u5c04\u65f6\uff0c\u6ce8\u518c\u81f3\u8be5\u4e8b\u4ef6\u7684\u76d1\u542c\u5668\u4f9d\u6b21\u88ab\u8c03\u7528\uff0c\u4e8b\u4ef6\u53c2\u6570\u5c06\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\u53c2\u6570\u4f20\u9012\u3002 \u4e0b\u9762\u4f8b\u5b50\u4e2d\uff0c emitter \u4e3a\u4e8b\u4ef6 targetEvent \u6ce8\u518c2\u4e2a\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u7136\u540e\u53d1\u5c04 targetEvent \u4e8b\u4ef6\uff0c\u7ed3\u679c2\u4e2a\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u56de\u8c03\u51fd\u6570\u88ab\u4f9d\u6b21\u5148\u540e\u8c03\u7528\u3002 var events = require ( \"events\" ); var emitter = new events . EventEmitter (); emitter . on ( \"targetEvent\" , function ( arg1 , arg2 ) { console . log ( \"listener1\" , arg1 , arg2 ); }); emitter . on ( \"targetEvent\" , function ( arg1 , arg2 ) { console . log ( \"listener2\" , arg1 , arg2 ); }); emitter . emit ( \"targetEvent\" , \"Hank\" , 2018 ); $ node app.js listener1 Hank 2018 listener2 Hank 2018 EventEmitter\u5e38\u7528API EventEmitter.on(event, listener) \uff1a\u4e3a\u6307\u5b9a\u4e8b\u4ef6\u6ce8\u518c\u76d1\u542c\u5668\uff0c\u63a5\u53d71\u4e2a\u5b57\u7b26\u4e32\u4e8b\u4ef6\u540devent\u548c1\u4e2a\u56de\u8c03\u51fd\u6570listener\u3002 EventEmitter.emit(event,[arg1],[arg2],[...]) \uff1a\u53d1\u5c04event\u4e8b\u4ef6\uff0c\u4f20\u9012\u82e5\u5e72\u53ef\u9009\u53c2\u6570\u5230\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u53c2\u6570\u5217\u8868\u3002 EventEmitter.once(event, listener) \uff1a\u4e3a\u6307\u5b9a\u4e8b\u4ef6\u6ce8\u518c1\u4e2a\u5355\u6b21\u76d1\u542c\u5668\uff0c\u5373\u8be5\u76d1\u542c\u5668\u6700\u591a\u53ea\u4f1a\u89e6\u53d1\u4e00\u6b21\uff0c\u89e6\u53d1\u540e\u7acb\u523b\u89e3\u9664\u3002 EventEmitter.removeListener(event, listener) \uff1a\u79fb\u9664\u6307\u5b9a\u4e8b\u4ef6\u7684\u67d0\u4e2a\u76d1\u542c\u5668\uff0clistener\u5fc5\u987b\u662f\u8be5\u4e8b\u4ef6\u5df2\u7ecf\u6ce8\u518c\u8fc7\u7684\u76d1\u542c\u5668\u3002 EventEmitter.removeAllListeners([event]) \uff1a\u79fb\u9664\u6240\u6709\u4e8b\u4ef6\u7684\u6240\u6709\u76d1\u542c\u5668\uff0c\u5982\u679c\u6307\u5b9aevent\uff0c\u5219\u79fb\u9664\u6307\u5b9a\u4e8b\u4ef6\u7684\u6240\u6709\u76d1\u542c\u5668\u3002 File System\u6a21\u5757 \u00b6 fs \u6a21\u5757\u5c01\u88c5\u4e86\u6587\u4ef6\u64cd\u4f5c\uff0c\u63d0\u4f9b\u4e86\u6587\u4ef6\u8bfb\u53d6\u3001\u5199\u5165\u3001\u66f4\u540d\u3001\u5220\u9664\u3001\u904d\u5386\u3001\u94fe\u63a5\u7b49POSIX\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\uff0c\u8be5\u6a21\u5757\u4e2d\u6240\u6709\u64cd\u4f5c\u90fd\u63d0\u4f9b\u4e86\u5f02\u6b65\u548c\u540c\u6b652\u4e2a\u7248\u672c\u3002 fs.readFile(filename,[encoding],[callback(err,data)]) \u7528\u4e8e\u8bfb\u53d6\u6587\u4ef6\uff0c\u7b2c1\u4e2a\u53c2\u6570 filename \u8868\u793a\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u540d\u3002\u7b2c2\u4e2a\u53c2\u6570 encoding \u8868\u793a\u6587\u4ef6\u7684\u5b57\u7b26\u7f16\u7801\uff0c\u7b2c3\u4e2a\u53c2\u6570 callback \u662f\u56de\u8c03\u51fd\u6570\uff0c\u7528\u4e8e\u63a5\u6536\u6587\u4ef6\u5185\u5bb9\u3002 \u56de\u8c03\u51fd\u6570\u63d0\u4f9b err \u548c data \u4e24\u4e2a\u53c2\u6570\uff0c err \u8868\u793a\u6709\u65e0\u9519\u8bef\u53d1\u751f\uff0c data \u662f\u6587\u4ef6\u5185\u5bb9\u3002\u5982\u679c\u6307\u5b9a encoding \uff0c data \u5c06\u662f1\u4e2a\u89e3\u6790\u540e\u7684\u5b57\u7b26\u4e32\uff0c\u5426\u5219 data \u5c06\u4f1a\u662f\u4ee5 Buffe r`\u5f62\u5f0f\u8868\u793a\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002 fs.readFileSync() NodeJS\u63d0\u4f9b\u7684 fs.readFileSync() \u51fd\u6570\u662f readFile() \u7684\u540c\u6b65\u7248\u672c\uff0c\u4e24\u8005\u63a5\u53d7\u7684\u53c2\u6570\u76f8\u540c\uff0c\u8bfb\u53d6\u5230\u7684\u6587\u4ef6\u5185\u5bb9\u4f1a\u4ee5\u51fd\u6570\u8fd4\u56de\u503c\u5f62\u5f0f\u8fd4\u56de\u3002\u5982\u679c\u6709\u9519\u8bef\u53d1\u751f fs \u5c06\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u9700\u8981\u4f7f\u7528 try...catch \u6355\u6349\u5e76\u5904\u7406\u5f02\u5e38\u3002 \u4e0e\u540c\u6b65I/O\u51fd\u6570\u4e0d\u540c\uff0cNodeJS\u4e2d\u5f02\u6b65\u51fd\u6570\u5927\u591a\u6ca1\u6709\u8fd4\u56de\u503c\u3002 fs.open() fs.open(path,flags,[mode],[callback(err,fd)]) \u5c01\u88c5\u4e86POSIX\u7684 open() \u51fd\u6570\uff0c\u4e0eC\u8bed\u8a00\u6807\u51c6\u5e93\u4e2d fopen() \u51fd\u6570\u7c7b\u4f3c\u3002\u8be5\u51fd\u6570\u63a5\u53d72\u4e2a\u5fc5\u9009\u53c2\u6570\uff0c\u7b2c1\u4e2a\u53c2\u6570 path \u4e3a\u6587\u4ef6\u8def\u5f84\uff0c\u7b2c2\u4e2a\u53c2\u6570 flags \u4ee3\u8868\u6587\u4ef6\u6253\u5f00\u6a21\u5f0f\uff0c\u7b2c3\u4e2a\u53c2\u6570 mode \u7528\u4e8e\u521b\u5efa\u6587\u4ef6\u65f6\u7ed9\u6587\u4ef6\u6307\u5b9a\u6743\u9650\uff08 \u9ed8\u8ba40666 \uff09\uff0c\u7b2c4\u4e2a\u53c2\u6570\u662f \u56de\u8c03\u51fd\u6570 \uff0c\u51fd\u6570\u4e2d\u9700\u8981\u4f20\u9012\u6587\u4ef6\u63cf\u8ff0\u7b26 fd \u3002 fs.read() fs.read(fd,buffer,offset,length,position,[callback(err,bytesRead,buffer)]) \u5c01\u88c5\u4e86POSIX\u7684read\u51fd\u6570\uff0c\u76f8\u6bd4 fs.readFile() \u63d0\u4f9b\u4e86\u66f4\u5e95\u5c42\u7684\u63a5\u53e3\u3002 fs.read() \u7684\u529f\u80fd\u662f\u4ece\u6307\u5b9a\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26fd\u4e2d\u8bfb\u53d6\u6570\u636e\u5e76\u5199\u5165 buffer \u6307\u5411\u7684\u7f13\u51b2\u533a\u5bf9\u8c61\u3002 offset \u662f buffer \u7684\u5199\u5165\u504f\u79fb\u91cf\u3002 length \u662f\u8981\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u7684\u5b57\u8282\u6570\u3002 position \u662f\u6587\u4ef6\u8bfb\u53d6\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u5982\u679c position \u7684\u503c\u4e3a null \uff0c\u5219\u4f1a\u4ece\u5f53\u524d\u6587\u4ef6\u6307\u9488\u7684\u4f4d\u7f6e\u8bfb\u53d6\u3002\u56de\u8c03\u51fd\u6570\u4f20\u9012 bytesRead \u548c buffer \uff0c\u5206\u522b\u8868\u793a\u8bfb\u53d6\u7684 \u5b57\u8282\u6570 \u548c \u7f13\u51b2\u533a\u5bf9\u8c61 \u3002 Http\u6a21\u5757 \u00b6 NodeJS\u6807\u51c6\u5e93\u63d0\u4f9b\u7684 http \u6a21\u5757\u5c01\u88c5\u4e86\u4e00\u4e2a\u9ad8\u6548\u7684HTTP\u670d\u52a1\u5668 http.Server \u548c\u4e00\u4e2a\u7b80\u6613\u7684HTTP\u5ba2\u6237\u7aef http.request \u3002 http \u6a21\u5757\u4e2d\u7684HTTP\u670d\u52a1\u5668\u5bf9\u8c61\uff0c\u6838\u5fc3\u7531NodeJS\u5e95\u5c42\u4f9d\u9760C++\u5b9e\u73b0\uff0c\u63a5\u53e3\u4f7f\u7528JavaScript\u5c01\u88c5\uff0c\u517c\u987e\u4e86\u9ad8\u6027\u80fd\u4e0e\u7b80\u6613\u6027\u3002 \u4e94\u3001\u521b\u5efaNode.js\u5e94\u7528 \u00b6 \u4f7f\u7528Node\u521b\u5efahttp\u670d\u52a1\u5668 \u00b6 \u4f7f\u7528 require \u6307\u4ee4\u6765\u8f7d\u5165 http \u6a21\u5757\uff0c\u5e76\u5c06\u5b9e\u4f8b\u5316\u7684 HTTP \u8d4b\u503c\u7ed9\u53d8\u91cf http\uff0c\u5b9e\u4f8b\u5982\u4e0b: var http = require ( \"http\" ); \u4f7f\u7528 http.createServer() \u65b9\u6cd5\u521b\u5efa\u670d\u52a1\u5668\uff0c\u5e76\u4f7f\u7528 listen \u65b9\u6cd5\u7ed1\u5b9a 8888 \u7aef\u53e3\u3002 \u51fd\u6570\u901a\u8fc7 request, response \u53c2\u6570\u6765\u63a5\u6536\u548c\u54cd\u5e94\u6570\u636e\u3002\u5728\u4f60\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u53eb server.js \u7684\u6587\u4ef6\uff0c\u5e76\u5199\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a const http = require ( 'http' ); const hostname = '127.0.0.1' ; const port = 8080 ; const server = http . createServer (( req , res ) => { res . statusCode = 200 ; res . setHeader ( 'Content-Type' , 'text/plain' ); res . end ( 'Hello World' ); }); // \u7ec8\u7aef\u6253\u5370\u5982\u4e0b\u4fe1\u606f server . listen ( port , hostname , () => { console . log ( `Server running at http:// ${ hostname } : ${ port } /` ); }); \u4ee5\u4e0a\u4ee3\u7801\u6211\u4eec\u5b8c\u6210\u4e86\u4e00\u4e2a\u53ef\u4ee5\u5de5\u4f5c\u7684 HTTP \u670d\u52a1\u5668\u3002\u4f7f\u7528 node \u547d\u4ee4\u6267\u884c\u4ee5\u4e0a\u7684\u4ee3\u7801\uff1a node server . js Server running at http : //127.0.0.1:8080/ \u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee http://127.0.0.1:8080/ \uff0c\u4f1a\u770b\u5230\u4e00\u4e2a\u5199\u7740 \"Hello World\"\u7684\u7f51\u9875\u3002 web\u6846\u67b6express\u7b80\u5355\u4f7f\u7528 \u00b6 express \u662f Node\u5e94\u7528\u6700\u5e7f\u6cdb\u7684\u5feb\u901f\u3001\u5f00\u653e\u3001\u6781\u7b80\u4e3b\u4e49 web \u6846\u67b6\uff0c\u73b0\u5728\u662f 4.x \u7248\u672c\u3002\u5b98\u65b9\u63d0\u4f9b\u4e86\u5e94\u7528\u7a0b\u5e8f\u751f\u6210\u5668\u5de5\u5177 express-generator \u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u9aa8\u67b6\u3002\u5b89\u88c5\uff1a npm install express --save npm install express-generator -g \u521b\u5efa\u540d\u79f0\u4e3a ExpressDemo \u7684 Express \u5e94\u7528\u3002\u6b64\u5e94\u7528\u5c06\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 ExpressDemo \u76ee\u5f55\u4e2d\u521b\u5efa\uff0c\u5e76\u4e14\u8bbe\u7f6e\u4e3a\u4f7f\u7528 Pug \u6a21\u677f\u5f15\u64ce\uff1a express --view = pug ExpressDemo create : ExpressDemo/ create : ExpressDemo/public/ create : ExpressDemo/public/javascripts/ create : ExpressDemo/public/images/ create : ExpressDemo/public/stylesheets/ create : ExpressDemo/public/stylesheets/style.css create : ExpressDemo/routes/ create : ExpressDemo/routes/index.js create : ExpressDemo/routes/users.js create : ExpressDemo/views/ create : ExpressDemo/views/error.pug create : ExpressDemo/views/index.pug create : ExpressDemo/views/layout.pug create : ExpressDemo/app.js create : ExpressDemo/package.json create : ExpressDemo/bin/ create : ExpressDemo/bin/www change directory: $ cd ExpressDemo install dependencies: $ npm install run the app: $ DEBUG = expressdemo:* npm start \u6309\u63d0\u793a\u5b89\u88c5\u4f9d\u8d56\u5e76\u542f\u52a8\u3002 cd ExpressDemo npm install DEBUG = expressdemo:* npm start # MacOS \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 http://localhost:3000/ \u5c31\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u5e94\u7528\u4e86\u3002 \u901a\u8fc7\u751f\u6210\u5668\u521b\u5efa\u7684\u5e94\u7528\u4e00\u822c\u90fd\u6709\u5982\u4e0b\u76ee\u5f55\u7ed3\u6784\uff1a tree -I \"node_modules\" . \u251c\u2500\u2500 app.js \u251c\u2500\u2500 bin \u2502 \u2514\u2500\u2500 www \u251c\u2500\u2500 package-lock.json \u251c\u2500\u2500 package.json \u251c\u2500\u2500 public \u2502 \u251c\u2500\u2500 images \u2502 \u251c\u2500\u2500 javascripts \u2502 \u2514\u2500\u2500 stylesheets \u2502 \u2514\u2500\u2500 style.css \u251c\u2500\u2500 routes \u2502 \u251c\u2500\u2500 index.js \u2502 \u2514\u2500\u2500 users.js \u2514\u2500\u2500 views \u251c\u2500\u2500 error.pug \u251c\u2500\u2500 index.pug \u2514\u2500\u2500 layout.pug 7 directories, 10 files \u516d\u3001\u5f02\u6b65\u7f16\u7a0b\u65b9\u6848\uff08Promise & Async\uff09 \u00b6 \u5f02\u6b65\u662fNode\u5f97\u5929\u72ec\u539a\u7684\u7279\u70b9\u548c\u4f18\u52bf\uff0c\u4f46\u6211\u4eec\u7ecf\u5e38\u8fd8\u662f\u4f1a\u9700\u8981\u89e3\u51b3\u540c\u6b65\u6267\u884c\u7684\u573a\u666f\u3002\u5982\u65b9\u6cd5A\u6267\u884c\u5b8c\u624d\u53ef\u4ee5\u6267\u884c\u65b9\u6cd5B\u3002\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a setTimeout (() => { console . log ( 'A' ) }, 3000 ) console . log ( 'B' ); \u6267\u884c\u7ed3\u679c\u4e3a: [ Running ] node \"test.js\" B A [ Done ] exited with code = 0 in 3 .12 seconds \u5982\u679c\u60f3\u8981\u8f93\u51fa\u7ed3\u679c\u4e3a A B \uff0c\u53ef\u4ee5\u91c7\u53d6 Promise \u6216 Async \u6765\u5b9e\u73b0\u3002 \u57fa\u4e8ePromise\u5b9e\u73b0\u540c\u6b65\u63a7\u5236 \u00b6 Promise \u662f\u5f02\u6b65\u7f16\u7a0b\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\uff0c\u6bd4\u4f20\u7edf\u7684\u89e3\u51b3\u65b9\u6848\u2014\u2014\u56de\u8c03\u51fd\u6570\u548c\u4e8b\u4ef6\u2014\u2014\u66f4\u5408\u7406\u548c\u66f4\u5f3a\u5927\u3002ES6 \u539f\u751f\u63d0\u4f9b\u4e86 Promise \u5bf9\u8c61\uff0c\u63d0\u4f9b\u7edf\u4e00\u7684 API\uff0c\u5404\u79cd\u5f02\u6b65\u64cd\u4f5c\u90fd\u53ef\u4ee5\u7528\u540c\u6837\u7684\u65b9\u6cd5\u8fdb\u884c\u5904\u7406\u3002\u793a\u4f8b\u5982\u4e0b\uff1a var f = new Promise (( resolve , reject ) => { setTimeout (() => { console . log ( 'A' ); resolve (); }, 3000 ); }); f . then (() => { console . log ( 'B' ); }, ( err ) => { console . log ( 'Err' ); }); \u6267\u884c\u7ed3\u679c\uff1a [ Running ] node \"test.js\" A B [ Done ] exited with code = 0 in 3 .123 seconds \u53ef\u4ee5\u628a Promise \u5bf9\u8c61\u6bd4\u55bb\u4e3a\u4e00\u4e2a\u5bb9\u5668\uff0c\u91cc\u9762\u6709\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c Promise \u5bb9\u5668\u53ea\u6709\u5728\u6536\u5230\u4fe1\u53f7\uff08resolve\u6216\u8005reject\uff09\u65f6\u624d\u4f1a\u8c03\u7528then\u65b9\u6cd5\u3002\u901a\u8fc7 Promise.All \u65b9\u6cd5\u5c06\u591a\u4e2aPromise\u5bf9\u8c61\u5b9e\u4f8b\u5305\u88c5\uff0c\u751f\u6210\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise\u5b9e\u4f8b\uff0c\u7b49\u6267\u884c\u5b8c\u6240\u6709\u5f02\u6b65\u64cd\u4f5c\u4e4b\u540e\u6267\u884cthen\u65b9\u6cd5\uff1a const a = new Promise (( resolve , reject ) => { setTimeout (() => { console . log ( 'A' ); resolve (); }, 3000 ); }); const b = new Promise (( resolve , reject ) => { setTimeout (() => { console . log ( 'B' ); resolve (); }, 3000 ); }); Promise . all ([ a , b ]). then (() => { console . log ( 'end' ); }); \u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a [ Running ] node test.js A B end [ Done ] exited with code = 0 in 3 .122 seconds Promise \u6269\u5c55\u4fe1\u606f Promise \u6784\u9020\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u8be5\u51fd\u6570\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u662f resolve \u548c reject \u3002\u5b83\u4eec\u662f\u4e24\u4e2a\u51fd\u6570\uff0c\u7531 avaScript \u5f15\u64ce\u63d0\u4f9b\u3002 resolve \u51fd\u6570\u5728\u5f02\u6b65\u64cd\u4f5c\u6210\u529f\u65f6\u7528\uff0c\u5176\u4f5c\u7528\u662f\u5c06 Promise \u5bf9\u8c61\u7684\u72b6\u6001\u4ece\u201cpending\u201d\u53d8\u4e3aresolved\u201d\uff0c\u5e76\u5c06\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u51fa\u53bb\uff1b reject\u51fd\u6570\u5728\u5f02\u6b65\u64cd\u4f5c\u5931\u8d25\u65f6\u8c03\u7528\uff0c\u5176\u4f5c\u7528\u662f\u5c06 Promise`\u5bf9\u8c61\u7684\u72b6\u6001\u4ecepending\u201d\u53d8\u4e3a\u201crejected\u201d\uff0c\u5e76\u5c06\u5f02\u6b65\u64cd\u4f5c\u62a5\u51fa\u7684\u9519\u8bef\u4f5c\u4e3a\u53c2\u4f20\u9012\u51fa\u53bb\u3002 Promise \u5b9e\u4f8b\u751f\u6210\u4ee5\u540e\uff0c\u53ef\u4ee5\u7528 then \u65b9\u6cd5\u5206\u522b\u6307\u5b9aresolved \u72b6\u6001\u548c rejected \u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\u3002 then \u65b9\u6cd5\u4ee5\u63a5\u53d7\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u662f Promise \u5bf9\u7684\u72b6\u6001\u53d8\u4e3a resolved \u65f6\u8c03\u7528\uff0c\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\uff08\u53ef\u9009\u63d0\u4f9b\uff09\u662fPromise \u5bf9\u8c61\u7684\u72b6\u6001\u53d8\u4e3a rejected \u65f6\u8c03\u7528\u3002\u8fd9\u4e24\u4e2a\u51fd\u6570\u90fd\u53d7 Promise \u5bf9\u8c61\u4f20\u51fa\u7684\u503c\u4f5c\u4e3a\u53c2\u6570\u3002 Promise \u5bf9\u8c61\u6709\u4ee5\u4e0b\u4e24\u4e2a\u7279\u70b9\u3002 \u5bf9\u8c61\u7684\u72b6\u6001\u4e0d\u53d7\u5916\u754c\u5f71\u54cd\u3002 Promise \u5bf9\u8c61\u4ee3\u8868\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u6709\u4e09\u79cd\u72b6\u6001\uff1a pending \uff08\u8fdb\u884c\u4e2d\uff09\u3001 fulfilled \uff08\u5df2\u6210\u529f\uff09\u548c rejected \uff08\u5df2\u5931\u8d25\uff09\u3002\u53ea\u6709\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u53ef\u4ee5\u51b3\u5b9a\u5f53\u524d\u662f\u54ea\u4e00\u79cd\u72b6\u6001\uff0c\u4efb\u4f55\u5176\u4ed6\u64cd\u4f5c\u90fd\u65e0\u6cd5\u6539\u53d8\u8fd9\u4e2a\u72b6\u6001\u3002 \u4e00\u65e6\u72b6\u6001\u6539\u53d8\uff0c\u5c31\u4e0d\u4f1a\u518d\u53d8\uff0c\u4efb\u4f55\u65f6\u5019\u90fd\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u7ed3\u679c\u3002 Promise \u5bf9\u8c61\u7684\u72b6\u6001\u6539\u53d8\uff0c\u53ea\u6709\u4e24\u79cd\u53ef\u80fd\uff1a\u4ece pending \u53d8\u4e3a fulfilled \u548c\u4ece pending \u53d8\u4e3a rejected \u3002\u53ea\u8981\u8fd9\u4e24\u79cd\u60c5\u51b5\u53d1\u751f\uff0c\u72b6\u6001\u5c31\u4f1a\u4e00\u76f4\u4fdd\u6301\u4e0d\u518d\u6539\u53d8,\u79f0\u4e3a resolved\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\u7684\u7b80\u5355\u4f8b\u5b50\u3002 function f () { return new Promise ( function ( resolve , reject ) { setTimeout ( resolve , 3000 , 'done.' ); console . log ( 'A' ); //\u4f1a\u7acb\u5373\u6267\u884c }); } f (). then ( function ( result ) { console . log ( `resolve result: ${ result } ` ); }), function ( error ){ console . log ( `reject error: ${ error } ` ); }; \u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c f1 \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a Promise \u5b9e\u4f8b\uff0c\u8868\u793a\u4e00\u6bb5\u65f6\u4ee5\u540e\u624d\u4f1a\u53d1\u751f\u7684\u7ed3\u679c\u3002\u8fc7\u4e86\u6307\u5b9a\u7684\u65f6\u95f4\uff083000\u6beb\u79d2\uff09\u4ee5\u540e\uff0cPromise \u5b9e\u4f8b\u7684\u72b6\u6001\u4e3a resolved \uff0c\u5c31\u4f1a\u89e6\u53d1 then`\u65b9\u6cd5\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002\u6267\u884c\u7ed3\u679c\u5982\u4e0b: [ Running ] node \"test.js\" A resolve result: done . [ Done ] exited with code = 0 in 3 .175 seconds \u53e6\u5916\uff0c resolve \u51fd\u6570\u7684\u53c2\u6570\u9664\u4e86\u6b63\u5e38\u7684\u503c\u4ee5\u5916\uff0c\u8fd8\u53ef\u80fd\u662f\u53e6\u4e00\u4e2a Promise \u5b9e\u4f8b\u3002 then \u65b9\u6cd5\u662f\u5b9a\u4e49\u5728\u539f\u578b\u5bf9\u8c61 Promise.prototype \u4e0a\u7684\u3002\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\uff08\u6ce8\u610f\uff0c\u4e0d\u662f\u539f\u6765\u90a3\u4e2a Promise \u5b9e\u4f8b\uff09\u3002\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u94fe\u5f0f\u5199\u6cd5\uff0c\u5373 then \u65b9\u6cd5\u540e\u9762\u518d\u8c03\u7528\u53e6\u4e00\u4e2a then \u65b9\u6cd5\u3002\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u5b8c\u6210\u4ee5\u540e\uff0c\u4f1a\u5c06\u8fd4\u56de\u7ed3\u679c\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f20\u5165\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u3002 Promise\u4e5f\u6709\u4e00\u4e9b\u7f3a\u70b9\u3002\u9996\u5148\u662f\u65e0\u6cd5\u53d6\u6d88\uff0c\u4e00\u65e6\u65b0\u5efa\u5b83\u5c31\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u65e0\u6cd5\u4e2d\u9014\u53d6\u6d88\uff1b\u5176\u6b21\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u56de\u8c03\u51fd\u6570\uff0cPromise\u5185\u90e8\u629b\u51fa\u7684\u9519\u8bef\uff0c\u4e0d\u4f1a\u53cd\u5e94\u5230\u5916\u90e8\u3002\u7b2c\u4e09\uff0c\u5f53\u5904\u4e8epending\u72b6\u6001\u65f6\uff0c\u65e0\u6cd5\u5f97\u77e5\u76ee\u524d\u8fdb\u5c55\u5230\u54ea\u4e00\u4e2a\u9636\u6bb5\u3002 \u57fa\u4e8eAsync\u5b9e\u73b0\u540c\u6b65\u63a7\u5236 \u00b6 ES2017 \u6807\u51c6\u5f15\u5165\u4e86 async \u51fd\u6570\uff0c\u4f7f\u5f97\u5f02\u6b65\u64cd\u4f5c\u53d8\u5f97\u66f4\u52a0\u65b9\u4fbf\u3002\u968f\u7740Node.js 8\u7684\u53d1\u5e03\uff0c\u671f\u5f85\u5df2\u4e45\u7684async\u51fd\u6570\u4e5f\u5728\u5176\u4e2d\u9ed8\u8ba4\u5b9e\u73b0\u4e86\u3002async \u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406\uff0c\u662f\u5c06 Generator \u51fd\u6570\u548c\u81ea\u52a8\u6267\u884c\u5668\uff0c\u5305\u88c5\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u3002 async \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f7f\u7528 then \u65b9\u6cd5\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\u3002\u5f53\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\uff0c\u4e00\u65e6\u9047\u5230 await \u5c31\u4f1a\u5148\u8fd4\u56de\uff0c\u5fc5\u987b\u7b49\u5230\u5185\u90e8\u6240\u6709 await \u547d\u4ee4\u540e\u9762\u7684 Promise \u5bf9\u8c61\u6267\u884c\u5b8c\uff0c\u624d\u4f1a\u53d1\u751f\u72b6\u6001\u6539\u53d8\uff08\u9664\u975e\u9047\u5230 return \u8bed\u53e5\u6216\u8005\u629b\u51fa\u9519\u8bef\uff09\uff0c\u518d\u63a5\u7740\u6267\u884c\u51fd\u6570\u4f53\u5185\u540e\u9762\u7684\u8bed\u53e5\u3002\u770b\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50: function f () { return new Promise (( resolve ) => { setTimeout ( resolve , 3000 , 'Hello' ); console . log ( 'A' ); }); } async function asyncF ( value ) { //\u524d\u9762\u7684 `async` \u5173\u952e\u5b57\uff0c\u8868\u660e\u8be5\u51fd\u6570\u5185\u90e8\u6709\u5f02\u6b65\u64cd\u4f5c\u3002 console . log ( 'B' ); await f (). then ( value => console . log ( value )); console . log ( 'C' ); return value ; // return\u8bed\u53e5\u7684\u8fd4\u56de\u503c\uff0c\u4f1a\u6210\u4e3a`then`\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u3002 } asyncF ( 'world' ). then ( result => console . log ( result )); \u6267\u884c\u7ed3\u679c\u5982\u4e0b: [ Running ] node \"test.js\" B #\u7acb\u5373\u8f93\u51fa A #\u7acb\u5373\u8f93\u51fa Hello #3\u79d2\u540e\u8f93\u51fa C world [ Done ] exited with code = 0 in 3 .165 seconds async \u51fd\u6570\u7684 await \u547d\u4ee4\u540e\u9762\uff0c\u53ef\u4ee5\u662f Promise \u5bf9\u8c61\u6216\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff08\u6570\u503c\u3001\u5b57\u7b26\u4e32\u548c\u5e03\u5c14\u503c\uff0c\u4f46\u4f1a\u81ea\u52a8\u8f6c\u6210\u7acb\u5373 resolved \u7684 Promise \u5bf9\u8c61\uff09\u3002 sync \u51fd\u6570\u5185\u90e8\u629b\u51fa\u9519\u8bef\uff0c\u4f1a\u5bfc\u81f4\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u53d8\u4e3a reject \u72b6\u6001\u3002\u629b\u51fa\u7684\u9519\u8bef\u5bf9\u8c61\u4f1a\u88ab catch \u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u3002\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a async function f () { throw new Error ( '\u53d1\u751f\u5f02\u5e38' ); } f (). then ( result => console . log ( `resolve result: ${ result } ` ), error => console . log ( error ) ); \u6267\u884c\u7ed3\u679c\uff1a [ Running ] node \"test.js\" Error: \u53d1\u751f\u5f02\u5e38 at f ( /Users/lixl.cn/nodework/blog/test.js:4:9 ) at Object.<anonymous> ( /Users/lixl.cn/nodework/blog/test.js:7:1 ) at Module._compile ( internal/modules/cjs/loader.js:701:30 ) at Object.Module._extensions..js ( internal/modules/cjs/loader.js:712:10 ) at Module.load ( internal/modules/cjs/loader.js:600:32 ) at tryModuleLoad ( internal/modules/cjs/loader.js:539:12 ) at Function.Module._load ( internal/modules/cjs/loader.js:531:3 ) at Function.Module.runMain ( internal/modules/cjs/loader.js:754:12 ) at startup ( internal/bootstrap/node.js:283:19 ) at bootstrapNodeJSCore ( internal/bootstrap/node.js:622:3 ) [ Done ] exited with code = 0 in 0 .153 seconds \u4e03\u3001\u57fa\u4e8eESLint\u4fdd\u969c\u8d28\u91cf \u00b6 JavaScript \u662f\u4e00\u4e2a\u52a8\u6001\u7684\u5f31\u7c7b\u578b\u8bed\u8a00\uff0c\u5728\u5f00\u53d1\u4e2d\u6bd4\u8f83\u5bb9\u6613\u51fa\u9519\uff0c\u4e00\u822c\u4f1a\u501f\u52a9 Lint \u5de5\u5177\u6765\u4fdd\u969c\u8d28\u91cf\u3002 ESLint \u662f\u65b0\u4e00\u4ee3\u5f00\u6e90 JavaScript \u4ee3\u7801\u68c0\u67e5\u5de5\u5177\uff0c\u4f7f\u7528 Node.js \u7f16\u5199\uff0c\u5e38\u7528\u4e8e\u5bfb\u627e\u6709\u95ee\u9898\u7684\u6a21\u5f0f\u6216\u8005\u4ee3\u7801\uff0c\u5e76\u4e14\u4e0d\u4f9d\u8d56\u4e8e\u5177\u4f53\u7684\u7f16\u7801\u98ce\u683c\u3002 # \u5168\u5c40\u5b89\u88c5 ESLint npm install -g eslint # \u8fdb\u5165\u9879\u76ee cd ~/NodeWork/NodeDemo # \u521d\u59cb\u5316 package.json npm init -f # \u521d\u59cb\u5316 ESLint \u914d\u7f6e eslint --init \u901a\u8fc7 Lint \u5de5\u5177\u53ef\u4ee5\u8ba9\u6211\u4eec\uff1a \u907f\u514d\u4f4e\u7ea7bug\uff0c\u627e\u51fa\u53ef\u80fd\u53d1\u751f\u7684\u8bed\u6cd5\u9519\u8bef \u63d0\u793a\u5220\u9664\u591a\u4f59\u7684\u4ee3\u7801 \u786e\u4fdd\u4ee3\u7801\u9075\u5faa\u6700\u4f73\u5b9e\u8df5 (\u53ef\u53c2\u8003 airbnb style \u3001 javascript standard ) \u7edf\u4e00\u56e2\u961f\u7684\u4ee3\u7801\u98ce\u683c \u9879\u76ee\u521d\u59cb\u5316\u5b8c\u6bd5\uff0c\u53ef\u4ee5\u5f00\u59cb\u5728 ESLint \u7684\u63d0\u793a\u4e0b\uff0c\u9ad8\u8d28\u91cf\u7f16\u5199\u4ee3\u7801\u4e86\u3002 \u516b\u3001\u53c2\u8003 \u00b6 Node\u5b98\u65b9\u6587\u6863\uff1a https://nodejs.org/zh-cn/docs/ express\u5b98\u7f51\uff1a http://www.expressjs.com.cn/ ESLint\u5b98\u65b9\u6307\u5357\uff1a https://cn.eslint.org/docs/user-guide/getting-started \u6df1\u5165\u6d45\u51faNode.js\uff1a https://book.douban.com/subject/25768396/ ECMAScript 6 \u5165\u95e8\uff1a http://es6.ruanyifeng.com/","title":"Node.js \u5fc5\u77e5\u5fc5\u4f1a\uff08\u5b89\u88c5\u914d\u7f6e\u3001\u5e94\u7528\u5b9e\u4f8b\u53ca\u540c\u6b65\u63a7\u5236\uff09"},{"location":"NodeJS/Node.js/#nodejs","text":"Node.js \u662f\u4e00\u4e2a\u57fa\u4e8e Chrome V8 \u5f15\u64ce\u7684 JavaScript \u8fd0\u884c\u73af\u5883\u3002\u4f7f\u7528\u4e86\u4e00\u4e2a\u4e8b\u4ef6\u9a71\u52a8\u3001\u975e\u963b\u585e\u5f0f I/O \u7684\u6a21\u578b\uff0c\u4f7f\u5176\u8f7b\u91cf\u53c8\u9ad8\u6548\u3002\u4e8e2009\u5e74\u7531Google Brain\u56e2\u961f\u7684\u8f6f\u4ef6\u5de5\u7a0b\u5e08Ryan Dahl\u53d1\u8d77\u521b\u5efa\uff0c2015\u5e74\u540e\u6b63\u5f0f\u88ab NodeJS\u57fa\u91d1\u4f1a \u63a5\u7ba1\u3002","title":"\u4e00\u3001Node.js\u7b80\u4ecb"},{"location":"NodeJS/Node.js/#nodejs_1","text":"Node\u4f7f\u7528\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\uff0c\u5f53web server\u63a5\u6536\u5230\u8bf7\u6c42\uff0c\u5c31\u628a\u5b83\u5173\u95ed\u7136\u540e\u8fdb\u884c\u5904\u7406\uff0c\u7136\u540e\u53bb\u670d\u52a1\u4e0b\u4e00\u4e2aweb\u8bf7\u6c42\u3002 \u5f53\u8fd9\u4e2a\u8bf7\u6c42\u5b8c\u6210\uff0c\u5b83\u88ab\u653e\u56de\u5904\u7406\u961f\u5217\uff0c\u5f53\u5230\u8fbe\u961f\u5217\u5f00\u5934\uff0c\u8fd9\u4e2a\u7ed3\u679c\u88ab\u8fd4\u56de\u7ed9\u7528\u6237\u3002 \u8fd9\u4e2a\u6a21\u578b\u975e\u5e38\u9ad8\u6548\u53ef\u6269\u5c55\u6027\u975e\u5e38\u5f3a\uff0c\u56e0\u4e3a webserver \u4e00\u76f4\u63a5\u53d7\u8bf7\u6c42\u800c\u4e0d\u7b49\u5f85\u4efb\u4f55\u8bfb\u5199\u64cd\u4f5c\u3002\uff08\u8fd9\u4e5f\u79f0\u4e4b\u4e3a\u975e\u963b\u585e\u5f0fIO\u6216\u8005\u4e8b\u4ef6\u9a71\u52a8IO\uff09\u3002\u5728\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\u4e2d\uff0c\u4f1a\u751f\u6210\u4e00\u4e2a\u4e3b\u5faa\u73af\u6765\u76d1\u542c\u4e8b\u4ef6\uff0c\u5f53\u68c0\u6d4b\u5230\u4e8b\u4ef6\u65f6\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u3002","title":"NodeJS \u67b6\u6784"},{"location":"NodeJS/Node.js/#_1","text":"Node.js\u5b98\u7f51\uff1a https://nodejs.org/zh-cn/ \u7248\u672c\u7ba1\u7406\u5de5\u5177nvm\uff1a https://github.com/nvm-sh/nvm \u5305\u7ba1\u7406\u5de5\u5177npm\uff1a https://www.npmjs.com/ npm\u4e2d\u6587\u6587\u6863\uff1a https://www.npmjs.cn/ \u56fd\u5185\u7684 npm \u955c\u50cf\u6e90\uff1a http://cnpmjs.org/ \u4e2d\u6587\u793e\u533a\uff1a https://cnodejs.org/","title":"\u76f8\u5173\u8d44\u6e90"},{"location":"NodeJS/Node.js/#_2","text":"\u5efa\u8bae\u4f7f\u7528nvm\u6765\u8fdb\u884cnode\u7248\u672c\u7ba1\u7406\uff0c\u5b83\u4f1a\u5b89\u88c5\u76f8\u5e94\u7248\u672c\u7684npm\u3002","title":"\u4e8c\u3001\u5b89\u88c5\u914d\u7f6e"},{"location":"NodeJS/Node.js/#nvmnodejs","text":"nvm\u5168\u540dnode.js version management\uff0c\u987e\u540d\u601d\u4e49\u662f\u4e00\u4e2anodejs\u7684\u7248\u672c\u7ba1\u7406\u5de5\u5177\u3002\u901a\u8fc7\u5b83\u53ef\u4ee5\u5b89\u88c5\u548c\u5207\u6362\u4e0d\u540c\u7248\u672c\u7684nodejs\u3002 # \u5b89\u88c5nvm\uff08 \u5347\u7ea7nvm\u91cd\u65b0\u6267\u884c\u6b64\u547d\u4ee4\uff09: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash # \u5217\u51fa\u6240\u6709\u53ef\u4ee5\u5b89\u88c5\u7684node\u7248\u672c\u53f7 nvm ls-remote # \u5b89\u88c5\u6307\u5b9a\u7248\u672c\u53f7\u7684node nvm install v12.4.1 # \u8bbe\u7f6e nodejs \u9ed8\u8ba4\u7248\u672c nvm alias default 12 .4.1 # \u5207\u6362node\u7684\u7248\u672c nvm use v10.15.3 # \u5f53\u524dnode\u7248\u672c nvm current node -v # \u5217\u51fa\u6240\u6709\u5df2\u7ecf\u5b89\u88c5\u7684node\u7248\u672c nvm ls # \u5378\u8f7d\u5df2\u5b89\u88c5\u7684node\u7248\u672c nvm uninstall v6.9.5","title":"\u5b89\u88c5nvm\u53caNode.js"},{"location":"NodeJS/Node.js/#npm","text":"npm \u662f\u4e16\u754c\u4e0a\u6700\u5927\u7684\u8f6f\u4ef6\u6ce8\u518c\u4e2d\u5fc3\uff0c\u968f\u540cNodeJS\u4e00\u8d77\u5b89\u88c5\uff0c\u6765\u81ea\u5168\u7403\u5404\u5730\u7684\u5f00\u6e90\u5f00\u53d1\u4eba\u5458\u4f7f\u7528 npm \u6765\u5171\u4eab\u548c\u590d\u7528\u8f6f\u4ef6\u5305\u3002npm \u7531\u4e09\u4e2a\u72ec\u7acb\u7684\u90e8\u5206\u7ec4\u6210\uff1a \u7f51\u7ad9\uff1a https://npmjs.com \u662f\u5f00\u53d1\u8005\u67e5\u627e\u5305\uff08package\uff09\u3001\u8bbe\u7f6e\u53c2\u6570\u4ee5\u53ca\u7ba1\u7406 npm \u4f7f\u7528\u4f53\u9a8c\u7684\u4e3b\u8981\u9014\u5f84\u3002 \u6ce8\u518c\u8868\uff08registry\uff09\uff1a\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6570\u636e\u5e93\uff0c\u4fdd\u5b58\u4e86\u6bcf\u4e2a\u5305\uff08package\uff09\u7684\u4fe1\u606f\u3002 \u547d\u4ee4\u884c\u5de5\u5177 (CLI)\uff1a\u901a\u8fc7\u547d\u4ee4\u884c\u6216\u7ec8\u7aef\u8fd0\u884c\u3002\u5f00\u53d1\u8005\u901a\u8fc7 CLI \u4e0e npm \u6253\u4ea4\u9053\u3002 # \u67e5\u770b npm \u7248\u672c npm -v # \u66f4\u65b0npm\u7248\u672c npm install npm@latest -g # \u641c\u7d22\u6a21\u5757 npm search hexo # \u5b89\u88c5\u4f9d\u8d56\u5305 npm install <Module Name> npm install hexo # \u672c\u5730\u5b89\u88c5 hexo npm install hexo -g # \u5168\u5c40\u5b89\u88c5 hexo # \u67e5\u770b\u6240\u6709\u5168\u5c40\u5b89\u88c5\u7684\u6a21\u5757 npm list -g # \u67e5\u770b\u67d0\u4e2a\u6a21\u5757 npm list hexo # \u5378\u8f7d\u6a21\u5757 npm uninstall hexo # \u5378\u8f7d\u540e\uff0c\u67e5\u770b\u5305\u662f\u5426\u8fd8\u5b58\u5728 npm ls # \u66f4\u65b0\u67d0\u4e2a\u6a21\u5757 npm update hexo # \u521b\u5efa\u6a21\u5757 npm init \u6bcf\u4e2a\u7248\u672c\u7684 Node \u90fd\u81ea\u5e26\u4e00\u4e2a\u4e0d\u540c\u7248\u672c\u7684 npm\uff0c\u53ef\u4ee5\u7528 npm -v \u6765\u67e5\u770b npm \u7684\u7248\u672c\u3002\u5168\u5c40\u5b89\u88c5\u7684 npm \u5305\u5e76\u4e0d\u4f1a\u5728\u4e0d\u540c\u7684 Node \u73af\u5883\u4e2d\u5171\u4eab\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u5f15\u8d77\u517c\u5bb9\u95ee\u9898\u3002\u5b83\u4eec\u88ab\u653e\u5728\u4e86\u4e0d\u540c\u7248\u672c\u7684\u76ee\u5f55\u4e0b\uff0c\u4f8b\u5982 ~/.nvm/versions/node/${version}/lib/node_modules \u8fd9\u6837\u7684\u76ee\u5f55\u3002 \u8fd0\u884c\u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\uff0c\u53ef\u4ee5\u4ece\u7279\u5b9a\u7248\u672c\u5bfc\u5165\u4e4b\u524d\u5b89\u88c5\u8fc7\u7684 npm \u5305\u5230\u6211\u4eec\u5c06\u8981\u5b89\u88c5\u7684\u65b0\u7248\u672c Node \u4e2d\uff1a nvm install v12.16.1 --reinstall-packages-from = v10.15.3","title":"npm"},{"location":"NodeJS/Node.js/#node","text":"","title":"\u4e09\u3001Node\u7279\u70b9"},{"location":"NodeJS/Node.js/#io","text":"\u5728Node\u4e2d\uff0c\u7edd\u5927\u591a\u6570\u7684\u64cd\u4f5c\u90fd\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u8fdb\u884c\u8c03\u7528\u3002\u5728\u5e95\u5c42\u6784\u5efa\u4e86\u5f88\u591a\u5f02\u6b65I/O\u7684API\uff0c\u4ece\u6587\u4ef6\u8bfb\u53d6\u5230\u7f51\u7edc\u8bf7\u6c42\u7b49\uff0c\u5747\u662f\u5982\u6b64\u3002\u8fd9\u6837\u7684\u610f\u4e49\u5728\u4e8e\uff0c\u5728Node\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u8bed\u8a00\u5c42\u9762\u5f88\u81ea\u7136\u5730\u8fdb\u884c\u5e76\u884cI/O\u64cd\u4f5c\u3002\u6bcf\u4e2a\u8c03\u7528\u4e4b\u95f4\u65e0\u987b\u7b49\u5f85\u4e4b\u524d\u7684I/O\u8c03\u7528\u7ed3\u675f\u3002\u5728\u7f16\u7a0b\u6a21\u578b\u4e0a\u53ef\u4ee5\u6781\u5927\u63d0\u5347\u6548\u7387\u3002 \u4e0b\u9762\u7684\u4e24\u4e2a\u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1\u7684\u8017\u65f6\u53d6\u51b3\u4e8e\u6700\u6162\u7684\u90a3\u4e2a\u6587\u4ef6\u8bfb\u53d6\u7684\u8017\u65f6\uff1a fs . readFile ( '/path1' , function ( err , file ) { console . log ( '\u8bfb\u53d6\u6587\u4ef61\u5b8c\u6210' ); }); fs . readFile ( '/path2' , function ( err , file ) { console . log ( '\u8bfb\u53d6\u6587\u4ef62\u5b8c\u6210' ); }); \u800c\u5bf9\u4e8e\u540c\u6b65I/O\u800c\u8a00\uff0c\u5b83\u4eec\u7684\u8017\u65f6\u662f\u4e24\u4e2a\u4efb\u52a1\u7684\u8017\u65f6\u4e4b\u548c\u3002\u8fd9\u91cc\u5f02\u6b65\u5e26\u6765\u7684\u4f18\u52bf\u662f\u663e\u800c\u6613\u89c1\u7684\u3002","title":"\u5f02\u6b65I/O"},{"location":"NodeJS/Node.js/#_3","text":"\u5728JavaScript\u4e2d\uff0c\u51fd\u6570\u88ab\u4f5c\u4e3a\u7b2c\u4e00\u7b49\u516c\u6c11\u6765\u5bf9\u5f85\uff0c\u53ef\u4ee5\u5c06\u51fd\u6570\u4f5c\u4e3a\u5bf9\u8c61\u4f20\u9012\u7ed9\u65b9\u6cd5\u4f5c\u4e3a\u5b9e\u53c2\u8fdb\u884c\u8c03\u7528\u3002Node\u5c06\u524d\u7aef\u6d4f\u89c8\u5668\u4e2d\u5e94\u7528\u5e7f\u6cdb\u4e14\u6210\u719f\u7684\u4e8b\u4ef6\u5f15\u5165\u540e\u7aef\uff0c\u914d\u5408\u5f02\u6b65I/O\uff0c\u5c06\u4e8b\u4ef6\u70b9\u66b4\u9732\u7ed9\u4e1a\u52a1\u903b\u8f91\u3002 \u4e0b\u9762\u7684\u4f8b\u5b50\u5c55\u793a\u7684\u662fAjax\u5f02\u6b65\u63d0\u4ea4\u7684\u670d\u52a1\u5668\u7aef\u5904\u7406\u8fc7\u7a0b\u3002Node\u521b\u5efa\u4e00\u4e2aWeb\u670d\u52a1\u5668\uff0c\u5e76\u4fa6\u542c8080\u7aef\u53e3\u3002\u5bf9\u4e8e\u670d\u52a1\u5668\uff0c\u6211\u4eec\u4e3a\u5176\u7ed1\u5b9a\u4e86request\u4e8b\u4ef6\uff0c\u5bf9\u4e8e\u8bf7\u6c42\u5bf9\u8c61\uff0c\u6211\u4eec\u4e3a\u5176\u7ed1\u5b9a\u4e86data\u4e8b\u4ef6\u548cend\u4e8b\u4ef6\uff1a var http = require ( 'http' ); var quertstring = require ( 'querystring' ); http . createServer ( function ( req , res ){ var postData = '' ; req . setEncoding ( 'utf8' ); // \u76d1\u542c\u8bf7\u6c42\u7684data\u4e8b\u4ef6 req . on ( 'data' , function ( chunk ){ postData += chunk ; }); // \u76d1\u542c\u8bf7\u6c42\u7684end\u4e8b\u4ef6 req . on ( 'end' , function (){ res . end ( postData ); }); }). listen ( 8080 ); console . log ( '\u670d\u52a1\u5668\u542f\u52a8\u5b8c\u6210\uff0c\u76d1\u542c\u7aef\u53e3\uff1a8080' ) \u76f8\u5e94\u5730\uff0c\u6211\u4eec\u5728\u524d\u7aef\u4e3aAjax\u8bf7\u6c42\u7ed1\u5b9a\u4e86success\u4e8b\u4ef6\uff0c\u5728\u53d1\u51fa\u8bf7\u6c42\u540e\uff0c\u53ea\u9700\u5173\u5fc3\u8bf7\u6c42\u6210\u529f\u65f6\u6267\u884c\u76f8\u5e94\u7684\u4e1a\u52a1\u903b\u8f91\u5373\u53ef\uff0c\u76f8\u5173\u4ee3\u7801\u5982\u4e0b\uff1a $ . ajax ({ 'url' : '/url' , 'method' : 'POST' , 'data' : {}, 'success' : function ( data ) { // success\u4e8b\u4ef6 } }); \u4e0e\u5176\u4ed6\u7684Web\u540e\u7aef\u7f16\u7a0b\u8bed\u8a00\u76f8\u6bd4\uff0cNode\u9664\u4e86\u5f02\u6b65\u548c\u4e8b\u4ef6\u5916\uff0c\u56de\u8c03\u51fd\u6570\u662f\u4e00\u5927\u7279\u8272\u3002\u7eb5\u89c2\u4e0b\u6765\uff0c\u56de\u8c03\u51fd\u6570\u4e5f\u662f\u6700\u597d\u7684\u63a5\u53d7\u5f02\u6b65\u8c03\u7528\u8fd4\u56de\u6570\u636e\u7684\u65b9\u5f0f\u3002\u4f46\u662f\u8fd9\u79cd\u7f16\u7a0b\u65b9\u5f0f\u5bf9\u4e8e\u5f88\u591a\u4e60\u60ef\u540c\u6b65\u601d\u8def\u7f16\u7a0b\u7684\u4eba\u6765\u8bf4\uff0c\u4e5f\u8bb8\u662f\u5341\u5206\u4e0d\u4e60\u60ef\u7684\u3002\u4ee3\u7801\u7684\u7f16\u5199\u987a\u5e8f\u4e0e\u6267\u884c\u987a\u5e8f\u5e76\u65e0\u5173\u7cfb\uff0c\u8fd9\u5bf9\u4ed6\u4eec\u53ef\u80fd\u9020\u6210\u9605\u8bfb\u4e0a\u7684\u969c\u788d\u3002","title":"\u4e8b\u4ef6\u4e0e\u56de\u8c03\u51fd\u6570"},{"location":"NodeJS/Node.js/#_4","text":"Node\u4fdd\u6301\u4e86JavaScript\u5728\u6d4f\u89c8\u5668\u4e2d\u5355\u7ebf\u7a0b\u7684\u7279\u70b9\u3002\u800c\u4e14\u5728Node\u4e2d\uff0cJavaScript\u4e0e\u5176\u4f59\u7ebf\u7a0b\u662f\u65e0\u6cd5\u5171\u4eab\u4efb\u4f55\u72b6\u6001\u7684\u3002\u5355\u7ebf\u7a0b\u7684\u6700\u5927\u597d\u5904\u662f\u4e0d\u7528\u50cf\u591a\u7ebf\u7a0b\u7f16\u7a0b\u90a3\u6837\u5904\u5904\u5728\u610f\u72b6\u6001\u7684\u540c\u6b65\u95ee\u9898\uff0c\u8fd9\u91cc\u6ca1\u6709\u6b7b\u9501\u7684\u5b58\u5728\uff0c\u4e5f\u6ca1\u6709\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u4ea4\u6362\u6240\u5e26\u6765\u7684\u6027\u80fd\u4e0a\u7684\u5f00\u9500\u3002 \u540c\u6837\uff0c\u5355\u7ebf\u7a0b\u4e5f\u6709\u5b83\u81ea\u8eab\u7684\u5f31\u70b9\u3002Node\u91c7\u7528\u4e86\u4e0eWeb Workers\u76f8\u540c\u7684\u601d\u8def\u6765\u89e3\u51b3\u5355\u7ebf\u7a0b\u4e2d\u5927\u8ba1\u7b97\u91cf\u7684\u95ee\u9898\uff1a child_process \u3002\u5b50\u8fdb\u7a0b\u7684\u51fa\u73b0\uff0c\u610f\u5473\u7740Node\u53ef\u4ee5\u4ece\u5bb9\u5730\u5e94\u5bf9\u5355\u7ebf\u7a0b\u5728\u5065\u58ee\u6027\u548c\u65e0\u6cd5\u5229\u7528\u591a\u6838CPU\u65b9\u9762\u7684\u95ee\u9898\u3002","title":"\u5355\u7ebf\u7a0b"},{"location":"NodeJS/Node.js/#io_1","text":"\u901a\u5e38\uff0c\u8bf4Node\u64c5\u957fI/O\u5bc6\u96c6\u578b\u7684\u5e94\u7528\u573a\u666f\u57fa\u672c\u4e0a\u662f\u6ca1\u4eba\u53cd\u5bf9\u7684\u3002Node\u9762\u5411\u7f51\u7edc\u4e14\u64c5\u957f\u5e76\u884cI/O\uff0c\u80fd\u591f\u6709\u6548\u5730\u7ec4\u7ec7\u8d77\u66f4\u591a\u7684\u786c\u4ef6\u8d44\u6e90\uff0c\u4ece\u800c\u63d0\u4f9b\u66f4\u591a\u597d\u7684\u670d\u52a1\u3002I/O\u5bc6\u96c6\u7684\u4f18\u52bf\u4e3b\u8981\u5728\u4e8eNode\u5229\u7528\u4e8b\u4ef6\u5faa\u73af\u7684\u5904\u7406\u80fd\u529b\uff0c\u800c\u4e0d\u662f\u542f\u52a8\u6bcf\u4e00\u4e2a\u7ebf\u7a0b\u4e3a\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u670d\u52a1\uff0c\u8d44\u6e90\u5360\u7528\u6781\u5c11\u3002","title":"\u64c5\u957fI/O\u5bc6\u96c6\u578b\u7684\u5e94\u7528"},{"location":"NodeJS/Node.js/#_5","text":"CPU\u5bc6\u96c6\u578b\u5e94\u7528\u7ed9Node\u5e26\u6765\u7684\u6311\u6218\u4e3b\u8981\u662f\uff1a\u7531\u4e8eJavaScript\u5355\u7ebf\u7a0b\u7684\u539f\u56e0\uff0c\u5982\u679c\u6709\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u8ba1\u7b97\uff08\u6bd4\u5982\u5927\u5faa\u73af\uff09\uff0c\u5c06\u4f1a\u5bfc\u81f4CPU\u65f6\u95f4\u7247\u4e0d\u80fd\u91ca\u653e\uff0c\u4f7f\u5f97\u540e\u7eedI/O\u65e0\u6cd5\u53d1\u8d77\u3002\u4f46\u662f\u9002\u5f53\u8c03\u6574\u548c\u5206\u89e3\u5927\u578b\u8fd0\u7b97\u4efb\u52a1\u4e3a\u591a\u4e2a\u5c0f\u4efb\u52a1\uff0c\u4f7f\u5f97\u8fd0\u7b97\u80fd\u591f\u9002\u65f6\u91ca\u653e\uff0c\u4e0d\u963b\u585eI/O\u8c03\u7528\u7684\u53d1\u8d77\uff0c\u8fd9\u6837\u65e2\u53ef\u540c\u65f6\u4eab\u53d7\u5230\u5e76\u884c\u5f02\u6b65I/O\u7684\u597d\u5904\uff0c\u53c8\u80fd\u5145\u5206\u5229\u7528CPU\uff0cI/O\u963b\u585e\u9020\u6210\u7684\u6027\u80fd\u6d6a\u8d39\u8fdc\u6bd4CPU\u7684\u5f71\u54cd\u5c0f\u3002","title":"\u6027\u80fd\u4e0d\u4fd7"},{"location":"NodeJS/Node.js/#nodejs_2","text":"\u66f4\u591a\u6a21\u5757\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u53ef\u67e5\u9605\u5b98\u65b9\u6587\u6863: https://nodejs.org/api/","title":"\u56db\u3001Node.js\u5e38\u7528\u6a21\u5757"},{"location":"NodeJS/Node.js/#global","text":"\u6d4f\u89c8\u5668JavaScript\u5f53\u4e2dwindow\u662f\u5168\u5c40\u5bf9\u8c61\uff0cNodeJS\u4e2d\u5168\u5c40\u5bf9\u8c61\u662fglobal\uff0cglobal\u6700\u6839\u672c\u7684\u4f5c\u7528\u662f\u4f5c\u4e3a\u5168\u5c40\u53d8\u91cf\u7684\u5bbf\u4e3b\uff08\u5373\u6240\u6709\u7684\u5168\u5c40\u53d8\u91cf\u90fd\u662fglobal\u5bf9\u8c61\u7684\u5c5e\u6027\uff09\uff0c\u56e0\u6b64\u5728\u6240\u6709\u6a21\u5757\u4e2d\u90fd\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u800c\u65e0\u9700\u5305\u542b\u3002","title":"Global\u6a21\u5757"},{"location":"NodeJS/Node.js/#process","text":"process\u662f\u5168\u5c40\u53d8\u91cf(\u5373global\u5bf9\u8c61\u7684\u5c5e\u6027)\uff0c\u7528\u4e8e\u63cf\u8ff0\u5f53\u524dNodeJS\u8fdb\u7a0b\u72b6\u6001\u3002","title":"Process\u6a21\u5757"},{"location":"NodeJS/Node.js/#console","text":"console\u7528\u4e8e\u63d0\u4f9b\u63a7\u5236\u53f0\u6807\u51c6\u8f93\u51fa\u3002 console.log() \uff1a\u5411\u6807\u51c6\u8f93\u51fa\u6d41\u6253\u5370\u5b57\u7b26\u5e76\u4ee5\u6362\u884c\u7b26\u7ed3\u675f( \u5982\u679c\u53ea\u67091\u4e2a\u53c2\u6570\uff0c\u5219\u8f93\u51fa\u8be5\u53c2\u6570\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f\uff1b\u5982\u679c\u67092\u4e2a\u53c2\u6570\uff0c\u5219\u4ee5\u7c7b\u4f3c\u4e8eC\u8bed\u8a00 printf() \u7684\u683c\u5f0f\u5316\u8f93\u51fa )\u3002 console.error() \uff1a\u4e0e console.log() \u7684\u7528\u6cd5\u76f8\u540c\uff0c\u53ea\u662f\u5411\u6807\u51c6\u9519\u8bef\u6d41\u8fdb\u884c\u8f93\u51fa\u3002 console.trace() \uff1a\u5411\u6807\u51c6\u9519\u8bef\u6d41\u8f93\u51fa\u5f53\u524d\u7684\u8c03\u7528\u6808: $ node app.js Trace at Object.<anonymous> ( /workspace/app.js:1:71 ) at Module._compile ( module.js:643:30 ) at Object.Module._extensions..js ( module.js:654:10 ) at Module.load ( module.js:556:32 ) at tryModuleLoad ( module.js:499:12 ) at Function.Module._load ( module.js:491:3 ) at Function.Module.runMain ( module.js:684:10 ) at startup ( bootstrap_node.js:187:16 ) at bootstrap_node.js:608:3","title":"Console\u6a21\u5757"},{"location":"NodeJS/Node.js/#util","text":"util\u63d0\u4f9b\u5e38\u7528\u51fd\u6570\u96c6\u5408\uff0c\u7528\u4e8e\u5f25\u8865\u6838\u5fc3JavaScript\u529f\u80fd\u65b9\u9762\u7684\u4e0d\u8db3\u3002","title":"Util\u6a21\u5757"},{"location":"NodeJS/Node.js/#events","text":"events \u662fNodeJS\u6700\u91cd\u8981\u7684\u6a21\u5757\uff0c\u56e0\u4e3aNodeJS\u672c\u8eab\u5c31\u662f\u57fa\u4e8e\u4e8b\u4ef6\u5f0f\u7684\u67b6\u6784\uff0c\u8be5\u6a21\u5757\u63d0\u4f9b\u4e86\u552f\u4e00\u63a5\u53e3\uff0c\u6240\u4ee5\u582a\u79f0NodeJS\u4e8b\u4ef6\u7f16\u7a0b\u7684\u57fa\u77f3\u3002 events \u6a21\u5757\u4e0d\u4ec5\u7528\u4e8e\u4e0e\u4e0b\u5c42\u7684\u4e8b\u4ef6\u5faa\u73af\u4ea4\u4e92\uff0c\u8fd8\u51e0\u4e4e\u88ab\u6240\u6709\u7684\u6a21\u5757\u6240\u4f9d\u8d56\u3002 events \u6a21\u5757\u53ea\u63d0\u4f9b1\u4e2a events.EventEmitter \u5bf9\u8c61\uff0c EventEmitter \u5bf9\u8c61\u5c01\u88c5\u4e86\u4e8b\u4ef6\u53d1\u5c04\u548c\u4e8b\u4ef6\u76d1\u542c\u5668\u3002\u6bcf\u4e2a EventEmitter \u4e8b\u4ef6\u75311\u4e2a\u4e8b\u4ef6\u540d\u548c\u82e5\u5e72\u53c2\u6570\u7ec4\u6210\uff0c\u4e8b\u4ef6\u540d\u662f1\u4e2a\u5b57\u7b26\u4e32\u3002 EventEmitter \u5bf9\u6bcf\u4e2a\u4e8b\u4ef6\u652f\u6301\u82e5\u5e72\u76d1\u542c\u5668\uff0c\u4e8b\u4ef6\u53d1\u5c04\u65f6\uff0c\u6ce8\u518c\u81f3\u8be5\u4e8b\u4ef6\u7684\u76d1\u542c\u5668\u4f9d\u6b21\u88ab\u8c03\u7528\uff0c\u4e8b\u4ef6\u53c2\u6570\u5c06\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\u53c2\u6570\u4f20\u9012\u3002 \u4e0b\u9762\u4f8b\u5b50\u4e2d\uff0c emitter \u4e3a\u4e8b\u4ef6 targetEvent \u6ce8\u518c2\u4e2a\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u7136\u540e\u53d1\u5c04 targetEvent \u4e8b\u4ef6\uff0c\u7ed3\u679c2\u4e2a\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u56de\u8c03\u51fd\u6570\u88ab\u4f9d\u6b21\u5148\u540e\u8c03\u7528\u3002 var events = require ( \"events\" ); var emitter = new events . EventEmitter (); emitter . on ( \"targetEvent\" , function ( arg1 , arg2 ) { console . log ( \"listener1\" , arg1 , arg2 ); }); emitter . on ( \"targetEvent\" , function ( arg1 , arg2 ) { console . log ( \"listener2\" , arg1 , arg2 ); }); emitter . emit ( \"targetEvent\" , \"Hank\" , 2018 ); $ node app.js listener1 Hank 2018 listener2 Hank 2018","title":"Events\u6a21\u5757"},{"location":"NodeJS/Node.js/#file-system","text":"fs \u6a21\u5757\u5c01\u88c5\u4e86\u6587\u4ef6\u64cd\u4f5c\uff0c\u63d0\u4f9b\u4e86\u6587\u4ef6\u8bfb\u53d6\u3001\u5199\u5165\u3001\u66f4\u540d\u3001\u5220\u9664\u3001\u904d\u5386\u3001\u94fe\u63a5\u7b49POSIX\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\uff0c\u8be5\u6a21\u5757\u4e2d\u6240\u6709\u64cd\u4f5c\u90fd\u63d0\u4f9b\u4e86\u5f02\u6b65\u548c\u540c\u6b652\u4e2a\u7248\u672c\u3002 fs.readFile(filename,[encoding],[callback(err,data)]) \u7528\u4e8e\u8bfb\u53d6\u6587\u4ef6\uff0c\u7b2c1\u4e2a\u53c2\u6570 filename \u8868\u793a\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u540d\u3002\u7b2c2\u4e2a\u53c2\u6570 encoding \u8868\u793a\u6587\u4ef6\u7684\u5b57\u7b26\u7f16\u7801\uff0c\u7b2c3\u4e2a\u53c2\u6570 callback \u662f\u56de\u8c03\u51fd\u6570\uff0c\u7528\u4e8e\u63a5\u6536\u6587\u4ef6\u5185\u5bb9\u3002 \u56de\u8c03\u51fd\u6570\u63d0\u4f9b err \u548c data \u4e24\u4e2a\u53c2\u6570\uff0c err \u8868\u793a\u6709\u65e0\u9519\u8bef\u53d1\u751f\uff0c data \u662f\u6587\u4ef6\u5185\u5bb9\u3002\u5982\u679c\u6307\u5b9a encoding \uff0c data \u5c06\u662f1\u4e2a\u89e3\u6790\u540e\u7684\u5b57\u7b26\u4e32\uff0c\u5426\u5219 data \u5c06\u4f1a\u662f\u4ee5 Buffe r`\u5f62\u5f0f\u8868\u793a\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002","title":"File System\u6a21\u5757"},{"location":"NodeJS/Node.js/#http","text":"NodeJS\u6807\u51c6\u5e93\u63d0\u4f9b\u7684 http \u6a21\u5757\u5c01\u88c5\u4e86\u4e00\u4e2a\u9ad8\u6548\u7684HTTP\u670d\u52a1\u5668 http.Server \u548c\u4e00\u4e2a\u7b80\u6613\u7684HTTP\u5ba2\u6237\u7aef http.request \u3002 http \u6a21\u5757\u4e2d\u7684HTTP\u670d\u52a1\u5668\u5bf9\u8c61\uff0c\u6838\u5fc3\u7531NodeJS\u5e95\u5c42\u4f9d\u9760C++\u5b9e\u73b0\uff0c\u63a5\u53e3\u4f7f\u7528JavaScript\u5c01\u88c5\uff0c\u517c\u987e\u4e86\u9ad8\u6027\u80fd\u4e0e\u7b80\u6613\u6027\u3002","title":"Http\u6a21\u5757"},{"location":"NodeJS/Node.js/#nodejs_3","text":"","title":"\u4e94\u3001\u521b\u5efaNode.js\u5e94\u7528"},{"location":"NodeJS/Node.js/#nodehttp","text":"\u4f7f\u7528 require \u6307\u4ee4\u6765\u8f7d\u5165 http \u6a21\u5757\uff0c\u5e76\u5c06\u5b9e\u4f8b\u5316\u7684 HTTP \u8d4b\u503c\u7ed9\u53d8\u91cf http\uff0c\u5b9e\u4f8b\u5982\u4e0b: var http = require ( \"http\" ); \u4f7f\u7528 http.createServer() \u65b9\u6cd5\u521b\u5efa\u670d\u52a1\u5668\uff0c\u5e76\u4f7f\u7528 listen \u65b9\u6cd5\u7ed1\u5b9a 8888 \u7aef\u53e3\u3002 \u51fd\u6570\u901a\u8fc7 request, response \u53c2\u6570\u6765\u63a5\u6536\u548c\u54cd\u5e94\u6570\u636e\u3002\u5728\u4f60\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u53eb server.js \u7684\u6587\u4ef6\uff0c\u5e76\u5199\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a const http = require ( 'http' ); const hostname = '127.0.0.1' ; const port = 8080 ; const server = http . createServer (( req , res ) => { res . statusCode = 200 ; res . setHeader ( 'Content-Type' , 'text/plain' ); res . end ( 'Hello World' ); }); // \u7ec8\u7aef\u6253\u5370\u5982\u4e0b\u4fe1\u606f server . listen ( port , hostname , () => { console . log ( `Server running at http:// ${ hostname } : ${ port } /` ); }); \u4ee5\u4e0a\u4ee3\u7801\u6211\u4eec\u5b8c\u6210\u4e86\u4e00\u4e2a\u53ef\u4ee5\u5de5\u4f5c\u7684 HTTP \u670d\u52a1\u5668\u3002\u4f7f\u7528 node \u547d\u4ee4\u6267\u884c\u4ee5\u4e0a\u7684\u4ee3\u7801\uff1a node server . js Server running at http : //127.0.0.1:8080/ \u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee http://127.0.0.1:8080/ \uff0c\u4f1a\u770b\u5230\u4e00\u4e2a\u5199\u7740 \"Hello World\"\u7684\u7f51\u9875\u3002","title":"\u4f7f\u7528Node\u521b\u5efahttp\u670d\u52a1\u5668"},{"location":"NodeJS/Node.js/#webexpress","text":"express \u662f Node\u5e94\u7528\u6700\u5e7f\u6cdb\u7684\u5feb\u901f\u3001\u5f00\u653e\u3001\u6781\u7b80\u4e3b\u4e49 web \u6846\u67b6\uff0c\u73b0\u5728\u662f 4.x \u7248\u672c\u3002\u5b98\u65b9\u63d0\u4f9b\u4e86\u5e94\u7528\u7a0b\u5e8f\u751f\u6210\u5668\u5de5\u5177 express-generator \u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u9aa8\u67b6\u3002\u5b89\u88c5\uff1a npm install express --save npm install express-generator -g \u521b\u5efa\u540d\u79f0\u4e3a ExpressDemo \u7684 Express \u5e94\u7528\u3002\u6b64\u5e94\u7528\u5c06\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 ExpressDemo \u76ee\u5f55\u4e2d\u521b\u5efa\uff0c\u5e76\u4e14\u8bbe\u7f6e\u4e3a\u4f7f\u7528 Pug \u6a21\u677f\u5f15\u64ce\uff1a express --view = pug ExpressDemo create : ExpressDemo/ create : ExpressDemo/public/ create : ExpressDemo/public/javascripts/ create : ExpressDemo/public/images/ create : ExpressDemo/public/stylesheets/ create : ExpressDemo/public/stylesheets/style.css create : ExpressDemo/routes/ create : ExpressDemo/routes/index.js create : ExpressDemo/routes/users.js create : ExpressDemo/views/ create : ExpressDemo/views/error.pug create : ExpressDemo/views/index.pug create : ExpressDemo/views/layout.pug create : ExpressDemo/app.js create : ExpressDemo/package.json create : ExpressDemo/bin/ create : ExpressDemo/bin/www change directory: $ cd ExpressDemo install dependencies: $ npm install run the app: $ DEBUG = expressdemo:* npm start \u6309\u63d0\u793a\u5b89\u88c5\u4f9d\u8d56\u5e76\u542f\u52a8\u3002 cd ExpressDemo npm install DEBUG = expressdemo:* npm start # MacOS \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 http://localhost:3000/ \u5c31\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u5e94\u7528\u4e86\u3002 \u901a\u8fc7\u751f\u6210\u5668\u521b\u5efa\u7684\u5e94\u7528\u4e00\u822c\u90fd\u6709\u5982\u4e0b\u76ee\u5f55\u7ed3\u6784\uff1a tree -I \"node_modules\" . \u251c\u2500\u2500 app.js \u251c\u2500\u2500 bin \u2502 \u2514\u2500\u2500 www \u251c\u2500\u2500 package-lock.json \u251c\u2500\u2500 package.json \u251c\u2500\u2500 public \u2502 \u251c\u2500\u2500 images \u2502 \u251c\u2500\u2500 javascripts \u2502 \u2514\u2500\u2500 stylesheets \u2502 \u2514\u2500\u2500 style.css \u251c\u2500\u2500 routes \u2502 \u251c\u2500\u2500 index.js \u2502 \u2514\u2500\u2500 users.js \u2514\u2500\u2500 views \u251c\u2500\u2500 error.pug \u251c\u2500\u2500 index.pug \u2514\u2500\u2500 layout.pug 7 directories, 10 files","title":"web\u6846\u67b6express\u7b80\u5355\u4f7f\u7528"},{"location":"NodeJS/Node.js/#promise-async","text":"\u5f02\u6b65\u662fNode\u5f97\u5929\u72ec\u539a\u7684\u7279\u70b9\u548c\u4f18\u52bf\uff0c\u4f46\u6211\u4eec\u7ecf\u5e38\u8fd8\u662f\u4f1a\u9700\u8981\u89e3\u51b3\u540c\u6b65\u6267\u884c\u7684\u573a\u666f\u3002\u5982\u65b9\u6cd5A\u6267\u884c\u5b8c\u624d\u53ef\u4ee5\u6267\u884c\u65b9\u6cd5B\u3002\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a setTimeout (() => { console . log ( 'A' ) }, 3000 ) console . log ( 'B' ); \u6267\u884c\u7ed3\u679c\u4e3a: [ Running ] node \"test.js\" B A [ Done ] exited with code = 0 in 3 .12 seconds \u5982\u679c\u60f3\u8981\u8f93\u51fa\u7ed3\u679c\u4e3a A B \uff0c\u53ef\u4ee5\u91c7\u53d6 Promise \u6216 Async \u6765\u5b9e\u73b0\u3002","title":"\u516d\u3001\u5f02\u6b65\u7f16\u7a0b\u65b9\u6848\uff08Promise &amp; Async\uff09"},{"location":"NodeJS/Node.js/#promise","text":"Promise \u662f\u5f02\u6b65\u7f16\u7a0b\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\uff0c\u6bd4\u4f20\u7edf\u7684\u89e3\u51b3\u65b9\u6848\u2014\u2014\u56de\u8c03\u51fd\u6570\u548c\u4e8b\u4ef6\u2014\u2014\u66f4\u5408\u7406\u548c\u66f4\u5f3a\u5927\u3002ES6 \u539f\u751f\u63d0\u4f9b\u4e86 Promise \u5bf9\u8c61\uff0c\u63d0\u4f9b\u7edf\u4e00\u7684 API\uff0c\u5404\u79cd\u5f02\u6b65\u64cd\u4f5c\u90fd\u53ef\u4ee5\u7528\u540c\u6837\u7684\u65b9\u6cd5\u8fdb\u884c\u5904\u7406\u3002\u793a\u4f8b\u5982\u4e0b\uff1a var f = new Promise (( resolve , reject ) => { setTimeout (() => { console . log ( 'A' ); resolve (); }, 3000 ); }); f . then (() => { console . log ( 'B' ); }, ( err ) => { console . log ( 'Err' ); }); \u6267\u884c\u7ed3\u679c\uff1a [ Running ] node \"test.js\" A B [ Done ] exited with code = 0 in 3 .123 seconds \u53ef\u4ee5\u628a Promise \u5bf9\u8c61\u6bd4\u55bb\u4e3a\u4e00\u4e2a\u5bb9\u5668\uff0c\u91cc\u9762\u6709\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c Promise \u5bb9\u5668\u53ea\u6709\u5728\u6536\u5230\u4fe1\u53f7\uff08resolve\u6216\u8005reject\uff09\u65f6\u624d\u4f1a\u8c03\u7528then\u65b9\u6cd5\u3002\u901a\u8fc7 Promise.All \u65b9\u6cd5\u5c06\u591a\u4e2aPromise\u5bf9\u8c61\u5b9e\u4f8b\u5305\u88c5\uff0c\u751f\u6210\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684Promise\u5b9e\u4f8b\uff0c\u7b49\u6267\u884c\u5b8c\u6240\u6709\u5f02\u6b65\u64cd\u4f5c\u4e4b\u540e\u6267\u884cthen\u65b9\u6cd5\uff1a const a = new Promise (( resolve , reject ) => { setTimeout (() => { console . log ( 'A' ); resolve (); }, 3000 ); }); const b = new Promise (( resolve , reject ) => { setTimeout (() => { console . log ( 'B' ); resolve (); }, 3000 ); }); Promise . all ([ a , b ]). then (() => { console . log ( 'end' ); }); \u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a [ Running ] node test.js A B end [ Done ] exited with code = 0 in 3 .122 seconds","title":"\u57fa\u4e8ePromise\u5b9e\u73b0\u540c\u6b65\u63a7\u5236"},{"location":"NodeJS/Node.js/#async","text":"ES2017 \u6807\u51c6\u5f15\u5165\u4e86 async \u51fd\u6570\uff0c\u4f7f\u5f97\u5f02\u6b65\u64cd\u4f5c\u53d8\u5f97\u66f4\u52a0\u65b9\u4fbf\u3002\u968f\u7740Node.js 8\u7684\u53d1\u5e03\uff0c\u671f\u5f85\u5df2\u4e45\u7684async\u51fd\u6570\u4e5f\u5728\u5176\u4e2d\u9ed8\u8ba4\u5b9e\u73b0\u4e86\u3002async \u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406\uff0c\u662f\u5c06 Generator \u51fd\u6570\u548c\u81ea\u52a8\u6267\u884c\u5668\uff0c\u5305\u88c5\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u3002 async \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f7f\u7528 then \u65b9\u6cd5\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\u3002\u5f53\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\uff0c\u4e00\u65e6\u9047\u5230 await \u5c31\u4f1a\u5148\u8fd4\u56de\uff0c\u5fc5\u987b\u7b49\u5230\u5185\u90e8\u6240\u6709 await \u547d\u4ee4\u540e\u9762\u7684 Promise \u5bf9\u8c61\u6267\u884c\u5b8c\uff0c\u624d\u4f1a\u53d1\u751f\u72b6\u6001\u6539\u53d8\uff08\u9664\u975e\u9047\u5230 return \u8bed\u53e5\u6216\u8005\u629b\u51fa\u9519\u8bef\uff09\uff0c\u518d\u63a5\u7740\u6267\u884c\u51fd\u6570\u4f53\u5185\u540e\u9762\u7684\u8bed\u53e5\u3002\u770b\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50: function f () { return new Promise (( resolve ) => { setTimeout ( resolve , 3000 , 'Hello' ); console . log ( 'A' ); }); } async function asyncF ( value ) { //\u524d\u9762\u7684 `async` \u5173\u952e\u5b57\uff0c\u8868\u660e\u8be5\u51fd\u6570\u5185\u90e8\u6709\u5f02\u6b65\u64cd\u4f5c\u3002 console . log ( 'B' ); await f (). then ( value => console . log ( value )); console . log ( 'C' ); return value ; // return\u8bed\u53e5\u7684\u8fd4\u56de\u503c\uff0c\u4f1a\u6210\u4e3a`then`\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u3002 } asyncF ( 'world' ). then ( result => console . log ( result )); \u6267\u884c\u7ed3\u679c\u5982\u4e0b: [ Running ] node \"test.js\" B #\u7acb\u5373\u8f93\u51fa A #\u7acb\u5373\u8f93\u51fa Hello #3\u79d2\u540e\u8f93\u51fa C world [ Done ] exited with code = 0 in 3 .165 seconds async \u51fd\u6570\u7684 await \u547d\u4ee4\u540e\u9762\uff0c\u53ef\u4ee5\u662f Promise \u5bf9\u8c61\u6216\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff08\u6570\u503c\u3001\u5b57\u7b26\u4e32\u548c\u5e03\u5c14\u503c\uff0c\u4f46\u4f1a\u81ea\u52a8\u8f6c\u6210\u7acb\u5373 resolved \u7684 Promise \u5bf9\u8c61\uff09\u3002 sync \u51fd\u6570\u5185\u90e8\u629b\u51fa\u9519\u8bef\uff0c\u4f1a\u5bfc\u81f4\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u53d8\u4e3a reject \u72b6\u6001\u3002\u629b\u51fa\u7684\u9519\u8bef\u5bf9\u8c61\u4f1a\u88ab catch \u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u3002\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a async function f () { throw new Error ( '\u53d1\u751f\u5f02\u5e38' ); } f (). then ( result => console . log ( `resolve result: ${ result } ` ), error => console . log ( error ) ); \u6267\u884c\u7ed3\u679c\uff1a [ Running ] node \"test.js\" Error: \u53d1\u751f\u5f02\u5e38 at f ( /Users/lixl.cn/nodework/blog/test.js:4:9 ) at Object.<anonymous> ( /Users/lixl.cn/nodework/blog/test.js:7:1 ) at Module._compile ( internal/modules/cjs/loader.js:701:30 ) at Object.Module._extensions..js ( internal/modules/cjs/loader.js:712:10 ) at Module.load ( internal/modules/cjs/loader.js:600:32 ) at tryModuleLoad ( internal/modules/cjs/loader.js:539:12 ) at Function.Module._load ( internal/modules/cjs/loader.js:531:3 ) at Function.Module.runMain ( internal/modules/cjs/loader.js:754:12 ) at startup ( internal/bootstrap/node.js:283:19 ) at bootstrapNodeJSCore ( internal/bootstrap/node.js:622:3 ) [ Done ] exited with code = 0 in 0 .153 seconds","title":"\u57fa\u4e8eAsync\u5b9e\u73b0\u540c\u6b65\u63a7\u5236"},{"location":"NodeJS/Node.js/#eslint","text":"JavaScript \u662f\u4e00\u4e2a\u52a8\u6001\u7684\u5f31\u7c7b\u578b\u8bed\u8a00\uff0c\u5728\u5f00\u53d1\u4e2d\u6bd4\u8f83\u5bb9\u6613\u51fa\u9519\uff0c\u4e00\u822c\u4f1a\u501f\u52a9 Lint \u5de5\u5177\u6765\u4fdd\u969c\u8d28\u91cf\u3002 ESLint \u662f\u65b0\u4e00\u4ee3\u5f00\u6e90 JavaScript \u4ee3\u7801\u68c0\u67e5\u5de5\u5177\uff0c\u4f7f\u7528 Node.js \u7f16\u5199\uff0c\u5e38\u7528\u4e8e\u5bfb\u627e\u6709\u95ee\u9898\u7684\u6a21\u5f0f\u6216\u8005\u4ee3\u7801\uff0c\u5e76\u4e14\u4e0d\u4f9d\u8d56\u4e8e\u5177\u4f53\u7684\u7f16\u7801\u98ce\u683c\u3002 # \u5168\u5c40\u5b89\u88c5 ESLint npm install -g eslint # \u8fdb\u5165\u9879\u76ee cd ~/NodeWork/NodeDemo # \u521d\u59cb\u5316 package.json npm init -f # \u521d\u59cb\u5316 ESLint \u914d\u7f6e eslint --init \u901a\u8fc7 Lint \u5de5\u5177\u53ef\u4ee5\u8ba9\u6211\u4eec\uff1a \u907f\u514d\u4f4e\u7ea7bug\uff0c\u627e\u51fa\u53ef\u80fd\u53d1\u751f\u7684\u8bed\u6cd5\u9519\u8bef \u63d0\u793a\u5220\u9664\u591a\u4f59\u7684\u4ee3\u7801 \u786e\u4fdd\u4ee3\u7801\u9075\u5faa\u6700\u4f73\u5b9e\u8df5 (\u53ef\u53c2\u8003 airbnb style \u3001 javascript standard ) \u7edf\u4e00\u56e2\u961f\u7684\u4ee3\u7801\u98ce\u683c \u9879\u76ee\u521d\u59cb\u5316\u5b8c\u6bd5\uff0c\u53ef\u4ee5\u5f00\u59cb\u5728 ESLint \u7684\u63d0\u793a\u4e0b\uff0c\u9ad8\u8d28\u91cf\u7f16\u5199\u4ee3\u7801\u4e86\u3002","title":"\u4e03\u3001\u57fa\u4e8eESLint\u4fdd\u969c\u8d28\u91cf"},{"location":"NodeJS/Node.js/#_6","text":"Node\u5b98\u65b9\u6587\u6863\uff1a https://nodejs.org/zh-cn/docs/ express\u5b98\u7f51\uff1a http://www.expressjs.com.cn/ ESLint\u5b98\u65b9\u6307\u5357\uff1a https://cn.eslint.org/docs/user-guide/getting-started \u6df1\u5165\u6d45\u51faNode.js\uff1a https://book.douban.com/subject/25768396/ ECMAScript 6 \u5165\u95e8\uff1a http://es6.ruanyifeng.com/","title":"\u516b\u3001\u53c2\u8003"}]}