



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="悟尘纪电子书">
      
      
        <link rel="canonical" href="https://www.lixl.cn/Docker必知必会/Docker常用命令与操作详解.html">
      
      
        <meta name="author" content="悟尘">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="https://www.lixl.cn/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>Docker常用命令与操作详解</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CCascadia+Code&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Cascadia Code","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#docker" tabindex="0" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.lixl.cn" title="书籍列表" aria-label="书籍列表" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="https://www.lixl.cn/medias/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              书籍列表
            </span>
            <span class="md-header-nav__topic">
              
                Docker常用命令与操作详解
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.lixl.cn" title="书籍列表" class="md-nav__button md-logo">
      
        <img alt="logo" src="https://www.lixl.cn/medias/logo.png" width="48" height="48">
      
    </a>
    书籍列表
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="关于本站" class="md-nav__link">
      关于本站
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Docker必知必会
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Docker必知必会
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Docker常用命令与操作详解
      </label>
    
    <a href="Docker常用命令与操作详解.html" title="Docker常用命令与操作详解" class="md-nav__link md-nav__link--active">
      Docker常用命令与操作详解
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    一、Docker 常用命令示意图
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_1" class="md-nav__link">
    二、常用 Docker 命令列表：
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    三、常用命令示例示例
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker_2" class="md-nav__link">
    查看 Docker 版本和系统信息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_3" class="md-nav__link">
    搜索下载 Docker 镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_4" class="md-nav__link">
    Docker 镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_5" class="md-nav__link">
    运行 Docker 容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_6" class="md-nav__link">
    列出 Docker 容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    启动，停止，重启和杀死容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-exec-bash-docker-ssh" class="md-nav__link">
    Docker Exec Bash 和 Docker SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attach" class="md-nav__link">
    以分离模式启动容器并 attach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_7" class="md-nav__link">
    检查 Docker 镜像历史
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_8" class="md-nav__link">
    Docker 检查容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    容器与主机间文件复制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_9" class="md-nav__link">
    创建 Docker 镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_10" class="md-nav__link">
    删除 Docker 容器和镜像
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    四、参考
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Fabric从入门到企业级实战
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Fabric从入门到企业级实战
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/0、摘要.html" title="Index 摘要" class="md-nav__link">
      Index 摘要
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/1、新组织基础环境安装.html" title="一、新组织基础环境安装" class="md-nav__link">
      一、新组织基础环境安装
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/2、在联盟管理节点创建新channel.html" title="二、在联盟管理节点创建新channel" class="md-nav__link">
      二、在联盟管理节点创建新channel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/3、在新组织节点（ORG）生成证书.html" title="三、在新组织节点（ORG）生成证书" class="md-nav__link">
      三、在新组织节点（ORG）生成证书
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/4、在新组织节点生成SyOrg配置文件.html" title="四、在新组织节点生成SyOrg配置文件" class="md-nav__link">
      四、在新组织节点生成SyOrg配置文件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/5、配置新组织节点.html" title="五、配置新组织节点" class="md-nav__link">
      五、配置新组织节点
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/6、联盟组织生成和提交新 org 配置.html" title="六、联盟组织生成和提交新 org 配置" class="md-nav__link">
      六、联盟组织生成和提交新 org 配置
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/7、新组织申请添加到channel中.html" title="七、新组织申请添加到channel中" class="md-nav__link">
      七、新组织申请添加到channel中
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fabric从入门到企业级实战/8、升级chaincode和背书策略.html" title="八、升级chaincode和背书策略" class="md-nav__link">
      八、升级chaincode和背书策略
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      JAVA面向对象设计模式
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        JAVA面向对象设计模式
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之中介者模式.html" title="Java面向对象设计之中介者模式" class="md-nav__link">
      Java面向对象设计之中介者模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之代理模式.html" title="Java面向对象设计之代理模式" class="md-nav__link">
      Java面向对象设计之代理模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之单例模式.html" title="Java面向对象设计之单例模式" class="md-nav__link">
      Java面向对象设计之单例模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之命令模式.html" title="Java面向对象设计之命令模式" class="md-nav__link">
      Java面向对象设计之命令模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之外观模式.html" title="Java面向对象设计之外观模式" class="md-nav__link">
      Java面向对象设计之外观模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之工厂方法模式.html" title="Java面向对象设计之工厂方法模式" class="md-nav__link">
      Java面向对象设计之工厂方法模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之建造者模式.html" title="Java面向对象设计之建造者模式" class="md-nav__link">
      Java面向对象设计之建造者模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之桥接模式.html" title="Java面向对象设计之桥接模式" class="md-nav__link">
      Java面向对象设计之桥接模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之状态模式.html" title="Java面向对象设计之状态模式" class="md-nav__link">
      Java面向对象设计之状态模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之策略模式.html" title="Java面向对象设计之策略模式" class="md-nav__link">
      Java面向对象设计之策略模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之装饰模式.html" title="Java面向对象设计之装饰模式" class="md-nav__link">
      Java面向对象设计之装饰模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之观察者模式.html" title="Java面向对象设计之观察者模式" class="md-nav__link">
      Java面向对象设计之观察者模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之责任链模式.html" title="Java面向对象设计之责任链模式" class="md-nav__link">
      Java面向对象设计之责任链模式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JAVA面向对象设计模式/Java面向对象设计之适配器模式.html" title="Java面向对象设计之适配器模式" class="md-nav__link">
      Java面向对象设计之适配器模式
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      NodeJS从入门到实战
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        NodeJS从入门到实战
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../NodeJS从入门到实战/Electron构建跨平台应用.html" title="Electron构建跨平台应用" class="md-nav__link">
      Electron构建跨平台应用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../NodeJS从入门到实战/Node.js必知必会.html" title="Node.js必知必会（安装配置、应用实例及同步控制）" class="md-nav__link">
      Node.js必知必会（安装配置、应用实例及同步控制）
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    一、Docker 常用命令示意图
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_1" class="md-nav__link">
    二、常用 Docker 命令列表：
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    三、常用命令示例示例
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker_2" class="md-nav__link">
    查看 Docker 版本和系统信息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_3" class="md-nav__link">
    搜索下载 Docker 镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_4" class="md-nav__link">
    Docker 镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_5" class="md-nav__link">
    运行 Docker 容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_6" class="md-nav__link">
    列出 Docker 容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    启动，停止，重启和杀死容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-exec-bash-docker-ssh" class="md-nav__link">
    Docker Exec Bash 和 Docker SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attach" class="md-nav__link">
    以分离模式启动容器并 attach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_7" class="md-nav__link">
    检查 Docker 镜像历史
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_8" class="md-nav__link">
    Docker 检查容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    容器与主机间文件复制
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_9" class="md-nav__link">
    创建 Docker 镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_10" class="md-nav__link">
    删除 Docker 容器和镜像
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    四、参考
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Docker常用命令与操作详解</h1>
                
                <h2 id="docker">一、Docker 常用命令示意图<a class="headerlink" href="#docker" title="Permanent link">&para;</a></h2>
<p>Docker 提供了非常丰富的命令。所谓一图胜千言，我们可以从下面的图片了解到很多信息和它们之前的用途。</p>
<p><img alt="Docker常用命令示意图" src="https://pic.lixl.cn/2020/image-20200325142506237.png" /></p>
<h2 id="docker_1">二、常用 Docker 命令列表：<a class="headerlink" href="#docker_1" title="Permanent link">&para;</a></h2>
<ul>
<li><code class="codehilite"><span class="err">docker help</span></code>  检查最新 Docker 可用命令；</li>
<li><code class="codehilite"><span class="err">docker attach</span></code>  将本地输入、输出、错误流附加到正在运行的容器；</li>
<li><code class="codehilite"><span class="err">docker commit</span></code>  从当前更改的容器状态创建新镜像；</li>
<li><code class="codehilite"><span class="err">docker exec</span></code>  在活动或正在运行的容器中运行命令；</li>
<li><code class="codehilite"><span class="err">docker history</span></code>  显示镜像历史记录；</li>
<li><code class="codehilite"><span class="err">docker info</span></code>  显示系统范围信息；</li>
<li><code class="codehilite"><span class="err">docker inspect</span></code>  查找有关 docker 容器和镜像的系统级信息；</li>
<li><code class="codehilite"><span class="err">docker login</span></code>  登录到本地注册表或 Docker Hub；</li>
<li><code class="codehilite"><span class="err">docker pull</span></code>  从本地注册表或 Docker Hub 中提取镜像或存储库；</li>
<li><code class="codehilite"><span class="err">docker ps</span></code>  列出容器的各种属性；</li>
<li><code class="codehilite"><span class="err">docker restart</span></code>  停止并启动容器；</li>
<li><code class="codehilite"><span class="err">docker rm</span></code>  移除容器；</li>
<li><code class="codehilite"><span class="err">docker rmi</span></code>  删除镜像；</li>
<li><code class="codehilite"><span class="err">docker run</span></code>  在隔离容器中运行命令；</li>
<li><code class="codehilite"><span class="err">docker search</span></code>  在 Docker Hub 中搜索镜像；</li>
<li><code class="codehilite"><span class="err">docker start</span></code>  启动已停止的容器；</li>
<li><code class="codehilite"><span class="err">docker stop</span></code>  停止运行容器；</li>
<li><code class="codehilite"><span class="err">docker version</span></code>  提供 docker 版本信息。</li>
</ul>
<h2 id="_1">三、常用命令示例示例<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="docker_2">查看 Docker 版本和系统信息<a class="headerlink" href="#docker_2" title="Permanent link">&para;</a></h3>
<p>无论是在本地还是云端，我们都需要检查 Docker 版本和系统信息，可以使用以下命令找到 Docker 版本：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker version
Client:
Version: <span class="m">18</span>.03.0-ce
API version: <span class="m">1</span>.37
Go version: go1.9.4
Git commit: 0520e24
Built: Wed Mar <span class="m">21</span> <span class="m">23</span>:06:22 <span class="m">2018</span>
OS/Arch: darwin/amd64
Experimental: <span class="nb">false</span>
Orchestrator: swarm
Server:
Engine:
Version: <span class="m">18</span>.03.0-ce
API version: <span class="m">1</span>.37 <span class="o">(</span>minimum version <span class="m">1</span>.12<span class="o">)</span>
Go version: go1.9.4
Git commit: 0520e24
Built: Wed Mar <span class="m">21</span> <span class="m">23</span>:14:32 <span class="m">2018</span>
OS/Arch: linux/amd64
Experimental: <span class="nb">true</span>
</code></pre></div>
</td></tr></table>

<p>另一个重要命令是 docker info：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker info
Containers: <span class="m">0</span>
Running: <span class="m">0</span>
Paused: <span class="m">0</span>
Stopped: <span class="m">0</span>
Images: <span class="m">0</span>
Server Version: <span class="m">18</span>.03.0-ce
Storage Driver: overlay2
Backing Filesystem: extfs
Supports d_type: <span class="nb">true</span>
Native Overlay Diff: <span class="nb">true</span>
Logging Driver: json-file
Cgroup Driver: cgroupfs
Plugins:
Volume: <span class="nb">local</span>
Network: bridge host ipvlan macvlan null overlay
Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog
…
</code></pre></div>
</td></tr></table>

<p>该命令将显示部分设备信息，比如服务器版本、存储驱动程序、内核版本、操作系统、总内存等。当尝试为当前 Docker 安装启动新资源或尝试找出系统级资源分配问题时，这些信息非常有用，这也是检查运行、停止容器数量及下载镜像数量的快速方法。</p>
<h3 id="docker_3">搜索下载 Docker 镜像<a class="headerlink" href="#docker_3" title="Permanent link">&para;</a></h3>
<p>可以使用 docker search 命令在 Docker Hub 搜索已有镜像：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker search ubuntu
NAME DESCRIPTION STARS OFFICIAL AUTOMATED
ubuntu Ubuntu is a Debian-based Linux operating sys… <span class="m">7861</span> <span class="o">[</span>OK<span class="o">]</span>
dorowu/ubuntu-desktop-lxde-vnc Ubuntu with openssh-server and NoVNC <span class="m">190</span> <span class="o">[</span>OK<span class="o">]</span>
rastasheep/ubuntu-sshd Dockerized SSH service, built on top of offi… <span class="m">156</span> <span class="o">[</span>OK<span class="o">]</span>
ansible/ubuntu14.04-ansible Ubuntu <span class="m">14</span>.04 LTS with ansible <span class="m">93</span> <span class="o">[</span>OK<span class="o">]</span>
ubuntu-upstart Upstart is an event-based replacement <span class="k">for</span> th… <span class="m">87</span> <span class="o">[</span>OK<span class="o">]</span>
neurodebian NeuroDebian provides neuroscience research s… <span class="m">50</span> <span class="o">[</span>OK<span class="o">]</span>
…
</code></pre></div>
</td></tr></table>

<p>以上对 ubuntu 的搜索显示可用镜像、描述和官方状态等信息。如果要下载 ubuntu 镜像，可以使用 docker pull 命令：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker pull ubuntu
Using default tag: latest
latest: Pulling from library/ubuntu
6b98dfc16071: Pull <span class="nb">complete</span>
4001a1209541: Pull <span class="nb">complete</span>
6319fc68c576: Pull <span class="nb">complete</span>
b24603670dc3: Pull <span class="nb">complete</span>
97f170c87c6f: Pull <span class="nb">complete</span>
Digest: sha256:5f4bdc3467537cbbe563e80db2c3ec95d548a9145d64453b06939c4592d67b6d
Status: Downloaded newer image <span class="k">for</span> ubuntu:latest
$
</code></pre></div>
</td></tr></table>

<h3 id="docker_4">Docker 镜像<a class="headerlink" href="#docker_4" title="Permanent link">&para;</a></h3>
<p>使用 docker info 命令查找拥有镜像数量：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker info
Containers: <span class="m">0</span>
Running: <span class="m">0</span>
Paused: <span class="m">0</span>
Stopped: <span class="m">0</span>
Images: <span class="m">1</span>
…
</code></pre></div>
</td></tr></table>

<p>docker images 命令可详细列出拥有镜像：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              113a43faa138        <span class="m">2</span> weeks ago         <span class="m">81</span>.2MB
</code></pre></div>
</td></tr></table>

<p>假设下载 NGINX 镜像，可以运行 docker pull 命令：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker pull nginx
</code></pre></div>
</td></tr></table>

<p>如果检查 Docker 镜像，会看到如下内容：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              113a43faa138        <span class="m">2</span> weeks ago         <span class="m">81</span>.2MB
nginx               latest              cd5239a0906a        <span class="m">2</span> weeks ago         109MB
</code></pre></div>
</td></tr></table>

<p>如果寻找 Ubuntu 16.04 版本，可使用 16.04 标签下载特定版本：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker pull ubuntu:16.04
</code></pre></div>
</td></tr></table>

<p>随后，将出现两个 Ubuntu 映像版本：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              <span class="m">16</span>.04               5e8b97a2a082        <span class="m">2</span> weeks ago         114MB
ubuntu              latest              113a43faa138        <span class="m">2</span> weeks ago         <span class="m">81</span>.2MB
nginx               latest              cd5239a0906a        <span class="m">2</span> weeks ago         109MB
</code></pre></div>
</td></tr></table>

<p>注意：无需注册 Docker Hub 即可提取镜像。如果想将镜像推送到 Docker Hub，需要注册然后使用 docker login 命令登录：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker login --username<span class="o">=</span>yourhubusername --email<span class="o">=</span>youremail@company.com
</code></pre></div>
</td></tr></table>

<h3 id="docker_5">运行 Docker 容器<a class="headerlink" href="#docker_5" title="Permanent link">&para;</a></h3>
<p>假设想在 docker 上运行 NGINX 服务器，可运行以下命令：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker run -p <span class="m">8080</span>:80 nginx
</code></pre></div>
</td></tr></table>

<p>如果已用 run 命令从 Docker Hub 提取 nginx 映像创建 NGINX 容器。 -p 8080:80 会告诉 Docker 将 localhost 端口 8080 映射到 Docker 容器端口 80，应该能够从 <a href="http://localhost:8080">http://localhost:8080</a> 访问 NGINX 服务器。</p>
<p>NGINX 容器已附加到命令行。如果退出命令行，容器将会停止，可使用 detach（’- d）启动 NGINX 容器，这样即使退出命令行也可继续运行。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker run -p <span class="m">8080</span>:80 -d nginx
</code></pre></div>
</td></tr></table>

<p>以上命令将以分离模式启动容器并返回命令行。<code class="codehilite"><span class="err">docker run</span></code> 命令格式：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>Usage: docker run <span class="o">[</span>OPTIONS<span class="o">]</span> IMAGE <span class="o">[</span>COMMAND<span class="o">]</span> <span class="o">[</span>ARG...<span class="o">]</span>
-a, --attach<span class="o">=[]</span> <span class="c1">#登录容器（以docker run -d启动的容器）</span>
-c, --cpu-shares<span class="o">=</span><span class="m">0</span> <span class="c1">#设置容器CPU权重，在CPU共享场景使用</span>
--cap-add<span class="o">=[]</span> <span class="c1">#添加权限，权限清单详见：http://linux.die.net/man/7/capabilities</span>
--cap-drop<span class="o">=[]</span> <span class="c1">#删除权限，权限清单详见：http://linux.die.net/man/7/capabilities</span>
--cidfile<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#运行容器后，在指定文件中写入容器PID值，一种典型的监控系统用法</span>
--cpuset<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#设置容器可以使用哪些CPU，此参数可以用来容器独占CPU</span>
-d, --detach<span class="o">=</span><span class="nb">false</span> <span class="c1">#指定容器运行于前台还是后台</span>
--device<span class="o">=[]</span> <span class="c1">#添加主机设备给容器，相当于设备直通</span>
--dns<span class="o">=[]</span> <span class="c1">#指定容器的dns服务器</span>
--dns-search<span class="o">=[]</span> <span class="c1">#指定容器的dns搜索域名，写入到容器的/etc/resolv.conf文件</span>
-e, --env<span class="o">=[]</span> <span class="c1">#指定环境变量，容器中可以使用该环境变量</span>
--entrypoint<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#覆盖image的入口点</span>
--env-file<span class="o">=[]</span> <span class="c1">#指定环境变量文件，文件格式为每行一个环境变量</span>
--expose<span class="o">=[]</span> <span class="c1">#指定容器暴露的端口，即修改镜像的暴露端口</span>
-h, --hostname<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#指定容器的主机名</span>
-i, --interactive<span class="o">=</span><span class="nb">false</span> <span class="c1">#打开STDIN，用于控制台交互</span>
--link<span class="o">=[]</span> <span class="c1">#指定容器间的关联，使用其他容器的IP、env等信息</span>
--lxc-conf<span class="o">=[]</span> <span class="c1">#指定容器的配置文件，只有在指定--exec-driver=lxc时使用</span>
-m, --memory<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#指定容器的内存上限</span>
--name<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#指定容器名字，后续可以通过名字进行容器管理，links特性需要使用名字</span>
--net<span class="o">=</span><span class="s2">&quot;bridge&quot;</span> <span class="c1">#容器网络设置，待详述</span>
-P, --publish-all<span class="o">=</span><span class="nb">false</span> <span class="c1">#指定容器暴露的端口，待详述</span>
-p, --publish<span class="o">=[]</span> <span class="c1">#指定容器暴露的端口，待详述</span>
--privileged<span class="o">=</span><span class="nb">false</span> <span class="c1">#指定容器是否为特权容器，特权容器拥有所有的capabilities</span>
--restart<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#指定容器停止后的重启策略，待详述</span>
--rm<span class="o">=</span><span class="nb">false</span> <span class="c1">#指定容器停止后自动删除容器(不支持以docker run -d启动的容器)</span>
--sig-proxy<span class="o">=</span><span class="nb">true</span> <span class="c1">#设置由代理接受并处理信号，但是SIGCHLD、SIGSTOP和SIGKILL不能被代理</span>
-t, --tty<span class="o">=</span><span class="nb">false</span> <span class="c1">#分配tty设备，该可以支持终端登录</span>
-u, --user<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#指定容器的用户</span>
-v, --volume<span class="o">=[]</span> <span class="c1">#给容器挂载存储卷，挂载到容器的某个目录</span>
--volumes-from<span class="o">=[]</span> <span class="c1">#给容器挂载其他容器上的卷，挂载到容器的某个目录</span>
-w, --workdir<span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#指定容器的工作目录</span>
</code></pre></div>
</td></tr></table>

<h3 id="docker_6">列出 Docker 容器<a class="headerlink" href="#docker_6" title="Permanent link">&para;</a></h3>
<p>docker ps 命令允许查找正在运行的所有容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps
CONTAINER ID         IMAGE         COMMAND         CREATED           STATUS          PORTS             NAMES
6162daed25da         nginx  <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span> <span class="m">7</span> minutes ago   Up <span class="m">7</span> minutes  <span class="m">0</span>.0.0.0:8080-&gt;80/tcp  hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>如上显示容器的各种属性，可以看到是从 nginx 镜像创建并显示端口转发信息。CONTAINER ID 和 NAMES 属性需要特别提及，可以使用上述两大属性唯一标识容器。二者都可自动生成，但也可在容器创建过程中为容器命名。
创建一个名为 my_nginx 的 NGINX 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker run --name my_nginx -p <span class="m">8888</span>:80 -d nginx
</code></pre></div>
</td></tr></table>

<p>再次列出所有 Docker 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                  NAMES
e7b19b6ad778        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   About a minute ago   Up About a minute   <span class="m">0</span>.0.0.0:8888-&gt;80/tcp   my_nginx
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">15</span> minutes ago       Up <span class="m">16</span> minutes       <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>请注意，新容器的名称为“my_nginx”。 处理大量容器时，可以使用命名约定，这可以更好得组织容器。
docker ps 命令仅显示正在运行的容器。如果对上述情况使用 docker info 命令：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker info
Containers: <span class="m">2</span>
Running: <span class="m">2</span>
Paused: <span class="m">0</span>
Stopped: <span class="m">0</span>
Images: <span class="m">3</span>
</code></pre></div>
</td></tr></table>

<p>可以看到有两个容器正在运行，如果一个暂停或已停止，则不会仅使用 docker ps 命令查看这些容器，必须使用 all（ - a）选项：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps -a
</code></pre></div>
</td></tr></table>

<h3 id="_2">启动，停止，重启和杀死容器<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>假设要停止’my_nginx’容器，可使用 CONTAINER ID 或 NAME。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker stop my_nginx
my_nginx
</code></pre></div>
</td></tr></table>

<p>列出 Docker 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">27</span> minutes ago      Up <span class="m">27</span> minutes       <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                          PORTS                  NAMES
e7b19b6ad778        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">12</span> minutes ago      Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> About a minute ago                          my_nginx
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">27</span> minutes ago      Up <span class="m">27</span> minutes                   <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>如果在没有 -a 选项的情况下运行 docker ps，只显示正在运行的容器。在第二种情况下，可以看到’my_nginx’容器处于退出状态。</p>
<p>让我们 docker start 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker start my_nginx
my_nginx
</code></pre></div>
</td></tr></table>

<p>检查 Docker 容器列表：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
e7b19b6ad778        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">16</span> minutes ago      Up <span class="m">29</span> seconds       <span class="m">0</span>.0.0.0:8888-&gt;80/tcp   my_nginx
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">30</span> minutes ago      Up <span class="m">30</span> minutes       <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>可以看到 STATUS 显示容器’my_nginx’再次被启动。
如果由于某些问题而需重启容器，则可使用 restart 命令，这比单独停止和启动容器速度更快：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker restart my_nginx
</code></pre></div>
</td></tr></table>

<p>可以像进程一样终止 docker 容器，比如终止 my_nginx 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker <span class="nb">kill</span> my_nginx
</code></pre></div>
</td></tr></table>

<p>再次列出 Docker 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                       PORTS                  NAMES
e7b19b6ad778        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">22</span> minutes ago      Exited <span class="o">(</span><span class="m">137</span><span class="o">)</span> <span class="m">7</span> seconds ago                          my_nginx
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">36</span> minutes ago      Up <span class="m">36</span> minutes                <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>容器 my_nginx 未运行。此外，可在信息中看到一个正在运行的容器和一个已停止容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker info
Containers: <span class="m">2</span>
Running: <span class="m">1</span>
Paused: <span class="m">0</span>
Stopped: <span class="m">1</span>
Images: <span class="m">3</span>
…
</code></pre></div>
</td></tr></table>

<h3 id="docker-exec-bash-docker-ssh">Docker Exec Bash 和 Docker SSH<a class="headerlink" href="#docker-exec-bash-docker-ssh" title="Permanent link">&para;</a></h3>
<p>如果需要与 shell 进行交互以创建服务或解决问题，可以使用 docker exec 命令创建交互式 shell。比如，用 bash shell 从 ubuntu 映像启动一个容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker run --name my_ubuntu -it ubuntu:latest bash
root@a19c770b8621:/#
</code></pre></div>
</td></tr></table>

<p>root @haracle＃表示位于 Docker 容器的 bash shell 中，可以运行 shell 命令：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>root@a19c770b8621:/# ls
bin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var
root@a19c770b8621:/# <span class="nb">pwd</span>
/
</code></pre></div>
</td></tr></table>

<p>列出 Docker 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                  NAMES
a19c770b8621        ubuntu:latest       <span class="s2">&quot;bash&quot;</span>                   About a minute ago   Up About a minute                          my_ubuntu
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   About an hour ago    Up About an hour    <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>如上，my_ubuntu 正在运行。假设想将 Docker ssh 放入’my_ubuntu’容器中，可以使用 docker exec bash：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker <span class="nb">exec</span> -it my_ubuntu bash
root@a19c770b8621:/#
</code></pre></div>
</td></tr></table>

<p>使用 docker exec 向容器发出命令。例如，可以直接用命令提示符在 my_ubuntu 容器上运行 ls 命令：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker <span class="nb">exec</span> -it my_ubuntu ls
bin dev home lib64 mnt proc run srv tmp var
boot etc lib media opt root sbin sys usr
</code></pre></div>
</td></tr></table>

<h3 id="attach">以分离模式启动容器并 attach<a class="headerlink" href="#attach" title="Permanent link">&para;</a></h3>
<p>以上示例用附加模式启动 ubuntu 容器，我们也可在分离模式下启动：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker run -it -d --name my_ubuntu_2 ubuntu:latest bash
75b28b7208359137b3e1dc2843387918e28b4c6c4860ef0cdeac79c205f5cbc4
</code></pre></div>
</td></tr></table>

<p>验证容器是否正在运行：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
75b28b720835        ubuntu:latest       <span class="s2">&quot;bash&quot;</span>                   <span class="m">3</span> minutes ago       Up <span class="m">3</span> minutes                               my_ubuntu_2
a19c770b8621        ubuntu:latest       <span class="s2">&quot;bash&quot;</span>                   <span class="m">15</span> minutes ago      Up <span class="m">15</span> minutes                              my_ubuntu
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">2</span> hours ago         Up <span class="m">2</span> hours          <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>使用 docker attach 命令获取 docker exec bash-like 效果：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker attach my_ubuntu_2
root@75b28b720835:/#
</code></pre></div>
</td></tr></table>

<h3 id="docker_7">检查 Docker 镜像历史<a class="headerlink" href="#docker_7" title="Permanent link">&para;</a></h3>
<p>Docker 社区镜像是分层创建的，可使用 Docker history 命令查看镜像创建方式。先看看有哪些镜像：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              <span class="m">16</span>.04               5e8b97a2a082        <span class="m">2</span> weeks ago         114MB
ubuntu              latest              113a43faa138        <span class="m">2</span> weeks ago         <span class="m">81</span>.2MB
nginx               latest              cd5239a0906a        <span class="m">2</span> weeks ago         109MB
</code></pre></div>
</td></tr></table>

<p>查看 nginx 镜像历史：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker <span class="nb">history</span> nginx
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
cd5239a0906a        <span class="m">2</span> weeks ago         /bin/sh -c <span class="c1">#(nop)  CMD [&quot;nginx&quot; &quot;-g&quot; &quot;daemon…   0B</span>
&lt;missing&gt;           <span class="m">2</span> weeks ago         /bin/sh -c <span class="c1">#(nop)  STOPSIGNAL [SIGTERM]         0B</span>
&lt;missing&gt;           <span class="m">2</span> weeks ago         /bin/sh -c <span class="c1">#(nop)  EXPOSE 80/tcp                0B</span>
&lt;missing&gt;           <span class="m">2</span> weeks ago         /bin/sh -c ln -sf /dev/stdout /var/log/nginx…   22B
&lt;missing&gt;           <span class="m">2</span> weeks ago         /bin/sh -c <span class="nb">set</span> -x  <span class="o">&amp;&amp;</span> apt-get update  <span class="o">&amp;&amp;</span> apt…   <span class="m">53</span>.7MB
&lt;missing&gt;           <span class="m">2</span> weeks ago         /bin/sh -c <span class="c1">#(nop)  ENV NJS_VERSION=1.15.0.0.…   0B</span>
&lt;missing&gt;           <span class="m">2</span> weeks ago         /bin/sh -c <span class="c1">#(nop)  ENV NGINX_VERSION=1.15.0-…   0B</span>
&lt;missing&gt;           <span class="m">7</span> weeks ago         /bin/sh -c <span class="c1">#(nop)  LABEL maintainer=NGINX Do…   0B</span>
&lt;missing&gt;           <span class="m">8</span> weeks ago         /bin/sh -c <span class="c1">#(nop)  CMD [&quot;bash&quot;]                 0B</span>
&lt;missing&gt;           <span class="m">8</span> weeks ago         /bin/sh -c <span class="c1">#(nop) ADD file:ec5be7eec56a74975…   55.3MB</span>
</code></pre></div>
</td></tr></table>

<p>使用镜像历史命令查找最近更改，如果在新版本镜像中发现问题，则此命令可帮助找到原因，也可用以下命令：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker image <span class="nb">history</span> nginx
</code></pre></div>
</td></tr></table>

<h3 id="docker_8">Docker 检查容器<a class="headerlink" href="#docker_8" title="Permanent link">&para;</a></h3>
<p>可以使用 docker inspect 命令查找有关系统的信息，运行 docker ps 命令列出 Docker 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">2</span> hours ago         Up <span class="m">2</span> hours          <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>使用 CONTAINER ID 检查容器（也可使用容器名称）：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker inspect 6162daed25da
<span class="o">[</span>
<span class="o">{</span>
<span class="s2">&quot;Id&quot;</span>: <span class="s2">&quot;6162daed25da50b98afca5f7ed8caca2289bf309b2547d87ae8674b899d604a4&quot;</span>,
<span class="s2">&quot;Created&quot;</span>: <span class="s2">&quot;2018-06-25T05:46:37.902211302Z&quot;</span>,
<span class="s2">&quot;Path&quot;</span>: <span class="s2">&quot;nginx&quot;</span>,
<span class="s2">&quot;Args&quot;</span>: <span class="o">[</span>
…
…
…
<span class="s2">&quot;DriverOpts&quot;</span>: null
<span class="o">}</span>
<span class="o">}</span>
<span class="o">}</span>
<span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
</td></tr></table>

<p>该命令将以 JSON 格式提供大量信息，以下是查找容器 IP 地址的技巧：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker inspect 6162daed25da <span class="p">|</span> grep <span class="s2">&quot;IPAddress&quot;</span>
            <span class="s2">&quot;SecondaryIPAddresses&quot;</span>: null,
            <span class="s2">&quot;IPAddress&quot;</span>: <span class="s2">&quot;172.17.0.2&quot;</span>,
                    <span class="s2">&quot;IPAddress&quot;</span>: <span class="s2">&quot;172.17.0.2&quot;</span>,
</code></pre></div>
</td></tr></table>

<h3 id="_3">容器与主机间文件复制<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>再次列出 Docker 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">3</span> hours ago         Up <span class="m">3</span> hours          <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>NGINX 容器在端口 8080 上运行。因此，如果转到 http//localhost:8080，将看到以下内容：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="s2">&quot;Welcome to nginx!&quot;</span>
</code></pre></div>
</td></tr></table>

<p>如果看到此页面，则 nginx Web 服务器已成功安装并正常运行，需要进一步配置。
首先，在本地目录中创建 index.html：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;&lt;</span><span class="nt">title</span><span class="p">&gt;</span>My Website<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    Hello world
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

<p>使用带有 ls 的 docker exec 命令检查 NGINX 容器中具有 index.html 的文件夹：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker <span class="nb">exec</span> -it hardcore_torvalds ls /usr/share/nginx/html
50x.html index.html
</code></pre></div>
</td></tr></table>

<p>使用创建的本地文件覆盖容器 index.html 文件：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker cp index.html hardcore_torvalds:usr/share/nginx/html/
</code></pre></div>
</td></tr></table>

<p>如果再次检查<a href="http://localhost/">http://localhost:</a>8080，应该可以看到问候语“Hello world”。
可使用 docker cp 命令在本地计算机和创建容器间移动文件，此方法可用于覆盖配置文件。</p>
<h3 id="docker_9">创建 Docker 镜像<a class="headerlink" href="#docker_9" title="Permanent link">&para;</a></h3>
<p>如果想复制更多“Hello World”容器，必须将当前容器保存为镜像。
首先，停止容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker stop hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>列出所有 Docker 容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                         PORTS               NAMES
75b28b720835        ubuntu:latest       <span class="s2">&quot;bash&quot;</span>                   About an hour ago   Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> About an hour ago                       my_ubuntu_2
a19c770b8621        ubuntu:latest       <span class="s2">&quot;bash&quot;</span>                   <span class="m">2</span> hours ago         Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> About an hour ago                       my_ubuntu
6162daed25da        nginx               <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">3</span> hours ago         Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> <span class="m">27</span> seconds ago                          hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>从 STATUS 中，可以看到 NGINX’corecore_torvalds’容器已停止。使用 docker commit 命令创建新镜像：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker commit 6162daed25da nginx_hello_world_template
sha256:117d060587a316035ed5a776e613d9cfbeee9fbfe202c6edc9203820c7da987b
</code></pre></div>
</td></tr></table>

<p>如果现在检查，将看到新镜像：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker images
REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE
nginx_hello_world_template   latest              117d060587a3        <span class="m">40</span> seconds ago      109MB
ubuntu                       <span class="m">16</span>.04               5e8b97a2a082        <span class="m">2</span> weeks ago         114MB
ubuntu                       latest              113a43faa138        <span class="m">2</span> weeks ago         <span class="m">81</span>.2MB
nginx                        latest              cd5239a0906a        <span class="m">2</span> weeks ago         109MB
</code></pre></div>
</td></tr></table>

<p>可以使用此镜像并启动新 Docker 容器，新创建容器将具有“Hello world”页面，而不是“Welcome NGINX”页面。示例如下：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker run -it -d -p <span class="m">8886</span>:80 nginx_hello_world_template
4e042d76c39125471951626ba42cd609a65c73f041943298f74f4fc43dc5596a
$
</code></pre></div>
</td></tr></table>

<h3 id="docker_10">删除 Docker 容器和镜像<a class="headerlink" href="#docker_10" title="Permanent link">&para;</a></h3>
<p>Docker 容器和镜像会占用硬盘空间，因此最好定期清理。首先停止所有容器，然后列出所有容器，使用以下 Docker 命令执行操作：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps -a
CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS                         PORTS               NAMES
4e042d76c391        nginx_hello_world_template   <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">2</span> minutes ago       Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> <span class="m">8</span> seconds ago                           boring_keldysh
75b28b720835        ubuntu:latest                <span class="s2">&quot;bash&quot;</span>                   <span class="m">2</span> hours ago         Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> About an hour ago                       my_ubuntu_2
a19c770b8621        ubuntu:latest                <span class="s2">&quot;bash&quot;</span>                   <span class="m">2</span> hours ago         Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> About an hour ago                       my_ubuntu
6162daed25da        nginx                        <span class="s2">&quot;nginx -g &#39;daemon of…&quot;</span>   <span class="m">3</span> hours ago         Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> <span class="m">11</span> minutes ago                          hardcore_torvalds
</code></pre></div>
</td></tr></table>

<p>如上，有 4 个处于停止状态的容器，可使用 docker rm 命令删除容器：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker rm 4e042d76c391 75b28b720835 a19c770b8621 6162daed25da
4e042d76c391
75b28b720835
a19c770b8621
6162daed25da
</code></pre></div>
</td></tr></table>

<p>可使用 NAMES 代替 CONTAINER ID，容器列表现在应该是干净的：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker ps -a
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
</code></pre></div>
</td></tr></table>

<p>列出 Docker 镜像：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker images
REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE
nginx_hello_world_template   latest              117d060587a3        <span class="m">11</span> minutes ago      109MB
ubuntu                       <span class="m">16</span>.04               5e8b97a2a082        <span class="m">2</span> weeks ago         114MB
ubuntu                       latest              113a43faa138        <span class="m">2</span> weeks ago         <span class="m">81</span>.2MB
nginx                        latest              cd5239a0906a        <span class="m">2</span> weeks ago         109MB
</code></pre></div>
</td></tr></table>

<p>可使用 docker rmi 命令和 IMAGE ID 删除 docker 镜像：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker rmi 117d060587a3 5e8b97a2a082 113a43faa138 cd5239a0906a
</code></pre></div>
</td></tr></table>

<p>最后，Docker 镜像列表应该是干净的：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>docker images
REPOSITORY TAG IMAGE ID CREATED SIZE
</code></pre></div>
</td></tr></table>

<h2 id="_4">四、参考<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://dzone.com/articles/top-docker-commands-itsyndicate">Top Docker Commands Any Expert Should Know</a></li>
</ul>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../index.html" title="关于本站" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  上一页
                </span>
                关于本站
              </span>
            </div>
          </a>
        
        
          <a href="../Fabric从入门到企业级实战/0、摘要.html" title="Index 摘要" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  下一页
                </span>
                Index 摘要
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2020 悟尘纪
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/lxl80" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/lxl823" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/in/lxl" target="_blank" rel="noopener" title="linkedin" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.df00da5d.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>